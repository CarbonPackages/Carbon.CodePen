{
  "version": 3,
  "sources": ["../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScroll.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/editor.main.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionWidgetContribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/marked/marked.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/severityIcon/common/severityIcon.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/dataTransfer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/uuid.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/browser/dnd.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/dnd/browser/dnd.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/labels.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/dropIntoEditor/browser/dropIntoEditorContribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/search.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findState.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/editor.all.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/consts.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionToGhostText.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetPreviewModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/files/common/files.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextHoverParticipant.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/opener/browser/link.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/edcore.main.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/fuzzyScorer.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/base/common/errorMessage.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js", "../../Private/Plugin/node_modules/.pnpm/monaco-editor@0.34.1/node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js", "../../Private/Plugin/node_modules/.pnpm/monaco-marker-data-provider@1.1.1_monaco-editor@0.34.1/node_modules/monaco-marker-data-provider/index.js", "../../Private/Plugin/node_modules/.pnpm/monaco-worker-manager@2.0.1_monaco-editor@0.34.1/node_modules/monaco-worker-manager/index.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/util.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/conversion.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/css-color-names.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/format-input.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/index.js", "../../Private/Plugin/node_modules/.pnpm/@ctrl+tinycolor@3.5.0/node_modules/@ctrl/tinycolor/dist/module/from-ratio.js", "../../Private/Plugin/node_modules/.pnpm/monaco-tailwindcss@0.5.0_monaco-editor@0.34.1/node_modules/monaco-tailwindcss/src/index.ts", "../../Private/Plugin/node_modules/.pnpm/monaco-tailwindcss@0.5.0_monaco-editor@0.34.1/node_modules/monaco-tailwindcss/src/languageFeatures.ts", "../../Private/Plugin/node_modules/.pnpm/monaco-tailwindcss@0.5.0_monaco-editor@0.34.1/node_modules/monaco-tailwindcss/src/cssData.ts", "../../Private/Plugin/node_modules/.pnpm/emmet-monaco-es@5.1.2_monaco-editor@0.34.1/node_modules/emmet-monaco-es/dist/emmet-monaco.esm.js", "../../Private/Plugin/src/services/registerDocumentationForFusionObjects.ts", "../../Private/Plugin/node_modules/.pnpm/emmet-monaco-es@5.1.2_monaco-editor@0.34.1/node_modules/emmet-monaco-es/src/abbreviationActions.ts", "../../Private/Plugin/src/services/registerCompletionForFusionObjects.ts", "../../Private/Plugin/src/services/initializeMonaco.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(51 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(51 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n    constructor(_languageFeaturesService, debounces, modelService) {\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposables = new DisposableStore();\n        this._cache = new LRUCache(10, 0.7);\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\n        // don't cache outline models longer than their text model\n        this._disposables.add(modelService.onModelRemoved(textModel => {\n            this._cache.delete(textModel.id);\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    getOrCreate(textModel, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const registry = this._languageFeaturesService.documentSymbolProvider;\n            const provider = registry.ordered(textModel);\n            let data = this._cache.get(textModel.id);\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n                const source = new CancellationTokenSource();\n                data = {\n                    versionId: textModel.getVersionId(),\n                    provider,\n                    promiseCnt: 0,\n                    source,\n                    promise: OutlineModel.create(registry, textModel, source.token),\n                    model: undefined,\n                };\n                this._cache.set(textModel.id, data);\n                const now = Date.now();\n                data.promise.then(outlineModel => {\n                    data.model = outlineModel;\n                    this._debounceInformation.update(textModel, Date.now() - now);\n                }).catch(_err => {\n                    this._cache.delete(textModel.id);\n                });\n            }\n            if (data.model) {\n                // resolved -> return data\n                return data.model;\n            }\n            // increase usage counter\n            data.promiseCnt += 1;\n            const listener = token.onCancellationRequested(() => {\n                // last -> cancel provider request, remove cached promise\n                if (--data.promiseCnt === 0) {\n                    data.source.cancel();\n                    this._cache.delete(textModel.id);\n                }\n            });\n            try {\n                return yield data.promise;\n            }\n            finally {\n                listener.dispose();\n            }\n        });\n    }\n};\nOutlineModelService = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, ILanguageFeatureDebounceService),\n    __param(2, IModelService)\n], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nlet InPlaceReplaceController = class InPlaceReplaceController {\n    constructor(editor, editorWorkerService) {\n        this.editor = editor;\n        this.editorWorkerService = editorWorkerService;\n        this.decorations = this.editor.createDecorationsCollection();\n    }\n    static get(editor) {\n        return editor.getContribution(InPlaceReplaceController.ID);\n    }\n    dispose() {\n    }\n    run(source, up) {\n        // cancel any pending request\n        if (this.currentRequest) {\n            this.currentRequest.cancel();\n        }\n        const editorSelection = this.editor.getSelection();\n        const model = this.editor.getModel();\n        if (!model || !editorSelection) {\n            return undefined;\n        }\n        let selection = editorSelection;\n        if (selection.startLineNumber !== selection.endLineNumber) {\n            // Can't accept multiline selection\n            return undefined;\n        }\n        const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const modelURI = model.uri;\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n            return Promise.resolve(undefined);\n        }\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n        return this.currentRequest.then(result => {\n            if (!result || !result.range || !result.value) {\n                // No proper result\n                return;\n            }\n            if (!state.validate(this.editor)) {\n                // state has changed\n                return;\n            }\n            // Selection\n            const editRange = Range.lift(result.range);\n            let highlightRange = result.range;\n            const diff = result.value.length - (selection.endColumn - selection.startColumn);\n            // highlight\n            highlightRange = {\n                startLineNumber: highlightRange.startLineNumber,\n                startColumn: highlightRange.startColumn,\n                endLineNumber: highlightRange.endLineNumber,\n                endColumn: highlightRange.startColumn + result.value.length\n            };\n            if (diff > 1) {\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n            }\n            // Insert new text\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n            this.editor.pushUndoStop();\n            this.editor.executeCommand(source, command);\n            this.editor.pushUndoStop();\n            // add decoration\n            this.decorations.set([{\n                    range: highlightRange,\n                    options: InPlaceReplaceController.DECORATION\n                }]);\n            // remove decoration after delay\n            if (this.decorationRemover) {\n                this.decorationRemover.cancel();\n            }\n            this.decorationRemover = timeout(350);\n            this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\n        }).catch(onUnexpectedError);\n    }\n};\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    description: 'in-place-replace',\n    className: 'valueSetReplacement'\n});\nInPlaceReplaceController = __decorate([\n    __param(1, IEditorWorkerService)\n], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.up',\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n            alias: 'Replace with Previous Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 82 /* KeyCode.Comma */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, true);\n    }\n}\nclass InPlaceReplaceDown extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.down',\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n            alias: 'Replace with Next Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, false);\n    }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorBracketMatchBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${border}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Position } from '../../../common/core/position.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._sessionStore = new DisposableStore();\n        this._ranges = [];\n        this._rangesVersionId = 0;\n        this._editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(34 /* EditorOption.experimental */)) {\n                this.onConfigurationChange();\n            }\n        }));\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(true), 50));\n        this.onConfigurationChange();\n    }\n    onConfigurationChange() {\n        const options = this._editor.getOption(34 /* EditorOption.experimental */);\n        if (options.stickyScroll.enabled === false) {\n            this.stickyScrollWidget.emptyRootNode();\n            this._editor.removeOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidChangeModel(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._update(false)));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this._update(true)));\n            this._update(true);\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this.stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._update(false);\n        }\n    }\n    _update(updateOutline = false) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (updateOutline) {\n                (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n                this._cts = new CancellationTokenSource();\n                yield this._updateOutlineModel(this._cts.token);\n            }\n            const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n            if (hiddenRanges) {\n                for (const hiddenRange of hiddenRanges) {\n                    this._ranges = this._ranges.filter(range => { return !(range[0] >= hiddenRange.startLineNumber && range[1] <= hiddenRange.endLineNumber + 1); });\n                }\n            }\n            this._renderStickyScroll();\n        });\n    }\n    _findLineRanges(outlineElement, depth) {\n        if (outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.size) {\n            let didRecursion = false;\n            for (const outline of outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.values()) {\n                const kind = outline.symbol.kind;\n                if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                    didRecursion = true;\n                    this._findLineRanges(outline, depth + 1);\n                }\n            }\n            if (!didRecursion) {\n                this._addOutlineRanges(outlineElement, depth);\n            }\n        }\n        else {\n            this._addOutlineRanges(outlineElement, depth);\n        }\n    }\n    _addOutlineRanges(outlineElement, depth) {\n        let currentStartLine = 0;\n        let currentEndLine = 0;\n        while (outlineElement) {\n            const kind = outlineElement.symbol.kind;\n            if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                currentStartLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.startLineNumber;\n                currentEndLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.endLineNumber;\n                this._ranges.push([currentStartLine, currentEndLine, depth]);\n                depth--;\n            }\n            if (outlineElement.parent instanceof OutlineElement) {\n                outlineElement = outlineElement.parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    _updateOutlineModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._editor.getModel();\n                const modelVersionId = model.getVersionId();\n                const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this._ranges = [];\n                this._rangesVersionId = modelVersionId;\n                for (const outline of outlineModel.children.values()) {\n                    if (outline instanceof OutlineElement) {\n                        const kind = outline.symbol.kind;\n                        if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                            this._findLineRanges(outline, 1);\n                        }\n                        else {\n                            this._findLineRanges(outline, 0);\n                        }\n                    }\n                    this._ranges = this._ranges.sort(function (a, b) {\n                        if (a[0] !== b[0]) {\n                            return a[0] - b[0];\n                        }\n                        else if (a[1] !== b[1]) {\n                            return b[1] - a[1];\n                        }\n                        else {\n                            return a[2] - b[2];\n                        }\n                    });\n                    let previous = [];\n                    for (const [index, arr] of this._ranges.entries()) {\n                        const [start, end, _depth] = arr;\n                        if (previous[0] === start && previous[1] === end) {\n                            this._ranges.splice(index, 1);\n                        }\n                        else {\n                            previous = arr;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const model = this._editor.getModel();\n        if (this._rangesVersionId !== model.getVersionId()) {\n            // Old _ranges not updated yet\n            return;\n        }\n        const scrollTop = this._editor.getScrollTop();\n        this.stickyScrollWidget.emptyRootNode();\n        const beginningLinesConsidered = new Set();\n        for (const [index, arr] of this._ranges.entries()) {\n            const [start, end, depth] = arr;\n            if (end - start > 0 && model.getLineContent(start) !== '') {\n                const topOfElementAtDepth = (depth - 1) * lineHeight;\n                const bottomOfElementAtDepth = depth * lineHeight;\n                const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                if (!beginningLinesConsidered.has(start)) {\n                    if (topOfElementAtDepth >= topOfEndLine - 1 && topOfElementAtDepth < bottomOfEndLine - 2) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, -1, bottomOfEndLine - bottomOfElementAtDepth));\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth < bottomOfEndLine - 1) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, 0, 0));\n                    }\n                }\n                else {\n                    this._ranges.splice(index, 1);\n                }\n            }\n        }\n        this.stickyScrollWidget.updateRootNode();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyScrollController);\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nclass StickyScrollCodeLine {\n    constructor(_lineNumber, _depth, _editor, _zIndex, _relativePosition) {\n        this._lineNumber = _lineNumber;\n        this._depth = _depth;\n        this._editor = _editor;\n        this._zIndex = _zIndex;\n        this._relativePosition = _relativePosition;\n        this.effectiveLineHeight = 0;\n        this.effectiveLineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */) + this._relativePosition;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    getDomNode() {\n        const root = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(this._lineNumber, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 100, 'none', true, true, null);\n        const sb = createStringBuilder(400);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineHTMLNode.style.overflow = 'hidden';\n        lineHTMLNode.style.whiteSpace = 'nowrap';\n        lineHTMLNode.style.display = 'inline-block';\n        lineHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.style.width = this._editor.getLayoutInfo().contentLeft.toString() + 'px';\n        lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineNumberHTMLNode.style.color = 'var(--vscode-editorLineNumber-foreground)';\n        lineNumberHTMLNode.style.display = 'inline-block';\n        lineNumberHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        const innerLineNumberHTML = document.createElement('span');\n        innerLineNumberHTML.innerText = this._lineNumber.toString();\n        innerLineNumberHTML.style.paddingLeft = this._editor.getLayoutInfo().lineNumbersLeft.toString() + 'px';\n        innerLineNumberHTML.style.width = this._editor.getLayoutInfo().lineNumbersWidth.toString() + 'px';\n        innerLineNumberHTML.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        innerLineNumberHTML.style.textAlign = 'right';\n        innerLineNumberHTML.style.float = 'left';\n        innerLineNumberHTML.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        root.onclick = e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this._editor.revealPosition({ lineNumber: this._lineNumber - this._depth + 1, column: 1 });\n        };\n        root.onmouseover = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScrollHover-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            innerLineNumberHTML.style.cursor = `pointer`;\n            lineHTMLNode.style.cursor = `pointer`;\n            root.style.cursor = `pointer`;\n            lineNumberHTMLNode.style.cursor = `pointer`;\n        };\n        root.onmouseleave = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScroll-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        };\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        root.appendChild(lineNumberHTMLNode);\n        root.appendChild(lineHTMLNode);\n        root.style.zIndex = this._zIndex.toString();\n        root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        root.style.overflow = 'hidden';\n        root.style.whiteSpace = 'nowrap';\n        root.style.width = '100%';\n        root.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        root.style.height = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        // Special case for last line of sticky scroll\n        if (this._relativePosition) {\n            root.style.position = 'relative';\n            root.style.top = this._relativePosition + 'px';\n            root.style.width = '100%';\n        }\n        return root;\n    }\n}\nclass StickyScrollWidget {\n    constructor(_editor) {\n        this._editor = _editor;\n        this.arrayOfCodeLines = [];\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode.style.width = '100%';\n        this.rootDomNode.style.boxShadow = `var(--vscode-scrollbar-shadow) 0 6px 6px -6px`;\n    }\n    getCurrentLines() {\n        const widgetLineRange = [];\n        for (const codeLine of this.arrayOfCodeLines) {\n            widgetLineRange.push(codeLine.lineNumber);\n        }\n        return widgetLineRange;\n    }\n    pushCodeLine(codeLine) {\n        this.arrayOfCodeLines.push(codeLine);\n    }\n    updateRootNode() {\n        let widgetHeight = 0;\n        for (const line of this.arrayOfCodeLines) {\n            widgetHeight += line.effectiveLineHeight;\n            this.rootDomNode.appendChild(line.getDomNode());\n        }\n        this.rootDomNode.style.height = widgetHeight.toString() + 'px';\n    }\n    emptyRootNode() {\n        this.arrayOfCodeLines.length = 0;\n        dom.clearNode(this.rootDomNode);\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        this.rootDomNode.style.zIndex = '2';\n        this.rootDomNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        return this.rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nexport class ToggleTabFocusModeAction extends EditorAction {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            label: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, \"Toggle Tab Key Moves Focus\"),\n            alias: 'Toggle Tab Key Moves Focus',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const oldValue = TabFocus.getTabFocusMode();\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterEditorAction(ToggleTabFocusModeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../../../common/services/getSemanticTokens.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../../../common/services/modelService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _modelService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._modelService = _modelService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._modelService.getSemanticTokensProviderStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './accessibilityHelp.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\nlet AccessibilityHelpController = class AccessibilityHelpController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this._editor = editor;\n        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));\n    }\n    static get(editor) {\n        return editor.getContribution(AccessibilityHelpController.ID);\n    }\n    show() {\n        this._widget.show();\n    }\n    hide() {\n        this._widget.hide();\n    }\n};\nAccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\nAccessibilityHelpController = __decorate([\n    __param(1, IInstantiationService)\n], AccessibilityHelpController);\nfunction getSelectionLabel(selections, charactersSelected) {\n    if (!selections || selections.length === 0) {\n        return AccessibilityHelpNLS.noSelection;\n    }\n    if (selections.length === 1) {\n        if (charactersSelected) {\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n        }\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n    }\n    if (charactersSelected) {\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n    }\n    if (selections.length > 0) {\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n    }\n    return '';\n}\nlet AccessibilityHelpWidget = class AccessibilityHelpWidget extends Widget {\n    constructor(editor, _contextKeyService, _keybindingService, _openerService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._openerService = _openerService;\n        this._editor = editor;\n        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);\n        this._domNode = createFastDomNode(document.createElement('div'));\n        this._domNode.setClassName('accessibilityHelpWidget');\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('role', 'dialog');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode = createFastDomNode(document.createElement('div'));\n        this._contentDomNode.setAttribute('role', 'document');\n        this._domNode.appendChild(this._contentDomNode);\n        this._isVisible = false;\n        this._register(this._editor.onDidLayoutChange(() => {\n            if (this._isVisible) {\n                this._layout();\n            }\n        }));\n        // Intentionally not configurable!\n        this._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n            if (!this._isVisible) {\n                return;\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */)) {\n                alert(AccessibilityHelpNLS.emergencyConfOn);\n                this._editor.updateOptions({\n                    accessibilitySupport: 'on'\n                });\n                dom.clearNode(this._contentDomNode.domNode);\n                this._buildContent();\n                this._contentDomNode.domNode.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */)) {\n                alert(AccessibilityHelpNLS.openingDocs);\n                let url = this._editor.getRawOptions().accessibilityHelpUrl;\n                if (typeof url === 'undefined') {\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n                }\n                this._openerService.open(URI.parse(url));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }));\n        this.onblur(this._contentDomNode.domNode, () => {\n            this.hide();\n        });\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return AccessibilityHelpWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode.domNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._isVisibleKey.set(true);\n        this._layout();\n        this._domNode.setDisplay('block');\n        this._domNode.setAttribute('aria-hidden', 'false');\n        this._contentDomNode.domNode.tabIndex = 0;\n        this._buildContent();\n        this._contentDomNode.domNode.focus();\n    }\n    _descriptionForCommand(commandId, msg, noKbMsg) {\n        const kb = this._keybindingService.lookupKeybinding(commandId);\n        if (kb) {\n            return strings.format(msg, kb.getAriaLabel());\n        }\n        return strings.format(noKbMsg, commandId);\n    }\n    _buildContent() {\n        const options = this._editor.getOptions();\n        const selections = this._editor.getSelections();\n        let charactersSelected = 0;\n        if (selections) {\n            const model = this._editor.getModel();\n            if (model) {\n                selections.forEach((selection) => {\n                    charactersSelected += model.getValueLengthInRange(selection);\n                });\n            }\n        }\n        let text = getSelectionLabel(selections, charactersSelected);\n        if (options.get(56 /* EditorOption.inDiffEditor */)) {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableDiffEditor;\n            }\n        }\n        else {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableEditor;\n            }\n        }\n        const turnOnMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.changeConfigToOnMac\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\n        switch (options.get(2 /* EditorOption.accessibilitySupport */)) {\n            case 0 /* AccessibilitySupport.Unknown */:\n                text += '\\n\\n - ' + turnOnMessage;\n                break;\n            case 2 /* AccessibilitySupport.Enabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n                break;\n            case 1 /* AccessibilitySupport.Disabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n                text += ' ' + turnOnMessage;\n                break;\n        }\n        if (options.get(132 /* EditorOption.tabFocusMode */)) {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n        }\n        else {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n        }\n        const openDocMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.openDocMac\n            : AccessibilityHelpNLS.openDocWinLinux);\n        text += '\\n\\n - ' + openDocMessage;\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\n    }\n    hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._isVisibleKey.reset();\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode.domNode.tabIndex = -1;\n        dom.clearNode(this._contentDomNode.domNode);\n        this._editor.focus();\n    }\n    _layout() {\n        const editorLayout = this._editor.getLayoutInfo();\n        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n        this._domNode.setWidth(w);\n        this._domNode.setHeight(h);\n        const top = Math.round((editorLayout.height - h) / 2);\n        this._domNode.setTop(top);\n        const left = Math.round((editorLayout.width - w) / 2);\n        this._domNode.setLeft(left);\n    }\n};\nAccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\nAccessibilityHelpWidget.WIDTH = 500;\nAccessibilityHelpWidget.HEIGHT = 300;\nAccessibilityHelpWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IKeybindingService),\n    __param(3, IOpenerService)\n], AccessibilityHelpWidget);\nclass ShowAccessibilityHelpAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showAccessibilityHelp',\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n            alias: 'Show Accessibility Help',\n            precondition: undefined,\n            kbOpts: {\n                primary: 512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                linux: {\n                    primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 59 /* KeyCode.F1 */,\n                    secondary: [512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */]\n                }\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = AccessibilityHelpController.get(editor);\n        if (controller) {\n            controller.show();\n        }\n    }\n}\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n    id: 'closeAccessibilityHelp',\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n    handler: x => x.hide(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 100,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* CharCode.Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* CharCode.Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* StandardTokenType.Other */: return 'Other';\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\n            case 2 /* StandardTokenType.String */: return 'String';\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* FontStyle.Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* FontStyle.Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* FontStyle.Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n", "import '../basic-languages/monaco.contribution';\nimport '../language/css/monaco.contribution';\nimport '../language/html/monaco.contribution';\nimport '../language/json/monaco.contribution';\nimport '../language/typescript/monaco.contribution';\n\nexport * from './edcore.main';", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\n\n// src/basic-languages/_.contribution.ts\nvar languageDefinitions = {};\nvar lazyLanguageLoaders = {};\nvar LazyLanguageLoader = class {\n  static getOrCreate(languageId) {\n    if (!lazyLanguageLoaders[languageId]) {\n      lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\n    }\n    return lazyLanguageLoaders[languageId];\n  }\n  _languageId;\n  _loadingTriggered;\n  _lazyLoadPromise;\n  _lazyLoadPromiseResolve;\n  _lazyLoadPromiseReject;\n  constructor(languageId) {\n    this._languageId = languageId;\n    this._loadingTriggered = false;\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\n      this._lazyLoadPromiseResolve = resolve;\n      this._lazyLoadPromiseReject = reject;\n    });\n  }\n  load() {\n    if (!this._loadingTriggered) {\n      this._loadingTriggered = true;\n      languageDefinitions[this._languageId].loader().then((mod) => this._lazyLoadPromiseResolve(mod), (err) => this._lazyLoadPromiseReject(err));\n    }\n    return this._lazyLoadPromise;\n  }\n};\nasync function loadLanguage(languageId) {\n  await LazyLanguageLoader.getOrCreate(languageId).load();\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\n  model.dispose();\n}\nfunction registerLanguage(def) {\n  const languageId = def.id;\n  languageDefinitions[languageId] = def;\n  monaco_editor_core_exports.languages.register(def);\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\n    create: async () => {\n      const mod = await lazyLanguageLoader.load();\n      return mod.language;\n    }\n  });\n  monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    const mod = await lazyLanguageLoader.load();\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\nexport {\n  loadLanguage,\n  registerLanguage\n};\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/css/css.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"css\",\n  extensions: [\".css\"],\n  aliases: [\"CSS\", \"css\"],\n  mimetypes: [\"text/css\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\n      });\n    } else {\n      return import(\"./css.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/html/html.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"html\",\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\n      });\n    } else {\n      return import(\"./html.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ini/ini.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ini\",\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\n  aliases: [\"Ini\", \"ini\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ini.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/less/less.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"less\",\n  extensions: [\".less\"],\n  aliases: [\"Less\", \"less\"],\n  mimetypes: [\"text/x-less\", \"text/less\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\n      });\n    } else {\n      return import(\"./less.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/markdown/markdown.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"markdown\",\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\n  aliases: [\"Markdown\", \"markdown\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\n      });\n    } else {\n      return import(\"./markdown.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scss/scss.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scss\",\n  extensions: [\".scss\"],\n  aliases: [\"Sass\", \"sass\", \"scss\"],\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scss.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typescript/typescript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typescript\",\n  extensions: [\".ts\", \".tsx\"],\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\n  mimetypes: [\"text/typescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typescript.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/xml/xml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"xml\",\n  extensions: [\n    \".xml\",\n    \".dtd\",\n    \".ascx\",\n    \".csproj\",\n    \".config\",\n    \".wxi\",\n    \".wxl\",\n    \".wxs\",\n    \".xaml\",\n    \".svg\",\n    \".svgz\",\n    \".opf\",\n    \".xsl\"\n  ],\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\n  aliases: [\"XML\", \"xml\"],\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./xml.js\");\n    }\n  }\n});\n", "/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/yaml/yaml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"yaml\",\n  extensions: [\".yaml\", \".yml\"],\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./yaml.js\");\n    }\n  }\n});\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/css/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this.options;\n  }\n  get options() {\n    return this._options;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setDiagnosticsOptions(options) {\n    this.setOptions(options);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar optionsDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: \"ignore\",\n    vendorPrefix: \"warning\",\n    duplicateProperties: \"warning\",\n    emptyRules: \"warning\",\n    importStatement: \"ignore\",\n    boxModel: \"ignore\",\n    universalSelector: \"ignore\",\n    zeroUnits: \"ignore\",\n    fontFaceProperties: \"warning\",\n    hexColorLength: \"error\",\n    argumentsInColorFunction: \"error\",\n    unknownProperties: \"warning\",\n    ieHack: \"ignore\",\n    unknownVendorSpecificProperties: \"ignore\",\n    propertyIgnoredDueToDisplay: \"warning\",\n    important: \"ignore\",\n    float: \"ignore\",\n    idSelector: \"ignore\"\n  },\n  data: { useDefaultDataProvider: true },\n  format: {\n    newlineBetweenSelectors: true,\n    newlineBetweenRules: true,\n    spaceAroundSelectorSeparator: false,\n    braceStyle: \"collapse\",\n    maxPreserveNewLines: void 0,\n    preserveNewLines: true\n  }\n};\nvar modeConfigurationDefault = {\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  definitions: true,\n  references: true,\n  documentHighlights: true,\n  rename: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true,\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.css = { cssDefaults, lessDefaults, scssDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./cssMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\n  getMode().then((mode) => mode.setupMode(lessDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\n  getMode().then((mode) => mode.setupMode(scssDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\n  getMode().then((mode) => mode.setupMode(cssDefaults));\n});\nexport {\n  cssDefaults,\n  lessDefaults,\n  scssDefaults\n};\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/html/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get options() {\n    return this._options;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: \"pre\",\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: void 0,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: \"head, body, /html\",\n  wrapAttributes: \"auto\"\n};\nvar optionsDefault = {\n  format: formatDefaults,\n  suggest: {},\n  data: { useDefaultDataProvider: true }\n};\nfunction getConfigurationDefault(languageId) {\n  return {\n    completionItems: true,\n    hovers: true,\n    documentSymbols: true,\n    links: true,\n    documentHighlights: true,\n    rename: true,\n    colors: true,\n    foldingRanges: true,\n    selectionRanges: true,\n    diagnostics: languageId === htmlLanguageId,\n    documentFormattingEdits: languageId === htmlLanguageId,\n    documentRangeFormattingEdits: languageId === htmlLanguageId\n  };\n}\nvar htmlLanguageId = \"html\";\nvar handlebarsLanguageId = \"handlebars\";\nvar razorLanguageId = \"razor\";\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\nvar htmlDefaults = htmlLanguageService.defaults;\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\nvar handlebarDefaults = handlebarLanguageService.defaults;\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\nvar razorDefaults = razorLanguageService.defaults;\nmonaco_editor_core_exports.languages.html = {\n  htmlDefaults,\n  razorDefaults,\n  handlebarDefaults,\n  htmlLanguageService,\n  handlebarLanguageService,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./htmlMode.js\");\n  }\n}\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\n  let mode;\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    mode = (await getMode()).setupMode(defaults);\n  });\n  return {\n    defaults,\n    dispose() {\n      onLanguageListener.dispose();\n      mode?.dispose();\n      mode = void 0;\n    }\n  };\n}\nexport {\n  handlebarDefaults,\n  handlebarLanguageService,\n  htmlDefaults,\n  htmlLanguageService,\n  razorDefaults,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\n", "import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/json/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _diagnosticsOptions;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false,\n  schemaRequest: \"warning\",\n  schemaValidation: \"warning\",\n  comments: \"error\",\n  trailingCommas: \"error\"\n};\nvar modeConfigurationDefault = {\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true,\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  tokens: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.json = { jsonDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./jsonMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.register({\n  id: \"json\",\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\n  aliases: [\"JSON\", \"json\"],\n  mimetypes: [\"application/json\"]\n});\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\n  getMode().then((mode) => mode.setupMode(jsonDefaults));\n});\nexport {\n  jsonDefaults\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(66 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport './codeActionWidgetContribution.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { Context } from './codeActionMenu.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    hideCodeActionMenu() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().hideCodeActionWidget();\n        }\n    }\n    navigateCodeActionList(navUp) {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().navigateList(navUp);\n        }\n    }\n    selectedOption() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onEnter();\n        }\n    }\n    selectedOptionWithPreview() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onPreviewEnter();\n        }\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: true,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nconst CodeActionContribution = EditorCommand.bindToContribution(QuickFixController.get);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nregisterEditorCommand(new CodeActionContribution({\n    id: 'hideCodeActionMenuWidget',\n    precondition: Context.Visible,\n    handler(x) {\n        x.hideCodeActionMenu();\n    },\n    kbOpts: {\n        weight: weight,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusPreviousCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(true);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusNextCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(false);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOption();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeActionWithPreview',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOptionWithPreview();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = actions.map(x => x.actions).flat();\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this.previewOn = false;\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action, trigger) => __awaiter(this, void 0, void 0, function* () {\n                    if (this.previewOn) {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(this.previewOn));\n                    }\n                    else {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(trigger.preview));\n                    }\n                    this.previewOn = false;\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().hideCodeActionWidget();\n        }\n    }\n    onEnter() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().onEnterSet();\n        }\n    }\n    onPreviewEnter() {\n        this.previewOn = true;\n        this.onEnter();\n    }\n    navigateList(navUp) {\n        if (this._codeActionWidget.hasValue()) {\n            if (navUp) {\n                this._codeActionWidget.getValue().navigateListWithKeysUp();\n            }\n            else {\n                this._codeActionWidget.getValue().navigateListWithKeysDown();\n            }\n        }\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet MessageController = class MessageController {\n    constructor(editor, contextKeyService) {\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._editor = editor;\n        this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MessageController.ID);\n    }\n    dispose() {\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\n        // close on blur, cursor, model change, dispose\n        this._messageListeners.add(this._editor.onDidBlurEditorText(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        // 3sec\n        this._messageListeners.add(new TimeoutTimer(() => this.closeMessage(), 3000));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = __decorate([\n    __param(1, IContextKeyService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        primary: 9 /* KeyCode.Escape */\n    }\n}));\nclass MessageWidget {\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n        this._position = { lineNumber, column };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        this._domNode.style.marginLeft = '-6px';\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        message.classList.add('message');\n        message.textContent = text;\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    static fadeOut(messageWidget) {\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        const handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._position,\n            preference: [\n                1 /* ContentWidgetPositionPreference.ABOVE */,\n                2 /* ContentWidgetPositionPreference.BELOW */,\n            ],\n            positionAffinity: 1 /* PositionAffinity.Right */,\n        };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, dispose, MutableDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './media/action.css';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const Context = {\n    Visible: new RawContextKey('CodeActionMenuVisible', false, localize('CodeActionMenuVisible', \"Whether the code action list widget is visible\"))\n};\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nconst TEMPLATE_ID = 'codeActionWidget';\nconst codeActionLineHeight = 26;\nlet CodeMenuRenderer = class CodeMenuRenderer {\n    constructor(acceptKeybindings, keybindingService) {\n        this.acceptKeybindings = acceptKeybindings;\n        this.keybindingService = keybindingService;\n    }\n    get templateId() { return TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = [];\n        data.root = container;\n        data.text = document.createElement('span');\n        // data.detail = document.createElement('');\n        container.append(data.text);\n        // container.append(data.detail);\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.title;\n        // const detail = element.detail;\n        const isEnabled = element.isEnabled;\n        const isSeparator = element.isSeparator;\n        const isDocumentation = element.isDocumentation;\n        data.text.textContent = text;\n        // data.detail.textContent = detail;\n        if (!isEnabled) {\n            data.root.classList.add('option-disabled');\n            data.root.style.backgroundColor = 'transparent !important';\n        }\n        else {\n            data.root.classList.remove('option-disabled');\n        }\n        if (isSeparator) {\n            data.root.classList.add('separator');\n            data.root.style.height = '10px';\n        }\n        if (!isDocumentation) {\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this.acceptKeybindings;\n                data.root.title = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Refactor, Shift+F2 to Preview\"'] }, \"{0} to Refactor, {1} to Preview\", (_a = this.keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this.keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n                // data.root.title = this.keybindingService.lookupKeybinding(accept)?.getLabel() + ' to Refactor, ' + this.keybindingService.lookupKeybinding(preview)?.getLabel() + ' to Preview';\n            };\n            updateLabel();\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables = dispose(templateData.disposables);\n    }\n};\nCodeMenuRenderer = __decorate([\n    __param(1, IKeybindingService)\n], CodeMenuRenderer);\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService, _telemetryService, _themeService, _configurationService, _contextViewService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._configurationService = _configurationService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._showingActions = this._register(new MutableDisposable());\n        this.codeActionList = this._register(new MutableDisposable());\n        this.options = [];\n        this._visible = false;\n        this.viewItems = [];\n        this.hasSeperator = false;\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n        this._ctxMenuWidgetVisible = Context.Visible.bindTo(this._contextKeyService);\n        this.listRenderer = new CodeMenuRenderer([`onEnterSelectCodeAction`, `onEnterSelectCodeActionWithPreview`], keybindingService);\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    isCodeActionWidgetEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.useCustomCodeActionMenu', {\n            resource: model.uri\n        });\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            e.elements.forEach(element => {\n                if (element.isEnabled) {\n                    element.action.run();\n                    this.hideCodeActionWidget();\n                }\n            });\n        }\n    }\n    _onListHover(e) {\n        var _a, _b, _c, _d;\n        if (!e.element) {\n            this.currSelectedItem = undefined;\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([]);\n        }\n        else {\n            if ((_b = e.element) === null || _b === void 0 ? void 0 : _b.isEnabled) {\n                (_c = this.codeActionList.value) === null || _c === void 0 ? void 0 : _c.setFocus([e.element.index]);\n                this.focusedEnabledItem = this.viewItems.indexOf(e.element);\n                this.currSelectedItem = e.element.index;\n            }\n            else {\n                this.currSelectedItem = undefined;\n                (_d = this.codeActionList.value) === null || _d === void 0 ? void 0 : _d.setFocus([e.element.index]);\n            }\n        }\n    }\n    renderCodeActionMenuList(element, inputArray) {\n        var _a;\n        const renderDisposables = new DisposableStore();\n        const renderMenu = document.createElement('div');\n        // Render invisible div to block mouse interaction in the rest of the UI\n        const menuBlock = document.createElement('div');\n        this.block = element.appendChild(menuBlock);\n        this.block.classList.add('context-view-block');\n        this.block.style.position = 'fixed';\n        this.block.style.cursor = 'initial';\n        this.block.style.left = '0';\n        this.block.style.top = '0';\n        this.block.style.width = '100%';\n        this.block.style.height = '100%';\n        this.block.style.zIndex = '-1';\n        renderDisposables.add(dom.addDisposableListener(this.block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n        renderMenu.id = 'codeActionMenuWidget';\n        renderMenu.classList.add('codeActionMenuWidget');\n        element.appendChild(renderMenu);\n        this.codeActionList.value = new List('codeActionWidget', renderMenu, {\n            getHeight(element) {\n                if (element.isSeparator) {\n                    return 10;\n                }\n                return codeActionLineHeight;\n            },\n            getTemplateId(element) {\n                return 'codeActionWidget';\n            }\n        }, [this.listRenderer], { keyboardSupport: false });\n        renderDisposables.add(this.codeActionList.value.onMouseOver(e => this._onListHover(e)));\n        renderDisposables.add(this.codeActionList.value.onDidChangeFocus(e => { var _a; return (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.domFocus(); }));\n        renderDisposables.add(this.codeActionList.value.onDidChangeSelection(e => this._onListSelection(e)));\n        renderDisposables.add(this._editor.onDidLayoutChange(e => this.hideCodeActionWidget()));\n        // Populating the list widget and tracking enabled options.\n        inputArray.forEach((item, index) => {\n            const currIsSeparator = item.class === 'separator';\n            let isDocumentation = false;\n            if (item instanceof CodeActionAction) {\n                isDocumentation = item.action.kind === CodeActionMenu.documentationID;\n            }\n            if (currIsSeparator) {\n                // set to true forever\n                this.hasSeperator = true;\n            }\n            const menuItem = { title: item.label, detail: item.tooltip, action: inputArray[index], isEnabled: item.enabled, isSeparator: currIsSeparator, index, isDocumentation };\n            if (item.enabled) {\n                this.viewItems.push(menuItem);\n            }\n            this.options.push(menuItem);\n        });\n        this.codeActionList.value.splice(0, this.codeActionList.value.length, this.options);\n        const height = this.hasSeperator ? (inputArray.length - 1) * codeActionLineHeight + 10 : inputArray.length * codeActionLineHeight;\n        renderMenu.style.height = String(height) + 'px';\n        this.codeActionList.value.layout(height);\n        // For finding width dynamically (not using resize observer)\n        const arr = [];\n        this.options.forEach((item, index) => {\n            var _a, _b;\n            if (!this.codeActionList.value) {\n                return;\n            }\n            const element = (_b = document.getElementById((_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.getElementID(index))) === null || _b === void 0 ? void 0 : _b.getElementsByTagName('span')[0].offsetWidth;\n            arr.push(Number(element));\n        });\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\n        const maxWidth = Math.max(...arr);\n        // 40 is the additional padding for the list widget (20 left, 20 right)\n        renderMenu.style.width = maxWidth + 52 + 'px';\n        (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.layout(height, maxWidth);\n        // List selection\n        if (this.viewItems.length < 1 || this.viewItems.every(item => item.isDocumentation)) {\n            this.currSelectedItem = undefined;\n        }\n        else {\n            this.focusedEnabledItem = 0;\n            this.currSelectedItem = this.viewItems[0].index;\n            this.codeActionList.value.setFocus([this.currSelectedItem]);\n        }\n        // List Focus\n        this.codeActionList.value.domFocus();\n        const focusTracker = dom.trackFocus(element);\n        const blurListener = focusTracker.onDidBlur(() => {\n            this.hideCodeActionWidget();\n            // this._contextViewService.hideContextView({ source: this });\n        });\n        renderDisposables.add(blurListener);\n        renderDisposables.add(focusTracker);\n        this._ctxMenuWidgetVisible.set(true);\n        return renderDisposables;\n    }\n    focusPrevious() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems[0].index;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = this.focusedEnabledItem - 1;\n            if (this.focusedEnabledItem < 0) {\n                this.focusedEnabledItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    focusNext() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = (this.focusedEnabledItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    navigateListWithKeysUp() {\n        this.focusPrevious();\n    }\n    navigateListWithKeysDown() {\n        this.focusNext();\n    }\n    onEnterSet() {\n        var _a;\n        if (typeof this.currSelectedItem === 'number') {\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setSelection([this.currSelectedItem]);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        this._ctxMenuWidgetVisible.reset();\n        this.options = [];\n        this.viewItems = [];\n        this.focusedEnabledItem = 0;\n        this.currSelectedItem = undefined;\n        this.hasSeperator = false;\n        this._contextViewService.hideContextView({ source: this });\n    }\n    codeActionTelemetry(openedFromString, didCancel, CodeActions) {\n        this._telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionFrom: openedFromString,\n            validCodeActions: CodeActions.validActions.length,\n            cancelled: didCancel,\n        });\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */);\n            if (this.isCodeActionWidgetEnabled(model)) {\n                this._contextViewService.showContextView({\n                    getAnchor: () => anchor,\n                    render: (container) => this.renderCodeActionMenuList(container, menuActions),\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                }, this._editor.getDomNode(), false);\n            }\n            else {\n                this._contextMenuService.showContextMenu({\n                    domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                    getAnchor: () => anchor,\n                    getActions: () => menuActions,\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                    autoSelectFirstItem: true,\n                    getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n                });\n            }\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item, trigger));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n                kind: CodeActionMenu.documentationID\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu.documentationID = '_documentation';\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ITelemetryService),\n    __param(6, IThemeService),\n    __param(7, IConfigurationService),\n    __param(8, IContextViewService),\n    __param(9, IContextKeyService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(59 /* EditorOption.lightbulb */) && !this._editor.getOption(59 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(59 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from './types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.useCustomCodeActionMenu': {\n            type: 'boolean',\n            tags: ['experimental'],\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('codeActionWidget', \"Enabling this adjusts how the code action menu is rendered.\"),\n            default: false,\n        },\n    } }));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(61 /* EditorOption.lineHeight */) / this._editor.getOption(48 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(48 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(131 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(55 /* EditorOption.hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(55 /* EditorOption.hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseLeave(mouseEvent) {\n        var _a;\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\n        if ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.containsNode(targetEm)) {\n            // when the mouse is inside hover widget\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        const target = mouseEvent.target;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */;\n        controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { editorActiveLinkForeground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).then(() => {\n                    this.removeLinkDecorations();\n                }, (error) => {\n                    this.removeLinkDecorations();\n                    onUnexpectedError(error);\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        return this.startFindDefinition(position).then(() => {\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return Promise.resolve(0);\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return Promise.resolve(0);\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        return this.previousPromise.then(results => {\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            // Multiple results\n            if (results.length > 1) {\n                this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            // Single result\n            else {\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    let wordRange;\n                    if (result.originSelectionRange) {\n                        wordRange = Range.lift(result.originSelectionRange);\n                    }\n                    else {\n                        wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                    }\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(wordRange, new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue));\n                    ref.dispose();\n                });\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        return this.editor.hasModel() &&\n            mouseEvent.isNoneOrSingleMouseDown &&\n            (mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */) &&\n            (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) &&\n            this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, this.editor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .goto-definition-link { color: ${activeLinkForeground} !important; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._opts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(72 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n});\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        const options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        const options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        const titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, titleElement);\n        this._fillTitleIcon(titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), Codicon.close.classNames, true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(61 /* EditorOption.lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: transparent(editorInfoForeground, .1), light: transparent(editorInfoForeground, .1), hcDark: null, hcLight: null }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nconst defaultColor = new Color(new RGBA(0, 122, 204));\nconst defaultOptions = {\n    showArrow: true,\n    showFrame: true,\n    className: '',\n    frameColor: defaultColor,\n    arrowColor: defaultColor,\n    keepEditorSelection: false\n};\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\nexport class ViewZoneDelegate {\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n        this.id = ''; // A valid zone id should be greater than 0\n        this.domNode = domNode;\n        this.afterLineNumber = afterLineNumber;\n        this.afterColumn = afterColumn;\n        this.heightInLines = heightInLines;\n        this._onDomNodeTop = onDomNodeTop;\n        this._onComputedHeight = onComputedHeight;\n    }\n    onDomNodeTop(top) {\n        this._onDomNodeTop(top);\n    }\n    onComputedHeight(height) {\n        this._onComputedHeight(height);\n    }\n}\nexport class OverlayWidgetDelegate {\n    constructor(id, domNode) {\n        this._id = id;\n        this._domNode = domNode;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return null;\n    }\n}\nclass Arrow {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._ruleName = Arrow._IdGenerator.nextId();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._color = null;\n        this._height = -1;\n    }\n    dispose() {\n        this.hide();\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n    }\n    set color(value) {\n        if (this._color !== value) {\n            this._color = value;\n            this._updateStyle();\n        }\n    }\n    set height(value) {\n        if (this._height !== value) {\n            this._height = value;\n            this._updateStyle();\n        }\n    }\n    _updateStyle() {\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\n    }\n    show(where) {\n        if (where.column === 1) {\n            // the arrow isn't pretty at column 1 and we need to push it out a little\n            where = { lineNumber: where.lineNumber, column: 2 };\n        }\n        this._decorations.set([{\n                range: Range.fromPositions(where),\n                options: {\n                    description: 'zone-widget-arrow',\n                    className: this._ruleName,\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n                }\n            }]);\n    }\n    hide() {\n        this._decorations.clear();\n    }\n}\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\nexport class ZoneWidget {\n    constructor(editor, options = {}) {\n        this._arrow = null;\n        this._overlayWidget = null;\n        this._resizeSash = null;\n        this._viewZone = null;\n        this._disposables = new DisposableStore();\n        this.container = null;\n        this._isShowing = false;\n        this.editor = editor;\n        this._positionMarkerId = this.editor.createDecorationsCollection();\n        this.options = objects.deepClone(options);\n        objects.mixin(this.options, defaultOptions, false);\n        this.domNode = document.createElement('div');\n        if (!this.options.isAccessible) {\n            this.domNode.setAttribute('aria-hidden', 'true');\n            this.domNode.setAttribute('role', 'presentation');\n        }\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\n            const width = this._getWidth(info);\n            this.domNode.style.width = width + 'px';\n            this.domNode.style.left = this._getLeft(info) + 'px';\n            this._onWidth(width);\n        }));\n    }\n    dispose() {\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n                this._viewZone = null;\n            });\n        }\n        this._positionMarkerId.clear();\n        this._disposables.dispose();\n    }\n    create() {\n        this.domNode.classList.add('zone-widget');\n        if (this.options.className) {\n            this.domNode.classList.add(this.options.className);\n        }\n        this.container = document.createElement('div');\n        this.container.classList.add('zone-widget-container');\n        this.domNode.appendChild(this.container);\n        if (this.options.showArrow) {\n            this._arrow = new Arrow(this.editor);\n            this._disposables.add(this._arrow);\n        }\n        this._fillContainer(this.container);\n        this._initSash();\n        this._applyStyles();\n    }\n    style(styles) {\n        if (styles.frameColor) {\n            this.options.frameColor = styles.frameColor;\n        }\n        if (styles.arrowColor) {\n            this.options.arrowColor = styles.arrowColor;\n        }\n        this._applyStyles();\n    }\n    _applyStyles() {\n        if (this.container && this.options.frameColor) {\n            const frameColor = this.options.frameColor.toString();\n            this.container.style.borderTopColor = frameColor;\n            this.container.style.borderBottomColor = frameColor;\n        }\n        if (this._arrow && this.options.arrowColor) {\n            const arrowColor = this.options.arrowColor.toString();\n            this._arrow.color = arrowColor;\n        }\n    }\n    _getWidth(info) {\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n    }\n    _getLeft(info) {\n        // If minimap is to the left, we move beyond it\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n            return info.minimap.minimapWidth;\n        }\n        return 0;\n    }\n    _onViewZoneTop(top) {\n        this.domNode.style.top = top + 'px';\n    }\n    _onViewZoneHeight(height) {\n        this.domNode.style.height = `${height}px`;\n        if (this.container) {\n            const containerHeight = height - this._decoratingElementsHeight();\n            this.container.style.height = `${containerHeight}px`;\n            const layoutInfo = this.editor.getLayoutInfo();\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\n        }\n        if (this._resizeSash) {\n            this._resizeSash.layout();\n        }\n    }\n    get position() {\n        const range = this._positionMarkerId.getRange(0);\n        if (!range) {\n            return undefined;\n        }\n        return range.getStartPosition();\n    }\n    show(rangeOrPos, heightInLines) {\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n        this._isShowing = true;\n        this._showImpl(range, heightInLines);\n        this._isShowing = false;\n        this._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\n    }\n    hide() {\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n            });\n            this._viewZone = null;\n        }\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._arrow) {\n            this._arrow.hide();\n        }\n    }\n    _decoratingElementsHeight() {\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        let result = 0;\n        if (this.options.showArrow) {\n            const arrowHeight = Math.round(lineHeight / 3);\n            result += 2 * arrowHeight;\n        }\n        if (this.options.showFrame) {\n            const frameThickness = Math.round(lineHeight / 9);\n            result += 2 * frameThickness;\n        }\n        return result;\n    }\n    _showImpl(where, heightInLines) {\n        const position = where.getStartPosition();\n        const layoutInfo = this.editor.getLayoutInfo();\n        const width = this._getWidth(layoutInfo);\n        this.domNode.style.width = `${width}px`;\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n        // Render the widget as zone (rendering) and widget (lifecycle)\n        const viewZoneDomNode = document.createElement('div');\n        viewZoneDomNode.style.overflow = 'hidden';\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        // adjust heightInLines to viewport\n        const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\n        heightInLines = Math.min(heightInLines, maxHeightInLines);\n        let arrowHeight = 0;\n        let frameThickness = 0;\n        // Render the arrow one 1/3 of an editor line height\n        if (this._arrow && this.options.showArrow) {\n            arrowHeight = Math.round(lineHeight / 3);\n            this._arrow.height = arrowHeight;\n            this._arrow.show(position);\n        }\n        // Render the frame as 1/9 of an editor line height\n        if (this.options.showFrame) {\n            frameThickness = Math.round(lineHeight / 9);\n        }\n        // insert zone widget\n        this.editor.changeViewZones((accessor) => {\n            if (this._viewZone) {\n                accessor.removeZone(this._viewZone.id);\n            }\n            if (this._overlayWidget) {\n                this.editor.removeOverlayWidget(this._overlayWidget);\n                this._overlayWidget = null;\n            }\n            this.domNode.style.top = '-1000px';\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height));\n            this._viewZone.id = accessor.addZone(this._viewZone);\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n            this.editor.addOverlayWidget(this._overlayWidget);\n        });\n        if (this.container && this.options.showFrame) {\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n            this.container.style.borderTopWidth = width + 'px';\n            this.container.style.borderBottomWidth = width + 'px';\n        }\n        const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n        if (this.container) {\n            this.container.style.top = arrowHeight + 'px';\n            this.container.style.height = containerHeight + 'px';\n            this.container.style.overflow = 'hidden';\n        }\n        this._doLayout(containerHeight, width);\n        if (!this.options.keepEditorSelection) {\n            this.editor.setSelection(where);\n        }\n        const model = this.editor.getModel();\n        if (model) {\n            const revealLine = where.endLineNumber + 1;\n            if (revealLine <= model.getLineCount()) {\n                // reveal line below the zone widget\n                this.revealLine(revealLine, false);\n            }\n            else {\n                // reveal last line atop\n                this.revealLine(model.getLineCount(), true);\n            }\n        }\n    }\n    revealLine(lineNumber, isLastLine) {\n        if (isLastLine) {\n            this.editor.revealLineInCenter(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n        else {\n            this.editor.revealLine(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n    }\n    setCssClass(className, classToReplace) {\n        if (!this.container) {\n            return;\n        }\n        if (classToReplace) {\n            this.container.classList.remove(classToReplace);\n        }\n        this.container.classList.add(className);\n    }\n    _onWidth(widthInPixel) {\n        // implement in subclass\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        // implement in subclass\n    }\n    _relayout(newHeightInLines) {\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    this._viewZone.heightInLines = newHeightInLines;\n                    accessor.layoutZone(this._viewZone.id);\n                }\n            });\n        }\n    }\n    // --- sash\n    _initSash() {\n        if (this._resizeSash) {\n            return;\n        }\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* Orientation.HORIZONTAL */ }));\n        if (!this.options.isResizeable) {\n            this._resizeSash.state = 0 /* SashState.Disabled */;\n        }\n        let data;\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\n            if (this._viewZone) {\n                data = {\n                    startY: e.startY,\n                    heightInLines: this._viewZone.heightInLines,\n                };\n            }\n        }));\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\n            data = undefined;\n        }));\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\n            if (data) {\n                const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(61 /* EditorOption.lineHeight */);\n                const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n                const newHeightInLines = data.heightInLines + roundedLineDelta;\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\n                    this._relayout(newHeightInLines);\n                }\n            }\n        }));\n    }\n    getHorizontalSashLeft() {\n        return 0;\n    }\n    getHorizontalSashTop() {\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n    }\n    getHorizontalSashWidth() {\n        const layoutInfo = this.editor.getLayoutInfo();\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, append, asCSSUrl, EventType, ModifierKeyEmitter, prepend } from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionRunner, Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { UILabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { combinedDisposable, DisposableStore, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isLinux, isWindows, OS } from '../../../base/common/platform.js';\nimport './menuEntryActionViewItem.css';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IThemeService, ThemeIcon } from '../../theme/common/themeService.js';\nimport { isDark } from '../../theme/common/theme.js';\nimport { assertType } from '../../../base/common/types.js';\nexport function createAndFillInActionBarActions(menu, options, target, primaryGroup, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions) {\n    const groups = menu.getActions(options);\n    const isPrimaryAction = typeof primaryGroup === 'string' ? (actionGroup) => actionGroup === primaryGroup : primaryGroup;\n    // Action bars handle alternative actions on their own so the alternative actions should be ignored\n    fillInActions(groups, target, false, isPrimaryAction, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions);\n    return asDisposable(groups);\n}\nfunction asDisposable(groups) {\n    const disposables = new DisposableStore();\n    for (const [, actions] of groups) {\n        for (const action of actions) {\n            disposables.add(action);\n        }\n    }\n    return disposables;\n}\nfunction fillInActions(groups, target, useAlternativeActions, isPrimaryAction = actionGroup => actionGroup === 'navigation', primaryMaxCount = Number.MAX_SAFE_INTEGER, shouldInlineSubmenu = () => false, useSeparatorsInPrimaryActions = false) {\n    let primaryBucket;\n    let secondaryBucket;\n    if (Array.isArray(target)) {\n        primaryBucket = target;\n        secondaryBucket = target;\n    }\n    else {\n        primaryBucket = target.primary;\n        secondaryBucket = target.secondary;\n    }\n    const submenuInfo = new Set();\n    for (const [group, actions] of groups) {\n        let target;\n        if (isPrimaryAction(group)) {\n            target = primaryBucket;\n            if (target.length > 0 && useSeparatorsInPrimaryActions) {\n                target.push(new Separator());\n            }\n        }\n        else {\n            target = secondaryBucket;\n            if (target.length > 0) {\n                target.push(new Separator());\n            }\n        }\n        for (let action of actions) {\n            if (useAlternativeActions) {\n                action = action instanceof MenuItemAction && action.alt ? action.alt : action;\n            }\n            const newLen = target.push(action);\n            // keep submenu info for later inlining\n            if (action instanceof SubmenuAction) {\n                submenuInfo.add({ group, action, index: newLen - 1 });\n            }\n        }\n    }\n    // ask the outside if submenu should be inlined or not. only ask when\n    // there would be enough space\n    for (const { group, action, index } of submenuInfo) {\n        const target = isPrimaryAction(group) ? primaryBucket : secondaryBucket;\n        // inlining submenus with length 0 or 1 is easy,\n        // larger submenus need to be checked with the overall limit\n        const submenuActions = action.actions;\n        if ((submenuActions.length <= 1 || target.length + submenuActions.length - 2 <= primaryMaxCount) && shouldInlineSubmenu(action, group, target.length)) {\n            target.splice(index, 1, ...submenuActions);\n        }\n    }\n    // overflow items from the primary group into the secondary bucket\n    if (primaryBucket !== secondaryBucket && primaryBucket.length > primaryMaxCount) {\n        const overflow = primaryBucket.splice(primaryMaxCount, primaryBucket.length - primaryMaxCount);\n        secondaryBucket.unshift(...overflow, new Separator());\n    }\n}\nlet MenuEntryActionViewItem = class MenuEntryActionViewItem extends ActionViewItem {\n    constructor(action, options, _keybindingService, _notificationService, _contextKeyService, _themeService, _contextMenuService) {\n        super(undefined, action, { icon: !!(action.class || action.item.icon), label: !action.class && !action.item.icon, draggable: options === null || options === void 0 ? void 0 : options.draggable, keybinding: options === null || options === void 0 ? void 0 : options.keybinding, hoverDelegate: options === null || options === void 0 ? void 0 : options.hoverDelegate });\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextKeyService = _contextKeyService;\n        this._themeService = _themeService;\n        this._contextMenuService = _contextMenuService;\n        this._wantsAltCommand = false;\n        this._itemClassDispose = this._register(new MutableDisposable());\n        this._altKey = ModifierKeyEmitter.getInstance();\n    }\n    get _menuItemAction() {\n        return this._action;\n    }\n    get _commandAction() {\n        return this._wantsAltCommand && this._menuItemAction.alt || this._menuItemAction;\n    }\n    onClick(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            event.stopPropagation();\n            try {\n                yield this.actionRunner.run(this._commandAction, this._context);\n            }\n            catch (err) {\n                this._notificationService.error(err);\n            }\n        });\n    }\n    render(container) {\n        super.render(container);\n        container.classList.add('menu-entry');\n        this._updateItemClass(this._menuItemAction.item);\n        let mouseOver = false;\n        let alternativeKeyDown = this._altKey.keyStatus.altKey || ((isWindows || isLinux) && this._altKey.keyStatus.shiftKey);\n        const updateAltState = () => {\n            var _a;\n            const wantsAltCommand = mouseOver && alternativeKeyDown && !!((_a = this._commandAction.alt) === null || _a === void 0 ? void 0 : _a.enabled);\n            if (wantsAltCommand !== this._wantsAltCommand) {\n                this._wantsAltCommand = wantsAltCommand;\n                this.updateLabel();\n                this.updateTooltip();\n                this.updateClass();\n            }\n        };\n        if (this._menuItemAction.alt) {\n            this._register(this._altKey.event(value => {\n                alternativeKeyDown = value.altKey || ((isWindows || isLinux) && value.shiftKey);\n                updateAltState();\n            }));\n        }\n        this._register(addDisposableListener(container, 'mouseleave', _ => {\n            mouseOver = false;\n            updateAltState();\n        }));\n        this._register(addDisposableListener(container, 'mouseenter', _ => {\n            mouseOver = true;\n            updateAltState();\n        }));\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this._commandAction.label;\n        }\n    }\n    getTooltip() {\n        var _a;\n        const keybinding = this._keybindingService.lookupKeybinding(this._commandAction.id, this._contextKeyService);\n        const keybindingLabel = keybinding && keybinding.getLabel();\n        const tooltip = this._commandAction.tooltip || this._commandAction.label;\n        let title = keybindingLabel\n            ? localize('titleAndKb', \"{0} ({1})\", tooltip, keybindingLabel)\n            : tooltip;\n        if (!this._wantsAltCommand && ((_a = this._menuItemAction.alt) === null || _a === void 0 ? void 0 : _a.enabled)) {\n            const altTooltip = this._menuItemAction.alt.tooltip || this._menuItemAction.alt.label;\n            const altKeybinding = this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id, this._contextKeyService);\n            const altKeybindingLabel = altKeybinding && altKeybinding.getLabel();\n            const altTitleSection = altKeybindingLabel\n                ? localize('titleAndKb', \"{0} ({1})\", altTooltip, altKeybindingLabel)\n                : altTooltip;\n            title = localize('titleAndKbAndAlt', \"{0}\\n[{1}] {2}\", title, UILabelProvider.modifierLabels[OS].altKey, altTitleSection);\n        }\n        return title;\n    }\n    updateClass() {\n        if (this.options.icon) {\n            if (this._commandAction !== this._menuItemAction) {\n                if (this._menuItemAction.alt) {\n                    this._updateItemClass(this._menuItemAction.alt.item);\n                }\n            }\n            else {\n                this._updateItemClass(this._menuItemAction.item);\n            }\n        }\n    }\n    _updateItemClass(item) {\n        var _a;\n        this._itemClassDispose.value = undefined;\n        const { element, label } = this;\n        if (!element || !label) {\n            return;\n        }\n        const icon = this._commandAction.checked && ((_a = item.toggled) === null || _a === void 0 ? void 0 : _a.icon) ? item.toggled.icon : item.icon;\n        if (!icon) {\n            return;\n        }\n        if (ThemeIcon.isThemeIcon(icon)) {\n            // theme icons\n            const iconClasses = ThemeIcon.asClassNameArray(icon);\n            label.classList.add(...iconClasses);\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove(...iconClasses);\n            });\n        }\n        else {\n            // icon path/url\n            label.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                ? asCSSUrl(icon.dark)\n                : asCSSUrl(icon.light));\n            label.classList.add('icon');\n            this._itemClassDispose.value = combinedDisposable(toDisposable(() => {\n                label.style.backgroundImage = '';\n                label.classList.remove('icon');\n            }), this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                this.updateClass();\n            }));\n        }\n    }\n};\nMenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextKeyService),\n    __param(5, IThemeService),\n    __param(6, IContextMenuService)\n], MenuEntryActionViewItem);\nexport { MenuEntryActionViewItem };\nlet SubmenuEntryActionViewItem = class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem {\n    constructor(action, options, _contextMenuService, _themeService) {\n        var _a, _b;\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : false,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : (ThemeIcon.isThemeIcon(action.item.icon) ? ThemeIcon.asClassName(action.item.icon) : undefined),\n        });\n        super(action, { getActions: () => action.actions }, _contextMenuService, dropdownOptions);\n        this._contextMenuService = _contextMenuService;\n        this._themeService = _themeService;\n    }\n    render(container) {\n        super.render(container);\n        assertType(this.element);\n        container.classList.add('menu-entry');\n        const action = this._action;\n        const { icon } = action.item;\n        if (icon && !ThemeIcon.isThemeIcon(icon)) {\n            this.element.classList.add('icon');\n            const setBackgroundImage = () => {\n                if (this.element) {\n                    this.element.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                        ? asCSSUrl(icon.dark)\n                        : asCSSUrl(icon.light));\n                }\n            };\n            setBackgroundImage();\n            this._register(this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                setBackgroundImage();\n            }));\n        }\n    }\n};\nSubmenuEntryActionViewItem = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IThemeService)\n], SubmenuEntryActionViewItem);\nexport { SubmenuEntryActionViewItem };\nlet DropdownWithDefaultActionViewItem = class DropdownWithDefaultActionViewItem extends BaseActionViewItem {\n    constructor(submenuAction, options, _keybindingService, _notificationService, _contextMenuService, _menuService, _instaService, _storageService) {\n        var _a, _b, _c;\n        super(null, submenuAction);\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextMenuService = _contextMenuService;\n        this._menuService = _menuService;\n        this._instaService = _instaService;\n        this._storageService = _storageService;\n        this._container = null;\n        this._options = options;\n        this._storageKey = `${submenuAction.item.submenu.id}_lastActionId`;\n        // determine default action\n        let defaultAction;\n        const defaultActionId = _storageService.get(this._storageKey, 1 /* StorageScope.WORKSPACE */);\n        if (defaultActionId) {\n            defaultAction = submenuAction.actions.find(a => defaultActionId === a.id);\n        }\n        if (!defaultAction) {\n            defaultAction = submenuAction.actions[0];\n        }\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, defaultAction, { keybinding: this._getDefaultActionKeybindingLabel(defaultAction) });\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : true,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : ['codicon', 'codicon-chevron-down'],\n            actionRunner: (_c = options === null || options === void 0 ? void 0 : options.actionRunner) !== null && _c !== void 0 ? _c : new ActionRunner()\n        });\n        this._dropdown = new DropdownMenuActionViewItem(submenuAction, submenuAction.actions, this._contextMenuService, dropdownOptions);\n        this._dropdown.actionRunner.onDidRun((e) => {\n            if (e.action instanceof MenuItemAction) {\n                this.update(e.action);\n            }\n        });\n    }\n    update(lastAction) {\n        this._storageService.store(this._storageKey, lastAction.id, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        this._defaultAction.dispose();\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, lastAction, { keybinding: this._getDefaultActionKeybindingLabel(lastAction) });\n        this._defaultAction.actionRunner = new class extends ActionRunner {\n            runAction(action, context) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    yield action.run(undefined);\n                });\n            }\n        }();\n        if (this._container) {\n            this._defaultAction.render(prepend(this._container, $('.action-container')));\n        }\n    }\n    _getDefaultActionKeybindingLabel(defaultAction) {\n        var _a;\n        let defaultActionKeybinding;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.renderKeybindingWithDefaultActionLabel) {\n            const kb = this._keybindingService.lookupKeybinding(defaultAction.id);\n            if (kb) {\n                defaultActionKeybinding = `(${kb.getLabel()})`;\n            }\n        }\n        return defaultActionKeybinding;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        this._defaultAction.setActionContext(newContext);\n        this._dropdown.setActionContext(newContext);\n    }\n    render(container) {\n        this._container = container;\n        super.render(this._container);\n        this._container.classList.add('monaco-dropdown-with-default');\n        const primaryContainer = $('.action-container');\n        this._defaultAction.render(append(this._container, primaryContainer));\n        this._register(addDisposableListener(primaryContainer, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */)) {\n                this._defaultAction.element.tabIndex = -1;\n                this._dropdown.focus();\n                event.stopPropagation();\n            }\n        }));\n        const dropdownContainer = $('.dropdown-action-container');\n        this._dropdown.render(append(this._container, dropdownContainer));\n        this._register(addDisposableListener(dropdownContainer, EventType.KEY_DOWN, (e) => {\n            var _a;\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                this._defaultAction.element.tabIndex = 0;\n                this._dropdown.setFocusable(false);\n                (_a = this._defaultAction.element) === null || _a === void 0 ? void 0 : _a.focus();\n                event.stopPropagation();\n            }\n        }));\n    }\n    focus(fromRight) {\n        if (fromRight) {\n            this._dropdown.focus();\n        }\n        else {\n            this._defaultAction.element.tabIndex = 0;\n            this._defaultAction.element.focus();\n        }\n    }\n    blur() {\n        this._defaultAction.element.tabIndex = -1;\n        this._dropdown.blur();\n        this._container.blur();\n    }\n    setFocusable(focusable) {\n        if (focusable) {\n            this._defaultAction.element.tabIndex = 0;\n        }\n        else {\n            this._defaultAction.element.tabIndex = -1;\n            this._dropdown.setFocusable(false);\n        }\n    }\n    dispose() {\n        this._defaultAction.dispose();\n        this._dropdown.dispose();\n        super.dispose();\n    }\n};\nDropdownWithDefaultActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextMenuService),\n    __param(5, IMenuService),\n    __param(6, IInstantiationService),\n    __param(7, IStorageService)\n], DropdownWithDefaultActionViewItem);\nexport { DropdownWithDefaultActionViewItem };\n/**\n * Creates action view items for menu actions or submenu actions.\n */\nexport function createActionViewItem(instaService, action, options) {\n    if (action instanceof MenuItemAction) {\n        return instaService.createInstance(MenuEntryActionViewItem, action, options);\n    }\n    else if (action instanceof SubmenuItemAction) {\n        if (action.item.rememberDefaultAction) {\n            return instaService.createInstance(DropdownWithDefaultActionViewItem, action, options);\n        }\n        else {\n            return instaService.createInstance(SubmenuEntryActionViewItem, action, options);\n        }\n    }\n    else {\n        return undefined;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            this.element.title = this._action.label || '';\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = Object.assign(Object.assign({}, this.dropdownMenu.menuOptions), { get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                } });\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (this.getAction().label) {\n            title = this.getAction().label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.getAction().enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (e instanceof MouseEvent && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, options) {\n        super(container, options);\n        this._actions = [];\n        this._contextMenuProvider = options.contextMenuProvider;\n        this.actions = options.actions || [];\n        this.actionProvider = options.actionProvider;\n        this.menuClassName = options.menuClassName || '';\n        this.menuAsChild = !!options.menuAsChild;\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this.actionProvider) {\n            return this.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: action => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this.menuClassName,\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this.menuAsChild ? this.element : undefined\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nconst _goToActionIds = new Set();\nfunction registerGoToAction(ctor) {\n    const result = new ctor();\n    registerInstantiatedEditorAction(result);\n    _goToActionIds.add(result.id);\n    return result;\n}\nexport class SymbolNavigationAnchor {\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction {\n    constructor(configuration, opts) {\n        super(opts);\n        this.configuration = configuration;\n    }\n    run(accessor, editor, arg) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && _goToActionIds.has(altActionId)) {\n                    altAction = editor.getAction(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.id);\n                altAction.run().finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.id);\n                });\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._activeAlternativeCommands = new Set();\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone()\n    ? 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */\n    : 70 /* KeyCode.F12 */;\nregisterGoToAction((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                alias: 'Go to Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.1\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterGoToAction((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                alias: 'Open Definition to the Side',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, goToDefinitionKb),\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterGoToAction((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                alias: 'Peek Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterGoToAction((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                alias: 'Go to Declaration',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.3\n                },\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterGoToAction(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n            alias: 'Peek Declaration',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterGoToAction((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                alias: 'Go to Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.4\n                }\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterGoToAction((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                alias: 'Peek Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterGoToAction((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                alias: 'Go to Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.45\n                }\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterGoToAction((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                alias: 'Peek Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterGoToAction(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            label: nls.localize('goToReferences.label', \"Go to References\"),\n            alias: 'Go to References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 1.45\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterGoToAction(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            label: nls.localize('references.action.label', \"Peek References\"),\n            alias: 'Peek References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            label: nls.localize('label.generic', \"Go to Any Symbol\"),\n            alias: 'Go to Any Symbol',\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n// -- unconditionally register goto-action\nMenuRegistry.appendMenuItems([\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDefinition',\n                title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 2,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDeclaration',\n                title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToTypeDefinition',\n                title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToImplementation',\n                title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n            },\n            group: '4_symbol_nav',\n            order: 4,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToReferences',\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            group: '4_symbol_nav',\n            order: 5,\n        },\n    },\n]);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(79 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref) {\n        if (this._widget) {\n            this._widget.hide();\n        }\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */ }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService, themeService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n        this._register(attachBadgeStyler(this.badge, themeService));\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService),\n    __param(2, IThemeService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, true);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    const provider = registry.ordered(model);\n    // get results\n    const promises = provider.map((provider) => {\n        return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n            onUnexpectedExternalError(err);\n            return undefined;\n        });\n    });\n    return Promise.all(promises).then(values => {\n        const result = [];\n        for (const value of values) {\n            if (Array.isArray(value)) {\n                result.push(...value);\n            }\n            else if (value) {\n                result.push(value);\n            }\n        }\n        return result;\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction, HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nconst $ = dom.$;\nlet ContentHoverController = class ContentHoverController extends Disposable {\n    constructor(_editor, _instantiationService, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n        this._isChangingDecorations = false;\n        this._messages = [];\n        this._messagesAreComplete = false;\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n        this._participants = [];\n        for (const participant of HoverParticipantRegistry.getAll()) {\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\n        }\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value, result.isComplete, result.hasLoadingMessage);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            this._onModelDecorationsChanged();\n        }));\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.hide();\n            }\n        }));\n        this._register(TokenizationRegistry.onDidChange(() => {\n            if (this._widget.position && this._computer.anchor && this._messages.length > 0) {\n                this._widget.clear();\n                this._renderMessages(this._computer.anchor, this._messages);\n            }\n        }));\n    }\n    _onModelDecorationsChanged() {\n        if (this._widget.position) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            if (!this._widget.isColorPickerVisible) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n                this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n            }\n        }\n    }\n    maybeShowAt(mouseEvent) {\n        const anchorCandidates = [];\n        for (const participant of this._participants) {\n            if (participant.suggestHoverAnchor) {\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\n                if (anchor) {\n                    anchorCandidates.push(anchor);\n                }\n            }\n        }\n        const target = mouseEvent.target;\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            const epsilon = this._editor.getOption(46 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n            }\n        }\n        if (anchorCandidates.length === 0) {\n            return false;\n        }\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\n        this._startShowingAt(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, false);\n        return true;\n    }\n    startShowingAtRange(range, mode, focus) {\n        this._startShowingAt(new HoverRangeAnchor(0, range), mode, focus);\n    }\n    _startShowingAt(anchor, mode, focus) {\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n            // We have to show the widget at the exact same range as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        if (this._widget.position) {\n            // The range might have changed, but the hover is visible\n            // Instead of hiding it completely, filter out messages that are still in the new range and\n            // kick off a new computation\n            if (!this._computer.anchor || !anchor.canAdoptVisibleHover(this._computer.anchor, this._widget.position)) {\n                this.hide();\n            }\n            else {\n                const filteredMessages = this._messages.filter((m) => m.isValidForHoverAnchor(anchor));\n                if (filteredMessages.length === 0) {\n                    this.hide();\n                }\n                else if (filteredMessages.length === this._messages.length && this._messagesAreComplete) {\n                    // no change\n                    return;\n                }\n                else {\n                    this._renderMessages(anchor, filteredMessages);\n                }\n            }\n        }\n        this._computer.anchor = anchor;\n        this._computer.shouldFocus = focus;\n        this._hoverOperation.start(mode);\n    }\n    hide() {\n        this._computer.anchor = null;\n        this._hoverOperation.cancel();\n        this._widget.hide();\n    }\n    isColorPickerVisible() {\n        return this._widget.isColorPickerVisible;\n    }\n    containsNode(node) {\n        return this._widget.getDomNode().contains(node);\n    }\n    _addLoadingMessage(result) {\n        if (this._computer.anchor) {\n            for (const participant of this._participants) {\n                if (participant.createLoadingMessage) {\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n                    if (loadingMessage) {\n                        return result.slice(0).concat([loadingMessage]);\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _withResult(result, isComplete, hasLoadingMessage) {\n        this._messages = (hasLoadingMessage ? this._addLoadingMessage(result) : result);\n        this._messagesAreComplete = isComplete;\n        if (this._computer.anchor && this._messages.length > 0) {\n            this._renderMessages(this._computer.anchor, this._messages);\n        }\n        else if (isComplete) {\n            this.hide();\n        }\n    }\n    _renderMessages(anchor, messages) {\n        const { showAtPosition, showAtRange, highlightRange } = ContentHoverController.computeHoverRanges(anchor.range, messages);\n        const disposables = new DisposableStore();\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n        const fragment = document.createDocumentFragment();\n        let colorPicker = null;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPicker = widget,\n            onContentsChanged: () => this._widget.onContentsChanged(),\n            hide: () => this.hide()\n        };\n        for (const participant of this._participants) {\n            const hoverParts = messages.filter(msg => msg.owner === participant);\n            if (hoverParts.length > 0) {\n                disposables.add(participant.renderHoverParts(context, hoverParts));\n            }\n        }\n        if (statusBar.hasContent) {\n            fragment.appendChild(statusBar.hoverElement);\n        }\n        if (fragment.hasChildNodes()) {\n            if (highlightRange) {\n                const highlightDecoration = this._editor.createDecorationsCollection();\n                try {\n                    this._isChangingDecorations = true;\n                    highlightDecoration.set([{\n                            range: highlightRange,\n                            options: ContentHoverController._DECORATION_OPTIONS\n                        }]);\n                }\n                finally {\n                    this._isChangingDecorations = false;\n                }\n                disposables.add(toDisposable(() => {\n                    try {\n                        this._isChangingDecorations = true;\n                        highlightDecoration.clear();\n                    }\n                    finally {\n                        this._isChangingDecorations = false;\n                    }\n                }));\n            }\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtRange, this._editor.getOption(55 /* EditorOption.hover */).above, this._computer.shouldFocus, disposables));\n        }\n        else {\n            disposables.dispose();\n        }\n    }\n    static computeHoverRanges(anchorRange, messages) {\n        // The anchor range is always on a single line\n        const anchorLineNumber = anchorRange.startLineNumber;\n        let renderStartColumn = anchorRange.startColumn;\n        let renderEndColumn = anchorRange.endColumn;\n        let highlightRange = messages[0].range;\n        let forceShowAtRange = null;\n        for (const msg of messages) {\n            highlightRange = Range.plusRange(highlightRange, msg.range);\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\n                // this message has a range that is completely sitting on the line of the anchor\n                renderStartColumn = Math.min(renderStartColumn, msg.range.startColumn);\n                renderEndColumn = Math.max(renderEndColumn, msg.range.endColumn);\n            }\n            if (msg.forceShowAtRange) {\n                forceShowAtRange = msg.range;\n            }\n        }\n        return {\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorRange.startLineNumber, renderStartColumn),\n            showAtRange: forceShowAtRange ? forceShowAtRange : new Range(anchorLineNumber, renderStartColumn, anchorLineNumber, renderEndColumn),\n            highlightRange\n        };\n    }\n};\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n});\nContentHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService)\n], ContentHoverController);\nexport { ContentHoverController };\nclass ContentHoverVisibleData {\n    constructor(colorPicker, showAtPosition, showAtRange, preferAbove, stoleFocus, disposables) {\n        this.colorPicker = colorPicker;\n        this.showAtPosition = showAtPosition;\n        this.showAtRange = showAtRange;\n        this.preferAbove = preferAbove;\n        this.stoleFocus = stoleFocus;\n        this.disposables = disposables;\n    }\n}\nlet ContentHoverWidget = class ContentHoverWidget extends Disposable {\n    constructor(_editor, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this.allowEditorOverflow = true;\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(this._contextKeyService);\n        this._hover = this._register(new HoverWidget());\n        this._visibleData = null;\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._setVisibleData(null);\n        this._layout();\n        this._editor.addContentWidget(this);\n    }\n    /**\n     * Returns `null` if the hover is not visible.\n     */\n    get position() {\n        var _a, _b;\n        return (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) !== null && _b !== void 0 ? _b : null;\n    }\n    get isColorPickerVisible() {\n        var _a;\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        super.dispose();\n    }\n    getId() {\n        return ContentHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        if (!this._visibleData) {\n            return null;\n        }\n        let preferAbove = this._visibleData.preferAbove;\n        if (!preferAbove && this._contextKeyService.getContextKeyValue(SuggestContext.Visible.key)) {\n            // Prefer rendering above if the suggest widget is visible\n            preferAbove = true;\n        }\n        return {\n            position: this._visibleData.showAtPosition,\n            range: this._visibleData.showAtRange,\n            preference: (preferAbove\n                ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n                : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]),\n        };\n    }\n    _setVisibleData(visibleData) {\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        this._visibleData = visibleData;\n        this._hoverVisibleKey.set(!!this._visibleData);\n        this._hover.containerDomNode.classList.toggle('hidden', !this._visibleData);\n    }\n    _layout() {\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n        const { fontSize, lineHeight } = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._hover.contentsDomNode.style.fontSize = `${fontSize}px`;\n        this._hover.contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this._hover.contentsDomNode.style.maxHeight = `${height}px`;\n        this._hover.contentsDomNode.style.maxWidth = `${Math.max(this._editor.getLayoutInfo().width * 0.66, 500)}px`;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    showAt(node, visibleData) {\n        this._setVisibleData(visibleData);\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._hover.contentsDomNode.style.paddingBottom = '';\n        this._updateFont();\n        this.onContentsChanged();\n        // Simply force a synchronous render on the editor\n        // such that the widget does not really render with left = '0px'\n        this._editor.render();\n        // See https://github.com/microsoft/vscode/issues/140339\n        // TODO: Doing a second layout of the hover after force rendering the editor\n        this.onContentsChanged();\n        if (visibleData.stoleFocus) {\n            this._hover.containerDomNode.focus();\n        }\n        if (visibleData.colorPicker) {\n            visibleData.colorPicker.layout();\n        }\n    }\n    hide() {\n        if (this._visibleData) {\n            const stoleFocus = this._visibleData.stoleFocus;\n            this._setVisibleData(null);\n            this._editor.layoutContentWidget(this);\n            if (stoleFocus) {\n                this._editor.focus();\n            }\n        }\n    }\n    onContentsChanged() {\n        this._editor.layoutContentWidget(this);\n        this._hover.onContentsChanged();\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n        const hasHorizontalScrollbar = (scrollDimensions.scrollWidth > scrollDimensions.width);\n        if (hasHorizontalScrollbar) {\n            // There is just a horizontal scrollbar\n            const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n                this._hover.contentsDomNode.style.paddingBottom = extraBottomPadding;\n                this._editor.layoutContentWidget(this);\n                this._hover.onContentsChanged();\n            }\n        }\n    }\n    clear() {\n        this._hover.contentsDomNode.textContent = '';\n    }\n};\nContentHoverWidget.ID = 'editor.contrib.contentHoverWidget';\nContentHoverWidget = __decorate([\n    __param(1, IContextKeyService)\n], ContentHoverWidget);\nexport { ContentHoverWidget };\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n    constructor(_keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._hasContent = false;\n        this.hoverElement = $('div.hover-row.status-bar');\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n    }\n    get hasContent() {\n        return this._hasContent;\n    }\n    addAction(actionOptions) {\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        this._hasContent = true;\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    }\n    append(element) {\n        const result = dom.append(this.actionsElement, element);\n        this._hasContent = true;\n        return result;\n    }\n};\nEditorHoverStatusBar = __decorate([\n    __param(0, IKeybindingService)\n], EditorHoverStatusBar);\nclass ContentHoverComputer {\n    constructor(_editor, _participants) {\n        this._editor = _editor;\n        this._participants = _participants;\n        this._anchor = null;\n        this._shouldFocus = false;\n    }\n    get anchor() { return this._anchor; }\n    set anchor(value) { this._anchor = value; }\n    get shouldFocus() { return this._shouldFocus; }\n    set shouldFocus(value) { this._shouldFocus = value; }\n    static _getLineDecorations(editor, anchor) {\n        if (anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        if (lineNumber > model.getLineCount()) {\n            // invalid line\n            return [];\n        }\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        return editor.getLineDecorations(lineNumber).filter((d) => {\n            if (d.options.isWholeLine) {\n                return true;\n            }\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            if (d.options.showIfCollapsed) {\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n                    return false;\n                }\n            }\n            else {\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    computeAsync(token) {\n        const anchor = this._anchor;\n        if (!this._editor.hasModel() || !anchor) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\n            if (!participant.computeAsync) {\n                return AsyncIterableObject.EMPTY;\n            }\n            return participant.computeAsync(anchor, lineDecorations, token);\n        }));\n    }\n    computeSync() {\n        if (!this._editor.hasModel() || !this._anchor) {\n            return [];\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n        let result = [];\n        for (const participant of this._participants) {\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n        }\n        return coalesce(result);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n    constructor(value, isComplete, hasLoadingMessage) {\n        this.value = value;\n        this.isComplete = isComplete;\n        this.hasLoadingMessage = hasLoadingMessage;\n    }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n    constructor(_editor, _computer) {\n        super();\n        this._editor = _editor;\n        this._computer = _computer;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n        this._state = 0 /* HoverOperationState.Idle */;\n        this._asyncIterable = null;\n        this._asyncIterableDone = false;\n        this._result = [];\n    }\n    dispose() {\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        super.dispose();\n    }\n    get _hoverTime() {\n        return this._editor.getOption(55 /* EditorOption.hover */).delay;\n    }\n    get _firstWaitTime() {\n        return this._hoverTime / 2;\n    }\n    get _secondWaitTime() {\n        return this._hoverTime - this._firstWaitTime;\n    }\n    get _loadingMessageTime() {\n        return 3 * this._hoverTime;\n    }\n    _setState(state, fireResult = true) {\n        this._state = state;\n        if (fireResult) {\n            this._fireResult();\n        }\n    }\n    _triggerAsyncComputation() {\n        this._setState(2 /* HoverOperationState.SecondWait */);\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\n        if (this._computer.computeAsync) {\n            this._asyncIterableDone = false;\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n            (() => __awaiter(this, void 0, void 0, function* () {\n                var e_1, _a;\n                try {\n                    try {\n                        for (var _b = __asyncValues(this._asyncIterable), _c; _c = yield _b.next(), !_c.done;) {\n                            const item = _c.value;\n                            if (item) {\n                                this._result.push(item);\n                                this._fireResult();\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._asyncIterableDone = true;\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\n                        this._setState(0 /* HoverOperationState.Idle */);\n                    }\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                }\n            }))();\n        }\n        else {\n            this._asyncIterableDone = true;\n        }\n    }\n    _triggerSyncComputation() {\n        if (this._computer.computeSync) {\n            this._result = this._result.concat(this._computer.computeSync());\n        }\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\n    }\n    _triggerLoadingMessage() {\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        }\n    }\n    _fireResult() {\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\n            // Do not send out results before the hover time\n            return;\n        }\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n    }\n    start(mode) {\n        if (mode === 0 /* HoverStartMode.Delayed */) {\n            if (this._state === 0 /* HoverOperationState.Idle */) {\n                this._setState(1 /* HoverOperationState.FirstWait */);\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n            }\n        }\n        else {\n            switch (this._state) {\n                case 0 /* HoverOperationState.Idle */:\n                    this._triggerAsyncComputation();\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n                case 2 /* HoverOperationState.SecondWait */:\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n            }\n        }\n    }\n    cancel() {\n        this._firstWaitScheduler.cancel();\n        this._secondWaitScheduler.cancel();\n        this._loadingMessageScheduler.cancel();\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        this._result = [];\n        this._setState(0 /* HoverOperationState.Idle */, false);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n    constructor(priority, range) {\n        this.priority = priority;\n        this.range = range;\n        this.type = 1 /* HoverAnchorType.Range */;\n    }\n    equals(other) {\n        return (other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range));\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\n    }\n}\nexport class HoverForeignElementAnchor {\n    constructor(priority, owner, range) {\n        this.priority = priority;\n        this.owner = owner;\n        this.range = range;\n        this.type = 2 /* HoverAnchorType.ForeignElement */;\n    }\n    equals(other) {\n        return (other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner);\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner);\n    }\n}\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\n    constructor() {\n        this._participants = [];\n    }\n    register(ctor) {\n        this._participants.push(ctor);\n    }\n    getAll() {\n        return this._participants;\n    }\n}());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* CharCode.Underline */\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\n        }\n        const pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* TokenType.Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* TokenType.VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* TokenType.Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        const ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        const ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        const ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.charAt(0).toLowerCase() + word.substr(1);\n            }\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    clone() {\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            const all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        const ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        const ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        const snippet = new TextmateSnippet();\n        this.parseFragment(value, snippet);\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\n        return snippet;\n    }\n    parseFragment(value, snippet) {\n        const offset = snippet.children.length;\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        return snippet.children.slice(offset);\n    }\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n            if (!finalTabstop) {\n                // the snippet uses placeholders but has no\n                // final tabstop defined -> insert at the end\n                snippet.appendChild(new Placeholder(0));\n            }\n        }\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            const ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* TokenType.EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* TokenType.Dollar */\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* TokenType.Dollar */, true)\n                || this._accept(4 /* TokenType.CurlyClose */, true)\n                || this._accept(5 /* TokenType.Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (index = this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* TokenType.Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* TokenType.Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* TokenType.Comma */, true)\n                    || this._accept(7 /* TokenType.Pipe */, true)\n                    || this._accept(5 /* TokenType.Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        const transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* TokenType.Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\n            complex = true;\n        }\n        const index = this._accept(8 /* TokenType.Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* TokenType.Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1:/upcase}\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* TokenType.Plus */)) {\n            // ${1:+<if>}\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* TokenType.Dash */)) {\n            // ${2:-<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            const ifValue = this._until(1 /* TokenType.Colon */);\n            if (ifValue) {\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* TokenType.EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nexport class PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground,\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const toggleStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.preserveCase.style(toggleStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        if (this.inputBox) {\n            this.inputBox.validate();\n        }\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.inputBox.width = newWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nimport { localize } from '../../../nls.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\nconst HistoryNavigationWidgetFocusContext = 'historyNavigationWidgetFocus';\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\nlet lastFocusedWidget = undefined;\nconst widgets = [];\nexport function registerAndCreateHistoryNavigationContext(contextKeyService, widget) {\n    if (widgets.includes(widget)) {\n        throw new Error('Cannot register the same widget multiple times');\n    }\n    widgets.push(widget);\n    const disposableStore = new DisposableStore();\n    const scopedContextKeyService = disposableStore.add(contextKeyService.createScoped(widget.element));\n    const historyNavigationWidgetFocus = new RawContextKey(HistoryNavigationWidgetFocusContext, false).bindTo(scopedContextKeyService);\n    const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const onDidFocus = () => {\n        historyNavigationWidgetFocus.set(true);\n        lastFocusedWidget = widget;\n    };\n    const onDidBlur = () => {\n        historyNavigationWidgetFocus.set(false);\n        if (lastFocusedWidget === widget) {\n            lastFocusedWidget = undefined;\n        }\n    };\n    // Check for currently being focused\n    if (widget.element === document.activeElement) {\n        onDidFocus();\n    }\n    disposableStore.add(widget.onDidFocus(() => onDidFocus()));\n    disposableStore.add(widget.onDidBlur(() => onDidBlur()));\n    disposableStore.add(toDisposable(() => {\n        widgets.splice(widgets.indexOf(widget), 1);\n        onDidBlur();\n    }));\n    return {\n        scopedContextKeyService,\n        historyNavigationForwardsEnablement,\n        historyNavigationBackwardsEnablement,\n        dispose() {\n            disposableStore.dispose();\n        }\n    };\n}\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showFindOptions = false) {\n        super(container, contextViewProvider, showFindOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedFindInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedFindInput);\nexport { ContextScopedFindInput };\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\n        super(container, contextViewProvider, showReplaceOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedReplaceInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedReplaceInput);\nexport { ContextScopedReplaceInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showPrevious',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 16 /* KeyCode.UpArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showPreviousValue();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showNext',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 18 /* KeyCode.DownArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showNextValue();\n        }\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { NullOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nconst $ = dom.$;\nexport class MarginHoverWidget extends Disposable {\n    constructor(editor, languageService, openerService = NullOpenerService) {\n        super();\n        this._renderDisposeables = this._register(new DisposableStore());\n        this._editor = editor;\n        this._isVisible = false;\n        this._messages = [];\n        this._hover = this._register(new HoverWidget());\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\n        this._computer = new MarginHoverComputer(this._editor);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return MarginHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        return null;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n        if (this._isVisible) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n        }\n    }\n    startShowingAt(lineNumber) {\n        if (this._computer.lineNumber === lineNumber) {\n            // We have to show the widget at the exact same line number as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this.hide();\n        this._computer.lineNumber = lineNumber;\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n    }\n    hide() {\n        this._computer.lineNumber = -1;\n        this._hoverOperation.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n        this._messages = result;\n        if (this._messages.length > 0) {\n            this._renderMessages(this._computer.lineNumber, this._messages);\n        }\n        else {\n            this.hide();\n        }\n    }\n    _renderMessages(lineNumber, messages) {\n        this._renderDisposeables.clear();\n        const fragment = document.createDocumentFragment();\n        for (const msg of messages) {\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n        }\n        this._updateContents(fragment);\n        this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._updateFont();\n    }\n    _showAt(lineNumber) {\n        if (!this._isVisible) {\n            this._isVisible = true;\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        }\n        const editorLayout = this._editor.getLayoutInfo();\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n        const editorScrollTop = this._editor.getScrollTop();\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n}\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\nclass MarginHoverComputer {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._lineNumber = -1;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    set lineNumber(value) {\n        this._lineNumber = value;\n    }\n    computeSync() {\n        const toHoverMessage = (contents) => {\n            return {\n                value: contents\n            };\n        };\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n        const result = [];\n        if (!lineDecorations) {\n            return result;\n        }\n        for (const d of lineDecorations) {\n            if (!d.options.glyphMarginClassName) {\n                continue;\n            }\n            const hoverMessage = d.options.glyphMarginHoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { escapeDoubleQuotes, parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${escapeDoubleQuotes(href)}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${escapeDoubleQuotes(text)}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${escapeDoubleQuotes(title)}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        title = typeof title === 'string' ? escapeDoubleQuotes(removeMarkdownEscapes(title)) : '';\n        href = removeMarkdownEscapes(href);\n        // HTML Encode href\n        href = href.replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n        return `<a href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    // Will collect [id, renderedElement] tuples\n    const codeBlocks = [];\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            codeBlocks.push(value.then(element => [id, element]));\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}\u2026`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    markdownHtmlDoc.body.querySelectorAll('a')\n        .forEach(a => {\n        const href = a.getAttribute('href'); // Get the raw 'href' attribute value as text, not the resolved 'href'\n        a.setAttribute('href', ''); // Clear out href. We use the `data-href` for handling clicks instead\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            a.replaceWith(...a.childNodes);\n        }\n        else {\n            let resolvedHref = _href(href, false);\n            if (markdown.baseUri) {\n                resolvedHref = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n            }\n            a.dataset.href = resolvedHref;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    if (codeBlocks.length > 0) {\n        Promise.all(codeBlocks).then((tuples) => {\n            var _a, _b;\n            if (isDisposed) {\n                return;\n            }\n            const renderedElements = new Map(tuples);\n            const placeholderElements = element.querySelectorAll(`div[data-code]`);\n            for (const placeholderElement of placeholderElements) {\n                const renderedElement = renderedElements.get((_a = placeholderElement.dataset['code']) !== null && _a !== void 0 ? _a : '');\n                if (renderedElement) {\n                    DOM.reset(placeholderElement, renderedElement);\n                }\n            }\n            (_b = options.asyncRenderCallback) === null || _b === void 0 ? void 0 : _b.call(options);\n        });\n    }\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    const hook = DOM.hookDomPurifyHrefAndSrcSanitizer(allowedSchemes);\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        hook.dispose();\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n", "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n// ESM-uncomment-begin\nlet __marked_exports = {};\n(function() {\n  function define(deps, factory) {\n    factory(__marked_exports);\n  }\n  define.amd = true;\n// ESM-uncomment-end\n\n (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function getDefaults() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n  /**\n   * @param {string} html\n   */\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n  /**\n   * @param {string | RegExp} regex\n   * @param {string} opt\n   */\n\n  function edit(regex, opt) {\n    regex = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n  /**\n   * @param {boolean} sanitize\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n  /**\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  }\n  /**\n   * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n   * /c*$/ is vulnerable to REDOS.\n   *\n   * @param {string} str\n   * @param {string} c\n   * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n   */\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.slice(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n  /**\n   * @param {string} pattern\n   * @param {number} count\n   */\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text, [])\n      };\n      lexer.state.inLink = false;\n      return token;\n    }\n\n    return {\n      type: 'image',\n      raw: raw,\n      href: href,\n      title: title,\n      text: escape(text)\n    };\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap && cap[0].length > 0) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: this.lexer.blockTokens(text, []),\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        } // Get next list item\n\n\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))\"); // Check if current bullet point can start a new List Item\n\n        while (src) {\n          endEarly = false;\n\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n\n          if (this.rules.block.hr.test(src)) {\n            // End list if bullet was actually HR (possibly move into itemRegex?)\n            break;\n          }\n\n          raw = cap[0];\n          src = src.substring(raw.length);\n          line = cap[2].split('\\n', 1)[0];\n          nextLine = src.split('\\n', 1)[0];\n\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = line.trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n\n            itemContents = line.slice(indent);\n            indent += cap[1].length;\n          }\n\n          blankLine = false;\n\n          if (!line && /^ *$/.test(nextLine)) {\n            // Items begin with at most one blank line\n            raw += nextLine + '\\n';\n            src = src.substring(nextLine.length + 1);\n            endEarly = true;\n          }\n\n          if (!endEarly) {\n            var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))\");\n            var hrRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)\"); // Check if following lines should be included in List Item\n\n            while (src) {\n              rawLine = src.split('\\n', 1)[0];\n              line = rawLine; // Re-align to follow commonmark nesting rules\n\n              if (this.options.pedantic) {\n                line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n              } // End list item if found start of new bullet\n\n\n              if (nextBulletRegex.test(line)) {\n                break;\n              } // Horizontal rule found\n\n\n              if (hrRegex.test(src)) {\n                break;\n              }\n\n              if (line.search(/[^ ]/) >= indent || !line.trim()) {\n                // Dedent if possible\n                itemContents += '\\n' + line.slice(indent);\n              } else if (!blankLine) {\n                // Until blank line, item doesn't need indentation\n                itemContents += '\\n' + line;\n              } else {\n                // Otherwise, improper indentation ends this item\n                break;\n              }\n\n              if (!blankLine && !line.trim()) {\n                // Check if current line is blank\n                blankLine = true;\n              }\n\n              raw += rawLine + '\\n';\n              src = src.substring(rawLine.length + 1);\n            }\n          }\n\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n\n\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\n\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n          var spacers = list.items[i].tokens.filter(function (t) {\n            return t.type === 'space';\n          });\n          var hasMultipleLineBreaks = spacers.every(function (t) {\n            var chars = t.raw.split('');\n            var lineBreaks = 0;\n\n            for (var _iterator = _createForOfIteratorHelperLoose(chars), _step; !(_step = _iterator()).done;) {\n              var _char = _step.value;\n\n              if (_char === '\\n') {\n                lineBreaks += 1;\n              }\n\n              if (lineBreaks > 1) {\n                return true;\n              }\n            }\n\n            return false;\n          });\n\n          if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n            // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n            list.loose = true;\n            list.items[i].loose = true;\n          }\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n\n        if (this.options.sanitize) {\n          token.type = 'paragraph';\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.tokens = [];\n          this.lexer.inline(token.text, token.tokens);\n        }\n\n        return token;\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i, j, k, row;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.rows.length;\n\n          for (i = 0; i < l; i++) {\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\n              return {\n                text: c\n              };\n            });\n          } // parse child tokens inside headers and cells\n          // header child tokens\n\n\n          l = item.header.length;\n\n          for (j = 0; j < l; j++) {\n            item.header[j].tokens = [];\n            this.lexer.inline(item.header[j].text, item.header[j].tokens);\n          } // cell child tokens\n\n\n          l = item.rows.length;\n\n          for (j = 0; j < l; j++) {\n            row = item.rows[j];\n\n            for (k = 0; k < row.length; k++) {\n              row[k].tokens = [];\n              this.lexer.inline(row[k].text, row[k].tokens);\n            }\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.escape = function escape$1(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n          this.lexer.state.inLink = true;\n        } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.lexer.state.inLink = false;\n        }\n\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = true;\n        } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: this.lexer.state.inLink,\n          inRawBlock: this.lexer.state.inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0], this.lexer);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0], this.lexer);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u0870-\\u0887\\u0889-\\u088E\\u08A0-\\u08C9\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u1711\\u171F-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4C\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7CA\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7D9\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDD70-\\uDD7A\\uDD7C-\\uDD8A\\uDD8C-\\uDD92\\uDD94\\uDD95\\uDD97-\\uDDA1\\uDDA3-\\uDDB1\\uDDB3-\\uDDB9\\uDDBB\\uDDBC\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67\\uDF80-\\uDF85\\uDF87-\\uDFB0\\uDFB2-\\uDFBA]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDF70-\\uDF81\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC71\\uDC72\\uDC75\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B\\uDF40-\\uDF46]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEB0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|\\uD80B[\\uDF90-\\uDFF0]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDE70-\\uDEBE\\uDEC0-\\uDEC9\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82B[\\uDFF0-\\uDFF3\\uDFF5-\\uDFFB\\uDFFD\\uDFFE]|\\uD82C[\\uDC00-\\uDD22\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD837[\\uDF00-\\uDF1E]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDE90-\\uDEAD\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD839[\\uDFE0-\\uDFE6\\uDFE8-\\uDFEB\\uDFED\\uDFEE\\uDFF0-\\uDFFE]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDF\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF38\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            var _text = src.slice(1, lLength + match.index + rLength);\n\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: _text,\n              tokens: this.lexer.inlineTokens(_text, [])\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          var text = src.slice(2, lLength + match.index + rLength - 1);\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2],\n          tokens: this.lexer.inlineTokens(cap[2], [])\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (this.lexer.state.inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        } else {\n          text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n    hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.listItemStart = edit(/^( *)(bull) */).replace('bull', block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '').replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.table = edit(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n    nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[^*]+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).replace('ref', block._label).getRegex();\n  inline.nolink = edit(inline.nolink).replace('ref', block._label).getRegex();\n  inline.reflinkSearch = edit(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n\n  /**\n   * smartypants text replacement\n   * @param {string} text\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   * @param {string} text\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || exports.defaults;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      this.tokenizer.lexer = this;\n      this.inlineQueue = [];\n      this.state = {\n        inLink: false,\n        inRawBlock: false,\n        top: true\n      };\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n');\n      this.blockTokens(src, this.tokens);\n      var next;\n\n      while (next = this.inlineQueue.shift()) {\n        this.inlineTokens(next.src, next.tokens);\n      }\n\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n      } else {\n        src = src.replace(/^( *)(\\t+)/gm, function (_, leading, tabs) {\n          return leading + '    '.repeat(tabs.length);\n        });\n      }\n\n      var token, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.length === 1 && tokens.length > 0) {\n            // if there's a single \\n as a spacer, it's terminating the last line,\n            // so move it there so that we don't get unecessary paragraph tags\n            tokens[tokens.length - 1].raw += '\\n';\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (token = this.tokenizer.def(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.raw;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      this.state.top = true;\n      return tokens;\n    };\n\n    _proto.inline = function inline(src, tokens) {\n      this.inlineQueue.push({\n        src: src,\n        tokens: tokens\n      });\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this2\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  /**\n   * Renderer\n   */\n\n  var Renderer = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n    }\n    /**\n     * @param {string} quote\n     */\n    ;\n\n    _proto.blockquote = function blockquote(quote) {\n      return \"<blockquote>\\n\" + quote + \"</blockquote>\\n\";\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    }\n    /**\n     * @param {string} text\n     * @param {string} level\n     * @param {string} raw\n     * @param {any} slugger\n     */\n    ;\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        var id = this.options.headerPrefix + slugger.slug(raw);\n        return \"<h\" + level + \" id=\\\"\" + id + \"\\\">\" + text + \"</h\" + level + \">\\n\";\n      } // ignore IDs\n\n\n      return \"<h\" + level + \">\" + text + \"</h\" + level + \">\\n\";\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.listitem = function listitem(text) {\n      return \"<li>\" + text + \"</li>\\n\";\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.paragraph = function paragraph(text) {\n      return \"<p>\" + text + \"</p>\\n\";\n    }\n    /**\n     * @param {string} header\n     * @param {string} body\n     */\n    ;\n\n    _proto.table = function table(header, body) {\n      if (body) body = \"<tbody>\" + body + \"</tbody>\";\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    }\n    /**\n     * @param {string} content\n     */\n    ;\n\n    _proto.tablerow = function tablerow(content) {\n      return \"<tr>\\n\" + content + \"</tr>\\n\";\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? \"<\" + type + \" align=\\\"\" + flags.align + \"\\\">\" : \"<\" + type + \">\";\n      return tag + content + (\"</\" + type + \">\\n\");\n    }\n    /**\n     * span level renderer\n     * @param {string} text\n     */\n    ;\n\n    _proto.strong = function strong(text) {\n      return \"<strong>\" + text + \"</strong>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.em = function em(text) {\n      return \"<em>\" + text + \"</em>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.codespan = function codespan(text) {\n      return \"<code>\" + text + \"</code>\";\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.del = function del(text) {\n      return \"<del>\" + text + \"</del>\";\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = \"<img src=\\\"\" + href + \"\\\" alt=\\\"\" + text + \"\\\"\";\n\n      if (title) {\n        out += \" title=\\\"\" + title + \"\\\"\";\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n    /**\n     * @param {string} value\n     */\n\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     * @param {string} originalSlug\n     * @param {boolean} isDryRun\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} [options]\n     * @param {boolean} [options.dryrun] Generates the next unique slug without\n     * updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || exports.defaults;\n      this.options.renderer = this.options.renderer || new Renderer();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer();\n      this.slugger = new Slugger();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.header[j].tokens), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.rows.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.rows[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k].tokens), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = exports.defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var _walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(this, token);\n\n          if (_walkTokens) {\n            _walkTokens.call(this, token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback.call(marked, token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell.tokens, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.rows), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell.tokens, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   * @param {string} src\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var options = marked.options;\n  var setOptions = marked.setOptions;\n  var use = marked.use;\n  var walkTokens = marked.walkTokens;\n  var parseInline = marked.parseInline;\n  var parse = marked;\n  var parser = Parser.parse;\n  var lexer = Lexer.lex;\n\n  exports.Lexer = Lexer;\n  exports.Parser = Parser;\n  exports.Renderer = Renderer;\n  exports.Slugger = Slugger;\n  exports.TextRenderer = TextRenderer;\n  exports.Tokenizer = Tokenizer;\n  exports.getDefaults = getDefaults;\n  exports.lexer = lexer;\n  exports.marked = marked;\n  exports.options = options;\n  exports.parse = parse;\n  exports.parseInline = parseInline;\n  exports.parser = parser;\n  exports.setOptions = setOptions;\n  exports.use = use;\n  exports.walkTokens = walkTokens;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n// ESM-uncomment-begin\n})();\nexport var marked = (__marked_exports || exports);\n// ESM-uncomment-end\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposables) {\n        return {\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = yield tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(46 /* EditorOption.fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                if (this._options.codeBlockFontSize !== undefined) {\n                    element.style.fontSize = this._options.codeBlockFontSize;\n                }\n                return element;\n            }),\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (content) => this._openerService.open(content, { fromUserGesture: true, allowContributedOpeners: true, allowCommands: markdown.isTrusted }).catch(onUnexpectedError),\n                disposables: disposables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents, ordinal) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n        this.ordinal = ordinal;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 2;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], 2000);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        let index = 1000;\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }], index++));\n        }\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), index++));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const model = this._editor.getModel();\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\n            .map(item => {\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n            return new MarkdownHover(this, rng, item.hover.contents, item.ordinal);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\n    const disposables = new DisposableStore();\n    for (const hoverPart of hoverParts) {\n        for (const contents of hoverPart.contents) {\n            if (isEmptyMarkdownString(contents)) {\n                continue;\n            }\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\n            disposables.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const renderedContents = disposables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            context.fragment.appendChild(markdownHoverElement);\n        }\n    }\n    return disposables;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n    constructor(provider, hover, ordinal) {\n        this.provider = provider;\n        this.hover = hover;\n        this.ordinal = ordinal;\n    }\n}\nfunction executeProvider(provider, ordinal, model, position, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\n            if (result && isValid(result)) {\n                return new HoverProviderResult(provider, result, ordinal);\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n        return undefined;\n    });\n}\nexport function getHover(registry, model, position, token) {\n    const providers = registry.ordered(model);\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n    return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoverPromise(registry, model, position, token) {\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nfunction isValid(result) {\n    const hasRange = (typeof result.range !== 'undefined');\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n    return hasRange && hasHtmlContent;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* CodeActionTriggerType.Invoke */,\n    filter: { include: CodeActionKind.QuickFix },\n    triggerAction: CodeActionTriggerSource.QuickFixHover\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 5;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6,\n                            width: elementPosition.width,\n                            height: elementPosition.height\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageFeaturesService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/common/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(61 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../base/common/codicons.js';\nimport Severity from '../../../base/common/severity.js';\nimport { problemsErrorIconForeground, problemsInfoIconForeground, problemsWarningIconForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n    function className(severity) {\n        switch (severity) {\n            case Severity.Ignore:\n                return 'severity-ignore ' + Codicon.info.classNames;\n            case Severity.Info:\n                return Codicon.info.classNames;\n            case Severity.Warning:\n                return Codicon.warning.classNames;\n            case Severity.Error:\n                return Codicon.error.classNames;\n            default:\n                return '';\n        }\n    }\n    SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));\nregisterThemingParticipant((theme, collector) => {\n    const errorIconForeground = theme.getColor(problemsErrorIconForeground);\n    if (errorIconForeground) {\n        const errorCodiconSelector = Codicon.error.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${errorCodiconSelector},\n\t\t\t.markers-panel .marker-icon${errorCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${errorCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${errorCodiconSelector} {\n\t\t\t\tcolor: ${errorIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const warningIconForeground = theme.getColor(problemsWarningIconForeground);\n    if (warningIconForeground) {\n        const warningCodiconSelector = Codicon.warning.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${warningCodiconSelector},\n\t\t\t.markers-panel .marker-icon${warningCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${warningCodiconSelector},\n\t\t\t.extension-editor ${warningCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${warningCodiconSelector},\n\t\t\t.preferences-editor ${warningCodiconSelector} {\n\t\t\t\tcolor: ${warningIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const infoIconForeground = theme.getColor(problemsInfoIconForeground);\n    if (infoIconForeground) {\n        const infoCodiconSelector = Codicon.info.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${infoCodiconSelector},\n\t\t\t.markers-panel .marker-icon${infoCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${infoCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${infoCodiconSelector},\n\t\t\t.extension-editor ${infoCodiconSelector} {\n\t\t\t\tcolor: ${infoIconForeground};\n\t\t\t}\n\t\t`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController);\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.pasteActions.enabled', {\n            resource: model.uri\n        });\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(33 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const originalDocVersion = model.getVersionId();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                for (const provider of providers) {\n                    if (!provider.pasteMimeTypes.some(type => {\n                        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n                            return [...dataTransfer.values()].some(item => item.asFile());\n                        }\n                        return dataTransfer.has(type);\n                    })) {\n                        continue;\n                    }\n                    const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, tokenSource.token);\n                    if (originalDocVersion !== model.getVersionId()) {\n                        return;\n                    }\n                    if (edit) {\n                        performSnippetEdit(this._editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, selections);\n                        if (edit.additionalEdit) {\n                            yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor: this._editor });\n                        }\n                        return;\n                    }\n                }\n                // Default handler\n                const textDataTransfer = (_c = dataTransfer.get(Mimes.text)) !== null && _c !== void 0 ? _c : dataTransfer.get('text');\n                if (!textDataTransfer) {\n                    return;\n                }\n                const text = yield textDataTransfer.asString();\n                if (originalDocVersion !== model.getVersionId()) {\n                    return;\n                }\n                this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                    text: text,\n                    pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                    multicursorText: null\n                });\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], CopyPasteController);\nexport { CopyPasteController };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function createStringDataTransferItem(stringOrPromise) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return stringOrPromise; }),\n        asFile: () => undefined,\n        value: typeof stringOrPromise === 'string' ? stringOrPromise : undefined,\n    };\n}\nexport function createFileDataTransferItem(fileName, uri, data) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return ''; }),\n        asFile: () => ({ name: fileName, uri, data }),\n        value: undefined,\n    };\n}\nexport class VSDataTransfer {\n    constructor() {\n        this._entries = new Map();\n    }\n    get size() {\n        return this._entries.size;\n    }\n    has(mimeType) {\n        return this._entries.has(this.toKey(mimeType));\n    }\n    get(mimeType) {\n        var _a;\n        return (_a = this._entries.get(this.toKey(mimeType))) === null || _a === void 0 ? void 0 : _a[0];\n    }\n    append(mimeType, value) {\n        const existing = this._entries.get(mimeType);\n        if (existing) {\n            existing.push(value);\n        }\n        else {\n            this._entries.set(this.toKey(mimeType), [value]);\n        }\n    }\n    replace(mimeType, value) {\n        this._entries.set(this.toKey(mimeType), [value]);\n    }\n    delete(mimeType) {\n        this._entries.delete(this.toKey(mimeType));\n    }\n    *entries() {\n        for (const [mine, items] of this._entries.entries()) {\n            for (const item of items) {\n                yield [mine, item];\n            }\n        }\n    }\n    values() {\n        return Array.from(this._entries.values()).flat();\n    }\n    forEach(f) {\n        for (const [mime, item] of this.entries()) {\n            f(item, mime);\n        }\n    }\n    toKey(mimeType) {\n        return mimeType.toLowerCase();\n    }\n}\n", "export const generateUuid = (function () {\n    // use `randomUUID` if possible\n    if (typeof crypto === 'object' && typeof crypto.randomUUID === 'function') {\n        return crypto.randomUUID.bind(crypto);\n    }\n    // use `randomValues` if possible\n    let getRandomValues;\n    if (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    else {\n        getRandomValues = function (bucket) {\n            for (let i = 0; i < bucket.length; i++) {\n                bucket[i] = Math.floor(Math.random() * 256);\n            }\n            return bucket;\n        };\n    }\n    // prep-work\n    const _data = new Uint8Array(16);\n    const _hex = [];\n    for (let i = 0; i < 256; i++) {\n        _hex.push(i.toString(16).padStart(2, '0'));\n    }\n    return function generateUuid() {\n        // get data\n        getRandomValues(_data);\n        // set version bits\n        _data[6] = (_data[6] & 0x0f) | 0x40;\n        _data[8] = (_data[8] & 0x3f) | 0x80;\n        // print as string\n        let i = 0;\n        let result = '';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        return result;\n    };\n})();\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { distinct } from '../../base/common/arrays.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers, extractEditorsDropData } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nexport function createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n]);\nexport function addExternalEditorsDropData(dataTransfer, dragEvent, overwriteUriList = false) {\n    var _a;\n    if (dragEvent.dataTransfer && (overwriteUriList || !dataTransfer.has(Mimes.uriList))) {\n        const editorData = extractEditorsDropData(dragEvent)\n            .filter(input => input.resource)\n            .map(input => input.resource.toString());\n        // Also add in the files\n        for (const item of (_a = dragEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.items) {\n            const file = item.getAsFile();\n            if (file) {\n                editorData.push(file.path ? URI.file(file.path).toString() : file.name);\n            }\n        }\n        if (editorData.length) {\n            dataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        dataTransfer.delete(internal);\n    }\n}\nexport const UriList = Object.freeze({\n    // http://amundsen.com/hypermedia/urilist/\n    create: (entries) => {\n        return distinct(entries.map(x => x.toString())).join('\\r\\n');\n    },\n    parse: (str) => {\n        return str.split('\\r\\n').filter(value => !value.startsWith('#'));\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DataTransfers } from '../../../base/browser/dnd.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { extractSelection } from '../../opener/common/opener.js';\nimport { Registry } from '../../registry/common/platform.js';\n//#region Editor / Resources DND\nexport const CodeDataTransfers = {\n    EDITORS: 'CodeEditors',\n    FILES: 'CodeFiles'\n};\nexport function extractEditorsDropData(e) {\n    var _a;\n    const editors = [];\n    if (e.dataTransfer && e.dataTransfer.types.length > 0) {\n        // Data Transfer: Code Editors\n        const rawEditorsData = e.dataTransfer.getData(CodeDataTransfers.EDITORS);\n        if (rawEditorsData) {\n            try {\n                editors.push(...parse(rawEditorsData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Data Transfer: Resources\n        else {\n            try {\n                const rawResourcesData = e.dataTransfer.getData(DataTransfers.RESOURCES);\n                editors.push(...createDraggedEditorInputFromRawResourcesData(rawResourcesData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Check for native file transfer\n        if ((_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.files) {\n            for (let i = 0; i < e.dataTransfer.files.length; i++) {\n                const file = e.dataTransfer.files[i];\n                if (file && file.path /* Electron only */) {\n                    try {\n                        editors.push({ resource: URI.file(file.path), isExternal: true, allowWorkspaceOpen: true });\n                    }\n                    catch (error) {\n                        // Invalid URI\n                    }\n                }\n            }\n        }\n        // Check for CodeFiles transfer\n        const rawCodeFiles = e.dataTransfer.getData(CodeDataTransfers.FILES);\n        if (rawCodeFiles) {\n            try {\n                const codeFiles = JSON.parse(rawCodeFiles);\n                for (const codeFile of codeFiles) {\n                    editors.push({ resource: URI.file(codeFile), isExternal: true, allowWorkspaceOpen: true });\n                }\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Workbench contributions\n        const contributions = Registry.as(Extensions.DragAndDropContribution).getAll();\n        for (const contribution of contributions) {\n            const data = e.dataTransfer.getData(contribution.dataFormatKey);\n            if (data) {\n                try {\n                    editors.push(...contribution.getEditorInputs(data));\n                }\n                catch (error) {\n                    // Invalid transfer\n                }\n            }\n        }\n    }\n    return editors;\n}\nexport function createDraggedEditorInputFromRawResourcesData(rawResourcesData) {\n    const editors = [];\n    if (rawResourcesData) {\n        const resourcesRaw = JSON.parse(rawResourcesData);\n        for (const resourceRaw of resourcesRaw) {\n            if (resourceRaw.indexOf(':') > 0) { // mitigate https://github.com/microsoft/vscode/issues/124946\n                const { selection, uri } = extractSelection(URI.parse(resourceRaw));\n                editors.push({ resource: uri, options: { selection } });\n            }\n        }\n    }\n    return editors;\n}\nclass DragAndDropContributionRegistry {\n    constructor() {\n        this._contributions = new Map();\n    }\n    getAll() {\n        return this._contributions.values();\n    }\n}\nexport const Extensions = {\n    DragAndDropContribution: 'workbench.contributions.dragAndDrop'\n};\nRegistry.add(Extensions.DragAndDropContribution, new DragAndDropContributionRegistry());\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    apply(edits, opts) {\n        try {\n            this._doInsert(edits, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_edits=', edits);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        // don't merge\n        if (this._session && typeof template !== 'string') {\n            this.cancel();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n            this._session.insert();\n        }\n        else {\n            assertType(typeof template === 'string');\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        // regster completion item provider when there is any choice element\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\n            this._choiceCompletionItemProvider = {\n                provideCompletionItems: (model, position) => {\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n                        return undefined;\n                    }\n                    const { activeChoice } = this._session;\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\n                        return undefined;\n                    }\n                    const word = model.getValueInRange(activeChoice.range);\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n                    const suggestions = [];\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\n                        const option = activeChoice.choice.options[i];\n                        suggestions.push({\n                            kind: 13 /* CompletionItemKind.Value */,\n                            label: option.value,\n                            insertText: option.value,\n                            sortText: 'a'.repeat(i + 1),\n                            range: activeChoice.range,\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\n                        });\n                    }\n                    return { suggestions };\n                }\n            };\n            const registration = this._languageFeaturesService.completionProvider.register({\n                language: this._editor.getModel().getLanguageId(),\n                pattern: this._editor.getModel().uri.fsPath,\n                scheme: this._editor.getModel().uri.scheme\n            }, this._choiceCompletionItemProvider);\n            this._snippetListener.add(registration);\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { activeChoice } = this._session;\n        if (!activeChoice || !this._choiceCompletionItemProvider) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== activeChoice.choice) {\n            this._currentChoice = activeChoice.choice;\n            // trigger suggest with the special choice completion provider\n            queueMicrotask(() => {\n                showSimpleSuggestions(this._editor, this._choiceCompletionItemProvider);\n            });\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        this._currentChoice = undefined;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, ILogService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageConfigurationService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n// ---\nexport function performSnippetEdit(editor, snippet, selections) {\n    const controller = SnippetController2.get(editor);\n    if (!controller) {\n        return false;\n    }\n    editor.focus();\n    controller.apply(selections.map(selection => {\n        return {\n            range: Selection.liftSelection(selection),\n            template: snippet\n        };\n    }));\n    return controller.isInSnippet();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._offset = -1;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    initialize(textChange) {\n        this._offset = textChange.newPosition;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._offset === -1) {\n            throw new Error(`Snippet not initialized!`);\n        }\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            const operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    get isTrivialSnippet() {\n        return this._snippet.placeholders.length === 0\n            || (this._snippet.placeholders.length === 1 && this._snippet.placeholders[0].isFinalTabstop);\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get activeChoice() {\n        if (!this._placeholderDecorations) {\n            return undefined;\n        }\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\n            return undefined;\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        if (!id) {\n            return undefined;\n        }\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return { range, choice: placeholder.choice };\n    }\n    get hasChoice() {\n        let result = false;\n        this._snippet.walk(marker => {\n            result = marker instanceof Choice;\n            return !result;\n        });\n        return result;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(nested._offset !== -1);\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetSession = class SnippetSession {\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n        this._editor = _editor;\n        this._template = _template;\n        this._options = _options;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._templateMerges = [];\n        this._snippets = [];\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        const firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        const firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edits[idx]._isTracked = true;\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        if (!editor.hasModel() || snippetEdits.length === 0) {\n            return { edits: [], snippets: [] };\n        }\n        const edits = [];\n        const model = editor.getModel();\n        const parser = new SnippetParser();\n        const snippet = new TextmateSnippet();\n        // snippet variables resolver\n        const resolver = new CompositeSnippetVariableResolver([\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\n            new TimeBasedVariableResolver,\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\n            new RandomBasedVariableResolver,\n        ]);\n        //\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n        let offset = 0;\n        for (let i = 0; i < snippetEdits.length; i++) {\n            const { range, template } = snippetEdits[i];\n            // gaps between snippet edits are appended as text nodes. this\n            // ensures placeholder-offsets are later correct\n            if (i > 0) {\n                const lastRange = snippetEdits[i - 1].range;\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n                const textNode = new Text(model.getValueInRange(textRange));\n                snippet.appendChild(textNode);\n                offset += textNode.value.length;\n            }\n            parser.parseFragment(template, snippet);\n            snippet.resolveVariables(resolver);\n            const snippetText = snippet.toString();\n            const snippetFragmentText = snippetText.slice(offset);\n            offset = snippetText.length;\n            // make edit\n            const edit = EditOperation.replace(range, snippetFragmentText);\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edit._isTracked = true;\n            edits.push(edit);\n        }\n        //\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n        return {\n            edits,\n            snippets: [new OneSnippet(editor, snippet, '')]\n        };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = typeof this._template === 'string'\n            ? SnippetSession.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\n            : SnippetSession.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\n            // are just text insertions and we don't need to merge the nested snippet into the existing\n            // snippet\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\n            if (!isTrivialSnippet) {\n                for (const snippet of this._snippets) {\n                    snippet.merge(snippets);\n                }\n                console.assert(snippets.length === 0);\n            }\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n                return this._move(undefined);\n            }\n            else {\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get hasChoice() {\n        return this._snippets[0].hasChoice;\n    }\n    get activeChoice() {\n        return this._snippets[0].activeChoice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        const allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (const [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n};\nSnippetSession = __decorate([\n    __param(3, ILanguageConfigurationService)\n], SnippetSession);\nexport { SnippetSession };\n", "import { hasDriveLetter } from './extpath.js';\nimport { isWindows } from './platform.js';\nexport function normalizeDriveLetter(path, isWindowsOS = isWindows) {\n    if (hasDriveLetter(path, isWindowsOS)) {\n        return path.charAt(0).toUpperCase() + path.slice(1);\n    }\n    return path;\n}\nlet normalizedUserHomeCached = Object.create(null);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'CURSOR_INDEX': true,\n    'CURSOR_NUMBER': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            const value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        else if (name === 'CURSOR_INDEX') {\n            return String(this._selectionIdx);\n        }\n        else if (name === 'CURSOR_NUMBER') {\n            return String(this._selectionIdx + 1);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\n    constructor(_model, _selection, _languageConfigurationService) {\n        this._model = _model;\n        this._selection = _selection;\n        this._languageConfigurationService = _languageConfigurationService;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n};\nCommentBasedVariableResolver = __decorate([\n    __param(2, ILanguageConfigurationService)\n], CommentBasedVariableResolver);\nexport { CommentBasedVariableResolver };\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        const filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(55 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(67 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run,\n                dispose: () => null\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nexport class DragAndDropController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        const target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    const primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        this._dndDecorationIds.set([{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }]);\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds.clear();\n    }\n    _hitContent(target) {\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        const text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { addExternalEditorsDropData, toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nlet DropIntoEditorController = class DropIntoEditorController extends Disposable {\n    constructor(editor, _bulkEditService, _languageFeaturesService, _progressService, workspaceContextService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n        this._languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultOnDropProvider(workspaceContextService));\n    }\n    onDropIntoEditor(editor, position, dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const initialModelVersion = model.getVersionId();\n            const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\n            if (ourDataTransfer.size === 0) {\n                return;\n            }\n            if (editor.getModel().getVersionId() !== initialModelVersion) {\n                return;\n            }\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */);\n            try {\n                const providers = this._languageFeaturesService.documentOnDropEditProvider.ordered(model);\n                const edit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('dropProgressTitle', \"Running drop handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n                        for (const provider of providers) {\n                            const edit = yield provider.provideDocumentOnDropEdits(model, position, ourDataTransfer, tokenSource.token);\n                            if (tokenSource.token.isCancellationRequested) {\n                                return undefined;\n                            }\n                            if (edit) {\n                                return edit;\n                            }\n                        }\n                        return undefined;\n                    }))(), tokenSource.token);\n                }, () => {\n                    tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested || editor.getModel().getVersionId() !== initialModelVersion) {\n                    return;\n                }\n                if (edit) {\n                    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                    performSnippetEdit(editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, [Selection.fromRange(range, 0 /* SelectionDirection.LTR */)]);\n                    if (edit.additionalEdit) {\n                        yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor });\n                    }\n                    return;\n                }\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    extractDataTransferData(dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer) {\n                return new VSDataTransfer();\n            }\n            const textEditorDataTransfer = toVSDataTransfer(dragEvent.dataTransfer);\n            addExternalEditorsDropData(textEditorDataTransfer, dragEvent);\n            return textEditorDataTransfer;\n        });\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IProgressService),\n    __param(4, IWorkspaceContextService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\nlet DefaultOnDropProvider = class DefaultOnDropProvider {\n    constructor(_workspaceContextService) {\n        this._workspaceContextService = _workspaceContextService;\n    }\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, _token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlListEntry = dataTransfer.get(Mimes.uriList);\n            if (urlListEntry) {\n                const urlList = yield urlListEntry.asString();\n                const snippet = this.getUriListInsertText(urlList);\n                if (snippet) {\n                    return { insertText: snippet };\n                }\n            }\n            const textEntry = (_a = dataTransfer.get('text')) !== null && _a !== void 0 ? _a : dataTransfer.get(Mimes.text);\n            if (textEntry) {\n                const text = yield textEntry.asString();\n                return { insertText: text };\n            }\n            return undefined;\n        });\n    }\n    getUriListInsertText(strUriList) {\n        const uris = [];\n        for (const resource of UriList.parse(strUriList)) {\n            try {\n                uris.push(URI.parse(resource));\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        if (!uris.length) {\n            return;\n        }\n        return uris\n            .map(uri => {\n            const root = this._workspaceContextService.getWorkspaceFolder(uri);\n            if (root) {\n                const rel = relativePath(root.uri, uri);\n                if (rel) {\n                    return rel;\n                }\n            }\n            return uri.fsPath;\n        })\n            .join(' ');\n    }\n};\nDefaultOnDropProvider = __decorate([\n    __param(0, IWorkspaceContextService)\n], DefaultOnDropProvider);\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = class CommonFindController extends Disposable {\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(37 /* EditorOption.find */).loop\n                });\n            }\n        }));\n    }\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController.ID);\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                const selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                const selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                const currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).globalFindClipboard,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const seedSearchStringFromNonEmptySelection = editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection';\n            let selectionSearchString = null;\n            if (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never') {\n                selectionSearchString = getSelectionSearchString(editor, 'single', seedSearchStringFromNonEmptySelection);\n            }\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: seedSearchStringFromNonEmptySelection,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(83 /* EditorOption.readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController);\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\n                || e.reason === 5 /* CursorChangeReason.Undo */\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            const model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(37 /* EditorOption.find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            const findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n    }\n    _prevSearchPosition(before) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        const { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        const nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        const { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const replacePattern = this._getReplacePattern();\n        const selection = this._editor.getSelection();\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                const command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        const editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.removeDecorations(this._allDecorations());\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        const lineBeforeEnd = rng.endLineNumber - 1;\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            const newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            const newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            const ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            const resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\n    if (matches && (matches[0] !== '')) {\n        const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\n        const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\n        if (containsHyphens && !containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\n        }\n        else if (!containsHyphens && containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\n        }\n        if (matches[0].toUpperCase() === matches[0]) {\n            return pattern.toUpperCase();\n        }\n        else if (matches[0].toLowerCase() === matches[0]) {\n            return pattern.toLowerCase();\n        }\n        else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\n            return pattern[0].toUpperCase() + pattern.substr(1);\n        }\n        else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\n            return pattern[0].toLowerCase() + pattern.substr(1);\n        }\n        else {\n            // we don't understand its pattern yet.\n            return pattern;\n        }\n    }\n    else {\n        return pattern;\n    }\n}\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\n}\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\n    const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\n    let replaceString = '';\n    splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\n    });\n    return replaceString.slice(0, -1);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            const piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                const repl = [];\n                const lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                const match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    const caseOps = [];\n    const result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        const chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* CharCode.Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* CharCode.Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* CharCode.n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* CharCode.t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* CharCode.u */:\n                // \\u => upper-cases one character.\n                case 85 /* CharCode.U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* CharCode.l */:\n                // \\l => lower-cases one character.\n                case 76 /* CharCode.L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* CharCode.DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { contrastBorder, editorWidgetBackground, editorWidgetForeground, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService, themeService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const inputActiveOptionBorderColor = themeService.getColorTheme().getColor(inputActiveOptionBorder);\n        const inputActiveOptionForegroundColor = themeService.getColorTheme().getColor(inputActiveOptionForeground);\n        const inputActiveOptionBackgroundColor = themeService.getColorTheme().getColor(inputActiveOptionBackground);\n        this.caseSensitive = this._register(new CaseSensitiveToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            isChecked: this._state.matchCase,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            isChecked: this._state.wholeWord,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            isChecked: this._state.isRegex,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\n        };\n        this.caseSensitive.style(inputStyles);\n        this.wholeWords.style(inputStyles);\n        this.regex.style(inputStyles);\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* FindOptionOverride.True */) {\n        return true;\n    }\n    if (override === 2 /* FindOptionOverride.False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        const changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        const changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, toolbarHoverBackground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(83 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(83 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(133 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(37 /* EditorOption.find */)) {\n                const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(83 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(83 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(77 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputBackground: theme.getColor(inputBackground),\n            inputForeground: theme.getColor(inputForeground),\n            inputBorder: theme.getColor(inputBorder),\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\n        };\n        this._findInput.style(inputStyles);\n        this._replaceInput.style(inputStyles);\n        this._toggleSelectionFind.style(inputStyles);\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        if (this._resized) {\n            this._findInput.inputBox.layout();\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    const selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        actionsContainer.appendChild(this._closeBtn.domNode);\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function showHistoryKeybindingHint(keybindingService) {\n    var _a, _b;\n    return ((_a = keybindingService.lookupKeybinding('history.showPrevious')) === null || _a === void 0 ? void 0 : _a.getElectronAccelerator()) === 'Up' && ((_b = keybindingService.lookupKeybinding('history.showNext')) === null || _b === void 0 ? void 0 : _b.getElectronAccelerator()) === 'Down';\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { foldingCollapsedIcon, FoldingDecorationProvider, foldingExpandedIcon, foldingManualCollapsedIcon, foldingManualExpandedIcon } from './foldingDecorations.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = class FoldingController extends Disposable {\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this._tooManyRegionsNotified = false;\n        this.localToDispose = this._register(new DisposableStore());\n        this.editor = editor;\n        const options = this.editor.getOptions();\n        this._isEnabled = options.get(39 /* EditorOption.folding */);\n        this._useFoldingProviders = options.get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n        this._unfoldOnClickAfterEndOfLine = options.get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n        this._restoringViewState = false;\n        this._currentModelHasFoldedImports = false;\n        this._foldingImportsByDefault = options.get(42 /* EditorOption.foldingImportsByDefault */);\n        this._maxFoldingRegions = options.get(43 /* EditorOption.foldingMaximumRegions */);\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\n        this.foldingModel = null;\n        this.hiddenRangeModel = null;\n        this.rangeProvider = null;\n        this.foldingRegionPromise = null;\n        this.foldingModelPromise = null;\n        this.updateScheduler = null;\n        this.cursorChangedScheduler = null;\n        this.mouseDownInfo = null;\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n        this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n        this.foldingEnabled.set(this._isEnabled);\n        this._notifyTooManyRegions = (maxFoldingRegions) => {\n            // Message will display once per time vscode runs. Once per file would be tricky.\n            if (!this._tooManyRegionsNotified) {\n                notificationService.notify({\n                    severity: Severity.Warning,\n                    sticky: true,\n                    message: nls.localize('maximum fold ranges', \"The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?[\\\"editor.foldingMaximumRegions\\\"]) to enable more.\", maxFoldingRegions)\n                });\n                this._tooManyRegionsNotified = true;\n            }\n        };\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(39 /* EditorOption.folding */)) {\n                this._isEnabled = this.editor.getOptions().get(39 /* EditorOption.folding */);\n                this.foldingEnabled.set(this._isEnabled);\n                this.onModelChanged();\n            }\n            if (e.hasChanged(43 /* EditorOption.foldingMaximumRegions */)) {\n                this._maxFoldingRegions = this.editor.getOptions().get(43 /* EditorOption.foldingMaximumRegions */);\n                this._tooManyRegionsNotified = false;\n                this.onModelChanged();\n            }\n            if (e.hasChanged(101 /* EditorOption.showFoldingControls */) || e.hasChanged(41 /* EditorOption.foldingHighlight */)) {\n                const options = this.editor.getOptions();\n                this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n                this.triggerFoldingModelChanged();\n            }\n            if (e.hasChanged(40 /* EditorOption.foldingStrategy */)) {\n                this._useFoldingProviders = this.editor.getOptions().get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n                this.onFoldingStrategyChanged();\n            }\n            if (e.hasChanged(44 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n            }\n            if (e.hasChanged(42 /* EditorOption.foldingImportsByDefault */)) {\n                this._foldingImportsByDefault = this.editor.getOptions().get(42 /* EditorOption.foldingImportsByDefault */);\n            }\n        }));\n        this.onModelChanged();\n    }\n    static get(editor) {\n        return editor.getContribution(FoldingController.ID);\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n            return {};\n        }\n        if (this.foldingModel) { // disposed ?\n            const collapsedRegions = this.foldingModel.getMemento();\n            const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\n        }\n        return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n            return;\n        }\n        if (!state || state.lineCount !== model.getLineCount()) {\n            return;\n        }\n        this._currentModelHasFoldedImports = !!state.foldedImports;\n        if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\n            this._restoringViewState = true;\n            try {\n                this.foldingModel.applyMemento(state.collapsedRegions);\n            }\n            finally {\n                this._restoringViewState = false;\n            }\n        }\n    }\n    onModelChanged() {\n        this.localToDispose.clear();\n        const model = this.editor.getModel();\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n            // huge files get no view model, so they cannot support hidden areas\n            return;\n        }\n        this._currentModelHasFoldedImports = false;\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n        this.localToDispose.add(this.foldingModel);\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n        this.localToDispose.add(this.hiddenRangeModel);\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n        this.localToDispose.add(this.cursorChangedScheduler);\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n        this.localToDispose.add({\n            dispose: () => {\n                if (this.foldingRegionPromise) {\n                    this.foldingRegionPromise.cancel();\n                    this.foldingRegionPromise = null;\n                }\n                if (this.updateScheduler) {\n                    this.updateScheduler.cancel();\n                }\n                this.updateScheduler = null;\n                this.foldingModel = null;\n                this.foldingModelPromise = null;\n                this.hiddenRangeModel = null;\n                this.cursorChangedScheduler = null;\n                if (this.rangeProvider) {\n                    this.rangeProvider.dispose();\n                }\n                this.rangeProvider = null;\n            }\n        });\n        this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n        if (this.rangeProvider) {\n            this.rangeProvider.dispose();\n        }\n        this.rangeProvider = null;\n        this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n        if (this.rangeProvider) {\n            return this.rangeProvider;\n        }\n        this.rangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._maxFoldingRegions); // fallback\n        if (this._useFoldingProviders && this.foldingModel) {\n            const foldingProviders = this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);\n            if (foldingProviders.length > 0) {\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, foldingProviders, () => this.triggerFoldingModelChanged(), this._maxFoldingRegions);\n            }\n        }\n        return this.rangeProvider;\n    }\n    getFoldingModel() {\n        return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n        var _a;\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\n        this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n        if (this.updateScheduler) {\n            if (this.foldingRegionPromise) {\n                this.foldingRegionPromise.cancel();\n                this.foldingRegionPromise = null;\n            }\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\n                const foldingModel = this.foldingModel;\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\n                    return null;\n                }\n                const sw = new StopWatch(true);\n                const provider = this.getRangeProvider(foldingModel.textModel);\n                const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token, this._notifyTooManyRegions));\n                return foldingRegionPromise.then(foldingRanges => {\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\n                        let scrollState;\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                            if (hasChanges) {\n                                scrollState = StableEditorScrollState.capture(this.editor);\n                                this._currentModelHasFoldedImports = hasChanges;\n                            }\n                        }\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\n                        const selections = this.editor.getSelections();\n                        const selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\n                        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this.editor);\n                        // update debounce info\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n                        if (this.updateScheduler) {\n                            this.updateScheduler.defaultDelay = newValue;\n                        }\n                    }\n                    return foldingModel;\n                });\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return null;\n            });\n        }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n            const selections = this.editor.getSelections();\n            if (selections) {\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\n                    this.editor.setSelections(selections);\n                }\n            }\n        }\n        this.editor.setHiddenAreas(hiddenRanges);\n    }\n    onCursorPositionChanged() {\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n            this.cursorChangedScheduler.schedule();\n        }\n    }\n    revealCursor() {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel) {\n            return;\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                const selections = this.editor.getSelections();\n                if (selections && selections.length > 0) {\n                    const toToggle = [];\n                    for (const selection of selections) {\n                        const lineNumber = selection.selectionStartLineNumber;\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n                        }\n                    }\n                    if (toToggle.length) {\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal(selections[0].getPosition());\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n        this.mouseDownInfo = null;\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n            return;\n        }\n        if (!e.event.leftButton && !e.event.middleButton) {\n            return;\n        }\n        const range = e.target.range;\n        let iconClicked = false;\n        switch (e.target.type) {\n            case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */: {\n                const data = e.target.detail;\n                const offsetLeftInGutter = e.target.element.offsetLeft;\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n                if (gutterOffsetX < 5) { // the whitespace between the border and the real folding icon border is 5px\n                    return;\n                }\n                iconClicked = true;\n                break;\n            }\n            case 7 /* MouseTargetType.CONTENT_EMPTY */: {\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n                    const data = e.target.detail;\n                    if (!data.isAfterLines) {\n                        break;\n                    }\n                }\n                return;\n            }\n            case 6 /* MouseTargetType.CONTENT_TEXT */: {\n                if (this.hiddenRangeModel.hasRanges()) {\n                    const model = this.editor.getModel();\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                        break;\n                    }\n                }\n                return;\n            }\n            default:\n                return;\n        }\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\n    }\n    onEditorMouseUp(e) {\n        const foldingModel = this.foldingModel;\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\n            return;\n        }\n        const lineNumber = this.mouseDownInfo.lineNumber;\n        const iconClicked = this.mouseDownInfo.iconClicked;\n        const range = e.target.range;\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n        if (iconClicked) {\n            if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n                return;\n            }\n        }\n        else {\n            const model = this.editor.getModel();\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n                return;\n            }\n        }\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region && region.startLineNumber === lineNumber) {\n            const isCollapsed = region.isCollapsed;\n            if (iconClicked || isCollapsed) {\n                const surrounding = e.event.altKey;\n                let toToggle = [];\n                if (surrounding) {\n                    const filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n                    const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n                    for (const r of toMaybeToggle) {\n                        if (r.isCollapsed) {\n                            toToggle.push(r);\n                        }\n                    }\n                    // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n                    if (toToggle.length === 0) {\n                        toToggle = toMaybeToggle;\n                    }\n                }\n                else {\n                    const recursive = e.event.middleButton || e.event.shiftKey;\n                    if (recursive) {\n                        for (const r of foldingModel.getRegionsInside(region)) {\n                            if (r.isCollapsed === isCollapsed) {\n                                toToggle.push(r);\n                            }\n                        }\n                    }\n                    // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n                    if (isCollapsed || !recursive || toToggle.length === 0) {\n                        toToggle.push(region);\n                    }\n                }\n                foldingModel.toggleCollapseState(toToggle);\n                this.reveal({ lineNumber, column: 1 });\n            }\n        }\n    }\n    reveal(position) {\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n    }\n};\nFoldingController.ID = 'editor.contrib.folding';\nFoldingController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageConfigurationService),\n    __param(3, INotificationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], FoldingController);\nexport { FoldingController };\nclass FoldingAction extends EditorAction {\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const foldingController = FoldingController.get(editor);\n        if (!foldingController) {\n            return;\n        }\n        const foldingModelPromise = foldingController.getFoldingModel();\n        if (foldingModelPromise) {\n            this.reportTelemetry(accessor, editor);\n            return foldingModelPromise.then(foldingModel => {\n                if (foldingModel) {\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n                    const selection = editor.getSelection();\n                    if (selection) {\n                        foldingController.reveal(selection.getStartPosition());\n                    }\n                }\n            });\n        }\n    }\n    getSelectedLines(editor) {\n        const selections = editor.getSelections();\n        return selections ? selections.map(s => s.startLineNumber) : [];\n    }\n    getLineNumbers(args, editor) {\n        if (args && args.selectionLines) {\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n        }\n        return this.getSelectedLines(editor);\n    }\n    run(_accessor, _editor) {\n    }\n}\nfunction foldingArgumentsConstraint(args) {\n    if (!types.isUndefined(args)) {\n        if (!types.isObject(args)) {\n            return false;\n        }\n        const foldingArgs = args;\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!types.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n            return false;\n        }\n    }\n    return true;\n}\nclass UnfoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfold',\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\n            alias: 'Unfold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.BracketRight */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Unfold the content in the editor',\n                args: [\n                    {\n                        name: 'Unfold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                    'default': 1\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                    'default': 'down'\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const levels = args && args.levels || 1;\n        const lineNumbers = this.getLineNumbers(args, editor);\n        if (args && args.direction === 'up') {\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n        }\n        else {\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n        }\n    }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldRecursively',\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n            alias: 'Unfold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, _args) {\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n    }\n}\nclass FoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.fold',\n            label: nls.localize('foldAction.label', \"Fold\"),\n            alias: 'Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.BracketLeft */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Fold the content in the editor',\n                args: [\n                    {\n                        name: 'Fold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const lineNumbers = this.getLineNumbers(args, editor);\n        const levels = args && args.levels;\n        const direction = args && args.direction;\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n            setCollapseStateUp(foldingModel, true, lineNumbers);\n        }\n        else {\n            if (direction === 'up') {\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n            }\n            else {\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n            }\n        }\n    }\n}\nclass ToggleFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.toggleFold',\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n            alias: 'Toggle Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        toggleCollapseState(foldingModel, 1, selectedLines);\n    }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldRecursively',\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n            alias: 'Fold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n    }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllBlockComments',\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n            alias: 'Fold All Block Comments',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n            if (comments && comments.blockCommentStartToken) {\n                const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllMarkerRegions',\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n            alias: 'Fold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllMarkerRegions',\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n            alias: 'Unfold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\n            }\n        }\n    }\n}\nclass FoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllExcept',\n            label: nls.localize('foldAllExcept.label', \"Fold All Regions Except Selected\"),\n            alias: 'Fold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 83 /* KeyCode.Minus */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, true, selectedLines);\n    }\n}\nclass UnfoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllExcept',\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Regions Except Selected\"),\n            alias: 'Unfold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 81 /* KeyCode.Equal */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, false, selectedLines);\n    }\n}\nclass FoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAll',\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\n            alias: 'Fold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, true);\n    }\n}\nclass UnfoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAll',\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n            alias: 'Unfold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, false);\n    }\n}\nclass FoldLevelAction extends FoldingAction {\n    getFoldingLevel() {\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n}\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoParentFold',\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n            alias: 'Go to Parent Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoPreviousFold',\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n            alias: 'Go to Previous Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoNextFold',\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n            alias: 'Go to Next Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\nclass FoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.createFoldingRangeFromSelection',\n            label: nls.localize('createManualFoldRange.label', \"Create Manual Folding Range from Selection\"),\n            alias: 'Create Folding Range from Selection',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 82 /* KeyCode.Comma */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        var _a;\n        const collapseRanges = [];\n        const selections = editor.getSelections();\n        if (selections) {\n            for (const selection of selections) {\n                let endLineNumber = selection.endLineNumber;\n                if (selection.endColumn === 1) {\n                    --endLineNumber;\n                }\n                if (endLineNumber > selection.startLineNumber) {\n                    collapseRanges.push({\n                        startLineNumber: selection.startLineNumber,\n                        endLineNumber: endLineNumber,\n                        type: undefined,\n                        isCollapsed: true,\n                        source: 1 /* FoldSource.userDefined */\n                    });\n                    editor.setSelection({\n                        startLineNumber: selection.startLineNumber,\n                        startColumn: 1,\n                        endLineNumber: selection.startLineNumber,\n                        endColumn: 1\n                    });\n                }\n            }\n            if (collapseRanges.length > 0) {\n                collapseRanges.sort((a, b) => {\n                    return a.startLineNumber - b.startLineNumber;\n                });\n                const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLineCount());\n                foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n            }\n        }\n    }\n}\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.removeManualFoldingRanges',\n            label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\n            alias: 'Remove Manual Folding Ranges',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(foldingController, foldingModel, editor) {\n        const selections = editor.getSelections();\n        if (selections) {\n            const ranges = [];\n            for (const selection of selections) {\n                const { startLineNumber, endLineNumber } = selection;\n                ranges.push(endLineNumber >= startLineNumber ? { startLineNumber, endLineNumber } : { endLineNumber, startLineNumber });\n            }\n            foldingModel.removeManualRanges(ranges);\n            foldingController.triggerFoldingModelChanged();\n        }\n    }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController);\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllRegionsExceptAction);\nregisterEditorAction(UnfoldAllRegionsExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nregisterEditorAction(FoldRangeFromSelectionAction);\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\nfor (let i = 1; i <= 7; i++) {\n    registerInstantiatedEditorAction(new FoldLevelAction({\n        id: FoldLevelAction.ID(i),\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n        alias: `Fold Level ${i}`,\n        precondition: CONTEXT_FOLDING_ENABLED,\n        kbOpts: {\n            kbExpr: EditorContextKeys.editorTextFocus,\n            primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | (21 /* KeyCode.Digit0 */ + i)),\n            weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n    }));\n}\nexport const foldBackgroundBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, nls.localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nexport const editorFoldForeground = registerColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, nls.localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nregisterThemingParticipant((theme, collector) => {\n    const foldBackground = theme.getColor(foldBackgroundBackground);\n    if (foldBackground) {\n        collector.addRule(`.monaco-editor .folded-background { background-color: ${foldBackground}; }`);\n    }\n    const editorFoldColor = theme.getColor(editorFoldForeground);\n    if (editorFoldColor) {\n        collector.addRule(`\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingCollapsedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualCollapsedIcon)} {\n\t\t\tcolor: ${editorFoldColor} !important;\n\t\t}\n\t\t`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { hash } from '../../../../base/common/hash.js';\nexport class FoldingModel {\n    constructor(textModel, decorationProvider) {\n        this._updateEventEmitter = new Emitter();\n        this.onDidChange = this._updateEventEmitter.event;\n        this._textModel = textModel;\n        this._decorationProvider = decorationProvider;\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n        this._editorDecorationIds = [];\n    }\n    get regions() { return this._regions; }\n    get textModel() { return this._textModel; }\n    toggleCollapseState(toggledRegions) {\n        if (!toggledRegions.length) {\n            return;\n        }\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n        const processed = {};\n        this._decorationProvider.changeDecorations(accessor => {\n            let k = 0; // index from [0 ... this.regions.length]\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n            let lastHiddenLine = -1; // the end of the last hidden lines\n            const updateDecorationsUntil = (index) => {\n                while (k < index) {\n                    const endLineNumber = this._regions.getEndLineNumber(k);\n                    const isCollapsed = this._regions.isCollapsed(k);\n                    if (endLineNumber <= dirtyRegionEndLine) {\n                        const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\n                    }\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\n                        lastHiddenLine = endLineNumber;\n                    }\n                    k++;\n                }\n            };\n            for (const region of toggledRegions) {\n                const index = region.regionIndex;\n                const editorDecorationId = this._editorDecorationIds[index];\n                if (editorDecorationId && !processed[editorDecorationId]) {\n                    processed[editorDecorationId] = true;\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n                    const newCollapseState = !this._regions.isCollapsed(index);\n                    this._regions.setCollapsed(index, newCollapseState);\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n                }\n            }\n            updateDecorationsUntil(this._regions.length);\n        });\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\n    }\n    removeManualRanges(ranges) {\n        const newFoldingRanges = new Array();\n        const intersects = (foldRange) => {\n            for (const range of ranges) {\n                if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        for (let i = 0; i < this._regions.length; i++) {\n            const foldRange = this._regions.toFoldRange(i);\n            if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\n                newFoldingRanges.push(foldRange);\n            }\n        }\n        this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\n    }\n    update(newRegions, blockedLineNumers = []) {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges(blockedLineNumers);\n        const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount());\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    updatePost(newRegions) {\n        const newEditorDecorations = [];\n        let lastHiddenLine = -1;\n        for (let index = 0, limit = newRegions.length; index < limit; index++) {\n            const startLineNumber = newRegions.getStartLineNumber(index);\n            const endLineNumber = newRegions.getEndLineNumber(index);\n            const isCollapsed = newRegions.isCollapsed(index);\n            const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\n            const decorationRange = {\n                startLineNumber: startLineNumber,\n                startColumn: this._textModel.getLineMaxColumn(startLineNumber),\n                endLineNumber: endLineNumber,\n                endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\n            };\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual) });\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\n                lastHiddenLine = endLineNumber;\n            }\n        }\n        this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\n        this._regions = newRegions;\n        this._updateEventEmitter.fire({ model: this });\n    }\n    _currentFoldedOrManualRanges(blockedLineNumers = []) {\n        const isBlocked = (startLineNumber, endLineNumber) => {\n            for (const blockedLineNumber of blockedLineNumers) {\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\n                    return true;\n                }\n            }\n            return false;\n        };\n        const foldedRanges = [];\n        for (let i = 0, limit = this._regions.length; i < limit; i++) {\n            let isCollapsed = this.regions.isCollapsed(i);\n            const source = this.regions.getSource(i);\n            if (isCollapsed || source !== 0 /* FoldSource.provider */) {\n                const foldRange = this._regions.toFoldRange(i);\n                const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n                if (decRange) {\n                    if (isCollapsed && (isBlocked(decRange.startLineNumber, decRange.endLineNumber) || decRange.endLineNumber - decRange.startLineNumber !== foldRange.endLineNumber - foldRange.startLineNumber)) {\n                        isCollapsed = false; // uncollapse is the range is blocked or there has been lines removed or added\n                    }\n                    foldedRanges.push({\n                        startLineNumber: decRange.startLineNumber,\n                        endLineNumber: decRange.endLineNumber,\n                        type: foldRange.type,\n                        isCollapsed,\n                        source\n                    });\n                }\n            }\n        }\n        return foldedRanges;\n    }\n    /**\n     * Collapse state memento, for persistence only\n     */\n    getMemento() {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges();\n        const result = [];\n        for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\n            const range = foldedOrManualRanges[i];\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            result.push({\n                startLineNumber: range.startLineNumber,\n                endLineNumber: range.endLineNumber,\n                isCollapsed: range.isCollapsed,\n                source: range.source,\n                checksum: checksum\n            });\n        }\n        return (result.length > 0) ? result : undefined;\n    }\n    /**\n     * Apply persisted state, for persistence only\n     */\n    applyMemento(state) {\n        var _a, _b;\n        if (!Array.isArray(state)) {\n            return;\n        }\n        const rangesToRestore = [];\n        const maxLineNumber = this._textModel.getLineCount();\n        for (const range of state) {\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n                continue;\n            }\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            if (!range.checksum || checksum === range.checksum) {\n                rangesToRestore.push({\n                    startLineNumber: range.startLineNumber,\n                    endLineNumber: range.endLineNumber,\n                    type: undefined,\n                    isCollapsed: (_a = range.isCollapsed) !== null && _a !== void 0 ? _a : true,\n                    source: (_b = range.source) !== null && _b !== void 0 ? _b : 0 /* FoldSource.provider */\n                });\n            }\n        }\n        const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    _getLinesChecksum(lineNumber1, lineNumber2) {\n        const h = hash(this._textModel.getLineContent(lineNumber1)\n            + this._textModel.getLineContent(lineNumber2));\n        return h % 1000000; // 6 digits is plenty\n    }\n    dispose() {\n        this._decorationProvider.removeDecorations(this._editorDecorationIds);\n    }\n    getAllRegionsAtLine(lineNumber, filter) {\n        const result = [];\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            let level = 1;\n            while (index >= 0) {\n                const current = this._regions.toRegion(index);\n                if (!filter || filter(current, level)) {\n                    result.push(current);\n                }\n                level++;\n                index = current.parentIndex;\n            }\n        }\n        return result;\n    }\n    getRegionAtLine(lineNumber) {\n        if (this._regions) {\n            const index = this._regions.findRange(lineNumber);\n            if (index >= 0) {\n                return this._regions.toRegion(index);\n            }\n        }\n        return null;\n    }\n    getRegionsInside(region, filter) {\n        const result = [];\n        const index = region ? region.regionIndex + 1 : 0;\n        const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n        if (filter && filter.length === 2) {\n            const levelStack = [];\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n                        levelStack.pop();\n                    }\n                    levelStack.push(current);\n                    if (filter(current, levelStack.length)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    if (!filter || filter(current)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region) {\n            const doCollapse = !region.isCollapsed;\n            toToggle.push(region);\n            if (levels > 1) {\n                const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                toToggle.push(...regionsInside);\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n    const toToggle = [];\n    if (lineNumbers && lineNumbers.length > 0) {\n        for (const lineNumber of lineNumbers) {\n            const region = foldingModel.getRegionAtLine(lineNumber);\n            if (region) {\n                if (region.isCollapsed !== doCollapse) {\n                    toToggle.push(region);\n                }\n                if (levels > 1) {\n                    const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                    toToggle.push(...regionsInside);\n                }\n            }\n        }\n    }\n    else {\n        const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n        toToggle.push(...regions);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\n        if (regions.length > 0) {\n            toToggle.push(regions[0]);\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n    const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n    const filteredRegions = [];\n    for (const lineNumber of blockedLineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n        if (regions.length > 0) {\n            filteredRegions.push(regions[0]);\n        }\n    }\n    const filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n    const editorModel = foldingModel.textModel;\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i)) {\n            const startLineNumber = regions.getStartLineNumber(i);\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n                toToggle.push(regions.toRegion(i));\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n            toToggle.push(regions.toRegion(i));\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n    let startLineNumber = null;\n    const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    if (foldingRegion !== null) {\n        startLineNumber = foldingRegion.startLineNumber;\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n        if (lineNumber === startLineNumber) {\n            const parentFoldingIdx = foldingRegion.parentIndex;\n            if (parentFoldingIdx !== -1) {\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n            }\n            else {\n                startLineNumber = null;\n            }\n        }\n    }\n    return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to previous sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n        if (lineNumber !== foldingRegion.startLineNumber) {\n            return foldingRegion.startLineNumber;\n        }\n        else {\n            // Find min line number to stay within parent.\n            const expectedParentIndex = foldingRegion.parentIndex;\n            let minLineNumber = 0;\n            if (expectedParentIndex !== -1) {\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n            }\n            // Find fold at same level.\n            while (foldingRegion !== null) {\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                    // Keep at same level.\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\n                        return null;\n                    }\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\n                        return foldingRegion.startLineNumber;\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n    }\n    else {\n        // Go to last fold that's before the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n            while (foldingRegion !== null) {\n                // Found fold before current line.\n                if (foldingRegion.startLineNumber < lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to next sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // Find max line number to stay within parent.\n        const expectedParentIndex = foldingRegion.parentIndex;\n        let maxLineNumber = 0;\n        if (expectedParentIndex !== -1) {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n        }\n        else if (foldingModel.regions.length === 0) {\n            return null;\n        }\n        else {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n        }\n        // Find fold at same level.\n        while (foldingRegion !== null) {\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                // Keep at same level.\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\n                    return null;\n                }\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\n                    return foldingRegion.startLineNumber;\n                }\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    else {\n        // Go to first fold that's after the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(0);\n            while (foldingRegion !== null) {\n                // Found fold after current line.\n                if (foldingRegion.startLineNumber > lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nclass BitField {\n    constructor(size) {\n        const numWords = Math.ceil(size / 32);\n        this._states = new Uint32Array(numWords);\n    }\n    get(index) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        return (this._states[arrayIndex] & (1 << bit)) !== 0;\n    }\n    set(index, newState) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        const value = this._states[arrayIndex];\n        if (newState) {\n            this._states[arrayIndex] = value | (1 << bit);\n        }\n        else {\n            this._states[arrayIndex] = value & ~(1 << bit);\n        }\n    }\n}\nexport class FoldingRegions {\n    constructor(startIndexes, endIndexes, types) {\n        this.sourceAbbr = {\n            [0 /* FoldSource.provider */]: ' ',\n            [1 /* FoldSource.userDefined */]: 'u',\n            [2 /* FoldSource.recovered */]: 'r',\n        };\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n            throw new Error('invalid startIndexes or endIndexes size');\n        }\n        this._startIndexes = startIndexes;\n        this._endIndexes = endIndexes;\n        this._collapseStates = new BitField(startIndexes.length);\n        this._userDefinedStates = new BitField(startIndexes.length);\n        this._recoveredStates = new BitField(startIndexes.length);\n        this._types = types;\n        this._parentsComputed = false;\n    }\n    ensureParentIndices() {\n        if (!this._parentsComputed) {\n            this._parentsComputed = true;\n            const parentIndexes = [];\n            const isInsideLast = (startLineNumber, endLineNumber) => {\n                const index = parentIndexes[parentIndexes.length - 1];\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n            };\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n                const startLineNumber = this._startIndexes[i];\n                const endLineNumber = this._endIndexes[i];\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n                }\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n                    parentIndexes.pop();\n                }\n                const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n                parentIndexes.push(i);\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n            }\n        }\n    }\n    get length() {\n        return this._startIndexes.length;\n    }\n    getStartLineNumber(index) {\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getEndLineNumber(index) {\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getType(index) {\n        return this._types ? this._types[index] : undefined;\n    }\n    hasTypes() {\n        return !!this._types;\n    }\n    isCollapsed(index) {\n        return this._collapseStates.get(index);\n    }\n    setCollapsed(index, newState) {\n        this._collapseStates.set(index, newState);\n    }\n    isUserDefined(index) {\n        return this._userDefinedStates.get(index);\n    }\n    setUserDefined(index, newState) {\n        return this._userDefinedStates.set(index, newState);\n    }\n    isRecovered(index) {\n        return this._recoveredStates.get(index);\n    }\n    setRecovered(index, newState) {\n        return this._recoveredStates.set(index, newState);\n    }\n    getSource(index) {\n        if (this.isUserDefined(index)) {\n            return 1 /* FoldSource.userDefined */;\n        }\n        else if (this.isRecovered(index)) {\n            return 2 /* FoldSource.recovered */;\n        }\n        return 0 /* FoldSource.provider */;\n    }\n    setSource(index, source) {\n        if (source === 1 /* FoldSource.userDefined */) {\n            this.setUserDefined(index, true);\n            this.setRecovered(index, false);\n        }\n        else if (source === 2 /* FoldSource.recovered */) {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, true);\n        }\n        else {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, false);\n        }\n    }\n    setCollapsedAllOfType(type, newState) {\n        let hasChanged = false;\n        if (this._types) {\n            for (let i = 0; i < this._types.length; i++) {\n                if (this._types[i] === type) {\n                    this.setCollapsed(i, newState);\n                    hasChanged = true;\n                }\n            }\n        }\n        return hasChanged;\n    }\n    toRegion(index) {\n        return new FoldingRegion(this, index);\n    }\n    getParentIndex(index) {\n        this.ensureParentIndices();\n        const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n        if (parent === MAX_FOLDING_REGIONS) {\n            return -1;\n        }\n        return parent;\n    }\n    contains(index, line) {\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n    }\n    findIndex(line) {\n        let low = 0, high = this._startIndexes.length;\n        if (high === 0) {\n            return -1; // no children\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (line < this.getStartLineNumber(mid)) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        return low - 1;\n    }\n    findRange(line) {\n        let index = this.findIndex(line);\n        if (index >= 0) {\n            const endLineNumber = this.getEndLineNumber(index);\n            if (endLineNumber >= line) {\n                return index;\n            }\n            index = this.getParentIndex(index);\n            while (index !== -1) {\n                if (this.contains(index, line)) {\n                    return index;\n                }\n                index = this.getParentIndex(index);\n            }\n        }\n        return -1;\n    }\n    toString() {\n        const res = [];\n        for (let i = 0; i < this.length; i++) {\n            res[i] = `[${this.sourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n        }\n        return res.join(', ');\n    }\n    toFoldRange(index) {\n        return {\n            startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\n            endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\n            type: this._types ? this._types[index] : undefined,\n            isCollapsed: this.isCollapsed(index),\n            source: this.getSource(index)\n        };\n    }\n    static fromFoldRanges(ranges) {\n        const rangesLength = ranges.length;\n        const startIndexes = new Uint32Array(rangesLength);\n        const endIndexes = new Uint32Array(rangesLength);\n        let types = [];\n        let gotTypes = false;\n        for (let i = 0; i < rangesLength; i++) {\n            const range = ranges[i];\n            startIndexes[i] = range.startLineNumber;\n            endIndexes[i] = range.endLineNumber;\n            types.push(range.type);\n            if (range.type) {\n                gotTypes = true;\n            }\n        }\n        if (!gotTypes) {\n            types = undefined;\n        }\n        const regions = new FoldingRegions(startIndexes, endIndexes, types);\n        for (let i = 0; i < rangesLength; i++) {\n            if (ranges[i].isCollapsed) {\n                regions.setCollapsed(i, true);\n            }\n            regions.setSource(i, ranges[i].source);\n        }\n        return regions;\n    }\n    /**\n     * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\n     * Each input must be pre-sorted on startLineNumber.\n     * The first list is assumed to always include all regions currently defined by range providers.\n     * The second list only contains the previously collapsed and all manual ranges.\n     * If the line position matches, the range of the new range is taken, and the range is no longer manual\n     * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\n     * overlapping entries in the first list are discarded.\n     * Invalid entries are discarded. An entry is invalid if:\n     * \t\tthe start and end line numbers aren't a valid range of line numbers,\n     * \t\tit is out of sequence or has the same start line as a preceding entry,\n     * \t\tit overlaps a preceding entry and is not fully contained by that entry.\n     */\n    static sanitizeAndMerge(rangesA, rangesB, maxLineNumber) {\n        maxLineNumber = maxLineNumber !== null && maxLineNumber !== void 0 ? maxLineNumber : Number.MAX_VALUE;\n        const getIndexedFunction = (r, limit) => {\n            return Array.isArray(r)\n                ? ((i) => { return (i < limit) ? r[i] : undefined; })\n                : ((i) => { return (i < limit) ? r.toFoldRange(i) : undefined; });\n        };\n        const getA = getIndexedFunction(rangesA, rangesA.length);\n        const getB = getIndexedFunction(rangesB, rangesB.length);\n        let indexA = 0;\n        let indexB = 0;\n        let nextA = getA(0);\n        let nextB = getB(0);\n        const stackedRanges = [];\n        let topStackedRange;\n        let prevLineNumber = 0;\n        const resultRanges = [];\n        while (nextA || nextB) {\n            let useRange = undefined;\n            if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\n                if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\n                    if (nextB.source === 1 /* FoldSource.userDefined */) {\n                        // a user defined range (possibly unfolded)\n                        useRange = nextB;\n                    }\n                    else {\n                        // a previously folded range or a (possibly unfolded) recovered range\n                        useRange = nextA;\n                        useRange.isCollapsed = nextB.isCollapsed && nextA.endLineNumber === nextB.endLineNumber;\n                        useRange.source = 0 /* FoldSource.provider */;\n                    }\n                    nextA = getA(++indexA); // not necessary, just for speed\n                }\n                else {\n                    useRange = nextB;\n                    if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\n                        // a previously collapsed range\n                        useRange.source = 2 /* FoldSource.recovered */;\n                    }\n                }\n                nextB = getB(++indexB);\n            }\n            else {\n                // nextA is next. The user folded B set takes precedence and we sometimes need to look\n                // ahead in it to check for an upcoming conflict.\n                let scanIndex = indexB;\n                let prescanB = nextB;\n                while (true) {\n                    if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\n                        useRange = nextA;\n                        break; // no conflict, use this nextA\n                    }\n                    if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\n                        // we found a user folded range, it wins\n                        break; // without setting nextResult, so this nextA gets skipped\n                    }\n                    prescanB = getB(++scanIndex);\n                }\n                nextA = getA(++indexA);\n            }\n            if (useRange) {\n                while (topStackedRange\n                    && topStackedRange.endLineNumber < useRange.startLineNumber) {\n                    topStackedRange = stackedRanges.pop();\n                }\n                if (useRange.endLineNumber > useRange.startLineNumber\n                    && useRange.startLineNumber > prevLineNumber\n                    && useRange.endLineNumber <= maxLineNumber\n                    && (!topStackedRange\n                        || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\n                    resultRanges.push(useRange);\n                    prevLineNumber = useRange.startLineNumber;\n                    if (topStackedRange) {\n                        stackedRanges.push(topStackedRange);\n                    }\n                    topStackedRange = useRange;\n                }\n            }\n        }\n        return resultRanges;\n    }\n}\nexport class FoldingRegion {\n    constructor(ranges, index) {\n        this.ranges = ranges;\n        this.index = index;\n    }\n    get startLineNumber() {\n        return this.ranges.getStartLineNumber(this.index);\n    }\n    get endLineNumber() {\n        return this.ranges.getEndLineNumber(this.index);\n    }\n    get regionIndex() {\n        return this.index;\n    }\n    get parentIndex() {\n        return this.ranges.getParentIndex(this.index);\n    }\n    get isCollapsed() {\n        return this.ranges.isCollapsed(this.index);\n    }\n    containedBy(range) {\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n    }\n    containsLine(lineNumber) {\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n    constructor(model) {\n        this._updateEventEmitter = new Emitter();\n        this._hasLineChanges = false;\n        this._foldingModel = model;\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n        this._hiddenRanges = [];\n        if (model.regions.length) {\n            this.updateHiddenRanges();\n        }\n    }\n    get onDidChange() { return this._updateEventEmitter.event; }\n    get hiddenRanges() { return this._hiddenRanges; }\n    notifyChangeModelContent(e) {\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\n            this._hasLineChanges = e.changes.some(change => {\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n            });\n        }\n    }\n    updateHiddenRanges() {\n        let updateHiddenAreas = false;\n        const newHiddenAreas = [];\n        let i = 0; // index into hidden\n        let k = 0;\n        let lastCollapsedStart = Number.MAX_VALUE;\n        let lastCollapsedEnd = -1;\n        const ranges = this._foldingModel.regions;\n        for (; i < ranges.length; i++) {\n            if (!ranges.isCollapsed(i)) {\n                continue;\n            }\n            const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n            const endLineNumber = ranges.getEndLineNumber(i);\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n                // ignore ranges contained in collapsed regions\n                continue;\n            }\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n                // reuse the old ranges\n                newHiddenAreas.push(this._hiddenRanges[k]);\n                k++;\n            }\n            else {\n                updateHiddenAreas = true;\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n            }\n            lastCollapsedStart = startLineNumber;\n            lastCollapsedEnd = endLineNumber;\n        }\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n            this.applyHiddenRanges(newHiddenAreas);\n        }\n    }\n    applyHiddenRanges(newHiddenAreas) {\n        this._hiddenRanges = newHiddenAreas;\n        this._hasLineChanges = false;\n        this._updateEventEmitter.fire(newHiddenAreas);\n    }\n    hasRanges() {\n        return this._hiddenRanges.length > 0;\n    }\n    isHidden(line) {\n        return findRange(this._hiddenRanges, line) !== null;\n    }\n    adjustSelections(selections) {\n        let hasChanges = false;\n        const editorModel = this._foldingModel.textModel;\n        let lastRange = null;\n        const adjustLine = (line) => {\n            if (!lastRange || !isInside(line, lastRange)) {\n                lastRange = findRange(this._hiddenRanges, line);\n            }\n            if (lastRange) {\n                return lastRange.startLineNumber - 1;\n            }\n            return null;\n        };\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            const adjustedStartLine = adjustLine(selection.startLineNumber);\n            if (adjustedStartLine) {\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n                hasChanges = true;\n            }\n            const adjustedEndLine = adjustLine(selection.endLineNumber);\n            if (adjustedEndLine) {\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n                hasChanges = true;\n            }\n            selections[i] = selection;\n        }\n        return hasChanges;\n    }\n    dispose() {\n        if (this.hiddenRanges.length > 0) {\n            this._hiddenRanges = [];\n            this._updateEventEmitter.fire(this._hiddenRanges);\n        }\n        if (this._foldingModelListener) {\n            this._foldingModelListener.dispose();\n            this._foldingModelListener = null;\n        }\n    }\n}\nfunction isInside(line, range) {\n    return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n    const i = findFirstInSorted(ranges, r => line < r.startLineNumber) - 1;\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\n        return ranges[i];\n    }\n    return null;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nexport const ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n    constructor(editorModel, languageConfigurationService, maxFoldingRegions) {\n        this.editorModel = editorModel;\n        this.languageConfigurationService = languageConfigurationService;\n        this.maxFoldingRegions = maxFoldingRegions;\n        this.id = ID_INDENT_PROVIDER;\n    }\n    dispose() { }\n    compute(cancelationToken, notifyTooManyRegions) {\n        const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n        const offSide = foldingRules && !!foldingRules.offSide;\n        const markers = foldingRules && foldingRules.markers;\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.maxFoldingRegions, notifyTooManyRegions));\n    }\n}\n// public only for testing\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._indentOccurrences = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    insertFirst(startLineNumber, endLineNumber, indent) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._length++;\n        if (indent < 1000) {\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n        }\n    }\n    toIndentRanges(model) {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n                startIndexes[k] = this._startIndexes[i];\n                endIndexes[k] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxIndent = this._indentOccurrences.length;\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\n                const n = this._indentOccurrences[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxIndent = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const tabSize = model.getOptions().tabSize;\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\n                const startIndex = this._startIndexes[i];\n                const lineContent = model.getLineContent(startIndex);\n                const indent = computeIndentLevel(lineContent, tabSize);\n                if (indent < maxIndent || (indent === maxIndent && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = startIndex;\n                    endIndexes[k] = this._endIndexes[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n    }\n}\nexport function computeRanges(model, offSide, markers, foldingRangesLimit, notifyTooManyRegions) {\n    const tabSize = model.getOptions().tabSize;\n    foldingRangesLimit = foldingRangesLimit !== null && foldingRangesLimit !== void 0 ? foldingRangesLimit : MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT;\n    const result = new RangesCollector(foldingRangesLimit, notifyTooManyRegions);\n    let pattern = undefined;\n    if (markers) {\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n    }\n    const previousRegions = [];\n    const line = model.getLineCount() + 1;\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\n    for (let line = model.getLineCount(); line > 0; line--) {\n        const lineContent = model.getLineContent(line);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        let previous = previousRegions[previousRegions.length - 1];\n        if (indent === -1) {\n            if (offSide) {\n                // for offSide languages, empty lines are associated to the previous block\n                // note: the next block is already written to the results, so this only\n                // impacts the end position of the block before\n                previous.endAbove = line;\n            }\n            continue; // only whitespace\n        }\n        let m;\n        if (pattern && (m = lineContent.match(pattern))) {\n            // folding pattern match\n            if (m[1]) { // start pattern match\n                // discard all regions until the folding pattern\n                let i = previousRegions.length - 1;\n                while (i > 0 && previousRegions[i].indent !== -2) {\n                    i--;\n                }\n                if (i > 0) {\n                    previousRegions.length = i + 1;\n                    previous = previousRegions[i];\n                    // new folding range from pattern, includes the end line\n                    result.insertFirst(line, previous.line, indent);\n                    previous.line = line;\n                    previous.indent = indent;\n                    previous.endAbove = line;\n                    continue;\n                }\n                else {\n                    // no end marker found, treat line as a regular line\n                }\n            }\n            else { // end pattern match\n                previousRegions.push({ indent: -2, endAbove: line, line });\n                continue;\n            }\n        }\n        if (previous.indent > indent) {\n            // discard all regions with larger indent\n            do {\n                previousRegions.pop();\n                previous = previousRegions[previousRegions.length - 1];\n            } while (previous.indent > indent);\n            // new folding range\n            const endLineNumber = previous.endAbove - 1;\n            if (endLineNumber - line >= 1) { // needs at east size 1\n                result.insertFirst(line, endLineNumber, indent);\n            }\n        }\n        if (previous.indent === indent) {\n            previous.endAbove = line;\n        }\n        else { // previous.indent < indent\n            // new region with a bigger indent\n            previousRegions.push({ indent, endAbove: line, line });\n        }\n    }\n    return result.toIndentRanges(model);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\nexport class FoldingDecorationProvider {\n    constructor(editor) {\n        this.editor = editor;\n        this.showFoldingControls = 'mouseover';\n        this.showFoldingHighlights = true;\n    }\n    getDecorationOption(isCollapsed, isHidden, isManual) {\n        if (isHidden // is inside another collapsed region\n            || this.showFoldingControls === 'never') {\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n        }\n        if (isCollapsed) {\n            return isManual ?\n                (this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n                : (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n        }\n        else if (this.showFoldingControls === 'mouseover') {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n        }\n        else {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n        }\n    }\n    changeDecorations(callback) {\n        return this.editor.changeDecorations(callback);\n    }\n    removeDecorations(decorationIds) {\n        this.editor.removeDecorations(decorationIds);\n    }\n}\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n});\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-auto-hide-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-hidden-range-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nexport const ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n    constructor(editorModel, providers, handleFoldingRangesChange, limit) {\n        this.editorModel = editorModel;\n        this.providers = providers;\n        this.limit = limit;\n        this.id = ID_SYNTAX_PROVIDER;\n        for (const provider of providers) {\n            if (typeof provider.onDidChange === 'function') {\n                if (!this.disposables) {\n                    this.disposables = new DisposableStore();\n                }\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n            }\n        }\n    }\n    compute(cancellationToken, notifyTooManyRegions) {\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n            if (ranges) {\n                const res = sanitizeRanges(ranges, this.limit, notifyTooManyRegions);\n                return res;\n            }\n            return null;\n        });\n    }\n    dispose() {\n        var _a;\n        (_a = this.disposables) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n    let rangeData = null;\n    const promises = providers.map((provider, i) => {\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n            if (cancellationToken.isCancellationRequested) {\n                return;\n            }\n            if (Array.isArray(ranges)) {\n                if (!Array.isArray(rangeData)) {\n                    rangeData = [];\n                }\n                const nLines = model.getLineCount();\n                for (const r of ranges) {\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\n                    }\n                }\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(_ => {\n        return rangeData;\n    });\n}\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._nestingLevels = [];\n        this._nestingLevelCounts = [];\n        this._types = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._nestingLevels[index] = nestingLevel;\n        this._types[index] = type;\n        this._length++;\n        if (nestingLevel < 30) {\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n        }\n    }\n    toIndentRanges() {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = 0; i < this._length; i++) {\n                startIndexes[i] = this._startIndexes[i];\n                endIndexes[i] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxLevel = this._nestingLevelCounts.length;\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n                const n = this._nestingLevelCounts[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxLevel = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            const types = [];\n            for (let i = 0, k = 0; i < this._length; i++) {\n                const level = this._nestingLevels[i];\n                if (level < maxLevel || (level === maxLevel && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = this._startIndexes[i];\n                    endIndexes[k] = this._endIndexes[i];\n                    types[k] = this._types[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes, types);\n        }\n    }\n}\nexport function sanitizeRanges(rangeData, limit, notifyTooManyRegions) {\n    const sorted = rangeData.sort((d1, d2) => {\n        let diff = d1.start - d2.start;\n        if (diff === 0) {\n            diff = d1.rank - d2.rank;\n        }\n        return diff;\n    });\n    const collector = new RangesCollector(limit, notifyTooManyRegions);\n    let top = undefined;\n    const previous = [];\n    for (const entry of sorted) {\n        if (!top) {\n            top = entry;\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n        else {\n            if (entry.start > top.start) {\n                if (entry.end <= top.end) {\n                    previous.push(top);\n                    top = entry;\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n                else {\n                    if (entry.start > top.end) {\n                        do {\n                            top = previous.pop();\n                        } while (top && entry.start > top.end);\n                        if (top) {\n                            previous.push(top);\n                        }\n                        top = entry;\n                    }\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n            }\n        }\n    }\n    return collector.toIndentRanges();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './browser/coreCommands.js';\nimport './browser/widget/codeEditorWidget.js';\nimport './browser/widget/diffEditorWidget.js';\nimport './browser/widget/diffNavigator.js';\nimport './contrib/anchorSelect/browser/anchorSelect.js';\nimport './contrib/bracketMatching/browser/bracketMatching.js';\nimport './contrib/caretOperations/browser/caretOperations.js';\nimport './contrib/caretOperations/browser/transpose.js';\nimport './contrib/clipboard/browser/clipboard.js';\nimport './contrib/codeAction/browser/codeActionContributions.js';\nimport './contrib/codelens/browser/codelensController.js';\nimport './contrib/colorPicker/browser/colorContributions.js';\nimport './contrib/copyPaste/browser/copyPasteContribution.js';\nimport './contrib/comment/browser/comment.js';\nimport './contrib/contextmenu/browser/contextmenu.js';\nimport './contrib/cursorUndo/browser/cursorUndo.js';\nimport './contrib/dnd/browser/dnd.js';\nimport './contrib/dropIntoEditor/browser/dropIntoEditorContribution.js';\nimport './contrib/find/browser/findController.js';\nimport './contrib/folding/browser/folding.js';\nimport './contrib/fontZoom/browser/fontZoom.js';\nimport './contrib/format/browser/formatActions.js';\nimport './contrib/documentSymbols/browser/documentSymbols.js';\nimport './contrib/inlineCompletions/browser/ghostText.contribution.js';\nimport './contrib/gotoSymbol/browser/goToCommands.js';\nimport './contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport './contrib/gotoError/browser/gotoError.js';\nimport './contrib/hover/browser/hover.js';\nimport './contrib/indentation/browser/indentation.js';\nimport './contrib/inlayHints/browser/inlayHintsContribution.js';\nimport './contrib/inPlaceReplace/browser/inPlaceReplace.js';\nimport './contrib/lineSelection/browser/lineSelection.js';\nimport './contrib/linesOperations/browser/linesOperations.js';\nimport './contrib/linkedEditing/browser/linkedEditing.js';\nimport './contrib/links/browser/links.js';\nimport './contrib/multicursor/browser/multicursor.js';\nimport './contrib/parameterHints/browser/parameterHints.js';\nimport './contrib/rename/browser/rename.js';\nimport './contrib/stickyScroll/browser/stickyScroll.js';\nimport './contrib/smartSelect/browser/smartSelect.js';\nimport './contrib/snippet/browser/snippetController2.js';\nimport './contrib/suggest/browser/suggestController.js';\nimport './contrib/suggest/browser/suggestInlineCompletions.js';\nimport './contrib/tokenization/browser/tokenization.js';\nimport './contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport './contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\nimport './contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\nimport './contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js';\nimport './contrib/wordHighlighter/browser/wordHighlighter.js';\nimport './contrib/wordOperations/browser/wordOperations.js';\nimport './contrib/wordPartOperations/browser/wordPartOperations.js';\nimport './contrib/readOnlyMessage/browser/contribution.js';\n// Load up these strings even in VSCode, even if they are not used\n// in order to get them translated\nimport './common/standaloneStrings.js';\nimport '../base/browser/ui/codicons/codiconStyles.js'; // The codicons are defined here and must be loaded\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, TriggerInlineSuggestionAction } from './ghostTextController.js';\nimport { InlineCompletionsHoverParticipant } from './ghostTextHoverParticipant.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nregisterEditorContribution(GhostTextController.ID, GhostTextController);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\nconst GhostTextCommand = EditorCommand.bindToContribution(GhostTextController.get);\nexport const commitInlineSuggestionAction = new GhostTextCommand({\n    id: inlineSuggestCommitId,\n    precondition: GhostTextController.inlineSuggestionVisible,\n    handler(x) {\n        x.commit();\n        x.editor.focus();\n    }\n});\nregisterEditorCommand(commitInlineSuggestionAction);\nKeybindingsRegistry.registerKeybindingRule({\n    primary: 2 /* KeyCode.Tab */,\n    weight: 200,\n    id: commitInlineSuggestionAction.id,\n    when: ContextKeyExpr.and(commitInlineSuggestionAction.precondition, EditorContextKeys.tabMovesFocus.toNegated(), GhostTextController.inlineSuggestionHasIndentationLessThanTabSize),\n});\nregisterEditorCommand(new GhostTextCommand({\n    id: 'editor.action.inlineSuggest.hide',\n    precondition: GhostTextController.inlineSuggestionVisible,\n    kbOpts: {\n        weight: 100,\n        primary: 9 /* KeyCode.Escape */,\n    },\n    handler(x) {\n        x.hide();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { GhostTextModel } from './ghostTextModel.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nlet GhostTextController = class GhostTextController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.triggeredExplicitly = false;\n        this.activeController = this._register(new MutableDisposable());\n        this.activeModelDidChangeEmitter = this._register(new Emitter());\n        this._register(this.editor.onDidChangeModel(() => {\n            this.updateModelController();\n        }));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                this.updateModelController();\n            }\n            if (e.hasChanged(57 /* EditorOption.inlineSuggest */)) {\n                this.updateModelController();\n            }\n        }));\n        this.updateModelController();\n    }\n    static get(editor) {\n        return editor.getContribution(GhostTextController.ID);\n    }\n    get activeModel() {\n        var _a;\n        return (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.model;\n    }\n    // Don't call this method when not necessary. It will recreate the activeController.\n    updateModelController() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        const inlineSuggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        this.activeController.value = undefined;\n        // ActiveGhostTextController is only created if one of those settings is set or if the inline completions are triggered explicitly.\n        this.activeController.value =\n            this.editor.hasModel() && (suggestOptions.preview || inlineSuggestOptions.enabled || this.triggeredExplicitly)\n                ? this.instantiationService.createInstance(ActiveGhostTextController, this.editor)\n                : undefined;\n        this.activeModelDidChangeEmitter.fire();\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        return ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.shouldShowHoverAt(hoverRange)) || false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        var _a, _b;\n        return ((_b = (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.widget) === null || _b === void 0 ? void 0 : _b.shouldShowHoverAtViewZone(viewZoneId)) || false;\n    }\n    trigger() {\n        var _a;\n        this.triggeredExplicitly = true;\n        if (!this.activeController.value) {\n            this.updateModelController();\n        }\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.triggerInlineCompletion();\n    }\n    commit() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.commitInlineCompletion();\n    }\n    hide() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hideInlineCompletion();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextController.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, nls.localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\nGhostTextController.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, nls.localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\nGhostTextController.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, nls.localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\nGhostTextController.ID = 'editor.contrib.ghostTextController';\nGhostTextController = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextController);\nexport { GhostTextController };\nclass GhostTextContextKeys {\n    constructor(contextKeyService) {\n        this.contextKeyService = contextKeyService;\n        this.inlineCompletionVisible = GhostTextController.inlineSuggestionVisible.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentation = GhostTextController.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = GhostTextController.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n    }\n}\n/**\n * The controller for a text editor with an initialized text model.\n * Must be disposed as soon as the model detaches from the editor.\n*/\nlet ActiveGhostTextController = class ActiveGhostTextController extends Disposable {\n    constructor(editor, instantiationService, contextKeyService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.contextKeys = new GhostTextContextKeys(this.contextKeyService);\n        this.model = this._register(this.instantiationService.createInstance(GhostTextModel, this.editor));\n        this.widget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, this.model));\n        this._register(toDisposable(() => {\n            this.contextKeys.inlineCompletionVisible.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentation.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(true);\n        }));\n        this._register(this.model.onDidChange(() => {\n            this.updateContextKeys();\n        }));\n        this.updateContextKeys();\n    }\n    updateContextKeys() {\n        var _a;\n        this.contextKeys.inlineCompletionVisible.set(((_a = this.model.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText) !== undefined);\n        let startsWithIndentation = false;\n        let startsWithIndentationLessThanTabSize = true;\n        const ghostText = this.model.inlineCompletionsModel.ghostText;\n        if (!!this.model.activeInlineCompletionsModel && ghostText && ghostText.parts.length > 0) {\n            const { column, lines } = ghostText.parts[0];\n            const firstLine = lines[0];\n            const indentationEndColumn = this.editor.getModel().getLineIndentColumn(ghostText.lineNumber);\n            const inIndentation = column <= indentationEndColumn;\n            if (inIndentation) {\n                let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n                if (firstNonWsIdx === -1) {\n                    firstNonWsIdx = firstLine.length - 1;\n                }\n                startsWithIndentation = firstNonWsIdx > 0;\n                const tabSize = this.editor.getModel().getOptions().tabSize;\n                const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n                startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n            }\n        }\n        this.contextKeys.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n        this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n    }\n};\nActiveGhostTextController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService)\n], ActiveGhostTextController);\nexport { ActiveGhostTextController };\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showNextInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showNext';\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showPreviousInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showPrevious';\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.trigger();\n            }\n        });\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { InlineCompletionsModel, SynchronizedInlineCompletionsCache } from './inlineCompletionsModel.js';\nimport { SuggestWidgetPreviewModel } from './suggestWidgetPreviewModel.js';\nimport { createDisposableRef } from './utils.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport class DelegatingModel extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.hasCachedGhostText = false;\n        this.currentModelRef = this._register(new MutableDisposable());\n    }\n    get targetModel() {\n        var _a;\n        return (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object;\n    }\n    setTargetModel(model) {\n        var _a;\n        if (((_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === model) {\n            return;\n        }\n        this.currentModelRef.clear();\n        this.currentModelRef.value = model ? createDisposableRef(model, model.onDidChange(() => {\n            this.hasCachedGhostText = false;\n            this.onDidChangeEmitter.fire();\n        })) : undefined;\n        this.hasCachedGhostText = false;\n        this.onDidChangeEmitter.fire();\n    }\n    get ghostText() {\n        var _a, _b;\n        if (!this.hasCachedGhostText) {\n            this.cachedGhostText = (_b = (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === null || _b === void 0 ? void 0 : _b.ghostText;\n            this.hasCachedGhostText = true;\n        }\n        return this.cachedGhostText;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.targetModel) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    get minReservedLineCount() {\n        return this.targetModel ? this.targetModel.minReservedLineCount : 0;\n    }\n}\n/**\n * A ghost text model that is both driven by inline completions and the suggest widget.\n*/\nlet GhostTextModel = class GhostTextModel extends DelegatingModel {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.sharedCache = this._register(new SharedInlineCompletionCache());\n        this.suggestWidgetAdapterModel = this._register(this.instantiationService.createInstance(SuggestWidgetPreviewModel, this.editor, this.sharedCache));\n        this.inlineCompletionsModel = this._register(this.instantiationService.createInstance(InlineCompletionsModel, this.editor, this.sharedCache));\n        this._register(this.suggestWidgetAdapterModel.onDidChange(() => {\n            this.updateModel();\n        }));\n        this.updateModel();\n    }\n    get activeInlineCompletionsModel() {\n        if (this.targetModel === this.inlineCompletionsModel) {\n            return this.inlineCompletionsModel;\n        }\n        return undefined;\n    }\n    updateModel() {\n        this.setTargetModel(this.suggestWidgetAdapterModel.isActive\n            ? this.suggestWidgetAdapterModel\n            : this.inlineCompletionsModel);\n        this.inlineCompletionsModel.setActive(this.targetModel === this.inlineCompletionsModel);\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        const ghostText = (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText;\n        if (ghostText) {\n            return ghostText.parts.some(p => hoverRange.containsPosition(new Position(ghostText.lineNumber, p.column)));\n        }\n        return false;\n    }\n    triggerInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.trigger(InlineCompletionTriggerKind.Explicit);\n    }\n    commitInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.commitCurrentSuggestion();\n    }\n    hideInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showNext();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showPrevious();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextModel = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextModel);\nexport { GhostTextModel };\nexport class SharedInlineCompletionCache extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.cache = this._register(new MutableDisposable());\n    }\n    get value() {\n        return this.cache.value;\n    }\n    setValue(editor, completionsSource, triggerKind) {\n        this.cache.value = new SynchronizedInlineCompletionsCache(completionsSource, editor, () => this.onDidChangeEmitter.fire(), triggerKind);\n    }\n    clearAndLeak() {\n        return this.cache.clearAndLeak();\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { BaseGhostTextWidgetModel, GhostTextReplacement } from './ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { inlineCompletionToGhostText } from './inlineCompletionToGhostText.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { assertNever } from '../../../../base/common/types.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { getReadonlyEmptyArray } from './utils.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n    constructor(editor, cache, commandService, languageConfigurationService, languageFeaturesService, debounceService, configurationService) {\n        super();\n        this.editor = editor;\n        this.cache = cache;\n        this.commandService = commandService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.debounceService = debounceService;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.completionSession = this._register(new MutableDisposable());\n        this.active = false;\n        this.disposed = false;\n        this.debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 50 });\n        this._register(commandService.onDidExecuteCommand((e) => {\n            // These commands don't trigger onDidType.\n            const commands = new Set([\n                CoreEditingCommands.Tab.id,\n                CoreEditingCommands.DeleteLeft.id,\n                CoreEditingCommands.DeleteRight.id,\n                inlineSuggestCommitId,\n                'acceptSelectedSuggestion',\n            ]);\n            if (commands.has(e.commandId) && editor.hasTextFocus()) {\n                this.handleUserInput();\n            }\n        }));\n        this._register(this.editor.onDidType((e) => {\n            this.handleUserInput();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */ ||\n                this.session && !this.session.isValid) {\n                this.hide();\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.disposed = true;\n        }));\n        this._register(this.editor.onDidBlurEditorWidget(() => {\n            // This is a hidden setting very useful for debugging\n            if (configurationService.getValue('editor.inlineSuggest.hideOnBlur')) {\n                return;\n            }\n            this.hide();\n        }));\n    }\n    handleUserInput() {\n        if (this.session && !this.session.isValid) {\n            this.hide();\n        }\n        setTimeout(() => {\n            if (this.disposed) {\n                return;\n            }\n            // Wait for the cursor update that happens in the same iteration loop iteration\n            this.startSessionIfTriggered();\n        }, 0);\n    }\n    get session() {\n        return this.completionSession.value;\n    }\n    get ghostText() {\n        var _a;\n        return (_a = this.session) === null || _a === void 0 ? void 0 : _a.ghostText;\n    }\n    get minReservedLineCount() {\n        return this.session ? this.session.minReservedLineCount : 0;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    setActive(active) {\n        var _a;\n        this.active = active;\n        if (active) {\n            (_a = this.session) === null || _a === void 0 ? void 0 : _a.scheduleAutomaticUpdate();\n        }\n    }\n    startSessionIfTriggered() {\n        const suggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        if (!suggestOptions.enabled) {\n            return;\n        }\n        if (this.session && this.session.isValid) {\n            return;\n        }\n        this.trigger(InlineCompletionTriggerKind.Automatic);\n    }\n    trigger(triggerKind) {\n        if (this.completionSession.value) {\n            if (triggerKind === InlineCompletionTriggerKind.Explicit) {\n                void this.completionSession.value.ensureUpdateWithExplicitContext();\n            }\n            return;\n        }\n        this.completionSession.value = new InlineCompletionsSession(this.editor, this.editor.getPosition(), () => this.active, this.commandService, this.cache, triggerKind, this.languageConfigurationService, this.languageFeaturesService.inlineCompletionsProvider, this.debounceValue);\n        this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n    }\n    hide() {\n        this.completionSession.clear();\n        this.onDidChangeEmitter.fire();\n    }\n    commitCurrentSuggestion() {\n        var _a;\n        // Don't dispose the session, so that after committing, more suggestions are shown.\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.commitCurrentCompletion();\n    }\n    showNext() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPrevious() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.session) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nInlineCompletionsModel = __decorate([\n    __param(2, ICommandService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IConfigurationService)\n], InlineCompletionsModel);\nexport { InlineCompletionsModel };\nexport class InlineCompletionsSession extends BaseGhostTextWidgetModel {\n    constructor(editor, triggerPosition, shouldUpdate, commandService, cache, initialTriggerKind, languageConfigurationService, registry, debounce) {\n        super(editor);\n        this.triggerPosition = triggerPosition;\n        this.shouldUpdate = shouldUpdate;\n        this.commandService = commandService;\n        this.cache = cache;\n        this.initialTriggerKind = initialTriggerKind;\n        this.languageConfigurationService = languageConfigurationService;\n        this.registry = registry;\n        this.debounce = debounce;\n        this.minReservedLineCount = 0;\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateSoon = this._register(new RunOnceScheduler(() => {\n            const triggerKind = this.initialTriggerKind;\n            // All subsequent triggers are automatic.\n            this.initialTriggerKind = InlineCompletionTriggerKind.Automatic;\n            return this.update(triggerKind);\n        }, 50));\n        this.filteredCompletions = [];\n        //#region Selection\n        // We use a semantic id to track the selection even if the cache changes.\n        this.currentlySelectedCompletionId = undefined;\n        let lastCompletionItem = undefined;\n        this._register(this.onDidChange(() => {\n            var _a;\n            const currentCompletion = this.currentCompletion;\n            if (currentCompletion && currentCompletion.sourceInlineCompletion !== lastCompletionItem) {\n                lastCompletionItem = currentCompletion.sourceInlineCompletion;\n                const provider = currentCompletion.sourceProvider;\n                (_a = provider.handleItemDidShow) === null || _a === void 0 ? void 0 : _a.call(provider, currentCompletion.sourceInlineCompletions, lastCompletionItem);\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.cache.clear();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            var _a;\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                return;\n            }\n            // Ghost text depends on the cursor position\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            if (this.cache.value) {\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n        this._register(this.editor.onDidChangeModelContent((e) => {\n            var _a;\n            // Call this in case `onDidChangeModelContent` calls us first.\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            this.updateFilteredInlineCompletions();\n            this.scheduleAutomaticUpdate();\n        }));\n        this._register(this.registry.onDidChange(() => {\n            this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n        }));\n        this.scheduleAutomaticUpdate();\n    }\n    updateFilteredInlineCompletions() {\n        if (!this.cache.value) {\n            this.filteredCompletions = [];\n            return;\n        }\n        const model = this.editor.getModel();\n        const cursorPosition = model.validatePosition(this.editor.getPosition());\n        this.filteredCompletions = this.cache.value.completions.filter(c => {\n            const originalValue = model.getValueInRange(c.synchronizedRange).toLowerCase();\n            const filterText = c.inlineCompletion.filterText.toLowerCase();\n            const indent = model.getLineIndentColumn(c.synchronizedRange.startLineNumber);\n            const cursorPosIndex = Math.max(0, cursorPosition.column - c.synchronizedRange.startColumn);\n            let filterTextBefore = filterText.substring(0, cursorPosIndex);\n            let filterTextAfter = filterText.substring(cursorPosIndex);\n            let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n            let originalValueAfter = originalValue.substring(cursorPosIndex);\n            if (c.synchronizedRange.startColumn <= indent) {\n                // Remove indentation\n                originalValueBefore = originalValueBefore.trimStart();\n                if (originalValueBefore.length === 0) {\n                    originalValueAfter = originalValueAfter.trimStart();\n                }\n                filterTextBefore = filterTextBefore.trimStart();\n                if (filterTextBefore.length === 0) {\n                    filterTextAfter = filterTextAfter.trimStart();\n                }\n            }\n            return filterTextBefore.startsWith(originalValueBefore)\n                && matchesSubString(originalValueAfter, filterTextAfter);\n        });\n    }\n    fixAndGetIndexOfCurrentSelection() {\n        if (!this.currentlySelectedCompletionId || !this.cache.value) {\n            return 0;\n        }\n        if (this.cache.value.completions.length === 0) {\n            // don't reset the selection in this case\n            return 0;\n        }\n        const idx = this.filteredCompletions.findIndex(v => v.semanticId === this.currentlySelectedCompletionId);\n        if (idx === -1) {\n            // Reset the selection so that the selection does not jump back when it appears again\n            this.currentlySelectedCompletionId = undefined;\n            return 0;\n        }\n        return idx;\n    }\n    get currentCachedCompletion() {\n        if (!this.cache.value) {\n            return undefined;\n        }\n        return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()];\n    }\n    showNextInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    showPreviousInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + completions.length - 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    ensureUpdateWithExplicitContext() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.updateOperation.value) {\n                // Restart or wait for current update operation\n                if (this.updateOperation.value.triggerKind === InlineCompletionTriggerKind.Explicit) {\n                    yield this.updateOperation.value.promise;\n                }\n                else {\n                    yield this.update(InlineCompletionTriggerKind.Explicit);\n                }\n            }\n            else if (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.triggerKind) !== InlineCompletionTriggerKind.Explicit) {\n                // Refresh cache\n                yield this.update(InlineCompletionTriggerKind.Explicit);\n            }\n        });\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            return (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.length) || 0) > 1;\n        });\n    }\n    //#endregion\n    get ghostText() {\n        const currentCompletion = this.currentCompletion;\n        if (!currentCompletion) {\n            return undefined;\n        }\n        const cursorPosition = this.editor.getPosition();\n        if (currentCompletion.range.getEndPosition().isBefore(cursorPosition)) {\n            return undefined;\n        }\n        const mode = this.editor.getOptions().get(57 /* EditorOption.inlineSuggest */).mode;\n        const ghostText = inlineCompletionToGhostText(currentCompletion, this.editor.getModel(), mode, cursorPosition);\n        if (ghostText) {\n            if (ghostText.isEmpty()) {\n                return undefined;\n            }\n            return ghostText;\n        }\n        return new GhostTextReplacement(currentCompletion.range.startLineNumber, currentCompletion.range.startColumn, currentCompletion.range.endColumn - currentCompletion.range.startColumn, currentCompletion.insertText.split('\\n'), 0);\n    }\n    get currentCompletion() {\n        const completion = this.currentCachedCompletion;\n        if (!completion) {\n            return undefined;\n        }\n        return completion.toLiveInlineCompletion();\n    }\n    get isValid() {\n        return this.editor.getPosition().lineNumber === this.triggerPosition.lineNumber;\n    }\n    scheduleAutomaticUpdate() {\n        // Since updateSoon debounces, starvation can happen.\n        // To prevent stale cache, we clear the current update operation.\n        this.updateOperation.clear();\n        this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n    }\n    update(triggerKind) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.shouldUpdate()) {\n                return;\n            }\n            const position = this.editor.getPosition();\n            const startTime = new Date();\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.registry, position, this.editor.getModel(), { triggerKind, selectedSuggestionInfo: undefined }, token, this.languageConfigurationService);\n                    const endTime = new Date();\n                    this.debounce.update(this.editor.getModel(), endTime.getTime() - startTime.getTime());\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this.cache.setValue(this.editor, result, triggerKind);\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, triggerKind);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    takeOwnership(disposable) {\n        this._register(disposable);\n    }\n    commitCurrentCompletion() {\n        const ghostText = this.ghostText;\n        if (!ghostText) {\n            // No ghost text was shown for this completion.\n            // Thus, we don't want to commit anything.\n            return;\n        }\n        const completion = this.currentCompletion;\n        if (completion) {\n            this.commit(completion);\n        }\n    }\n    commit(completion) {\n        var _a;\n        // Mark the cache as stale, but don't dispose it yet,\n        // otherwise command args might get disposed.\n        const cache = this.cache.clearAndLeak();\n        if (completion.snippetInfo) {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, ''),\n                ...completion.additionalTextEdits\n            ]);\n            this.editor.setPosition(completion.snippetInfo.range.getStartPosition());\n            (_a = SnippetController2.get(this.editor)) === null || _a === void 0 ? void 0 : _a.insert(completion.snippetInfo.snippet);\n        }\n        else {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, completion.insertText),\n                ...completion.additionalTextEdits\n            ]);\n        }\n        if (completion.command) {\n            this.commandService\n                .executeCommand(completion.command.id, ...(completion.command.arguments || []))\n                .finally(() => {\n                cache === null || cache === void 0 ? void 0 : cache.dispose();\n            })\n                .then(undefined, onUnexpectedExternalError);\n        }\n        else {\n            cache === null || cache === void 0 ? void 0 : cache.dispose();\n        }\n        this.onDidChangeEmitter.fire();\n    }\n    get commands() {\n        var _a;\n        const lists = new Set(((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.map(c => c.inlineCompletion.sourceInlineCompletions)) || []);\n        return [...lists].flatMap(l => l.commands || []);\n    }\n}\nexport class UpdateOperation {\n    constructor(promise, triggerKind) {\n        this.promise = promise;\n        this.triggerKind = triggerKind;\n    }\n    dispose() {\n        this.promise.cancel();\n    }\n}\n/**\n * The cache keeps itself in sync with the editor.\n * It also owns the completions result and disposes it when the cache is diposed.\n*/\nexport class SynchronizedInlineCompletionsCache extends Disposable {\n    constructor(completionsSource, editor, onChange, triggerKind) {\n        super();\n        this.editor = editor;\n        this.onChange = onChange;\n        this.triggerKind = triggerKind;\n        this.isDisposing = false;\n        const decorationIds = editor.changeDecorations((changeAccessor) => {\n            return changeAccessor.deltaDecorations([], completionsSource.items.map(i => ({\n                range: i.range,\n                options: {\n                    description: 'inline-completion-tracking-range'\n                },\n            })));\n        });\n        this._register(toDisposable(() => {\n            this.isDisposing = true;\n            editor.removeDecorations(decorationIds);\n        }));\n        this.completions = completionsSource.items.map((c, idx) => new CachedInlineCompletion(c, decorationIds[idx]));\n        this._register(editor.onDidChangeModelContent(() => {\n            this.updateRanges();\n        }));\n        this._register(completionsSource);\n    }\n    updateRanges() {\n        if (this.isDisposing) {\n            return;\n        }\n        let hasChanged = false;\n        const model = this.editor.getModel();\n        for (const c of this.completions) {\n            const newRange = model.getDecorationRange(c.decorationId);\n            if (!newRange) {\n                onUnexpectedError(new Error('Decoration has no range'));\n                continue;\n            }\n            if (!c.synchronizedRange.equalsRange(newRange)) {\n                hasChanged = true;\n                c.synchronizedRange = newRange;\n            }\n        }\n        if (hasChanged) {\n            this.onChange();\n        }\n    }\n}\nclass CachedInlineCompletion {\n    constructor(inlineCompletion, decorationId) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.semanticId = JSON.stringify({\n            text: this.inlineCompletion.insertText,\n            abbreviation: this.inlineCompletion.filterText,\n            startLine: this.inlineCompletion.range.startLineNumber,\n            startColumn: this.inlineCompletion.range.startColumn,\n            command: this.inlineCompletion.command\n        });\n        this.synchronizedRange = inlineCompletion.range;\n    }\n    toLiveInlineCompletion() {\n        return {\n            insertText: this.inlineCompletion.insertText,\n            range: this.synchronizedRange,\n            command: this.inlineCompletion.command,\n            sourceProvider: this.inlineCompletion.sourceProvider,\n            sourceInlineCompletions: this.inlineCompletion.sourceInlineCompletions,\n            sourceInlineCompletion: this.inlineCompletion.sourceInlineCompletion,\n            snippetInfo: this.inlineCompletion.snippetInfo,\n            filterText: this.inlineCompletion.filterText,\n            additionalTextEdits: this.inlineCompletion.additionalTextEdits,\n        };\n    }\n}\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const defaultReplaceRange = getDefaultRange(position, model);\n        const providers = registry.all(model);\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            const completions = yield Promise.resolve(provider.provideInlineCompletions(model, position, context, token)).catch(onUnexpectedExternalError);\n            return ({\n                completions,\n                provider,\n                dispose: () => {\n                    if (completions) {\n                        provider.freeInlineCompletions(completions);\n                    }\n                }\n            });\n        })));\n        const itemsByHash = new Map();\n        for (const result of results) {\n            const completions = result.completions;\n            if (!completions) {\n                continue;\n            }\n            for (const item of completions.items) {\n                let range = item.range ? Range.lift(item.range) : defaultReplaceRange;\n                if (range.startLineNumber !== range.endLineNumber) {\n                    // Ignore invalid ranges.\n                    continue;\n                }\n                let insertText;\n                let snippetInfo;\n                if (typeof item.insertText === 'string') {\n                    insertText = item.insertText;\n                    if (languageConfigurationService && item.completeBracketPairs) {\n                        insertText = closeBrackets(insertText, range.getStartPosition(), model, languageConfigurationService);\n                        // Modify range depending on if brackets are added or removed\n                        const diff = insertText.length - item.insertText.length;\n                        if (diff !== 0) {\n                            range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n                        }\n                    }\n                    snippetInfo = undefined;\n                }\n                else if ('snippet' in item.insertText) {\n                    const snippet = new SnippetParser().parse(item.insertText.snippet);\n                    insertText = snippet.toString();\n                    snippetInfo = {\n                        snippet: item.insertText.snippet,\n                        range: range\n                    };\n                }\n                else {\n                    assertNever(item.insertText);\n                }\n                const trackedItem = ({\n                    insertText,\n                    snippetInfo,\n                    range,\n                    command: item.command,\n                    sourceProvider: result.provider,\n                    sourceInlineCompletions: completions,\n                    sourceInlineCompletion: item,\n                    filterText: item.filterText || insertText,\n                    additionalTextEdits: item.additionalTextEdits || getReadonlyEmptyArray()\n                });\n                itemsByHash.set(JSON.stringify({ insertText, range: item.range }), trackedItem);\n            }\n        }\n        return {\n            items: [...itemsByHash.values()],\n            dispose: () => {\n                for (const result of results) {\n                    result.dispose();\n                }\n            },\n        };\n    });\n}\nfunction getDefaultRange(position, model) {\n    const word = model.getWordAtPosition(position);\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\n    // By default, always replace up until the end of the current line.\n    // This default might be subject to change!\n    return word\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n    const newLine = lineStart + text;\n    const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\n    if (!slicedTokens) {\n        return text;\n    }\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n    return newText;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { applyEdits } from './utils.js';\nexport class GhostText {\n    constructor(lineNumber, parts, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.parts = parts;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n    }\n    renderForScreenReader(lineText) {\n        if (this.parts.length === 0) {\n            return '';\n        }\n        const lastPart = this.parts[this.parts.length - 1];\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\n            text: p.lines.join('\\n')\n        })));\n        return text.substring(this.parts[0].column - 1);\n    }\n    isEmpty() {\n        return this.parts.every(p => p.lines.length === 0);\n    }\n}\nexport class GhostTextPart {\n    constructor(column, lines, \n    /**\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n    */\n    preview) {\n        this.column = column;\n        this.lines = lines;\n        this.preview = preview;\n    }\n}\nexport class GhostTextReplacement {\n    constructor(lineNumber, columnStart, length, newLines, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.columnStart = columnStart;\n        this.length = length;\n        this.newLines = newLines;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n        this.parts = [\n            new GhostTextPart(this.columnStart + this.length, this.newLines, false),\n        ];\n    }\n    renderForScreenReader(_lineText) {\n        return this.newLines.join('\\n');\n    }\n}\nexport class BaseGhostTextWidgetModel extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._expanded = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */) && this._expanded === undefined) {\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n    }\n    setExpanded(expanded) {\n        this._expanded = true;\n        this.onDidChangeEmitter.fire();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport function createDisposableRef(object, disposable) {\n    return {\n        object,\n        dispose: () => disposable === null || disposable === void 0 ? void 0 : disposable.dispose(),\n    };\n}\nexport function applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n    return array;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nexport function minimizeInlineCompletion(model, inlineCompletion) {\n    if (!inlineCompletion) {\n        return inlineCompletion;\n    }\n    const valueToReplace = model.getValueInRange(inlineCompletion.range);\n    const commonPrefixLen = strings.commonPrefixLength(valueToReplace, inlineCompletion.insertText);\n    const startOffset = model.getOffsetAt(inlineCompletion.range.getStartPosition()) + commonPrefixLen;\n    const start = model.getPositionAt(startOffset);\n    const remainingValueToReplace = valueToReplace.substr(commonPrefixLen);\n    const commonSuffixLen = strings.commonSuffixLength(remainingValueToReplace, inlineCompletion.insertText);\n    const end = model.getPositionAt(Math.max(startOffset, model.getOffsetAt(inlineCompletion.range.getEndPosition()) - commonSuffixLen));\n    return {\n        range: Range.fromPositions(start, end),\n        insertText: inlineCompletion.insertText.substr(commonPrefixLen, inlineCompletion.insertText.length - commonPrefixLen - commonSuffixLen),\n        snippetInfo: inlineCompletion.snippetInfo,\n        filterText: inlineCompletion.filterText,\n        additionalTextEdits: inlineCompletion.additionalTextEdits,\n    };\n}\nexport function normalizedInlineCompletionsEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.range.equalsRange(b.range) && a.insertText === b.insertText && a.command === b.command;\n}\n/**\n * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n*/\nexport function inlineCompletionToGhostText(inlineCompletion, textModel, mode, cursorPosition, previewSuffixLength = 0) {\n    if (inlineCompletion.range.startLineNumber !== inlineCompletion.range.endLineNumber) {\n        // Only single line replacements are supported.\n        return undefined;\n    }\n    const sourceLine = textModel.getLineContent(inlineCompletion.range.startLineNumber);\n    const sourceIndentationLength = strings.getLeadingWhitespace(sourceLine).length;\n    const suggestionTouchesIndentation = inlineCompletion.range.startColumn - 1 <= sourceIndentationLength;\n    if (suggestionTouchesIndentation) {\n        // source:      \u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7[\u00B7\u00B7\u00B7\u00B7\u00B7\u00B7abc]\n        //                         ^^^^^^^^^ inlineCompletion.range\n        //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n        //                         ^^^^^^ replacedIndentation.length\n        //                               ^^^ rangeThatDoesNotReplaceIndentation\n        // inlineCompletion.text: '\u00B7\u00B7foo'\n        //                         ^^ suggestionAddedIndentationLength\n        const suggestionAddedIndentationLength = strings.getLeadingWhitespace(inlineCompletion.insertText).length;\n        const replacedIndentation = sourceLine.substring(inlineCompletion.range.startColumn - 1, sourceIndentationLength);\n        const rangeThatDoesNotReplaceIndentation = Range.fromPositions(inlineCompletion.range.getStartPosition().delta(0, replacedIndentation.length), inlineCompletion.range.getEndPosition());\n        const suggestionWithoutIndentationChange = inlineCompletion.insertText.startsWith(replacedIndentation)\n            // Adds more indentation without changing existing indentation: We can add ghost text for this\n            ? inlineCompletion.insertText.substring(replacedIndentation.length)\n            // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n            : inlineCompletion.insertText.substring(suggestionAddedIndentationLength);\n        inlineCompletion = {\n            range: rangeThatDoesNotReplaceIndentation,\n            insertText: suggestionWithoutIndentationChange,\n            command: inlineCompletion.command,\n            snippetInfo: undefined,\n            filterText: inlineCompletion.filterText,\n            additionalTextEdits: inlineCompletion.additionalTextEdits,\n        };\n    }\n    // This is a single line string\n    const valueToBeReplaced = textModel.getValueInRange(inlineCompletion.range);\n    const changes = cachingDiff(valueToBeReplaced, inlineCompletion.insertText);\n    if (!changes) {\n        // No ghost text in case the diff would be too slow to compute\n        return undefined;\n    }\n    const lineNumber = inlineCompletion.range.startLineNumber;\n    const parts = new Array();\n    if (mode === 'prefix') {\n        const filteredChanges = changes.filter(c => c.originalLength === 0);\n        if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n            // Prefixes only have a single change.\n            return undefined;\n        }\n    }\n    const previewStartInCompletionText = inlineCompletion.insertText.length - previewSuffixLength;\n    for (const c of changes) {\n        const insertColumn = inlineCompletion.range.startColumn + c.originalStart + c.originalLength;\n        if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === inlineCompletion.range.startLineNumber && insertColumn < cursorPosition.column) {\n            // No ghost text before cursor\n            return undefined;\n        }\n        if (c.originalLength > 0) {\n            return undefined;\n        }\n        if (c.modifiedLength === 0) {\n            continue;\n        }\n        const modifiedEnd = c.modifiedStart + c.modifiedLength;\n        const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n        const nonPreviewText = inlineCompletion.insertText.substring(c.modifiedStart, nonPreviewTextEnd);\n        const italicText = inlineCompletion.insertText.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n        if (nonPreviewText.length > 0) {\n            const lines = strings.splitLines(nonPreviewText);\n            parts.push(new GhostTextPart(insertColumn, lines, false));\n        }\n        if (italicText.length > 0) {\n            const lines = strings.splitLines(italicText);\n            parts.push(new GhostTextPart(insertColumn, lines, true));\n        }\n    }\n    return new GhostText(lineNumber, parts, 0);\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\n    }\n    else {\n        let changes = smartDiff(originalValue, newValue, true);\n        if (changes) {\n            const deletedChars = deletedCharacters(changes);\n            if (deletedChars > 0) {\n                // For performance reasons, don't compute diff if there is nothing to improve\n                const newChanges = smartDiff(originalValue, newValue, false);\n                if (newChanges && deletedCharacters(newChanges) < deletedChars) {\n                    // Disabling smartness seems to be better here\n                    changes = newChanges;\n                }\n            }\n        }\n        lastRequest = {\n            originalValue,\n            newValue,\n            changes\n        };\n        return changes;\n    }\n}\nfunction deletedCharacters(changes) {\n    let sum = 0;\n    for (const c of changes) {\n        sum += Math.max(c.originalLength - c.modifiedLength, 0);\n    }\n    return sum;\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\n    if (originalValue.length > 5000 || newValue.length > 5000) {\n        // We don't want to work on strings that are too big\n        return undefined;\n    }\n    function getMaxCharCode(val) {\n        let maxCharCode = 0;\n        for (let i = 0, len = val.length; i < len; i++) {\n            const charCode = val.charCodeAt(i);\n            if (charCode > maxCharCode) {\n                maxCharCode = charCode;\n            }\n        }\n        return maxCharCode;\n    }\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n    function getUniqueCharCode(id) {\n        if (id < 0) {\n            throw new Error('unexpected');\n        }\n        return maxCharCode + id + 1;\n    }\n    function getElements(source) {\n        let level = 0;\n        let group = 0;\n        const characters = new Int32Array(source.length);\n        for (let i = 0, len = source.length; i < len; i++) {\n            // TODO support more brackets\n            if (smartBracketMatching && source[i] === '(') {\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id);\n                level++;\n            }\n            else if (smartBracketMatching && source[i] === ')') {\n                level = Math.max(level - 1, 0);\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id + 1);\n                if (level === 0) {\n                    group++;\n                }\n            }\n            else {\n                characters[i] = source.charCodeAt(i);\n            }\n        }\n        return characters;\n    }\n    const elements1 = getElements(originalValue);\n    const elements2 = getElements(newValue);\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\n    const denseKeyProvider = new DenseKeyProvider();\n    const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) => languageConfigurationService.getLanguageConfiguration(languageId));\n    const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\n    const node = parseDocument(tokenizer, [], undefined, true);\n    let str = '';\n    const line = tokens.getLineContent();\n    function processNode(node, offset) {\n        if (node.kind === 2 /* AstNodeKind.Pair */) {\n            processNode(node.openingBracket, offset);\n            offset = lengthAdd(offset, node.openingBracket.length);\n            if (node.child) {\n                processNode(node.child, offset);\n                offset = lengthAdd(offset, node.child.length);\n            }\n            if (node.closingBracket) {\n                processNode(node.closingBracket, offset);\n                offset = lengthAdd(offset, node.closingBracket.length);\n            }\n            else {\n                const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n                const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n                str += closingTokenText;\n            }\n        }\n        else if (node.kind === 3 /* AstNodeKind.UnexpectedClosingBracket */) {\n            // remove the bracket\n        }\n        else if (node.kind === 0 /* AstNodeKind.Text */ || node.kind === 1 /* AstNodeKind.Bracket */) {\n            str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\n        }\n        else if (node.kind === 4 /* AstNodeKind.List */) {\n            for (const child of node.children) {\n                processNode(child, offset);\n                offset = lengthAdd(offset, child.length);\n            }\n        }\n    }\n    processNode(node, lengthZero);\n    return str;\n}\nclass StaticTokenizerSource {\n    constructor(lines) {\n        this.lines = lines;\n        this.tokenization = {\n            getLineTokens: (lineNumber) => {\n                return this.lines[lineNumber - 1];\n            }\n        };\n    }\n    getLineCount() {\n        return this.lines.length;\n    }\n    getLineLength(lineNumber) {\n        return this.lines[lineNumber - 1].getLineContent().length;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { BaseGhostTextWidgetModel, GhostText } from './ghostText.js';\nimport { provideInlineCompletions, UpdateOperation } from './inlineCompletionsModel.js';\nimport { inlineCompletionToGhostText, minimizeInlineCompletion } from './inlineCompletionToGhostText.js';\nimport { SuggestWidgetInlineCompletionProvider } from './suggestWidgetInlineCompletionProvider.js';\nlet SuggestWidgetPreviewModel = class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel {\n    constructor(editor, cache, languageFeaturesService) {\n        super(editor);\n        this.cache = cache;\n        this.languageFeaturesService = languageFeaturesService;\n        this.suggestionInlineCompletionSource = this._register(new SuggestWidgetInlineCompletionProvider(this.editor, \n        // Use the first cache item (if any) as preselection.\n        () => { var _a, _b; return (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion(); }));\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateCacheSoon = this._register(new RunOnceScheduler(() => this.updateCache(), 50));\n        this.minReservedLineCount = 0;\n        this._register(this.suggestionInlineCompletionSource.onDidChange(() => {\n            if (!this.editor.hasModel()) {\n                // onDidChange might be called when calling setModel on the editor, before we are disposed.\n                return;\n            }\n            this.updateCacheSoon.schedule();\n            const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n            if (!suggestWidgetState) {\n                this.minReservedLineCount = 0;\n            }\n            const newGhostText = this.ghostText;\n            if (newGhostText) {\n                this.minReservedLineCount = Math.max(this.minReservedLineCount, sum(newGhostText.parts.map(p => p.lines.length - 1)));\n            }\n            if (this.minReservedLineCount >= 1) {\n                this.suggestionInlineCompletionSource.forceRenderingAbove();\n            }\n            else {\n                this.suggestionInlineCompletionSource.stopForceRenderingAbove();\n            }\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.cache.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            this.minReservedLineCount = 0;\n            this.updateCacheSoon.schedule();\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(toDisposable(() => this.suggestionInlineCompletionSource.stopForceRenderingAbove()));\n    }\n    get isActive() {\n        return this.suggestionInlineCompletionSource.state !== undefined;\n    }\n    isSuggestionPreviewEnabled() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        return suggestOptions.preview;\n    }\n    updateCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = this.suggestionInlineCompletionSource.state;\n            if (!state || !state.selectedItem) {\n                return;\n            }\n            const info = {\n                text: state.selectedItem.normalizedInlineCompletion.insertText,\n                range: state.selectedItem.normalizedInlineCompletion.range,\n                isSnippetText: state.selectedItem.isSnippetText,\n                completionKind: state.selectedItem.completionItemKind,\n            };\n            const position = this.editor.getPosition();\n            if (state.selectedItem.isSnippetText ||\n                state.selectedItem.completionItemKind === 27 /* CompletionItemKind.Snippet */ ||\n                state.selectedItem.completionItemKind === 20 /* CompletionItemKind.File */ ||\n                state.selectedItem.completionItemKind === 23 /* CompletionItemKind.Folder */) {\n                // Don't ask providers for these types of suggestions.\n                this.cache.clear();\n                return;\n            }\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.editor.getModel(), { triggerKind: InlineCompletionTriggerKind.Automatic, selectedSuggestionInfo: info }, token);\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    result.dispose();\n                    return;\n                }\n                this.cache.setValue(this.editor, result, InlineCompletionTriggerKind.Automatic);\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, InlineCompletionTriggerKind.Automatic);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    get ghostText() {\n        var _a, _b, _c;\n        const isSuggestionPreviewEnabled = this.isSuggestionPreviewEnabled();\n        const model = this.editor.getModel();\n        const augmentedCompletion = minimizeInlineCompletion(model, (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion());\n        const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n        const suggestInlineCompletion = minimizeInlineCompletion(model, (_c = suggestWidgetState === null || suggestWidgetState === void 0 ? void 0 : suggestWidgetState.selectedItem) === null || _c === void 0 ? void 0 : _c.normalizedInlineCompletion);\n        const isAugmentedCompletionValid = augmentedCompletion\n            && suggestInlineCompletion\n            && augmentedCompletion.insertText.startsWith(suggestInlineCompletion.insertText)\n            && augmentedCompletion.range.equalsRange(suggestInlineCompletion.range);\n        if (!isSuggestionPreviewEnabled && !isAugmentedCompletionValid) {\n            return undefined;\n        }\n        // If the augmented completion is not valid and there is no suggest inline completion, we still show the augmented completion.\n        const finalCompletion = isAugmentedCompletionValid ? augmentedCompletion : (suggestInlineCompletion || augmentedCompletion);\n        const inlineCompletionPreviewLength = isAugmentedCompletionValid ? finalCompletion.insertText.length - suggestInlineCompletion.insertText.length : 0;\n        const newGhostText = this.toGhostText(finalCompletion, inlineCompletionPreviewLength);\n        return newGhostText;\n    }\n    toGhostText(completion, inlineCompletionPreviewLength) {\n        const mode = this.editor.getOptions().get(108 /* EditorOption.suggest */).previewMode;\n        return completion\n            ? (inlineCompletionToGhostText(completion, this.editor.getModel(), mode, this.editor.getPosition(), inlineCompletionPreviewLength) ||\n                // Show an invisible ghost text to reserve space\n                new GhostText(completion.range.endLineNumber, [], this.minReservedLineCount))\n            : undefined;\n    }\n};\nSuggestWidgetPreviewModel = __decorate([\n    __param(2, ILanguageFeaturesService)\n], SuggestWidgetPreviewModel);\nexport { SuggestWidgetPreviewModel };\nfunction sum(arr) {\n    return arr.reduce((a, b) => a + b, 0);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { compareBy, findMaxBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { minimizeInlineCompletion, normalizedInlineCompletionsEquals } from './inlineCompletionToGhostText.js';\nexport class SuggestWidgetInlineCompletionProvider extends Disposable {\n    constructor(editor, suggestControllerPreselector) {\n        super();\n        this.editor = editor;\n        this.suggestControllerPreselector = suggestControllerPreselector;\n        this.isSuggestWidgetVisible = false;\n        this.isShiftKeyPressed = false;\n        this._isActive = false;\n        this._currentSuggestItemInfo = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        // This delay fixes a suggest widget issue when typing \".\" immediately restarts the suggestion session.\n        this.setInactiveDelayed = this._register(new RunOnceScheduler(() => {\n            if (!this.isSuggestWidgetVisible) {\n                if (this._isActive) {\n                    this._isActive = false;\n                    this.onDidChangeEmitter.fire();\n                }\n            }\n        }, 100));\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n        this._register(editor.onKeyDown(e => {\n            if (e.shiftKey && !this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = true;\n                this.update(this._isActive);\n            }\n        }));\n        this._register(editor.onKeyUp(e => {\n            if (e.shiftKey && this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = false;\n                this.update(this._isActive);\n            }\n        }));\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            this._register(suggestController.registerSelector({\n                priority: 100,\n                select: (model, pos, suggestItems) => {\n                    const textModel = this.editor.getModel();\n                    const normalizedItemToPreselect = minimizeInlineCompletion(textModel, this.suggestControllerPreselector());\n                    if (!normalizedItemToPreselect) {\n                        return -1;\n                    }\n                    const position = Position.lift(pos);\n                    const candidates = suggestItems\n                        .map((suggestItem, index) => {\n                        const inlineSuggestItem = suggestionToSuggestItemInfo(suggestController, position, suggestItem, this.isShiftKeyPressed);\n                        const normalizedSuggestItem = minimizeInlineCompletion(textModel, inlineSuggestItem === null || inlineSuggestItem === void 0 ? void 0 : inlineSuggestItem.normalizedInlineCompletion);\n                        if (!normalizedSuggestItem) {\n                            return undefined;\n                        }\n                        const valid = rangeStartsWith(normalizedItemToPreselect.range, normalizedSuggestItem.range) &&\n                            normalizedItemToPreselect.insertText.startsWith(normalizedSuggestItem.insertText);\n                        return { index, valid, prefixLength: normalizedSuggestItem.insertText.length, suggestItem };\n                    })\n                        .filter(item => item && item.valid);\n                    const result = findMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\n                    return result ? result.index : -1;\n                }\n            }));\n            let isBoundToSuggestWidget = false;\n            const bindToSuggestWidget = () => {\n                if (isBoundToSuggestWidget) {\n                    return;\n                }\n                isBoundToSuggestWidget = true;\n                this._register(suggestController.widget.value.onDidShow(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n                this._register(suggestController.widget.value.onDidHide(() => {\n                    this.isSuggestWidgetVisible = false;\n                    this.setInactiveDelayed.schedule();\n                    this.update(this._isActive);\n                }));\n                this._register(suggestController.widget.value.onDidFocus(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n            };\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n                bindToSuggestWidget();\n            }));\n        }\n        this.update(this._isActive);\n    }\n    /**\n     * Returns undefined if the suggest widget is not active.\n    */\n    get state() {\n        if (!this._isActive) {\n            return undefined;\n        }\n        return { selectedItem: this._currentSuggestItemInfo };\n    }\n    update(newActive) {\n        const newInlineCompletion = this.getSuggestItemInfo();\n        let shouldFire = false;\n        if (!suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n            this._currentSuggestItemInfo = newInlineCompletion;\n            shouldFire = true;\n        }\n        if (this._isActive !== newActive) {\n            this._isActive = newActive;\n            shouldFire = true;\n        }\n        if (shouldFire) {\n            this.onDidChangeEmitter.fire();\n        }\n    }\n    getSuggestItemInfo() {\n        const suggestController = SuggestController.get(this.editor);\n        if (!suggestController) {\n            return undefined;\n        }\n        if (!this.isSuggestWidgetVisible) {\n            return undefined;\n        }\n        const focusedItem = suggestController.widget.value.getFocusedItem();\n        if (!focusedItem) {\n            return undefined;\n        }\n        // TODO: item.isResolved\n        return suggestionToSuggestItemInfo(suggestController, this.editor.getPosition(), focusedItem.item, this.isShiftKeyPressed);\n    }\n    stopForceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.stopForceRenderingAbove();\n        }\n    }\n    forceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.forceRenderingAbove();\n        }\n    }\n}\nexport function rangeStartsWith(rangeToTest, prefix) {\n    return (prefix.startLineNumber === rangeToTest.startLineNumber &&\n        prefix.startColumn === rangeToTest.startColumn &&\n        (prefix.endLineNumber < rangeToTest.endLineNumber ||\n            (prefix.endLineNumber === rangeToTest.endLineNumber &&\n                prefix.endColumn <= rangeToTest.endColumn)));\n}\nfunction suggestItemInfoEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.completionItemKind === b.completionItemKind &&\n        a.isSnippetText === b.isSnippetText &&\n        normalizedInlineCompletionsEquals(a.normalizedInlineCompletion, b.normalizedInlineCompletion);\n}\nfunction suggestionToSuggestItemInfo(suggestController, position, item, toggleMode) {\n    // additionalTextEdits might not be resolved here, this could be problematic.\n    if (Array.isArray(item.completion.additionalTextEdits) && item.completion.additionalTextEdits.length > 0) {\n        // cannot represent additional text edits. TODO: Now we can.\n        return {\n            completionItemKind: item.completion.kind,\n            isSnippetText: false,\n            normalizedInlineCompletion: {\n                // Dummy element, so that space is reserved, but no text is shown\n                range: Range.fromPositions(position, position),\n                insertText: '',\n                filterText: '',\n                snippetInfo: undefined,\n                additionalTextEdits: [],\n            },\n        };\n    }\n    let { insertText } = item.completion;\n    let isSnippetText = false;\n    if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\n        const snippet = new SnippetParser().parse(insertText);\n        const model = suggestController.editor.getModel();\n        // Ignore snippets that are too large.\n        // Adjust whitespace is expensive for them.\n        if (snippet.children.length > 100) {\n            return undefined;\n        }\n        SnippetSession.adjustWhitespace(model, position, snippet, true, true);\n        insertText = snippet.toString();\n        isSnippetText = true;\n    }\n    const info = suggestController.getOverwriteInfo(item, toggleMode);\n    return {\n        isSnippetText,\n        completionItemKind: item.completion.kind,\n        normalizedInlineCompletion: {\n            insertText: insertText,\n            filterText: insertText,\n            range: Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))),\n            snippetInfo: undefined,\n            additionalTextEdits: [],\n        }\n    };\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.shy) {\n                return;\n            }\n            let index = -1;\n            if (!e.noSelect) {\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false, noSelect: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(108 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter, noSelect) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false, noSelect: noSelect !== null && noSelect !== void 0 ? noSelect : false }, false, onlyFrom, undefined, noFilter);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true, noSelect: false });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        let noSelect;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n            if (args.noSelection === true) {\n                noSelect = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined, noSelect);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(113 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(113 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy, noSelect) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n        this.noSelect = noSelect;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(108 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* State.Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. \u00A8 + u makes \u00FC but just \u00A8 cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(83 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(111 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, noSelect: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* State.Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* State.Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* State.Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* State.Idle */ && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* State.Idle */ && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* State.Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(81 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* State.Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(81 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false, noSelect: false });\n        }, this._editor.getOption(82 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* State.Auto */, false, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing, noFilter) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* State.Auto */ : 1 /* State.Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* CompletionTriggerKind.Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t\u2193 that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, !noFilter ? itemKindFilter : new Set(), onlyFrom, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(108 /* EditorOption.suggest */), this._editor.getOption(103 /* EditorOption.snippetSuggestions */), undefined, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(108 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (const provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false, triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                noSelect: this._context.noSelect,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(108 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            if (bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.bracketText;\n                // wait for closing\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            if (!bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // wait for opening\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.bracketText;\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    const list = ranges.get(key);\n                    if (list) {\n                        const closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        const res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* Refilter.All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(108 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n        if (selectionIndex >= 0) {\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus([selectionIndex]);\n        }\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(110 /* EditorOption.suggestLineHeight */) || this._editor.getOption(46 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}\u2026` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            data.root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(109 /* EditorOption.suggestFontSize */) || e.hasChanged(110 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind) {\n    // we always set these base classes even if we do not have a path\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n    if (resource) {\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\n        let name;\n        if (resource.scheme === Schemas.data) {\n            const metadata = DataUri.parseMetaData(resource);\n            name = metadata.get(DataUri.META_DATA_LABEL);\n        }\n        else {\n            const match = resource.path.match(fileIconDirectoryRegex);\n            if (match) {\n                name = cssEscape(match[2].toLowerCase());\n                if (match[1]) {\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n                }\n            }\n            else {\n                name = cssEscape(resource.authority.toLowerCase());\n            }\n        }\n        // Folders\n        if (fileKind === FileKind.FOLDER) {\n            classes.push(`${name}-name-folder-icon`);\n        }\n        // Files\n        else {\n            // Name & Extension(s)\n            if (name) {\n                classes.push(`${name}-name-file-icon`);\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\n                // Avoid doing an explosive combination of extensions for very long filenames\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\n                // https://github.com/microsoft/vscode/issues/116199\n                if (name.length <= 255) {\n                    const dotSegments = name.split('.');\n                    for (let i = 1; i < dotSegments.length; i++) {\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n                    }\n                }\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n            }\n            // Detected Mode\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n            if (detectedLanguageId) {\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n            }\n        }\n    }\n    return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n    if (!resource) {\n        return null; // we need a resource at least\n    }\n    let languageId = null;\n    // Data URI: check for encoded metadata\n    if (resource.scheme === Schemas.data) {\n        const metadata = DataUri.parseMetaData(resource);\n        const mime = metadata.get(DataUri.META_DATA_MIME);\n        if (mime) {\n            languageId = languageService.getLanguageIdByMimeType(mime);\n        }\n    }\n    // Any other URI: check for model if existing\n    else {\n        const model = modelService.getModel(resource);\n        if (model) {\n            languageId = model.getLanguageId();\n        }\n    }\n    // only take if the language id is specific (aka no just plain text)\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n        return languageId;\n    }\n    // otherwise fallback to path based detection\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nexport function cssEscape(str) {\n    return str.replace(/[\\11\\12\\14\\15\\40]/g, '/'); // HTML class names can not contain certain whitespace characters, use / instead, which doesn't exist in file names.\n}\n", "//#endregion\n//#region Utilities\nexport var FileKind;\n(function (FileKind) {\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './ghostText.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ghostTextBackground, ghostTextBorder, ghostTextForeground } from '../../../common/core/editorColorRegistry.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { GhostTextReplacement } from './ghostText.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('editorGhostText', { createHTML: value => value });\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, instantiationService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.languageService = languageService;\n        this.disposed = false;\n        this.partsWidget = this._register(this.instantiationService.createInstance(DecorationsWidget, this.editor));\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec));\n        this.viewMoreContentWidget = undefined;\n        this.replacementDecoration = this._register(new DisposableDecorations(this.editor));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(29 /* EditorOption.disableMonospaceOptimizations */)\n                || e.hasChanged(107 /* EditorOption.stopRenderingLineAfter */)\n                || e.hasChanged(90 /* EditorOption.renderWhitespace */)\n                || e.hasChanged(85 /* EditorOption.renderControlCharacters */)\n                || e.hasChanged(47 /* EditorOption.fontLigatures */)\n                || e.hasChanged(46 /* EditorOption.fontInfo */)\n                || e.hasChanged(61 /* EditorOption.lineHeight */)) {\n                this.update();\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            this.disposed = true;\n            this.update();\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }));\n        this._register(model.onDidChange(() => {\n            this.update();\n        }));\n        this.update();\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        return (this.additionalLinesWidget.viewZoneId === viewZoneId);\n    }\n    update() {\n        var _a;\n        const ghostText = this.model.ghostText;\n        if (!this.editor.hasModel() || !ghostText || this.disposed) {\n            this.partsWidget.clear();\n            this.additionalLinesWidget.clear();\n            this.replacementDecoration.clear();\n            return;\n        }\n        const inlineTexts = new Array();\n        const additionalLines = new Array();\n        function addToAdditionalLines(lines, className) {\n            if (additionalLines.length > 0) {\n                const lastLine = additionalLines[additionalLines.length - 1];\n                if (className) {\n                    lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n                }\n                lastLine.content += lines[0];\n                lines = lines.slice(1);\n            }\n            for (const line of lines) {\n                additionalLines.push({\n                    content: line,\n                    decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n                });\n            }\n        }\n        if (ghostText instanceof GhostTextReplacement) {\n            this.replacementDecoration.setDecorations([\n                {\n                    range: new Range(ghostText.lineNumber, ghostText.columnStart, ghostText.lineNumber, ghostText.columnStart + ghostText.length),\n                    options: {\n                        inlineClassName: 'inline-completion-text-to-replace',\n                        description: 'GhostTextReplacement'\n                    }\n                },\n            ]);\n        }\n        else {\n            this.replacementDecoration.setDecorations([]);\n        }\n        const textBufferLine = this.editor.getModel().getLineContent(ghostText.lineNumber);\n        let hiddenTextStartColumn = undefined;\n        let lastIdx = 0;\n        for (const part of ghostText.parts) {\n            let lines = part.lines;\n            if (hiddenTextStartColumn === undefined) {\n                inlineTexts.push({\n                    column: part.column,\n                    text: lines[0],\n                    preview: part.preview,\n                });\n                lines = lines.slice(1);\n            }\n            else {\n                addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n            }\n            if (lines.length > 0) {\n                addToAdditionalLines(lines, 'ghost-text');\n                if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                    hiddenTextStartColumn = part.column;\n                }\n            }\n            lastIdx = part.column - 1;\n        }\n        if (hiddenTextStartColumn !== undefined) {\n            addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n        }\n        this.partsWidget.setParts(ghostText.lineNumber, inlineTexts, hiddenTextStartColumn !== undefined ? { column: hiddenTextStartColumn, length: textBufferLine.length + 1 - hiddenTextStartColumn } : undefined);\n        this.additionalLinesWidget.updateLines(ghostText.lineNumber, additionalLines, ghostText.additionalReservedLineCount);\n        if (0 < 0) {\n            // Not supported at the moment, condition is always false.\n            this.viewMoreContentWidget = this.renderViewMoreLines(new Position(ghostText.lineNumber, this.editor.getModel().getLineMaxColumn(ghostText.lineNumber)), '', 0);\n        }\n        else {\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }\n    }\n    renderViewMoreLines(position, firstLineText, remainingLinesLength) {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const domNode = document.createElement('div');\n        domNode.className = 'suggest-preview-additional-widget';\n        applyFontInfo(domNode, fontInfo);\n        const spacer = document.createElement('span');\n        spacer.className = 'content-spacer';\n        spacer.append(firstLineText);\n        domNode.append(spacer);\n        const newline = document.createElement('span');\n        newline.className = 'content-newline suggest-preview-text';\n        newline.append('\u23CE  ');\n        domNode.append(newline);\n        const disposableStore = new DisposableStore();\n        const button = document.createElement('div');\n        button.className = 'button suggest-preview-text';\n        button.append(`+${remainingLinesLength} lines\u2026`);\n        disposableStore.add(dom.addStandardDisposableListener(button, 'mousedown', (e) => {\n            var _a;\n            (_a = this.model) === null || _a === void 0 ? void 0 : _a.setExpanded(true);\n            e.preventDefault();\n            this.editor.focus();\n        }));\n        domNode.append(button);\n        return new ViewMoreLinesContentWidget(this.editor, position, domNode, disposableStore);\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ILanguageService)\n], GhostTextWidget);\nexport { GhostTextWidget };\nclass DisposableDecorations {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    setDecorations(decorations) {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, decorations);\n        });\n    }\n    clear() {\n        this.setDecorations([]);\n    }\n    dispose() {\n        this.clear();\n    }\n}\nclass DecorationsWidget {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, []);\n        });\n    }\n    setParts(lineNumber, parts, hiddenText) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const hiddenTextDecorations = new Array();\n        if (hiddenText) {\n            hiddenTextDecorations.push({\n                range: Range.fromPositions(new Position(lineNumber, hiddenText.column), new Position(lineNumber, hiddenText.column + hiddenText.length)),\n                options: {\n                    inlineClassName: 'ghost-text-hidden',\n                    description: 'ghost-text-hidden',\n                }\n            });\n        }\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, parts.map(p => {\n                return ({\n                    range: Range.fromPositions(new Position(lineNumber, p.column)),\n                    options: {\n                        description: 'ghost-text',\n                        after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration', cursorStops: InjectedTextCursorStops.Left },\n                        showIfCollapsed: true,\n                    }\n                });\n            }).concat(hiddenTextDecorations));\n        });\n    }\n}\nclass AdditionalLinesWidget {\n    constructor(editor, languageIdCodec) {\n        this.editor = editor;\n        this.languageIdCodec = languageIdCodec;\n        this._viewZoneId = undefined;\n    }\n    get viewZoneId() { return this._viewZoneId; }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n        });\n    }\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const { tabSize } = textModel.getOptions();\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n            if (heightInLines > 0) {\n                const domNode = document.createElement('div');\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n                this._viewZoneId = changeAccessor.addZone({\n                    afterLineNumber: lineNumber,\n                    heightInLines: heightInLines,\n                    domNode,\n                    afterColumnAffinity: 1 /* PositionAffinity.Right */\n                });\n            }\n        });\n    }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n    const disableMonospaceOptimizations = opts.get(29 /* EditorOption.disableMonospaceOptimizations */);\n    const stopRenderingLineAfter = opts.get(107 /* EditorOption.stopRenderingLineAfter */);\n    // To avoid visual confusion, we don't want to render visible whitespace\n    const renderWhitespace = 'none';\n    const renderControlCharacters = opts.get(85 /* EditorOption.renderControlCharacters */);\n    const fontLigatures = opts.get(47 /* EditorOption.fontLigatures */);\n    const fontInfo = opts.get(46 /* EditorOption.fontInfo */);\n    const lineHeight = opts.get(61 /* EditorOption.lineHeight */);\n    const sb = createStringBuilder(10000);\n    sb.appendASCIIString('<div class=\"suggest-preview-text\">');\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const lineData = lines[i];\n        const line = lineData.content;\n        sb.appendASCIIString('<div class=\"view-line');\n        sb.appendASCIIString('\" style=\"top:');\n        sb.appendASCIIString(String(i * lineHeight));\n        sb.appendASCIIString('px;width:1000000px;\">');\n        const isBasicASCII = strings.isBasicASCII(line);\n        const containsRTL = strings.containsRTL(line);\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n        sb.appendASCIIString('</div>');\n    }\n    sb.appendASCIIString('</div>');\n    applyFontInfo(domNode, fontInfo);\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n}\nclass ViewMoreLinesContentWidget extends Disposable {\n    constructor(editor, position, domNode, disposableStore) {\n        super();\n        this.editor = editor;\n        this.position = position;\n        this.domNode = domNode;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = false;\n        this._register(disposableStore);\n        this._register(toDisposable(() => {\n            this.editor.removeContentWidget(this);\n        }));\n        this.editor.addContentWidget(this);\n    }\n    getId() {\n        return 'editor.widget.viewMoreLinesWidget';\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: this.position,\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n        };\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const foreground = theme.getColor(ghostTextForeground);\n    if (foreground) {\n        // `!important` ensures that other decorations don't cause a style conflict (#132017).\n        collector.addRule(`.monaco-editor .ghost-text-decoration { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${foreground.toString()} !important; }`);\n    }\n    const background = theme.getColor(ghostTextBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${background.toString()}; }`);\n    }\n    const border = theme.getColor(ghostTextBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${border}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction } from './ghostTextController.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { inlineSuggestCommitId } from './consts.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n    hasMultipleSuggestions() {\n        return this.controller.hasMultipleInlineCompletions();\n    }\n    get commands() {\n        var _a, _b, _c;\n        return ((_c = (_b = (_a = this.controller.activeModel) === null || _a === void 0 ? void 0 : _a.activeInlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.completionSession.value) === null || _c === void 0 ? void 0 : _c.commands) || [];\n    }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _commandService, _menuService, _contextKeyService, _languageService, _openerService, accessibilityService) {\n        this._editor = _editor;\n        this._commandService = _commandService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this.hoverOrdinal = 3;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = GhostTextController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(viewZoneData.positionBefore || viewZoneData.position, viewZoneData.positionBefore || viewZoneData.position));\n            }\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        const controller = GhostTextController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        if (this.accessibilityService.isScreenReaderOptimized()) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        // TODO@hediet: deprecate MenuId.InlineCompletionsActions\n        const menu = disposableStore.add(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n        const previousAction = context.statusBar.addAction({\n            label: nls.localize('showNextInlineSuggestion', \"Next\"),\n            commandId: ShowNextInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)\n        });\n        const nextAction = context.statusBar.addAction({\n            label: nls.localize('showPreviousInlineSuggestion', \"Previous\"),\n            commandId: ShowPreviousInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)\n        });\n        context.statusBar.addAction({\n            label: nls.localize('acceptInlineSuggestion', \"Accept\"),\n            commandId: inlineSuggestCommitId,\n            run: () => this._commandService.executeCommand(inlineSuggestCommitId)\n        });\n        const actions = [previousAction, nextAction];\n        for (const action of actions) {\n            action.setEnabled(false);\n        }\n        part.hasMultipleSuggestions().then(hasMore => {\n            for (const action of actions) {\n                action.setEnabled(hasMore);\n            }\n        });\n        for (const command of part.commands) {\n            context.statusBar.addAction({\n                label: command.title,\n                commandId: command.id,\n                run: () => this._commandService.executeCommand(command.id, ...(command.arguments || []))\n            });\n        }\n        for (const [_, group] of menu.getActions()) {\n            for (const action of group) {\n                if (action instanceof MenuItemAction) {\n                    context.statusBar.addAction({\n                        label: action.label,\n                        commandId: action.item.id,\n                        run: () => this._commandService.executeCommand(action.item.id)\n                    });\n                }\n            }\n        }\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        var _a, _b;\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        const ghostText = (_b = (_a = part.controller.activeModel) === null || _a === void 0 ? void 0 : _a.inlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.ghostText;\n        if (ghostText) {\n            const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n            render(ghostText.renderForScreenReader(lineText));\n        }\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ICommandService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageService),\n    __param(5, IOpenerService),\n    __param(6, IAccessibilityService)\n], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from './indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return [];\n    }\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\n    if (!indentationRules) {\n        return [];\n    }\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\n    // Skip `unIndentedLinePattern` lines\n    while (startLineNumber <= endLineNumber) {\n        if (!indentationRules.unIndentedLinePattern) {\n            break;\n        }\n        const text = model.getLineContent(startLineNumber);\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\n            break;\n        }\n        startLineNumber++;\n    }\n    if (startLineNumber > endLineNumber - 1) {\n        return [];\n    }\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\n    const shiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const unshiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const indentEdits = [];\n    // indentation being passed to lines below\n    let globalIndent;\n    // Calculate indentation for the first line\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\n    const currentLineText = model.getLineContent(startLineNumber);\n    let adjustedLineContent = currentLineText;\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\n        globalIndent = inheritedIndent;\n        const oldIndentation = strings.getLeadingWhitespace(currentLineText);\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = unshiftIndent(globalIndent);\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        }\n        if (currentLineText !== adjustedLineContent) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\n        }\n    }\n    else {\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\n    }\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n    let idealIndentForNextLine = globalIndent;\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        globalIndent = shiftIndent(globalIndent);\n    }\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    }\n    startLineNumber++;\n    // Calculate indentation adjustment for all following lines\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        const text = model.getLineContent(lineNumber);\n        const oldIndentation = strings.getLeadingWhitespace(text);\n        const adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n            globalIndent = unshiftIndent(globalIndent);\n        }\n        if (oldIndentation !== idealIndentForNextLine) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n        }\n        // calculate idealIndentForNextLine\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n            // but don't change globalIndent and idealIndentForNextLine.\n            continue;\n        }\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = shiftIndent(globalIndent);\n            idealIndentForNextLine = globalIndent;\n        }\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        }\n        else {\n            idealIndentForNextLine = globalIndent;\n        }\n    }\n    return indentEdits;\n}\nexport class IndentationToSpacesAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: n === creationOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : undefined\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        model.updateOptions({\n                            tabSize: parseInt(pick.label, 10),\n                            insertSpaces: this.insertSpaces\n                        });\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    constructor() {\n        super(false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class DetectIndentation extends EditorAction {\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nDetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const edits = [];\n        for (const selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (const edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (const edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n    constructor(editor, _languageConfigurationService) {\n        this.editor = editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(9 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        const selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(9 /* EditorOption.autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const textEdits = [];\n        const indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\n                }\n                else {\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            const virtualModel = {\n                tokenization: {\n                    getLineTokens: (lineNumber) => {\n                        return model.tokenization.getLineTokens(lineNumber);\n                    },\n                    getLanguageId: () => {\n                        return model.getLanguageId();\n                    },\n                    getLanguageIdAtPosition: (lineNumber, column) => {\n                        return model.getLanguageIdAtPosition(lineNumber, column);\n                    },\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (indentOfSecondLine !== null) {\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        const lineContent = model.getLineContent(i);\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.tokenization.forceTokenization(lineNumber);\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n};\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\nAutoIndentOnPaste = __decorate([\n    __param(1, ILanguageConfigurationService)\n], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    const spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n    let spacesCnt = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) === '\\t') {\n            spacesCnt += tabSize;\n        }\n        else {\n            spacesCnt++;\n        }\n    }\n    return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n    let result = '';\n    if (!insertSpaces) {\n        const tabsCnt = Math.floor(spacesCnt / tabSize);\n        spacesCnt = spacesCnt % tabSize;\n        for (let i = 0; i < tabsCnt; i++) {\n            result += '\\t';\n        }\n    }\n    for (let i = 0; i < spacesCnt; i++) {\n        result += ' ';\n    }\n    return result;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController);\nHoverParticipantRegistry.register(InlayHintsHover);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ModifierKeyEmitter } from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n    constructor() {\n        this._entries = new LRUCache(50);\n    }\n    get(model) {\n        const key = InlayHintsCache._key(model);\n        return this._entries.get(key);\n    }\n    set(model, value) {\n        const key = InlayHintsCache._key(model);\n        this._entries.set(key, value);\n    }\n    static _key(model) {\n        return `${model.uri.toString()}/${model.getVersionId()}`;\n    }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, true);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n    constructor(item, index) {\n        this.item = item;\n        this.index = index;\n    }\n    get part() {\n        const label = this.item.hint.label;\n        if (typeof label === 'string') {\n            return { label };\n        }\n        else {\n            return label[this.index];\n        }\n    }\n}\nclass ActiveInlayHintInfo {\n    constructor(part, hasTriggerModifier) {\n        this.part = part;\n        this.hasTriggerModifier = hasTriggerModifier;\n    }\n}\n// --- controller\nlet InlayHintsController = class InlayHintsController {\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._inlayHintsCache = _inlayHintsCache;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._instaService = _instaService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._decorationsMetadata = new Map();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(129 /* EditorOption.inlayHints */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    static get(editor) {\n        var _a;\n        return (_a = editor.getContribution(InlayHintsController.ID)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    dispose() {\n        this._sessionDisposables.dispose();\n        this._removeAllDecorations();\n        this._disposables.dispose();\n    }\n    _update() {\n        this._sessionDisposables.clear();\n        this._removeAllDecorations();\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        if (options.enabled === 'off') {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n            return;\n        }\n        // iff possible, quickly update from cache\n        const cached = this._inlayHintsCache.get(model);\n        if (cached) {\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\n        }\n        this._sessionDisposables.add(toDisposable(() => {\n            // cache items when switching files etc\n            if (!model.isDisposed()) {\n                this._cacheHintsForFastRestore(model);\n            }\n        }));\n        let cts;\n        const watchedProviders = new Set();\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\n            const t1 = Date.now();\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\n            cts = new CancellationTokenSource();\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\n            try {\n                const myToken = cts.token;\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n                if (myToken.isCancellationRequested) {\n                    inlayHints.dispose();\n                    return;\n                }\n                // listen to provider changes\n                for (const provider of inlayHints.provider) {\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n                        watchedProviders.add(provider);\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\n                                scheduler.schedule();\n                            }\n                        }));\n                    }\n                }\n                this._sessionDisposables.add(inlayHints);\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n                this._cacheHintsForFastRestore(model);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                cts.dispose();\n                listener.dispose();\n            }\n        }), this._debounceInfo.get(model));\n        this._sessionDisposables.add(scheduler);\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\n        scheduler.schedule(0);\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\n            // update when scroll position changes\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n            // typing or due to \"actual\" scrolling\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\n                scheduler.schedule();\n            }\n        }));\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\n            // update less aggressive when typing\n            const delay = Math.max(scheduler.delay, 1250);\n            scheduler.schedule(delay);\n        }));\n        if (options.enabled === 'on') {\n            // different \"on\" modes: always\n            this._activeRenderMode = 0 /* RenderMode.Normal */;\n        }\n        else {\n            // different \"on\" modes: offUnlessPressed, or onUnlessPressed\n            let defaultMode;\n            let altMode;\n            if (options.enabled === 'onUnlessPressed') {\n                defaultMode = 0 /* RenderMode.Normal */;\n                altMode = 1 /* RenderMode.Invisible */;\n            }\n            else {\n                defaultMode = 1 /* RenderMode.Invisible */;\n                altMode = 0 /* RenderMode.Normal */;\n            }\n            this._activeRenderMode = defaultMode;\n            this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\n                if (!this._editor.hasModel()) {\n                    return;\n                }\n                const newRenderMode = e.altKey && e.ctrlKey ? altMode : defaultMode;\n                if (newRenderMode !== this._activeRenderMode) {\n                    this._activeRenderMode = newRenderMode;\n                    const model = this._editor.getModel();\n                    const copies = this._copyInlayHintsWithCurrentAnchor(model);\n                    this._updateHintsDecorators([model.getFullModelRange()], copies);\n                    scheduler.schedule(0);\n                }\n            }));\n        }\n        // mouse gestures\n        this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\n        this._sessionDisposables.add(this._installLinkGesture());\n        this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n        const store = new DisposableStore();\n        const gesture = store.add(new ClickLinkGesture(this._editor));\n        // let removeHighlight = () => { };\n        const sessionStore = new DisposableStore();\n        store.add(sessionStore);\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n            const [mouseEvent] = e;\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\n            const model = this._editor.getModel();\n            if (!labelPart || !model) {\n                sessionStore.clear();\n                return;\n            }\n            // resolve the item\n            const cts = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\n            labelPart.item.resolve(cts.token);\n            // render link => when the modifier is pressed and when there is a command or location\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\n                : undefined;\n            const lineNumber = labelPart.item.hint.position.lineNumber;\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n            const lineHints = this._getInlineHintsForRange(range);\n            this._updateHintsDecorators([range], lineHints);\n            sessionStore.add(toDisposable(() => {\n                this._activeInlayHintPart = undefined;\n                this._updateHintsDecorators([range], lineHints);\n            }));\n        }));\n        store.add(gesture.onCancel(() => sessionStore.clear()));\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            const label = this._getInlayHintLabelPart(e);\n            if (label) {\n                const part = label.part;\n                if (part.location) {\n                    // location -> execute go to def\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n                }\n                else if (languages.Command.is(part.command)) {\n                    // command -> execute it\n                    yield this._invokeCommand(part.command, label.item);\n                }\n            }\n        })));\n        return store;\n    }\n    _getInlineHintsForRange(range) {\n        const lineHints = new Set();\n        for (const data of this._decorationsMetadata.values()) {\n            if (range.containsRange(data.item.anchor.range)) {\n                lineHints.add(data.item);\n            }\n        }\n        return Array.from(lineHints);\n    }\n    _installDblClickGesture(updateInlayHints) {\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.event.detail !== 2) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (!part) {\n                return;\n            }\n            e.event.preventDefault();\n            yield part.item.resolve(CancellationToken.None);\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\n                this._editor.executeEdits('inlayHint.default', edits);\n                updateInlayHints();\n            }\n        }));\n    }\n    _installContextMenu() {\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\n            if (!(e.event.target instanceof HTMLElement)) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (part) {\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n            }\n        }));\n    }\n    _getInlayHintLabelPart(e) {\n        var _a;\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return undefined;\n        }\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\n            return options.attachedData;\n        }\n        return undefined;\n    }\n    _invokeCommand(command, item) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                this._notificationService.notify({\n                    severity: Severity.Error,\n                    source: item.provider.displayName,\n                    message: err\n                });\n            }\n        });\n    }\n    _cacheHintsForFastRestore(model) {\n        const hints = this._copyInlayHintsWithCurrentAnchor(model);\n        this._inlayHintsCache.set(model, hints);\n    }\n    // return inlay hints but with an anchor that reflects \"updates\"\n    // that happened after receiving them, e.g adding new lines before a hint\n    _copyInlayHintsWithCurrentAnchor(model) {\n        const items = new Map();\n        for (const [id, obj] of this._decorationsMetadata) {\n            if (items.has(obj.item)) {\n                // an inlay item can be rendered as multiple decorations\n                // but they will all uses the same range\n                continue;\n            }\n            const range = model.getDecorationRange(id);\n            if (range) {\n                // update range with whatever the editor has tweaked it to\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n                const copy = obj.item.with({ anchor });\n                items.set(obj.item, copy);\n            }\n        }\n        return Array.from(items.values());\n    }\n    _getHintsRanges() {\n        const extra = 30;\n        const model = this._editor.getModel();\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        const result = [];\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n                result.push(extendedRange);\n            }\n            else {\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n            }\n        }\n        return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n        var _a, _b;\n        // utils to collect/create injected text decorations\n        const newDecorationsData = [];\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n            const opts = {\n                content,\n                inlineClassNameAffectsLetterSpacing: true,\n                inlineClassName: ref.className,\n                cursorStops,\n                attachedData\n            };\n            newDecorationsData.push({\n                item,\n                classNameRef: ref,\n                decoration: {\n                    range: item.anchor.range,\n                    options: {\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n                        description: 'InlayHint',\n                        showIfCollapsed: item.anchor.range.isEmpty(),\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n                        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n                        [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\n                    }\n                }\n            });\n        };\n        const addInjectedWhitespace = (item, isLast) => {\n            const marginRule = this._ruleFactory.createClassNameRef({\n                width: `${(fontSize / 3) | 0}px`,\n                display: 'inline-block'\n            });\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n        };\n        //\n        const { fontSize, fontFamily, padding, isUniform } = this._getLayoutInfo();\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n        for (const item of items) {\n            // whitespace leading the actual label\n            if (item.hint.paddingLeft) {\n                addInjectedWhitespace(item, false);\n            }\n            // the label with its parts\n            const parts = typeof item.hint.label === 'string'\n                ? [{ label: item.hint.label }]\n                : item.hint.label;\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                const isFirst = i === 0;\n                const isLast = i === parts.length - 1;\n                const cssProperties = {\n                    fontSize: `${fontSize}px`,\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n                    verticalAlign: isUniform ? 'baseline' : 'middle',\n                };\n                if (isNonEmptyArray(item.hint.textEdits)) {\n                    cssProperties.cursor = 'default';\n                }\n                this._fillInColors(cssProperties, item.hint);\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\n                    // active link!\n                    cssProperties.textDecoration = 'underline';\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n                        cssProperties.cursor = 'pointer';\n                    }\n                }\n                if (padding) {\n                    if (isFirst && isLast) {\n                        // only element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isFirst) {\n                        // first element\n                        cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isLast) {\n                        // last element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n                        cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\n                    }\n                    else {\n                        cssProperties.padding = `1px 0 1px 0`;\n                    }\n                }\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n            }\n            // whitespace trailing the actual label\n            if (item.hint.paddingRight) {\n                addInjectedWhitespace(item, true);\n            }\n            if (newDecorationsData.length > InlayHintsController._MAX_DECORATORS) {\n                break;\n            }\n        }\n        // collect all decoration ids that are affected by the ranges\n        // and only update those decorations\n        const decorationIdsToReplace = [];\n        for (const range of ranges) {\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\n                const metadata = this._decorationsMetadata.get(id);\n                if (metadata) {\n                    decorationIdsToReplace.push(id);\n                    metadata.classNameRef.dispose();\n                    this._decorationsMetadata.delete(id);\n                }\n            }\n        }\n        this._editor.changeDecorations(accessor => {\n            const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n            for (let i = 0; i < newDecorationIds.length; i++) {\n                const data = newDecorationsData[i];\n                this._decorationsMetadata.set(newDecorationIds[i], data);\n            }\n        });\n    }\n    _fillInColors(props, hint) {\n        if (hint.kind === languages.InlayHintKind.Parameter) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n        }\n        else if (hint.kind === languages.InlayHintKind.Type) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n        }\n        else {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\n        }\n    }\n    _getLayoutInfo() {\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        const padding = options.padding;\n        const editorFontSize = this._editor.getOption(48 /* EditorOption.fontSize */);\n        const editorFontFamily = this._editor.getOption(45 /* EditorOption.fontFamily */);\n        let fontSize = options.fontSize;\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n            fontSize = editorFontSize;\n        }\n        const fontFamily = options.fontFamily || editorFontFamily;\n        const isUniform = !padding\n            && fontFamily === editorFontFamily\n            && fontSize === editorFontSize;\n        return { fontSize, fontFamily, padding, isUniform };\n    }\n    _removeAllDecorations() {\n        this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\n        for (const obj of this._decorationsMetadata.values()) {\n            obj.classNameRef.dispose();\n        }\n        this._decorationsMetadata.clear();\n    }\n};\nInlayHintsController.ID = 'editor.contrib.InlayHints';\nInlayHintsController._MAX_DECORATORS = 1500;\nInlayHintsController = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, IInlayHintsCache),\n    __param(4, ICommandService),\n    __param(5, INotificationService),\n    __param(6, IInstantiationService)\n], InlayHintsController);\nexport { InlayHintsController };\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n    const noBreakWhitespace = '\\xa0';\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(URI.isUri(uri));\n    assertType(Range.isIRange(range));\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n        const result = model.items.map(i => i.hint);\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n        return result;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n    constructor(range, direction) {\n        this.range = range;\n        this.direction = direction;\n    }\n}\nexport class InlayHintItem {\n    constructor(hint, anchor, provider) {\n        this.hint = hint;\n        this.anchor = anchor;\n        this.provider = provider;\n        this._isResolved = false;\n    }\n    with(delta) {\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n        result._isResolved = this._isResolved;\n        result._currentResolve = this._currentResolve;\n        return result;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.provider.resolveInlayHint !== 'function') {\n                return;\n            }\n            if (this._currentResolve) {\n                // wait for an active resolve operation and try again\n                // when that's done.\n                yield this._currentResolve;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                return this.resolve(token);\n            }\n            if (!this._isResolved) {\n                this._currentResolve = this._doResolve(token)\n                    .finally(() => this._currentResolve = undefined);\n            }\n            yield this._currentResolve;\n        });\n    }\n    _doResolve(token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\n                this._isResolved = true;\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                this._isResolved = false;\n            }\n        });\n    }\n}\nexport class InlayHintsFragments {\n    constructor(ranges, data, model) {\n        this._disposables = new DisposableStore();\n        this.ranges = ranges;\n        this.provider = new Set();\n        const items = [];\n        for (const [list, provider] of data) {\n            this._disposables.add(list);\n            this.provider.add(provider);\n            for (const hint of list.hints) {\n                // compute the range to which the item should be attached to\n                const position = model.validatePosition(hint.position);\n                let direction = 'before';\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n                let range;\n                if (wordRange.getStartPosition().isBefore(position)) {\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\n                    direction = 'after';\n                }\n                else {\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\n                    direction = 'before';\n                }\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n            }\n        }\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n    }\n    static create(registry, model, ranges, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const result = yield provider.provideInlayHints(model, range, token);\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\n                        data.push([result, provider]);\n                    }\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            yield Promise.all(promises.flat());\n            if (token.isCancellationRequested || model.isDisposed()) {\n                throw new CancellationError();\n            }\n            return new InlayHintsFragments(ranges, data, model);\n        });\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    static _getRangeAtPosition(model, position) {\n        const line = position.lineNumber;\n        const word = model.getWordAtPosition(position);\n        if (word) {\n            // always prefer the word range\n            return new Range(line, word.startColumn, line, word.endColumn);\n        }\n        model.tokenization.tokenizeIfCheap(line);\n        const tokens = model.tokenization.getLineTokens(line);\n        const offset = position.column - 1;\n        const idx = tokens.findTokenIndexAtOffset(offset);\n        let start = tokens.getStartOffset(idx);\n        let end = tokens.getEndOffset(idx);\n        if (end - start === 1) {\n            // single character token, when at its end try leading/trailing token instead\n            if (start === offset && idx > 1) {\n                // leading token\n                start = tokens.getStartOffset(idx - 1);\n                end = tokens.getEndOffset(idx - 1);\n            }\n            else if (end === offset && idx < tokens.getCount() - 1) {\n                // trailing token\n                start = tokens.getStartOffset(idx + 1);\n                end = tokens.getEndOffset(idx + 1);\n            }\n        }\n        return new Range(line, start + 1, line, end + 1);\n    }\n}\nexport function asCommandLink(command) {\n    return URI.from({\n        scheme: Schemas.command,\n        path: command.id,\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n    }).toString();\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { EditorExtensionsRegistry } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const contextMenuService = accessor.get(IContextMenuService);\n        const commandService = accessor.get(ICommandService);\n        const instaService = accessor.get(IInstantiationService);\n        const notificationService = accessor.get(INotificationService);\n        yield part.item.resolve(CancellationToken.None);\n        if (!part.part.location) {\n            return;\n        }\n        const location = part.part.location;\n        const menuActions = [];\n        // from all registered (not active) context menu actions select those\n        // that are a symbol navigation action\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n            .map(item => isIMenuItem(item) ? item.command.id : ''));\n        for (const delegate of EditorExtensionsRegistry.getEditorActions()) {\n            if (delegate instanceof SymbolNavigationAction && filter.has(delegate.id)) {\n                menuActions.push(new Action(delegate.id, delegate.label, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                    const ref = yield resolverService.createModelReference(location.uri);\n                    try {\n                        yield instaService.invokeFunction(delegate.run.bind(delegate), editor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)));\n                    }\n                    finally {\n                        ref.dispose();\n                    }\n                })));\n            }\n        }\n        if (part.part.command) {\n            const { command } = part.part;\n            menuActions.push(new Separator());\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                var _b;\n                try {\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\n                }\n                catch (err) {\n                    notificationService.notify({\n                        severity: Severity.Error,\n                        source: part.item.provider.displayName,\n                        message: err\n                    });\n                }\n            })));\n        }\n        // show context menu\n        const useShadowDOM = editor.getOption(117 /* EditorOption.useShadowDOM */);\n        contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n            getAnchor: () => {\n                const box = dom.getDomNodePagePosition(anchor);\n                return { x: box.left, y: box.top + box.height + 8 };\n            },\n            getActions: () => menuActions,\n            onHide: () => {\n                editor.focus();\n            },\n            autoSelectFirstItem: true,\n        });\n    });\n}\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const ref = yield resolverService.createModelReference(location.uri);\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\n            const openToSide = event.hasSideBySideModifier;\n            const contextKeyService = accessor.get(IContextKeyService);\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n            const canPeek = !openToSide && editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, editor, { model: ref.object.textEditorModel, position: Range.getStartPosition(location.range) });\n        }));\n        ref.dispose();\n    });\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner) {\n        super(10, owner, part.item.anchor.range);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n            }\n            // (1.2) Inlay dbl-click gesture\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double click to insert\"))], 10001));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                    const item = iterable_1_1.value;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* KeybindingWeight.EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(9 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        for (const selection of editor.getSelections()) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n            alias: 'Transpose characters around the cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(119 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class KebabCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n    constructor(selection, cursors) {\n        this._selection = selection;\n        this._cursors = cursors;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const ops = trimTrailingWhitespace(model, this._cursors);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            builder.addEditOperation(op.range, op.text);\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors) {\n    // Sort cursors ascending\n    cursors.sort((a, b) => {\n        if (a.lineNumber === b.lineNumber) {\n            return a.column - b.column;\n        }\n        return a.lineNumber - b.lineNumber;\n    });\n    // Reduce multiple cursors on the same line and only keep the last one on the line\n    for (let i = cursors.length - 2; i >= 0; i--) {\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n            // Remove cursor at `i`\n            cursors.splice(i, 1);\n        }\n    }\n    const r = [];\n    let rLen = 0;\n    let cursorIndex = 0;\n    const cursorLen = cursors.length;\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        const lineContent = model.getLineContent(lineNumber);\n        const maxLineColumn = lineContent.length + 1;\n        let minEditColumn = 0;\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n            minEditColumn = cursors[cursorIndex].column;\n            cursorIndex++;\n            if (minEditColumn === maxLineColumn) {\n                // The cursor is at the end of the line => no edits for sure on this line\n                continue;\n            }\n        }\n        if (lineContent.length === 0) {\n            continue;\n        }\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n        let fromColumn = 0;\n        if (lastNonWhitespaceIndex === -1) {\n            // Entire line is whitespace\n            fromColumn = 1;\n        }\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n            // There is trailing whitespace\n            fromColumn = lastNonWhitespaceIndex + 2;\n        }\n        else {\n            // There is no trailing whitespace\n            continue;\n        }\n        fromColumn = Math.max(minEditColumn, fromColumn);\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n    }\n    return r;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nlet MoveLinesCommand = class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        const modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        const virtualModel = {\n            tokenization: {\n                getLineTokens: (lineNumber) => {\n                    return model.tokenization.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            const lineNumber = s.startLineNumber;\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimLeft(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfMovingLine !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimLeft(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            const movingLineText = model.getLineContent(line);\n            if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                const lineContent = model.getLineContent(validPrecedingLine);\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimLeft(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + offset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n};\nMoveLinesCommand = __decorate([\n    __param(3, ILanguageConfigurationService)\n], MoveLinesCommand);\nexport { MoveLinesCommand };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    getEditOperations(model, builder) {\n        const op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        const data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    const startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    const linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    const data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._syncRangesToken = 0;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { min: 200 });\n        this._currentDecorations = this._editor.createDecorationsCollection();\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(64 /* EditorOption.linkedEditing */) || e.hasChanged(84 /* EditorOption.renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution.ID);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(64 /* EditorOption.linkedEditing */) || this._editor.getOption(84 /* EditorOption.renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (token) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = this._currentDecorations.getRange(0);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._syncRangesToken);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(token) {\n        // dalayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = this._currentDecorations.getRange(0);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        const edits = [];\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n            const mirrorRange = this._currentDecorations.getRange(i);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations.clear();\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations.length > 0) {\n                    const range = this._currentDecorations.getRange(0);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations.set(decorations);\n                    this._syncRangesToken++; // cancel any pending syncRanges call\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n    const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n    if (editorLinkedEditingBackgroundColor) {\n        collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\n    }\n});\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet LinkDetector = class LinkDetector extends Disposable {\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(65 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkDetector.ID);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(65 /* EditorOption.links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .detected-link-active { color: ${activeLinkForeground} !important; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        const result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerSelectionHighlightForeground, minimapSelectionOccurrenceHighlight } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            this._run(multiCursorController, findController);\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        this._setState(SelectionHighlighter._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(119 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasFindOccurrences = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                // Show in overviewRuler only if model has no semantic highlighting\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nSelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nSelectionHighlighter = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = class ParameterHintsController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.widget = this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor));\n    }\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController.ID);\n    }\n    cancel() {\n        this.widget.cancel();\n    }\n    previous() {\n        this.widget.previous();\n    }\n    next() {\n        this.widget.next();\n    }\n    trigger(context) {\n        this.widget.trigger(context);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = __decorate([\n    __param(1, IInstantiationService)\n], ParameterHintsController);\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        if (controller) {\n            controller.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.Invoke\n            });\n        }\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, listHighlightForeground, registerColor, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    constructor(editor, contextKeyService, openerService, languageService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n        this._register(this.model.onChangedHints(newParameterHints => {\n            if (newParameterHints) {\n                this.show();\n                this.render(newParameterHints);\n            }\n            else {\n                this.hide();\n            }\n        }));\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(46 /* EditorOption.fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget.ID;\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageFeaturesService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nexport const editorHoverWidgetHighlightForeground = registerColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n    }\n    const parameterHighlightColor = theme.getColor(editorHoverWidgetHighlightForeground);\n    if (parameterHighlightColor) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        // Update trigger characters\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                this.triggerChars.add(ch.charCodeAt(0));\n                // All trigger characters are also considered retrigger characters\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(78 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(new IdleValue(() => this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range);\n            // do rename at location\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = class SmartSelectController {\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(104 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.incomplete.size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(81 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(108 /* EditorOption.suggest */, model), this._getEditorOption(103 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch(true);\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(115 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 4;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */:\n                    reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    break;\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n", "var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../common/opener.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nlet Link = class Link extends Disposable {\n    constructor(container, _link, options = {}, openerService) {\n        var _a;\n        super();\n        this._link = _link;\n        this._enabled = true;\n        this.el = append(container, $('a.monaco-link', {\n            tabIndex: (_a = _link.tabIndex) !== null && _a !== void 0 ? _a : 0,\n            href: _link.href,\n            title: _link.title\n        }, _link.label));\n        this.el.setAttribute('role', 'button');\n        const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\n        const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\n        const onEnterPress = Event.chain(onKeyPress.event)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 3 /* KeyCode.Enter */)\n            .event;\n        const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\n        this._register(Gesture.addTarget(this.el));\n        const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\n        this._register(onOpen(e => {\n            if (!this.enabled) {\n                return;\n            }\n            EventHelper.stop(e, true);\n            if (options === null || options === void 0 ? void 0 : options.opener) {\n                options.opener(this._link.href);\n            }\n            else {\n                openerService.open(this._link.href, { allowCommands: true });\n            }\n        }));\n        this.enabled = true;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        if (enabled) {\n            this.el.setAttribute('aria-disabled', 'false');\n            this.el.tabIndex = 0;\n            this.el.style.pointerEvents = 'auto';\n            this.el.style.opacity = '1';\n            this.el.style.cursor = 'pointer';\n            this._enabled = false;\n        }\n        else {\n            this.el.setAttribute('aria-disabled', 'true');\n            this.el.tabIndex = -1;\n            this.el.style.pointerEvents = 'none';\n            this.el.style.opacity = '0.4';\n            this.el.style.cursor = 'default';\n            this._enabled = true;\n        }\n        this._enabled = enabled;\n    }\n};\nLink = __decorate([\n    __param(3, IOpenerService)\n], Link);\nexport { Link };\nregisterThemingParticipant((theme, collector) => {\n    const textLinkForegroundColor = theme.getColor(textLinkForeground);\n    if (textLinkForegroundColor) {\n        collector.addRule(`.monaco-link { color: ${textLinkForegroundColor}; }`);\n    }\n    const textLinkActiveForegroundColor = theme.getColor(textLinkActiveForeground);\n    if (textLinkActiveForegroundColor) {\n        collector.addRule(`.monaco-link:hover { color: ${textLinkActiveForegroundColor}; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(116 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(83 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            const result = yield this._dialogService.confirm({\n                title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                primaryButton: nls.localize('unusualLineTerminators.fix', \"Remove Unusual Line Terminators\"),\n                secondaryButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n            });\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hcDark: null, hcLight: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hcDark: null, hcLight: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nconst editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hcDark: '#A0A0A0CC', hcLight: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hcDark: '#C0A0C0CC', hcLight: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n    const orderedByScore = registry.ordered(model);\n    // in order of score ask the occurrences provider\n    // until someone response with a good result\n    // (good = none empty array)\n    return first(orderedByScore.map(provider => () => {\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n            .then(undefined, onUnexpectedExternalError);\n    }), arrays.isNonEmptyArray);\n}\nclass OccurenceAtPositionRequest {\n    constructor(_model, _selection, _wordSeparators) {\n        this._model = _model;\n        this._selection = _selection;\n        this._wordSeparators = _wordSeparators;\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\n        this._result = null;\n    }\n    get result() {\n        if (!this._result) {\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n        }\n        return this._result;\n    }\n    _getCurrentWordRange(model, selection) {\n        const word = model.getWordAtPosition(selection.getPosition());\n        if (word) {\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n        }\n        return null;\n    }\n    isValid(model, selection, decorations) {\n        const lineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endColumn = selection.endColumn;\n        const currentWordRange = this._getCurrentWordRange(model, selection);\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n        // (Same symbol)\n        for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\n            const range = decorations.getRange(i);\n            if (range && range.startLineNumber === lineNumber) {\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n                    requestIsValid = true;\n                }\n            }\n        }\n        return requestIsValid;\n    }\n    cancel() {\n        this.result.cancel();\n    }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators, providers) {\n        super(model, selection, wordSeparators);\n        this._providers = providers;\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\n    }\n}\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators) {\n        super(model, selection, wordSeparators);\n        this._selectionIsEmpty = selection.isEmpty();\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return timeout(250, token).then(() => {\n            if (!selection.isEmpty()) {\n                return [];\n            }\n            const word = model.getWordAtPosition(selection.getPosition());\n            if (!word || word.word.length > 1000) {\n                return [];\n            }\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n            return matches.map(m => {\n                return {\n                    range: m.range,\n                    kind: DocumentHighlightKind.Text\n                };\n            });\n        });\n    }\n    isValid(model, selection, decorations) {\n        const currentSelectionIsEmpty = selection.isEmpty();\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n            return false;\n        }\n        return super.isValid(model, selection, decorations);\n    }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\n    if (registry.has(model)) {\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n    }\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n});\nclass WordHighlighter {\n    constructor(editor, providers, contextKeyService) {\n        this.toUnhook = new DisposableStore();\n        this.workerRequestTokenId = 0;\n        this.workerRequestCompleted = false;\n        this.workerRequestValue = [];\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n        this.editor = editor;\n        this.providers = providers;\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n        this._ignorePositionChangeEvent = false;\n        this.occurrencesHighlight = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        this.model = this.editor.getModel();\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\n            if (this._ignorePositionChangeEvent) {\n                // We are changing the position => ignore this event\n                return;\n            }\n            if (!this.occurrencesHighlight) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._onPositionChanged(e);\n        }));\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\n            this._stopAll();\n        }));\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n            const newValue = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n            if (this.occurrencesHighlight !== newValue) {\n                this.occurrencesHighlight = newValue;\n                this._stopAll();\n            }\n        }));\n        this.decorations = this.editor.createDecorationsCollection();\n        this.workerRequestTokenId = 0;\n        this.workerRequest = null;\n        this.workerRequestCompleted = false;\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n    }\n    hasDecorations() {\n        return (this.decorations.length > 0);\n    }\n    restore() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._run();\n    }\n    _getSortedHighlights() {\n        return (this.decorations.getRanges()\n            .sort(Range.compareRangesUsingStarts));\n    }\n    moveNext() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index + 1) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    moveBack() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index - 1 + highlights.length) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    _removeDecorations() {\n        if (this.decorations.length > 0) {\n            // remove decorations\n            this.decorations.clear();\n            this._hasWordHighlights.set(false);\n        }\n    }\n    _stopAll() {\n        // Remove any existing decorations\n        this._removeDecorations();\n        // Cancel any renderDecorationsTimer\n        if (this.renderDecorationsTimer !== -1) {\n            clearTimeout(this.renderDecorationsTimer);\n            this.renderDecorationsTimer = -1;\n        }\n        // Cancel any worker request\n        if (this.workerRequest !== null) {\n            this.workerRequest.cancel();\n            this.workerRequest = null;\n        }\n        // Invalidate any worker request callback\n        if (!this.workerRequestCompleted) {\n            this.workerRequestTokenId++;\n            this.workerRequestCompleted = true;\n        }\n    }\n    _onPositionChanged(e) {\n        // disabled\n        if (!this.occurrencesHighlight) {\n            this._stopAll();\n            return;\n        }\n        // ignore typing & other\n        if (e.reason !== 3 /* CursorChangeReason.Explicit */) {\n            this._stopAll();\n            return;\n        }\n        this._run();\n    }\n    _getWord() {\n        const editorSelection = this.editor.getSelection();\n        const lineNumber = editorSelection.startLineNumber;\n        const startColumn = editorSelection.startColumn;\n        return this.model.getWordAtPosition({\n            lineNumber: lineNumber,\n            column: startColumn\n        });\n    }\n    _run() {\n        const editorSelection = this.editor.getSelection();\n        // ignore multiline selection\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n            this._stopAll();\n            return;\n        }\n        const startColumn = editorSelection.startColumn;\n        const endColumn = editorSelection.endColumn;\n        const word = this._getWord();\n        // The selection must be inside a word or surround one word at most\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n            this._stopAll();\n            return;\n        }\n        // All the effort below is trying to achieve this:\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\n        // - 250ms later after the last cursor move event, render the occurrences\n        // - no flickering!\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations));\n        // There are 4 cases:\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n        // c) old workerRequest is valid, but not completed\n        // d) old workerRequest is not valid\n        // For a) no action is needed\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\n        if (workerRequestIsValid) {\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n                // case b)\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\n                clearTimeout(this.renderDecorationsTimer);\n                this.renderDecorationsTimer = -1;\n                this._beginRenderDecorations();\n            }\n        }\n        else {\n            // case d)\n            // Stop all previous actions and start fresh\n            this._stopAll();\n            const myRequestId = ++this.workerRequestTokenId;\n            this.workerRequestCompleted = false;\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(119 /* EditorOption.wordSeparators */));\n            this.workerRequest.result.then(data => {\n                if (myRequestId === this.workerRequestTokenId) {\n                    this.workerRequestCompleted = true;\n                    this.workerRequestValue = data || [];\n                    this._beginRenderDecorations();\n                }\n            }, onUnexpectedError);\n        }\n    }\n    _beginRenderDecorations() {\n        const currentTime = (new Date()).getTime();\n        const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n        if (currentTime >= minimumRenderTime) {\n            // Synchronous\n            this.renderDecorationsTimer = -1;\n            this.renderDecorations();\n        }\n        else {\n            // Asynchronous\n            this.renderDecorationsTimer = setTimeout(() => {\n                this.renderDecorations();\n            }, (minimumRenderTime - currentTime));\n        }\n    }\n    renderDecorations() {\n        this.renderDecorationsTimer = -1;\n        const decorations = [];\n        for (const info of this.workerRequestValue) {\n            if (info.range) {\n                decorations.push({\n                    range: info.range,\n                    options: WordHighlighter._getDecorationOptions(info.kind)\n                });\n            }\n        }\n        this.decorations.set(decorations);\n        this._hasWordHighlights.set(this.hasDecorations());\n    }\n    static _getDecorationOptions(kind) {\n        if (kind === DocumentHighlightKind.Write) {\n            return this._WRITE_OPTIONS;\n        }\n        else if (kind === DocumentHighlightKind.Text) {\n            return this._TEXT_OPTIONS;\n        }\n        else {\n            return this._REGULAR_OPTIONS;\n        }\n    }\n    dispose() {\n        this._stopAll();\n        this.toUnhook.dispose();\n    }\n}\nWordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-strong',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nlet WordHighlighterContribution = class WordHighlighterContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService) {\n        super();\n        this.wordHighlighter = null;\n        const createWordHighlighterIfPossible = () => {\n            if (editor.hasModel()) {\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, contextKeyService);\n            }\n        };\n        this._register(editor.onDidChangeModel((e) => {\n            if (this.wordHighlighter) {\n                this.wordHighlighter.dispose();\n                this.wordHighlighter = null;\n            }\n            createWordHighlighterIfPossible();\n        }));\n        createWordHighlighterIfPossible();\n    }\n    static get(editor) {\n        return editor.getContribution(WordHighlighterContribution.ID);\n    }\n    saveViewState() {\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n            return true;\n        }\n        return false;\n    }\n    moveNext() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveNext();\n        }\n    }\n    moveBack() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveBack();\n        }\n    }\n    restoreViewState(state) {\n        if (this.wordHighlighter && state) {\n            this.wordHighlighter.restore();\n        }\n    }\n    dispose() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.dispose();\n            this.wordHighlighter = null;\n        }\n        super.dispose();\n    }\n};\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\nWordHighlighterContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService)\n], WordHighlighterContribution);\nclass WordHighlightNavigationAction extends EditorAction {\n    constructor(next, opts) {\n        super(opts);\n        this._isNext = next;\n    }\n    run(accessor, editor) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        if (this._isNext) {\n            controller.moveNext();\n        }\n        else {\n            controller.moveBack();\n        }\n    }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.wordHighlight.next',\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n            alias: 'Go to Next Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.wordHighlight.prev',\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n            alias: 'Go to Previous Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.wordHighlight.trigger',\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n            alias: 'Trigger Symbol Highlight',\n            precondition: ctxHasWordHighlights.toNegated(),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.restoreViewState(true);\n    }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant((theme, collector) => {\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\n    if (selectionHighlight) {\n        collector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`);\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n    }\n    const wordHighlight = theme.getColor(editorWordHighlight);\n    if (wordHighlight) {\n        collector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);\n    }\n    const wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n    if (wordHighlightStrong) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);\n    }\n    const selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n    if (selectionHighlightBorder) {\n        collector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${selectionHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n    if (wordHighlightBorder) {\n        collector.addRule(`.monaco-editor .wordHighlight { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n    if (wordHighlightStrongBorder) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightStrongBorder}; box-sizing: border-box; }`);\n    }\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._inSelectionMode = opts.inSelectionMode;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const result = selections.map((sel) => {\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\n        });\n        model.pushStackElement();\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n        if (result.length === 1) {\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n            editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\n        }\n    }\n    _moveTo(from, to, inSelectionMode) {\n        if (inSelectionMode) {\n            // move just position\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n        }\n        else {\n            // move everything\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n        }\n    }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class WordRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeft',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeftSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRight',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRightSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class DeleteWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const autoClosingBrackets = editor.getOption(5 /* EditorOption.autoClosingBrackets */);\n        const autoClosingQuotes = editor.getOption(8 /* EditorOption.autoClosingQuotes */);\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n        const viewModel = editor._getViewModel();\n        const commands = selections.map((sel) => {\n            const deleteRange = this._delete({\n                wordSeparators,\n                model,\n                selection: sel,\n                whitespaceHeuristics: this._whitespaceHeuristics,\n                autoClosingDelete: editor.getOption(6 /* EditorOption.autoClosingDelete */),\n                autoClosingBrackets,\n                autoClosingQuotes,\n                autoClosingPairs,\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n            }, this._wordNavigationType);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteInsideWord extends EditorAction {\n    constructor() {\n        super({\n            id: 'deleteInsideWord',\n            precondition: EditorContextKeys.writable,\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\n            alias: 'Delete Word'\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const commands = selections.map((sel) => {\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordPartLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartLeft(ctx);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordPartRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartRight(ctx);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            if (this.editor.isSimpleWidget) {\n                messageController.showMessage(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"), this.editor.getPosition());\n            }\n            else {\n                messageController.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this.editor.getPosition());\n            }\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './editor.all.js';\nimport './standalone/browser/accessibilityHelp/accessibilityHelp.js';\nimport './standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\nimport './standalone/browser/inspectTokens/inspectTokens.js';\nimport './standalone/browser/quickAccess/standaloneHelpQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js';\nimport './standalone/browser/quickAccess/standaloneCommandsQuickAccess.js';\nimport './standalone/browser/referenceSearch/standaloneReferenceSearch.js';\nimport './standalone/browser/toggleHighContrast/toggleHighContrast.js';\nexport * from './editor.api.js';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(83 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { localize } from '../../../nls.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService } from '../common/quickInput.js';\nlet HelpQuickAccessProvider = class HelpQuickAccessProvider {\n    constructor(quickInputService, keybindingService) {\n        this.quickInputService = quickInputService;\n        this.keybindingService = keybindingService;\n        this.registry = Registry.as(Extensions.Quickaccess);\n    }\n    provide(picker) {\n        const disposables = new DisposableStore();\n        // Open a picker with the selected value if picked\n        disposables.add(picker.onDidAccept(() => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                this.quickInputService.quickAccess.show(item.prefix, { preserveValue: true });\n            }\n        }));\n        // Also open a picker when we detect the user typed the exact\n        // name of a provider (e.g. `?term` for terminals)\n        disposables.add(picker.onDidChangeValue(value => {\n            const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider.PREFIX.length));\n            if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider.PREFIX) {\n                this.quickInputService.quickAccess.show(providerDescriptor.prefix, { preserveValue: true });\n            }\n        }));\n        // Fill in all providers\n        picker.items = this.getQuickAccessProviders();\n        return disposables;\n    }\n    getQuickAccessProviders() {\n        const providers = [];\n        for (const provider of this.registry.getQuickAccessProviders().sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix))) {\n            if (provider.prefix === HelpQuickAccessProvider.PREFIX) {\n                continue; // exclude help which is already active\n            }\n            for (const helpEntry of provider.helpEntries) {\n                const prefix = helpEntry.prefix || provider.prefix;\n                const label = prefix || '\\u2026' /* ... */;\n                providers.push({\n                    prefix,\n                    label,\n                    keybinding: helpEntry.commandId ? this.keybindingService.lookupKeybinding(helpEntry.commandId) : undefined,\n                    ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\n                    description: helpEntry.description\n                });\n            }\n        }\n        return providers;\n    }\n};\nHelpQuickAccessProvider.PREFIX = '?';\nHelpQuickAccessProvider = __decorate([\n    __param(0, IQuickInputService),\n    __param(1, IKeybindingService)\n], HelpQuickAccessProvider);\nexport { HelpQuickAccessProvider };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(62 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.gotoLine';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arrays.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        // However, ignore the very first two events so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = 2;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent-- > 0) {\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} \u2022 ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n", "import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\nimport { sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { stripWildcards } from './strings.js';\nconst NO_SCORE2 = [undefined, []];\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\n    // Score: multiple inputs\n    const preparedQuery = query;\n    if (preparedQuery.values && preparedQuery.values.length > 1) {\n        return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\n    }\n    // Score: single input\n    return doScoreFuzzy2Single(target, query, patternStart, wordStart);\n}\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\n    let totalScore = 0;\n    const totalMatches = [];\n    for (const queryPiece of query) {\n        const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\n        if (typeof score !== 'number') {\n            // if a single query value does not match, return with\n            // no score entirely, we require all queries to match\n            return NO_SCORE2;\n        }\n        totalScore += score;\n        totalMatches.push(...matches);\n    }\n    // if we have a score, ensure that the positions are\n    // sorted in ascending order and distinct\n    return [totalScore, normalizeMatches(totalMatches)];\n}\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\n    const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, { firstMatchCanBeWeak: true, boostFullMatch: true });\n    if (!score) {\n        return NO_SCORE2;\n    }\n    return [score[0], createFuzzyMatches(score)];\n}\nconst NO_ITEM_SCORE = Object.freeze({ score: 0 });\nfunction normalizeMatches(matches) {\n    // sort matches by start to be able to normalize\n    const sortedMatches = matches.sort((matchA, matchB) => {\n        return matchA.start - matchB.start;\n    });\n    // merge matches that overlap\n    const normalizedMatches = [];\n    let currentMatch = undefined;\n    for (const match of sortedMatches) {\n        // if we have no current match or the matches\n        // do not overlap, we take it as is and remember\n        // it for future merging\n        if (!currentMatch || !matchOverlaps(currentMatch, match)) {\n            currentMatch = match;\n            normalizedMatches.push(match);\n        }\n        // otherwise we merge the matches\n        else {\n            currentMatch.start = Math.min(currentMatch.start, match.start);\n            currentMatch.end = Math.max(currentMatch.end, match.end);\n        }\n    }\n    return normalizedMatches;\n}\nfunction matchOverlaps(matchA, matchB) {\n    if (matchA.end < matchB.start) {\n        return false; // A ends before B starts\n    }\n    if (matchB.end < matchA.start) {\n        return false; // B ends before A starts\n    }\n    return true;\n}\n/*\n * If a query is wrapped in quotes, the user does not want to\n * use fuzzy search for this query.\n */\nfunction queryExpectsExactMatch(query) {\n    return query.startsWith('\"') && query.endsWith('\"');\n}\n/**\n * Helper function to prepare a search value for scoring by removing unwanted characters\n * and allowing to score on multiple pieces separated by whitespace character.\n */\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\nexport function prepareQuery(original) {\n    if (typeof original !== 'string') {\n        original = '';\n    }\n    const originalLowercase = original.toLowerCase();\n    const { pathNormalized, normalized, normalizedLowercase } = normalizeQuery(original);\n    const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\n    const expectExactMatch = queryExpectsExactMatch(original);\n    let values = undefined;\n    const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\n    if (originalSplit.length > 1) {\n        for (const originalPiece of originalSplit) {\n            const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\n            const { pathNormalized: pathNormalizedPiece, normalized: normalizedPiece, normalizedLowercase: normalizedLowercasePiece } = normalizeQuery(originalPiece);\n            if (normalizedPiece) {\n                if (!values) {\n                    values = [];\n                }\n                values.push({\n                    original: originalPiece,\n                    originalLowercase: originalPiece.toLowerCase(),\n                    pathNormalized: pathNormalizedPiece,\n                    normalized: normalizedPiece,\n                    normalizedLowercase: normalizedLowercasePiece,\n                    expectContiguousMatch: expectExactMatchPiece\n                });\n            }\n        }\n    }\n    return { original, originalLowercase, pathNormalized, normalized, normalizedLowercase, values, containsPathSeparator, expectContiguousMatch: expectExactMatch };\n}\nfunction normalizeQuery(original) {\n    let pathNormalized;\n    if (isWindows) {\n        pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\n    }\n    else {\n        pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\n    }\n    // we remove quotes here because quotes are used for exact match search\n    const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\n    return {\n        pathNormalized,\n        normalized,\n        normalizedLowercase: normalized.toLowerCase()\n    };\n}\nexport function pieceToQuery(arg1) {\n    if (Array.isArray(arg1)) {\n        return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\n    }\n    return prepareQuery(arg1.original);\n}\n//#endregion\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport class GotoSymbolAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoSymbolAction.ID,\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX);\n    }\n}\nGotoSymbolAction.ID = 'editor.action.quickOutline';\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\n    ]\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    get activeTextEditorControl() { return withNullAsUndefined(this.codeEditorService.getFocusedCodeEditor()); }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.quickCommand';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\n});\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from './arrays.js';\nimport * as types from './types.js';\nimport * as nls from '../../nls.js';\nfunction exceptionToErrorMessage(exception, verbose) {\n    if (verbose && (exception.stack || exception.stacktrace)) {\n        return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\n    }\n    return detectSystemErrorMessage(exception);\n}\nfunction stackToString(stack) {\n    if (Array.isArray(stack)) {\n        return stack.join('\\n');\n    }\n    return stack;\n}\nfunction detectSystemErrorMessage(exception) {\n    // See https://nodejs.org/api/errors.html#errors_class_system_error\n    if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\n        return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\n    }\n    return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error = null, verbose = false) {\n    if (!error) {\n        return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n    }\n    if (Array.isArray(error)) {\n        const errors = arrays.coalesce(error);\n        const msg = toErrorMessage(errors[0], verbose);\n        if (errors.length > 1) {\n            return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\n        }\n        return msg;\n    }\n    if (types.isString(error)) {\n        return error;\n    }\n    if (error.detail) {\n        const detail = error.detail;\n        if (detail.error) {\n            return exceptionToErrorMessage(detail.error, verbose);\n        }\n        if (detail.exception) {\n            return exceptionToErrorMessage(detail.exception, verbose);\n        }\n    }\n    if (error.stack) {\n        return exceptionToErrorMessage(error, verbose);\n    }\n    if (error.message) {\n        return error.message;\n    }\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport Severity from '../../../base/common/severity.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { localize } from '../../../nls.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nlet AbstractCommandsQuickAccessProvider = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(AbstractCommandsQuickAccessProvider.PREFIX, options);\n        this.instantiationService = instantiationService;\n        this.keybindingService = keybindingService;\n        this.commandService = commandService;\n        this.telemetryService = telemetryService;\n        this.dialogService = dialogService;\n        this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\n        this.options = options;\n    }\n    _getPicks(filter, disposables, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Ask subclass for all command picks\n            const allCommandPicks = yield this.getCommandPicks(disposables, token);\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            // Filter\n            const filteredCommandPicks = [];\n            for (const commandPick of allCommandPicks) {\n                const labelHighlights = withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.label));\n                const aliasHighlights = commandPick.commandAlias ? withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.commandAlias)) : undefined;\n                // Add if matching in label or alias\n                if (labelHighlights || aliasHighlights) {\n                    commandPick.highlights = {\n                        label: labelHighlights,\n                        detail: this.options.showAlias ? aliasHighlights : undefined\n                    };\n                    filteredCommandPicks.push(commandPick);\n                }\n                // Also add if we have a 100% command ID match\n                else if (filter === commandPick.commandId) {\n                    filteredCommandPicks.push(commandPick);\n                }\n            }\n            // Add description to commands that have duplicate labels\n            const mapLabelToCommand = new Map();\n            for (const commandPick of filteredCommandPicks) {\n                const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\n                if (existingCommandForLabel) {\n                    commandPick.description = commandPick.commandId;\n                    existingCommandForLabel.description = existingCommandForLabel.commandId;\n                }\n                else {\n                    mapLabelToCommand.set(commandPick.label, commandPick);\n                }\n            }\n            // Sort by MRU order and fallback to name otherwise\n            filteredCommandPicks.sort((commandPickA, commandPickB) => {\n                const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\n                const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\n                if (commandACounter && commandBCounter) {\n                    return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\n                }\n                if (commandACounter) {\n                    return -1; // first command was used, so it wins over the non used one\n                }\n                if (commandBCounter) {\n                    return 1; // other command was used so it wins over the command\n                }\n                // both commands were never used, so we sort by name\n                return commandPickA.label.localeCompare(commandPickB.label);\n            });\n            const commandPicks = [];\n            let addSeparator = false;\n            for (let i = 0; i < filteredCommandPicks.length; i++) {\n                const commandPick = filteredCommandPicks[i];\n                const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\n                const ariaLabel = keybinding ?\n                    localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) :\n                    commandPick.label;\n                // Separator: recently used\n                if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('recentlyUsed', \"recently used\") });\n                    addSeparator = true;\n                }\n                // Separator: other commands\n                if (i !== 0 && addSeparator && !this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('morecCommands', \"other commands\") });\n                    addSeparator = false; // only once\n                }\n                // Command\n                commandPicks.push(Object.assign(Object.assign({}, commandPick), { ariaLabel, detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined, keybinding, accept: () => __awaiter(this, void 0, void 0, function* () {\n                        // Add to history\n                        this.commandsHistory.push(commandPick.commandId);\n                        // Telementry\n                        this.telemetryService.publicLog2('workbenchActionExecuted', {\n                            id: commandPick.commandId,\n                            from: 'quick open'\n                        });\n                        // Run\n                        try {\n                            yield this.commandService.executeCommand(commandPick.commandId);\n                        }\n                        catch (error) {\n                            if (!isCancellationError(error)) {\n                                this.dialogService.show(Severity.Error, localize('canNotRun', \"Command '{0}' resulted in an error ({1})\", commandPick.label, toErrorMessage(error)));\n                            }\n                        }\n                    }) }));\n            }\n            return commandPicks;\n        });\n    }\n};\nAbstractCommandsQuickAccessProvider.PREFIX = '>';\nAbstractCommandsQuickAccessProvider.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\nAbstractCommandsQuickAccessProvider = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], AbstractCommandsQuickAccessProvider);\nexport { AbstractCommandsQuickAccessProvider };\nlet CommandsHistory = class CommandsHistory extends Disposable {\n    constructor(storageService, configurationService) {\n        super();\n        this.storageService = storageService;\n        this.configurationService = configurationService;\n        this.configuredCommandsHistoryLength = 0;\n        this.updateConfiguration();\n        this.load();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(() => this.updateConfiguration()));\n    }\n    updateConfiguration() {\n        this.configuredCommandsHistoryLength = CommandsHistory.getConfiguredCommandHistoryLength(this.configurationService);\n        if (CommandsHistory.cache && CommandsHistory.cache.limit !== this.configuredCommandsHistoryLength) {\n            CommandsHistory.cache.limit = this.configuredCommandsHistoryLength;\n            CommandsHistory.saveState(this.storageService);\n        }\n    }\n    load() {\n        const raw = this.storageService.get(CommandsHistory.PREF_KEY_CACHE, 0 /* StorageScope.PROFILE */);\n        let serializedCache;\n        if (raw) {\n            try {\n                serializedCache = JSON.parse(raw);\n            }\n            catch (error) {\n                // invalid data\n            }\n        }\n        const cache = CommandsHistory.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\n        if (serializedCache) {\n            let entries;\n            if (serializedCache.usesLRU) {\n                entries = serializedCache.entries;\n            }\n            else {\n                entries = serializedCache.entries.sort((a, b) => a.value - b.value);\n            }\n            entries.forEach(entry => cache.set(entry.key, entry.value));\n        }\n        CommandsHistory.counter = this.storageService.getNumber(CommandsHistory.PREF_KEY_COUNTER, 0 /* StorageScope.PROFILE */, CommandsHistory.counter);\n    }\n    push(commandId) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        CommandsHistory.cache.set(commandId, CommandsHistory.counter++); // set counter to command\n        CommandsHistory.saveState(this.storageService);\n    }\n    peek(commandId) {\n        var _a;\n        return (_a = CommandsHistory.cache) === null || _a === void 0 ? void 0 : _a.peek(commandId);\n    }\n    static saveState(storageService) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        const serializedCache = { usesLRU: true, entries: [] };\n        CommandsHistory.cache.forEach((value, key) => serializedCache.entries.push({ key, value }));\n        storageService.store(CommandsHistory.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n        storageService.store(CommandsHistory.PREF_KEY_COUNTER, CommandsHistory.counter, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    static getConfiguredCommandHistoryLength(configurationService) {\n        var _a, _b;\n        const config = configurationService.getValue();\n        const configuredCommandHistoryLength = (_b = (_a = config.workbench) === null || _a === void 0 ? void 0 : _a.commandPalette) === null || _b === void 0 ? void 0 : _b.history;\n        if (typeof configuredCommandHistoryLength === 'number') {\n            return configuredCommandHistoryLength;\n        }\n        return CommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH;\n    }\n};\nCommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\nCommandsHistory.PREF_KEY_CACHE = 'commandPalette.mru.cache';\nCommandsHistory.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\nCommandsHistory.counter = 1;\nCommandsHistory = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], CommandsHistory);\nexport { CommandsHistory };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { timeout } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nexport var TriggerAction;\n(function (TriggerAction) {\n    /**\n     * Do nothing after the button was clicked.\n     */\n    TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\n    /**\n     * Close the picker.\n     */\n    TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\n    /**\n     * Update the results of the picker.\n     */\n    TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\n    /**\n     * Remove the item from the picker.\n     */\n    TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\n})(TriggerAction || (TriggerAction = {}));\nfunction isPicksWithActive(obj) {\n    const candidate = obj;\n    return Array.isArray(candidate.items);\n}\nfunction isFastAndSlowPicks(obj) {\n    const candidate = obj;\n    return !!candidate.picks && candidate.additionalPicks instanceof Promise;\n}\nexport class PickerQuickAccessProvider extends Disposable {\n    constructor(prefix, options) {\n        super();\n        this.prefix = prefix;\n        this.options = options;\n    }\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const picksDisposable = disposables.add(new MutableDisposable());\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            const picksDisposables = picksDisposable.value = new DisposableStore();\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect picks and support both long running and short or combined\n            const picksToken = picksCts.token;\n            const picksFilter = picker.value.substr(this.prefix.length).trim();\n            const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken);\n            const applyPicks = (picks, skipEmpty) => {\n                var _a;\n                let items;\n                let activeItem = undefined;\n                if (isPicksWithActive(picks)) {\n                    items = picks.items;\n                    activeItem = picks.active;\n                }\n                else {\n                    items = picks;\n                }\n                if (items.length === 0) {\n                    if (skipEmpty) {\n                        return false;\n                    }\n                    if (picksFilter.length > 0 && ((_a = this.options) === null || _a === void 0 ? void 0 : _a.noResultsPick)) {\n                        items = [this.options.noResultsPick];\n                    }\n                }\n                picker.items = items;\n                if (activeItem) {\n                    picker.activeItems = [activeItem];\n                }\n                return true;\n            };\n            // No Picks\n            if (providedPicks === null) {\n                // Ignore\n            }\n            // Fast and Slow Picks\n            else if (isFastAndSlowPicks(providedPicks)) {\n                let fastPicksApplied = false;\n                let slowPicksApplied = false;\n                yield Promise.all([\n                    // Fast Picks: to reduce amount of flicker, we race against\n                    // the slow picks over 500ms and then set the fast picks.\n                    // If the slow picks are faster, we reduce the flicker by\n                    // only setting the items once.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        yield timeout(PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY);\n                        if (picksToken.isCancellationRequested) {\n                            return;\n                        }\n                        if (!slowPicksApplied) {\n                            fastPicksApplied = applyPicks(providedPicks.picks, true /* skip over empty to reduce flicker */);\n                        }\n                    }))(),\n                    // Slow Picks: we await the slow picks and then set them at\n                    // once together with the fast picks, but only if we actually\n                    // have additional results.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        picker.busy = true;\n                        try {\n                            const awaitedAdditionalPicks = yield providedPicks.additionalPicks;\n                            if (picksToken.isCancellationRequested) {\n                                return;\n                            }\n                            let picks;\n                            let activePick = undefined;\n                            if (isPicksWithActive(providedPicks.picks)) {\n                                picks = providedPicks.picks.items;\n                                activePick = providedPicks.picks.active;\n                            }\n                            else {\n                                picks = providedPicks.picks;\n                            }\n                            let additionalPicks;\n                            let additionalActivePick = undefined;\n                            if (isPicksWithActive(awaitedAdditionalPicks)) {\n                                additionalPicks = awaitedAdditionalPicks.items;\n                                additionalActivePick = awaitedAdditionalPicks.active;\n                            }\n                            else {\n                                additionalPicks = awaitedAdditionalPicks;\n                            }\n                            if (additionalPicks.length > 0 || !fastPicksApplied) {\n                                // If we do not have any activePick or additionalActivePick\n                                // we try to preserve the currently active pick from the\n                                // fast results. This fixes an issue where the user might\n                                // have made a pick active before the additional results\n                                // kick in.\n                                // See https://github.com/microsoft/vscode/issues/102480\n                                let fallbackActivePick = undefined;\n                                if (!activePick && !additionalActivePick) {\n                                    const fallbackActivePickCandidate = picker.activeItems[0];\n                                    if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\n                                        fallbackActivePick = fallbackActivePickCandidate;\n                                    }\n                                }\n                                applyPicks({\n                                    items: [...picks, ...additionalPicks],\n                                    active: activePick || additionalActivePick || fallbackActivePick\n                                });\n                            }\n                        }\n                        finally {\n                            if (!picksToken.isCancellationRequested) {\n                                picker.busy = false;\n                            }\n                            slowPicksApplied = true;\n                        }\n                    }))()\n                ]);\n            }\n            // Fast Picks\n            else if (!(providedPicks instanceof Promise)) {\n                applyPicks(providedPicks);\n            }\n            // Slow Picks\n            else {\n                picker.busy = true;\n                try {\n                    const awaitedPicks = yield providedPicks;\n                    if (picksToken.isCancellationRequested) {\n                        return;\n                    }\n                    applyPicks(awaitedPicks);\n                }\n                finally {\n                    if (!picksToken.isCancellationRequested) {\n                        picker.busy = false;\n                    }\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Accept the pick on accept and hide picker\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (typeof (item === null || item === void 0 ? void 0 : item.accept) === 'function') {\n                if (!event.inBackground) {\n                    picker.hide(); // hide picker unless we accept in background\n                }\n                item.accept(picker.keyMods, event);\n            }\n        }));\n        // Trigger the pick with button index if button triggered\n        disposables.add(picker.onDidTriggerItemButton(({ button, item }) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            if (typeof item.trigger === 'function') {\n                const buttonIndex = (_c = (_b = item.buttons) === null || _b === void 0 ? void 0 : _b.indexOf(button)) !== null && _c !== void 0 ? _c : -1;\n                if (buttonIndex >= 0) {\n                    const result = item.trigger(buttonIndex, picker.keyMods);\n                    const action = (typeof result === 'number') ? result : yield result;\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    switch (action) {\n                        case TriggerAction.NO_ACTION:\n                            break;\n                        case TriggerAction.CLOSE_PICKER:\n                            picker.hide();\n                            break;\n                        case TriggerAction.REFRESH_PICKER:\n                            updatePickerItems();\n                            break;\n                        case TriggerAction.REMOVE_ITEM: {\n                            const index = picker.items.indexOf(item);\n                            if (index !== -1) {\n                                const items = picker.items.slice();\n                                const removed = items.splice(index, 1);\n                                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\n                                const keepScrollPositionBefore = picker.keepScrollPosition;\n                                picker.keepScrollPosition = true;\n                                picker.items = items;\n                                if (activeItems) {\n                                    picker.activeItems = activeItems;\n                                }\n                                picker.keepScrollPosition = keepScrollPositionBefore;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        })));\n        return disposables;\n    }\n}\nPickerQuickAccessProvider.FAST_PICKS_RACE_DELAY = 200; // timeout before we accept fast results before slow results are present\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n", "/**\n * Register a marker data provider that can provide marker data for a model.\n *\n * @param monaco The Monaco editor module.\n * @param languageSelector The language id to register the provider for.\n * @param provider The provider that can provide marker data.\n * @returns A disposable.\n */\nexport function registerMarkerDataProvider(monaco, languageSelector, provider) {\n    const listeners = new Map();\n    const matchesLanguage = (model) => {\n        if (languageSelector === '*') {\n            return true;\n        }\n        const languageId = model.getLanguageId();\n        return Array.isArray(languageSelector)\n            ? languageSelector.includes(languageId)\n            : languageSelector === languageId;\n    };\n    const doValidate = async (model) => {\n        const markers = await provider.provideMarkerData(model);\n        // The model have have been disposed by the time marker data has been fetched.\n        if (!model.isDisposed() && matchesLanguage(model)) {\n            monaco.editor.setModelMarkers(model, provider.owner, markers ?? []);\n        }\n    };\n    const onModelAdd = (model) => {\n        if (!matchesLanguage(model)) {\n            return;\n        }\n        let handle;\n        listeners.set(String(model.uri), model.onDidChangeContent(() => {\n            clearTimeout(handle);\n            handle = setTimeout(() => {\n                doValidate(model);\n            }, 500);\n        }));\n        doValidate(model);\n    };\n    const onModelRemoved = (model) => {\n        monaco.editor.setModelMarkers(model, provider.owner, []);\n        const uriStr = String(model.uri);\n        const listener = listeners.get(uriStr);\n        if (listener) {\n            listener.dispose();\n            listeners.delete(uriStr);\n        }\n    };\n    const disposables = [\n        monaco.editor.onDidCreateModel(onModelAdd),\n        monaco.editor.onWillDisposeModel((model) => {\n            onModelRemoved(model);\n            provider.doReset?.(model);\n        }),\n        monaco.editor.onDidChangeModelLanguage((event) => {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n            provider.doReset?.(event.model);\n        }),\n    ];\n    for (const model of monaco.editor.getModels()) {\n        onModelAdd(model);\n    }\n    return {\n        dispose() {\n            for (const uri of listeners.keys()) {\n                onModelRemoved(monaco.editor.getModel(monaco.Uri.parse(uri)));\n            }\n            while (disposables.length) {\n                disposables.pop().dispose();\n            }\n        },\n    };\n}\n", "/**\n * Create a worker manager.\n *\n * A worker manager is an object which deals with Monaco based web workers, such as cleanups and\n * idle timeouts.\n *\n * @param monaco - The Monaco editor module.\n * @param options - The options of the worker manager.\n * @returns The worker manager.\n */\nexport function createWorkerManager(monaco, options) {\n    let { createData, interval = 30_000, label, moduleId, stopWhenIdleFor = 120_000 } = options;\n    let worker;\n    let lastUsedTime = 0;\n    let disposed = false;\n    const stopWorker = () => {\n        if (worker) {\n            worker.dispose();\n            worker = undefined;\n        }\n    };\n    const intervalId = setInterval(() => {\n        if (!worker) {\n            return;\n        }\n        const timePassedSinceLastUsed = Date.now() - lastUsedTime;\n        if (timePassedSinceLastUsed > stopWhenIdleFor) {\n            stopWorker();\n        }\n    }, interval);\n    return {\n        dispose() {\n            disposed = true;\n            clearInterval(intervalId);\n            stopWorker();\n        },\n        getWorker(...resources) {\n            if (disposed) {\n                throw new Error('Worker manager has been disposed');\n            }\n            lastUsedTime = Date.now();\n            if (!worker) {\n                worker = monaco.editor.createWebWorker({\n                    createData,\n                    label,\n                    moduleId,\n                });\n            }\n            return worker.withSyncedResources(resources);\n        },\n        updateCreateData(newCreateData) {\n            createData = newCreateData;\n            stopWorker();\n        },\n    };\n}\n", "/**\n * Take input from [0, n] and return it as [0, 1]\n * @hidden\n */\nexport function bound01(n, max) {\n    if (isOnePointZero(n)) {\n        n = '100%';\n    }\n    var isPercent = isPercentage(n);\n    n = max === 360 ? n : Math.min(max, Math.max(0, parseFloat(n)));\n    // Automatically convert percentage into number\n    if (isPercent) {\n        n = parseInt(String(n * max), 10) / 100;\n    }\n    // Handle floating point rounding errors\n    if (Math.abs(n - max) < 0.000001) {\n        return 1;\n    }\n    // Convert into [0, 1] range if it isn't already\n    if (max === 360) {\n        // If n is a hue given in degrees,\n        // wrap around out-of-range values into [0, 360] range\n        // then convert into [0, 1].\n        n = (n < 0 ? (n % max) + max : n % max) / parseFloat(String(max));\n    }\n    else {\n        // If n not a hue given in degrees\n        // Convert into [0, 1] range if it isn't already.\n        n = (n % max) / parseFloat(String(max));\n    }\n    return n;\n}\n/**\n * Force a number between 0 and 1\n * @hidden\n */\nexport function clamp01(val) {\n    return Math.min(1, Math.max(0, val));\n}\n/**\n * Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n * <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n * @hidden\n */\nexport function isOnePointZero(n) {\n    return typeof n === 'string' && n.indexOf('.') !== -1 && parseFloat(n) === 1;\n}\n/**\n * Check to see if string passed in is a percentage\n * @hidden\n */\nexport function isPercentage(n) {\n    return typeof n === 'string' && n.indexOf('%') !== -1;\n}\n/**\n * Return a valid alpha value [0,1] with all invalid values being set to 1\n * @hidden\n */\nexport function boundAlpha(a) {\n    a = parseFloat(a);\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n    return a;\n}\n/**\n * Replace a decimal with it's percentage value\n * @hidden\n */\nexport function convertToPercentage(n) {\n    if (n <= 1) {\n        return \"\".concat(Number(n) * 100, \"%\");\n    }\n    return n;\n}\n/**\n * Force a hex value to have 2 characters\n * @hidden\n */\nexport function pad2(c) {\n    return c.length === 1 ? '0' + c : String(c);\n}\n", "import { bound01, pad2 } from './util';\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n/**\n * Handle bounds / percentage checking to conform to CSS color spec\n * <http://www.w3.org/TR/css3-color/>\n * *Assumes:* r, g, b in [0, 255] or [0, 1]\n * *Returns:* { r, g, b } in [0, 255]\n */\nexport function rgbToRgb(r, g, b) {\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255,\n    };\n}\n/**\n * Converts an RGB color value to HSL.\n * *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n * *Returns:* { h, s, l } in [0,1]\n */\nexport function rgbToHsl(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h = 0;\n    var s = 0;\n    var l = (max + min) / 2;\n    if (max === min) {\n        s = 0;\n        h = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = (b - r) / d + 2;\n                break;\n            case b:\n                h = (r - g) / d + 4;\n                break;\n            default:\n                break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, l: l };\n}\nfunction hue2rgb(p, q, t) {\n    if (t < 0) {\n        t += 1;\n    }\n    if (t > 1) {\n        t -= 1;\n    }\n    if (t < 1 / 6) {\n        return p + (q - p) * (6 * t);\n    }\n    if (t < 1 / 2) {\n        return q;\n    }\n    if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n}\n/**\n * Converts an HSL color value to RGB.\n *\n * *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n * *Returns:* { r, g, b } in the set [0, 255]\n */\nexport function hslToRgb(h, s, l) {\n    var r;\n    var g;\n    var b;\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n    if (s === 0) {\n        // achromatic\n        g = l;\n        b = l;\n        r = l;\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n/**\n * Converts an RGB color value to HSV\n *\n * *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n * *Returns:* { h, s, v } in [0,1]\n */\nexport function rgbToHsv(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h = 0;\n    var v = max;\n    var d = max - min;\n    var s = max === 0 ? 0 : d / max;\n    if (max === min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = (b - r) / d + 2;\n                break;\n            case b:\n                h = (r - g) / d + 4;\n                break;\n            default:\n                break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n/**\n * Converts an HSV color value to RGB.\n *\n * *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n * *Returns:* { r, g, b } in the set [0, 255]\n */\nexport function hsvToRgb(h, s, v) {\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n    var i = Math.floor(h);\n    var f = h - i;\n    var p = v * (1 - s);\n    var q = v * (1 - f * s);\n    var t = v * (1 - (1 - f) * s);\n    var mod = i % 6;\n    var r = [v, q, p, p, t, v][mod];\n    var g = [t, v, v, q, p, p][mod];\n    var b = [p, p, t, v, v, q][mod];\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n/**\n * Converts an RGB color to hex\n *\n * Assumes r, g, and b are contained in the set [0, 255]\n * Returns a 3 or 6 character hex\n */\nexport function rgbToHex(r, g, b, allow3Char) {\n    var hex = [\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n    ];\n    // Return a 3 character hex if possible\n    if (allow3Char &&\n        hex[0].startsWith(hex[0].charAt(1)) &&\n        hex[1].startsWith(hex[1].charAt(1)) &&\n        hex[2].startsWith(hex[2].charAt(1))) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n    return hex.join('');\n}\n/**\n * Converts an RGBA color plus alpha transparency to hex\n *\n * Assumes r, g, b are contained in the set [0, 255] and\n * a in [0, 1]. Returns a 4 or 8 character rgba hex\n */\n// eslint-disable-next-line max-params\nexport function rgbaToHex(r, g, b, a, allow4Char) {\n    var hex = [\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n        pad2(convertDecimalToHex(a)),\n    ];\n    // Return a 4 character hex if possible\n    if (allow4Char &&\n        hex[0].startsWith(hex[0].charAt(1)) &&\n        hex[1].startsWith(hex[1].charAt(1)) &&\n        hex[2].startsWith(hex[2].charAt(1)) &&\n        hex[3].startsWith(hex[3].charAt(1))) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n    return hex.join('');\n}\n/**\n * Converts an RGBA color to an ARGB Hex8 string\n * Rarely used, but required for \"toFilter()\"\n */\nexport function rgbaToArgbHex(r, g, b, a) {\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n    ];\n    return hex.join('');\n}\n/** Converts a decimal to a hex value */\nexport function convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n/** Converts a hex value to a decimal */\nexport function convertHexToDecimal(h) {\n    return parseIntFromHex(h) / 255;\n}\n/** Parse a base-16 hex value into a base-10 integer */\nexport function parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\nexport function numberInputToObject(color) {\n    return {\n        r: color >> 16,\n        g: (color & 0xff00) >> 8,\n        b: color & 0xff,\n    };\n}\n", "// https://github.com/bahamas10/css-color-names/blob/master/css-color-names.json\n/**\n * @hidden\n */\nexport var names = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    goldenrod: '#daa520',\n    gold: '#ffd700',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    lavenderblush: '#fff0f5',\n    lavender: '#e6e6fa',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32',\n};\n", "/* eslint-disable @typescript-eslint/no-redundant-type-constituents */\nimport { convertHexToDecimal, hslToRgb, hsvToRgb, parseIntFromHex, rgbToRgb } from './conversion';\nimport { names } from './css-color-names';\nimport { boundAlpha, convertToPercentage } from './util';\n/**\n * Given a string or object, convert that input to RGB\n *\n * Possible string inputs:\n * ```\n * \"red\"\n * \"#f00\" or \"f00\"\n * \"#ff0000\" or \"ff0000\"\n * \"#ff000000\" or \"ff000000\"\n * \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n * \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n * \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n * \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n * \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n * \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n * \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n * ```\n */\nexport function inputToRGB(color) {\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n    if (typeof color === 'string') {\n        color = stringInputToObject(color);\n    }\n    if (typeof color === 'object') {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === '%' ? 'prgb' : 'rgb';\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = 'hsv';\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = 'hsl';\n        }\n        if (Object.prototype.hasOwnProperty.call(color, 'a')) {\n            a = color.a;\n        }\n    }\n    a = boundAlpha(a);\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: Math.min(255, Math.max(rgb.r, 0)),\n        g: Math.min(255, Math.max(rgb.g, 0)),\n        b: Math.min(255, Math.max(rgb.b, 0)),\n        a: a,\n    };\n}\n// <http://www.w3.org/TR/css3-values/#integers>\nvar CSS_INTEGER = '[-\\\\+]?\\\\d+%?';\n// <http://www.w3.org/TR/css3-values/#number-value>\nvar CSS_NUMBER = '[-\\\\+]?\\\\d*\\\\.\\\\d+%?';\n// Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\nvar CSS_UNIT = \"(?:\".concat(CSS_NUMBER, \")|(?:\").concat(CSS_INTEGER, \")\");\n// Actual matching.\n// Parentheses and commas are optional, but not required.\n// Whitespace can take the place of commas or opening paren\nvar PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\".concat(CSS_UNIT, \")[,|\\\\s]+(\").concat(CSS_UNIT, \")[,|\\\\s]+(\").concat(CSS_UNIT, \")\\\\s*\\\\)?\");\nvar PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\".concat(CSS_UNIT, \")[,|\\\\s]+(\").concat(CSS_UNIT, \")[,|\\\\s]+(\").concat(CSS_UNIT, \")[,|\\\\s]+(\").concat(CSS_UNIT, \")\\\\s*\\\\)?\");\nvar matchers = {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp('rgb' + PERMISSIVE_MATCH3),\n    rgba: new RegExp('rgba' + PERMISSIVE_MATCH4),\n    hsl: new RegExp('hsl' + PERMISSIVE_MATCH3),\n    hsla: new RegExp('hsla' + PERMISSIVE_MATCH4),\n    hsv: new RegExp('hsv' + PERMISSIVE_MATCH3),\n    hsva: new RegExp('hsva' + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n};\n/**\n * Permissive string parsing.  Take in a number of formats, and output an object\n * based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n */\nexport function stringInputToObject(color) {\n    color = color.trim().toLowerCase();\n    if (color.length === 0) {\n        return false;\n    }\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color === 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: 'name' };\n    }\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match = matchers.rgb.exec(color);\n    if (match) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    match = matchers.rgba.exec(color);\n    if (match) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    match = matchers.hsl.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    match = matchers.hsla.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    match = matchers.hsv.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    match = matchers.hsva.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    match = matchers.hex8.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? 'name' : 'hex8',\n        };\n    }\n    match = matchers.hex6.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? 'name' : 'hex',\n        };\n    }\n    match = matchers.hex4.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1] + match[1]),\n            g: parseIntFromHex(match[2] + match[2]),\n            b: parseIntFromHex(match[3] + match[3]),\n            a: convertHexToDecimal(match[4] + match[4]),\n            format: named ? 'name' : 'hex8',\n        };\n    }\n    match = matchers.hex3.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1] + match[1]),\n            g: parseIntFromHex(match[2] + match[2]),\n            b: parseIntFromHex(match[3] + match[3]),\n            format: named ? 'name' : 'hex',\n        };\n    }\n    return false;\n}\n/**\n * Check to see if it looks like a CSS unit\n * (see `matchers` above for definition).\n */\nexport function isValidCSSUnit(color) {\n    return Boolean(matchers.CSS_UNIT.exec(String(color)));\n}\n", "import { numberInputToObject, rgbaToHex, rgbToHex, rgbToHsl, rgbToHsv } from './conversion';\nimport { names } from './css-color-names';\nimport { inputToRGB } from './format-input';\nimport { bound01, boundAlpha, clamp01 } from './util';\nvar TinyColor = /** @class */ (function () {\n    function TinyColor(color, opts) {\n        if (color === void 0) { color = ''; }\n        if (opts === void 0) { opts = {}; }\n        var _a;\n        // If input is already a tinycolor, return itself\n        if (color instanceof TinyColor) {\n            // eslint-disable-next-line no-constructor-return\n            return color;\n        }\n        if (typeof color === 'number') {\n            color = numberInputToObject(color);\n        }\n        this.originalInput = color;\n        var rgb = inputToRGB(color);\n        this.originalInput = color;\n        this.r = rgb.r;\n        this.g = rgb.g;\n        this.b = rgb.b;\n        this.a = rgb.a;\n        this.roundA = Math.round(100 * this.a) / 100;\n        this.format = (_a = opts.format) !== null && _a !== void 0 ? _a : rgb.format;\n        this.gradientType = opts.gradientType;\n        // Don't let the range of [0,255] come back in [0,1].\n        // Potentially lose a little bit of precision here, but will fix issues where\n        // .5 gets interpreted as half of the total, instead of half of 1\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n        if (this.r < 1) {\n            this.r = Math.round(this.r);\n        }\n        if (this.g < 1) {\n            this.g = Math.round(this.g);\n        }\n        if (this.b < 1) {\n            this.b = Math.round(this.b);\n        }\n        this.isValid = rgb.ok;\n    }\n    TinyColor.prototype.isDark = function () {\n        return this.getBrightness() < 128;\n    };\n    TinyColor.prototype.isLight = function () {\n        return !this.isDark();\n    };\n    /**\n     * Returns the perceived brightness of the color, from 0-255.\n     */\n    TinyColor.prototype.getBrightness = function () {\n        // http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    };\n    /**\n     * Returns the perceived luminance of a color, from 0-1.\n     */\n    TinyColor.prototype.getLuminance = function () {\n        // http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var R;\n        var G;\n        var B;\n        var RsRGB = rgb.r / 255;\n        var GsRGB = rgb.g / 255;\n        var BsRGB = rgb.b / 255;\n        if (RsRGB <= 0.03928) {\n            R = RsRGB / 12.92;\n        }\n        else {\n            // eslint-disable-next-line prefer-exponentiation-operator\n            R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n        }\n        if (GsRGB <= 0.03928) {\n            G = GsRGB / 12.92;\n        }\n        else {\n            // eslint-disable-next-line prefer-exponentiation-operator\n            G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n        }\n        if (BsRGB <= 0.03928) {\n            B = BsRGB / 12.92;\n        }\n        else {\n            // eslint-disable-next-line prefer-exponentiation-operator\n            B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n        }\n        return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n    };\n    /**\n     * Returns the alpha value of a color, from 0-1.\n     */\n    TinyColor.prototype.getAlpha = function () {\n        return this.a;\n    };\n    /**\n     * Sets the alpha value on the current color.\n     *\n     * @param alpha - The new alpha value. The accepted range is 0-1.\n     */\n    TinyColor.prototype.setAlpha = function (alpha) {\n        this.a = boundAlpha(alpha);\n        this.roundA = Math.round(100 * this.a) / 100;\n        return this;\n    };\n    /**\n     * Returns whether the color is monochrome.\n     */\n    TinyColor.prototype.isMonochrome = function () {\n        var s = this.toHsl().s;\n        return s === 0;\n    };\n    /**\n     * Returns the object as a HSVA object.\n     */\n    TinyColor.prototype.toHsv = function () {\n        var hsv = rgbToHsv(this.r, this.g, this.b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this.a };\n    };\n    /**\n     * Returns the hsva values interpolated into a string with the following format:\n     * \"hsva(xxx, xxx, xxx, xx)\".\n     */\n    TinyColor.prototype.toHsvString = function () {\n        var hsv = rgbToHsv(this.r, this.g, this.b);\n        var h = Math.round(hsv.h * 360);\n        var s = Math.round(hsv.s * 100);\n        var v = Math.round(hsv.v * 100);\n        return this.a === 1 ? \"hsv(\".concat(h, \", \").concat(s, \"%, \").concat(v, \"%)\") : \"hsva(\".concat(h, \", \").concat(s, \"%, \").concat(v, \"%, \").concat(this.roundA, \")\");\n    };\n    /**\n     * Returns the object as a HSLA object.\n     */\n    TinyColor.prototype.toHsl = function () {\n        var hsl = rgbToHsl(this.r, this.g, this.b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this.a };\n    };\n    /**\n     * Returns the hsla values interpolated into a string with the following format:\n     * \"hsla(xxx, xxx, xxx, xx)\".\n     */\n    TinyColor.prototype.toHslString = function () {\n        var hsl = rgbToHsl(this.r, this.g, this.b);\n        var h = Math.round(hsl.h * 360);\n        var s = Math.round(hsl.s * 100);\n        var l = Math.round(hsl.l * 100);\n        return this.a === 1 ? \"hsl(\".concat(h, \", \").concat(s, \"%, \").concat(l, \"%)\") : \"hsla(\".concat(h, \", \").concat(s, \"%, \").concat(l, \"%, \").concat(this.roundA, \")\");\n    };\n    /**\n     * Returns the hex value of the color.\n     * @param allow3Char will shorten hex value to 3 char if possible\n     */\n    TinyColor.prototype.toHex = function (allow3Char) {\n        if (allow3Char === void 0) { allow3Char = false; }\n        return rgbToHex(this.r, this.g, this.b, allow3Char);\n    };\n    /**\n     * Returns the hex value of the color -with a # appened.\n     * @param allow3Char will shorten hex value to 3 char if possible\n     */\n    TinyColor.prototype.toHexString = function (allow3Char) {\n        if (allow3Char === void 0) { allow3Char = false; }\n        return '#' + this.toHex(allow3Char);\n    };\n    /**\n     * Returns the hex 8 value of the color.\n     * @param allow4Char will shorten hex value to 4 char if possible\n     */\n    TinyColor.prototype.toHex8 = function (allow4Char) {\n        if (allow4Char === void 0) { allow4Char = false; }\n        return rgbaToHex(this.r, this.g, this.b, this.a, allow4Char);\n    };\n    /**\n     * Returns the hex 8 value of the color -with a # appened.\n     * @param allow4Char will shorten hex value to 4 char if possible\n     */\n    TinyColor.prototype.toHex8String = function (allow4Char) {\n        if (allow4Char === void 0) { allow4Char = false; }\n        return '#' + this.toHex8(allow4Char);\n    };\n    /**\n     * Returns the object as a RGBA object.\n     */\n    TinyColor.prototype.toRgb = function () {\n        return {\n            r: Math.round(this.r),\n            g: Math.round(this.g),\n            b: Math.round(this.b),\n            a: this.a,\n        };\n    };\n    /**\n     * Returns the RGBA values interpolated into a string with the following format:\n     * \"RGBA(xxx, xxx, xxx, xx)\".\n     */\n    TinyColor.prototype.toRgbString = function () {\n        var r = Math.round(this.r);\n        var g = Math.round(this.g);\n        var b = Math.round(this.b);\n        return this.a === 1 ? \"rgb(\".concat(r, \", \").concat(g, \", \").concat(b, \")\") : \"rgba(\".concat(r, \", \").concat(g, \", \").concat(b, \", \").concat(this.roundA, \")\");\n    };\n    /**\n     * Returns the object as a RGBA object.\n     */\n    TinyColor.prototype.toPercentageRgb = function () {\n        var fmt = function (x) { return \"\".concat(Math.round(bound01(x, 255) * 100), \"%\"); };\n        return {\n            r: fmt(this.r),\n            g: fmt(this.g),\n            b: fmt(this.b),\n            a: this.a,\n        };\n    };\n    /**\n     * Returns the RGBA relative values interpolated into a string\n     */\n    TinyColor.prototype.toPercentageRgbString = function () {\n        var rnd = function (x) { return Math.round(bound01(x, 255) * 100); };\n        return this.a === 1\n            ? \"rgb(\".concat(rnd(this.r), \"%, \").concat(rnd(this.g), \"%, \").concat(rnd(this.b), \"%)\")\n            : \"rgba(\".concat(rnd(this.r), \"%, \").concat(rnd(this.g), \"%, \").concat(rnd(this.b), \"%, \").concat(this.roundA, \")\");\n    };\n    /**\n     * The 'real' name of the color -if there is one.\n     */\n    TinyColor.prototype.toName = function () {\n        if (this.a === 0) {\n            return 'transparent';\n        }\n        if (this.a < 1) {\n            return false;\n        }\n        var hex = '#' + rgbToHex(this.r, this.g, this.b, false);\n        for (var _i = 0, _a = Object.entries(names); _i < _a.length; _i++) {\n            var _b = _a[_i], key = _b[0], value = _b[1];\n            if (hex === value) {\n                return key;\n            }\n        }\n        return false;\n    };\n    TinyColor.prototype.toString = function (format) {\n        var formatSet = Boolean(format);\n        format = format !== null && format !== void 0 ? format : this.format;\n        var formattedString = false;\n        var hasAlpha = this.a < 1 && this.a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format.startsWith('hex') || format === 'name');\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === 'name' && this.a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === 'rgb') {\n            formattedString = this.toRgbString();\n        }\n        if (format === 'prgb') {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === 'hex' || format === 'hex6') {\n            formattedString = this.toHexString();\n        }\n        if (format === 'hex3') {\n            formattedString = this.toHexString(true);\n        }\n        if (format === 'hex4') {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === 'hex8') {\n            formattedString = this.toHex8String();\n        }\n        if (format === 'name') {\n            formattedString = this.toName();\n        }\n        if (format === 'hsl') {\n            formattedString = this.toHslString();\n        }\n        if (format === 'hsv') {\n            formattedString = this.toHsvString();\n        }\n        return formattedString || this.toHexString();\n    };\n    TinyColor.prototype.toNumber = function () {\n        return (Math.round(this.r) << 16) + (Math.round(this.g) << 8) + Math.round(this.b);\n    };\n    TinyColor.prototype.clone = function () {\n        return new TinyColor(this.toString());\n    };\n    /**\n     * Lighten the color a given amount. Providing 100 will always return white.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.lighten = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return new TinyColor(hsl);\n    };\n    /**\n     * Brighten the color a given amount, from 0 to 100.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.brighten = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var rgb = this.toRgb();\n        rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n        rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n        rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n        return new TinyColor(rgb);\n    };\n    /**\n     * Darken the color a given amount, from 0 to 100.\n     * Providing 100 will always return black.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.darken = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return new TinyColor(hsl);\n    };\n    /**\n     * Mix the color with pure white, from 0 to 100.\n     * Providing 0 will do nothing, providing 100 will always return white.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.tint = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        return this.mix('white', amount);\n    };\n    /**\n     * Mix the color with pure black, from 0 to 100.\n     * Providing 0 will do nothing, providing 100 will always return black.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.shade = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        return this.mix('black', amount);\n    };\n    /**\n     * Desaturate the color a given amount, from 0 to 100.\n     * Providing 100 will is the same as calling greyscale\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.desaturate = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return new TinyColor(hsl);\n    };\n    /**\n     * Saturate the color a given amount, from 0 to 100.\n     * @param amount - valid between 1-100\n     */\n    TinyColor.prototype.saturate = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return new TinyColor(hsl);\n    };\n    /**\n     * Completely desaturates a color into greyscale.\n     * Same as calling `desaturate(100)`\n     */\n    TinyColor.prototype.greyscale = function () {\n        return this.desaturate(100);\n    };\n    /**\n     * Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n     * Values outside of this range will be wrapped into this range.\n     */\n    TinyColor.prototype.spin = function (amount) {\n        var hsl = this.toHsl();\n        var hue = (hsl.h + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return new TinyColor(hsl);\n    };\n    /**\n     * Mix the current color a given amount with another color, from 0 to 100.\n     * 0 means no mixing (return current color).\n     */\n    TinyColor.prototype.mix = function (color, amount) {\n        if (amount === void 0) { amount = 50; }\n        var rgb1 = this.toRgb();\n        var rgb2 = new TinyColor(color).toRgb();\n        var p = amount / 100;\n        var rgba = {\n            r: (rgb2.r - rgb1.r) * p + rgb1.r,\n            g: (rgb2.g - rgb1.g) * p + rgb1.g,\n            b: (rgb2.b - rgb1.b) * p + rgb1.b,\n            a: (rgb2.a - rgb1.a) * p + rgb1.a,\n        };\n        return new TinyColor(rgba);\n    };\n    TinyColor.prototype.analogous = function (results, slices) {\n        if (results === void 0) { results = 6; }\n        if (slices === void 0) { slices = 30; }\n        var hsl = this.toHsl();\n        var part = 360 / slices;\n        var ret = [this];\n        for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results;) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(new TinyColor(hsl));\n        }\n        return ret;\n    };\n    /**\n     * taken from https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js\n     */\n    TinyColor.prototype.complement = function () {\n        var hsl = this.toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.monochromatic = function (results) {\n        if (results === void 0) { results = 6; }\n        var hsv = this.toHsv();\n        var h = hsv.h;\n        var s = hsv.s;\n        var v = hsv.v;\n        var res = [];\n        var modification = 1 / results;\n        while (results--) {\n            res.push(new TinyColor({ h: h, s: s, v: v }));\n            v = (v + modification) % 1;\n        }\n        return res;\n    };\n    TinyColor.prototype.splitcomplement = function () {\n        var hsl = this.toHsl();\n        var h = hsl.h;\n        return [\n            this,\n            new TinyColor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n            new TinyColor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n        ];\n    };\n    /**\n     * Compute how the color would appear on a background\n     */\n    TinyColor.prototype.onBackground = function (background) {\n        var fg = this.toRgb();\n        var bg = new TinyColor(background).toRgb();\n        return new TinyColor({\n            r: bg.r + (fg.r - bg.r) * fg.a,\n            g: bg.g + (fg.g - bg.g) * fg.a,\n            b: bg.b + (fg.b - bg.b) * fg.a,\n        });\n    };\n    /**\n     * Alias for `polyad(3)`\n     */\n    TinyColor.prototype.triad = function () {\n        return this.polyad(3);\n    };\n    /**\n     * Alias for `polyad(4)`\n     */\n    TinyColor.prototype.tetrad = function () {\n        return this.polyad(4);\n    };\n    /**\n     * Get polyad colors, like (for 1, 2, 3, 4, 5, 6, 7, 8, etc...)\n     * monad, dyad, triad, tetrad, pentad, hexad, heptad, octad, etc...\n     */\n    TinyColor.prototype.polyad = function (n) {\n        var hsl = this.toHsl();\n        var h = hsl.h;\n        var result = [this];\n        var increment = 360 / n;\n        for (var i = 1; i < n; i++) {\n            result.push(new TinyColor({ h: (h + i * increment) % 360, s: hsl.s, l: hsl.l }));\n        }\n        return result;\n    };\n    /**\n     * compare color vs current color\n     */\n    TinyColor.prototype.equals = function (color) {\n        return this.toRgbString() === new TinyColor(color).toRgbString();\n    };\n    return TinyColor;\n}());\nexport { TinyColor };\n// kept for backwards compatability with v1\nexport function tinycolor(color, opts) {\n    if (color === void 0) { color = ''; }\n    if (opts === void 0) { opts = {}; }\n    return new TinyColor(color, opts);\n}\n", "import { TinyColor } from './index';\nimport { convertToPercentage } from './util';\n/**\n * If input is an object, force 1 into \"1.0\" to handle ratios properly\n * String input requires \"1.0\" as input, so 1 will be treated as 1\n */\nexport function fromRatio(ratio, opts) {\n    var newColor = {\n        r: convertToPercentage(ratio.r),\n        g: convertToPercentage(ratio.g),\n        b: convertToPercentage(ratio.b),\n    };\n    if (ratio.a !== undefined) {\n        newColor.a = Number(ratio.a);\n    }\n    return new TinyColor(newColor, opts);\n}\n/** old random function */\nexport function legacyRandom() {\n    return new TinyColor({\n        r: Math.random(),\n        g: Math.random(),\n        b: Math.random(),\n    });\n}\n", "import { registerMarkerDataProvider } from 'monaco-marker-data-provider';\nimport { MonacoTailwindcssOptions } from 'monaco-tailwindcss';\nimport { createWorkerManager } from 'monaco-worker-manager';\n\nimport {\n  createColorProvider,\n  createCompletionItemProvider,\n  createHoverProvider,\n  createMarkerDataProvider,\n} from './languageFeatures.js';\nimport { TailwindcssWorker } from './tailwindcss.worker.js';\n\nexport const defaultLanguageSelector = ['css', 'javascript', 'html', 'mdx', 'typescript'] as const;\n\nexport { tailwindcssData } from './cssData.js';\n\nexport const configureMonacoTailwindcss: typeof import('monaco-tailwindcss').configureMonacoTailwindcss =\n  (monaco, { tailwindConfig, languageSelector = defaultLanguageSelector } = {}) => {\n    const workerManager = createWorkerManager<TailwindcssWorker, MonacoTailwindcssOptions>(monaco, {\n      label: 'tailwindcss',\n      moduleId: 'monaco-tailwindcss/tailwindcss.worker',\n      createData: { tailwindConfig },\n    });\n\n    const disposables = [\n      workerManager,\n      monaco.languages.registerColorProvider(\n        languageSelector,\n        createColorProvider(monaco, workerManager.getWorker),\n      ),\n      monaco.languages.registerCompletionItemProvider(\n        languageSelector,\n        createCompletionItemProvider(workerManager.getWorker),\n      ),\n      monaco.languages.registerHoverProvider(\n        languageSelector,\n        createHoverProvider(workerManager.getWorker),\n      ),\n    ];\n\n    // Monaco editor doesn\u2019t provide a function to match language selectors, so let\u2019s just support\n    // strings here.\n    for (const language of Array.isArray(languageSelector)\n      ? languageSelector\n      : [languageSelector]) {\n      if (typeof language === 'string') {\n        disposables.push(\n          registerMarkerDataProvider(\n            monaco,\n            language,\n            createMarkerDataProvider(monaco, workerManager.getWorker),\n          ),\n        );\n      }\n    }\n\n    return {\n      dispose() {\n        for (const disposable of disposables) {\n          disposable.dispose();\n        }\n      },\n\n      setTailwindConfig(newTailwindConfig) {\n        workerManager.updateCreateData({ tailwindConfig: newTailwindConfig });\n      },\n\n      async generateStylesFromContent(css, contents) {\n        const client = await workerManager.getWorker();\n\n        return client.generateStylesFromContent(\n          css,\n          contents.map((content) => (typeof content === 'string' ? { content } : content)),\n        );\n      },\n    };\n  };\n", "import { fromRatio, names as namedColors } from '@ctrl/tinycolor';\n// We use a type import here as a safe guard to prevent monaco-editor imports in the output bundle\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport type { editor, IPosition, IRange, languages, MarkerSeverity } from 'monaco-editor';\nimport { MarkerDataProvider } from 'monaco-marker-data-provider';\nimport { WorkerGetter } from 'monaco-worker-manager';\nimport { AugmentedDiagnostic } from 'tailwindcss-language-service';\nimport { CompletionContext, CompletionTriggerKind } from 'vscode-languageserver-protocol';\nimport * as ls from 'vscode-languageserver-types';\n\nimport { TailwindcssWorker } from './tailwindcss.worker.js';\n\ntype WorkerAccessor = WorkerGetter<TailwindcssWorker>;\n\nfunction lsRangeToMonacoRange(range: ls.Range): IRange {\n  return {\n    startLineNumber: range.start.line + 1,\n    startColumn: range.start.character + 1,\n    endLineNumber: range.end.line + 1,\n    endColumn: range.end.character + 1,\n  };\n}\n\nfunction lsColorInformationToMonacoColorInformation(\n  color: ls.ColorInformation,\n): languages.IColorInformation {\n  return {\n    color: color.color,\n    range: lsRangeToMonacoRange(color.range),\n  };\n}\n\nfunction lsHoverToMonacoHover(hover: ls.Hover): languages.Hover {\n  const contents = [hover.contents].flat();\n\n  return {\n    contents: contents.map((content) => ({\n      value:\n        typeof content === 'string'\n          ? content\n          : 'language' in content\n          ? `\\`\\`\\`${content.language}\\n${content.value}\\n\\`\\`\\``\n          : content.value,\n    })),\n    range: hover.range ? lsRangeToMonacoRange(hover.range) : undefined,\n  };\n}\n\nfunction monacoPositionToLsPosition(position: IPosition): ls.Position {\n  return {\n    line: position.lineNumber - 1,\n    character: position.column - 1,\n  };\n}\n\nfunction monacoCompletionTriggerKindToLsCompletionTriggerKind(\n  completionTriggerKind: languages.CompletionTriggerKind,\n): CompletionTriggerKind {\n  switch (completionTriggerKind) {\n    // Invoke\n    case 0:\n      return 1;\n    // TriggerCharacter\n    case 1:\n      return 2;\n    // TriggerForIncompleteCompletions\n    default:\n      return 3;\n  }\n}\n\nfunction lsCompletionItemKindToMonacoCompletionItemKind(\n  completionItemKind: ls.CompletionItemKind,\n): languages.CompletionItemKind {\n  switch (completionItemKind) {\n    // Text\n    case 1:\n      return 18;\n    // Method\n    case 2:\n      return 0;\n    // Function\n    case 3:\n      return 1;\n    // Constructor\n    case 4:\n      return 2;\n    // Field\n    case 5:\n      return 3;\n    // Variable\n    case 6:\n      return 4;\n    // Class\n    case 7:\n      return 5;\n    // Interface\n    case 8:\n      return 7;\n    // Module\n    case 9:\n      return 8;\n    // Property\n    case 10:\n      return 9;\n    // Unit\n    case 11:\n      return 12;\n    // Value\n    case 12:\n      return 13;\n    // Enum\n    case 13:\n      return 15;\n    // Keyword\n    case 14:\n      return 17;\n    // Snippet\n    case 15:\n      return 27;\n    // Color\n    case 16:\n      return 19;\n    // File\n    case 17:\n      return 20;\n    // Reference\n    case 18:\n      return 21;\n    // Folder\n    case 19:\n      return 23;\n    // EnumMember\n    case 20:\n      return 16;\n    // Constant\n    case 21:\n      return 14;\n    // Struct\n    case 22:\n      return 6;\n    // Event\n    case 23:\n      return 10;\n    // Operator\n    case 24:\n      return 11;\n    // TypeParameter\n    default:\n      return 24;\n  }\n}\n\nfunction monacoCompletionItemKindToLsCompletionItemKind(\n  completionItemKind: languages.CompletionItemKind,\n): ls.CompletionItemKind {\n  switch (completionItemKind) {\n    // Text\n    case 18:\n      return 1;\n    // Method\n    case 0:\n      return 2;\n    // Function\n    case 1:\n      return 3;\n    // Constructor\n    case 2:\n      return 4;\n    // Field\n    case 3:\n      return 5;\n    // Variable\n    case 4:\n      return 6;\n    // Class\n    case 5:\n      return 7;\n    // Interface\n    case 7:\n      return 8;\n    // Module\n    case 8:\n      return 9;\n    // Property\n    case 9:\n      return 10;\n    // Unit\n    case 12:\n      return 11;\n    // Value\n    case 13:\n      return 12;\n    // Enum\n    case 15:\n      return 13;\n    // Keyword\n    case 17:\n      return 14;\n    // Snippet\n    case 27:\n      return 15;\n    // Color\n    case 19:\n      return 16;\n    // File\n    case 20:\n      return 17;\n    // Reference\n    case 21:\n      return 18;\n    // Folder\n    case 23:\n      return 19;\n    // EnumMember\n    case 16:\n      return 20;\n    // Constant\n    case 14:\n      return 21;\n    // Struct\n    case 6:\n      return 22;\n    // Event\n    case 10:\n      return 23;\n    // Operator\n    case 11:\n      return 24;\n    // TypeParameter\n    default:\n      return 25;\n  }\n}\n\nfunction monacoCompletionContextToLsCompletionContext(\n  completionContext: languages.CompletionContext,\n): CompletionContext {\n  return {\n    triggerKind: monacoCompletionTriggerKindToLsCompletionTriggerKind(\n      completionContext.triggerKind,\n    ),\n    triggerCharacter: completionContext.triggerCharacter,\n  };\n}\n\nfunction lsCommandToMonacoCommand(command: ls.Command): languages.Command {\n  return {\n    title: command.title,\n    id: command.command,\n    arguments: command.arguments,\n  };\n}\n\nfunction lsCompletionItemToMonacoCompletionItem(\n  completionItem: ls.CompletionItem,\n): languages.CompletionItem {\n  return {\n    label: completionItem.label,\n    kind: lsCompletionItemKindToMonacoCompletionItemKind(completionItem.kind!),\n    tags: completionItem.tags,\n    detail: completionItem.detail,\n    documentation:\n      completionItem.documentation && typeof completionItem.documentation === 'object'\n        ? { value: completionItem.documentation.value }\n        : completionItem.documentation,\n    sortText: completionItem.sortText,\n    filterText: completionItem.filterText,\n    preselect: completionItem.preselect,\n    insertText: completionItem.insertText ?? completionItem.label,\n    // @ts-expect-error XXX we need a fallback range here.\n    range:\n      completionItem.textEdit &&\n      lsRangeToMonacoRange(\n        'range' in completionItem.textEdit\n          ? completionItem.textEdit.range\n          : completionItem.textEdit.replace,\n      ),\n    command: completionItem.command && lsCommandToMonacoCommand(completionItem.command),\n    commitCharacters: completionItem.commitCharacters,\n  };\n}\n\nfunction monacoCompletionItemToLsCompletionItem(\n  completionItem: languages.CompletionItem,\n): ls.CompletionItem {\n  return {\n    label:\n      typeof completionItem.label === 'string' ? completionItem.label : completionItem.label.label,\n    data: [completionItem.label],\n    kind: monacoCompletionItemKindToLsCompletionItemKind(completionItem.kind),\n    tags: completionItem.tags as undefined,\n    detail: completionItem.detail,\n    documentation:\n      completionItem.documentation && typeof completionItem.documentation === 'object'\n        ? { value: completionItem.documentation.value, kind: 'markdown' }\n        : completionItem.documentation,\n    sortText: completionItem.sortText,\n    filterText: completionItem.filterText,\n    preselect: completionItem.preselect,\n    insertText: completionItem.insertText,\n  };\n}\n\nfunction lsCompletionListToMonacoCompletionList(\n  completionList: ls.CompletionList,\n): languages.CompletionList {\n  return {\n    incomplete: completionList.isIncomplete,\n    suggestions: completionList.items.map(lsCompletionItemToMonacoCompletionItem),\n  };\n}\n\nfunction lsDiagnosticSeverityToMonacoModelMarkerSeverity(\n  severity: ls.DiagnosticSeverity | undefined,\n): MarkerSeverity {\n  switch (severity) {\n    // Warning\n    case 2:\n      return 4;\n    // Information\n    case 3:\n      return 2;\n    // Hint\n    case 4:\n      return 1;\n    // Error\n    default:\n      return 8;\n  }\n}\n\nfunction lsDiagnosticRelatedInformationToMonacoRelatedInformation(\n  relatedInformation: ls.DiagnosticRelatedInformation,\n  monaco: typeof import('monaco-editor'),\n): editor.IRelatedInformation {\n  return {\n    ...lsRangeToMonacoRange(relatedInformation.location.range),\n    resource: monaco.Uri.parse(relatedInformation.location.uri),\n    message: relatedInformation.message,\n  };\n}\n\nfunction augmentedDiagnosticToMonacoModelMarker(\n  diagnostic: AugmentedDiagnostic,\n  monaco: typeof import('monaco-editor'),\n): editor.IMarkerData {\n  return {\n    ...lsRangeToMonacoRange(diagnostic.range),\n    message: diagnostic.message,\n    severity: lsDiagnosticSeverityToMonacoModelMarkerSeverity(diagnostic.severity),\n    code: diagnostic.code,\n    relatedInformation: diagnostic.relatedInformation?.map((relatedInformation) =>\n      lsDiagnosticRelatedInformationToMonacoRelatedInformation(relatedInformation, monaco),\n    ),\n  };\n}\n\nconst colorNames = Object.values(namedColors);\nconst editableColorRegex = new RegExp(\n  `-\\\\[(${colorNames.join('|')}|((?:#|rgba?\\\\(|hsla?\\\\())[^\\\\]]+)\\\\]$`,\n);\nconst stylesheet = document.createElement('style');\ndocument.head.append(stylesheet);\n\nfunction colorValueToHex(value: number): string {\n  return Math.round(value * 255)\n    .toString(16)\n    .padStart(2, '0');\n}\n\nfunction createColorClass(color: languages.IColor): string {\n  const hex = `${colorValueToHex(color.red)}${colorValueToHex(color.green)}${colorValueToHex(\n    color.blue,\n  )}`;\n  const className = `tailwindcss-color-decoration-${hex}`;\n  const selector = `.${className}`;\n  for (const rule of stylesheet.sheet!.cssRules) {\n    if ((rule as CSSStyleRule).selectorText === selector) {\n      return className;\n    }\n  }\n  stylesheet.sheet!.insertRule(`${selector}{background-color:#${hex}}`);\n  return className;\n}\n\nexport function createColorProvider(\n  monaco: typeof import('monaco-editor'),\n  getWorker: WorkerAccessor,\n): languages.DocumentColorProvider {\n  const modelMap = new WeakMap<editor.ITextModel, string[]>();\n\n  monaco.editor.onWillDisposeModel((model) => {\n    modelMap.delete(model);\n  });\n\n  return {\n    async provideDocumentColors(model) {\n      const worker = await getWorker(model.uri);\n\n      const editableColors: languages.IColorInformation[] = [];\n      const nonEditableColors: languages.IColorInformation[] = [];\n      const colors = await worker.getDocumentColors(String(model.uri), model.getLanguageId());\n      for (const lsColor of colors) {\n        const monacoColor = lsColorInformationToMonacoColorInformation(lsColor);\n        const text = model.getValueInRange(monacoColor.range);\n        if (editableColorRegex.test(text)) {\n          editableColors.push(monacoColor);\n        } else {\n          nonEditableColors.push(monacoColor);\n        }\n      }\n\n      modelMap.set(\n        model,\n        model.deltaDecorations(\n          modelMap.get(model) ?? [],\n          nonEditableColors.map(({ color, range }) => ({\n            range,\n            options: {\n              before: {\n                content: '\\u00A0',\n                inlineClassName: `${createColorClass(color)} colorpicker-color-decoration`,\n                inlineClassNameAffectsLetterSpacing: true,\n              },\n            },\n          })),\n        ),\n      );\n\n      return editableColors;\n    },\n\n    provideColorPresentations(model, colorInformation) {\n      const className = model.getValueInRange(colorInformation.range);\n      const match = new RegExp(\n        `-\\\\[(${colorNames.join('|')}|(?:(?:#|rgba?\\\\(|hsla?\\\\())[^\\\\]]+)\\\\]$`,\n        'i',\n      ).exec(className);\n\n      if (!match) {\n        return [];\n      }\n\n      const [currentColor] = match;\n\n      const isNamedColor = colorNames.includes(currentColor);\n      const color = fromRatio({\n        r: colorInformation.color.red,\n        g: colorInformation.color.green,\n        b: colorInformation.color.blue,\n        a: colorInformation.color.alpha,\n      });\n\n      let hexValue = color.toHex8String(\n        !isNamedColor && (currentColor.length === 4 || currentColor.length === 5),\n      );\n      if (hexValue.length === 5) {\n        hexValue = hexValue.replace(/f$/, '');\n      } else if (hexValue.length === 9) {\n        hexValue = hexValue.replace(/ff$/, '');\n      }\n\n      const rgbValue = color.toRgbString().replace(/ /g, '');\n      const hslValue = color.toHslString().replace(/ /g, '');\n      const prefix = className.slice(0, Math.max(0, match.index));\n\n      return [\n        { label: `${prefix}-[${hexValue}]` },\n        { label: `${prefix}-[${rgbValue}]` },\n        { label: `${prefix}-[${hslValue}]` },\n      ];\n    },\n  };\n}\n\nexport function createHoverProvider(getWorker: WorkerAccessor): languages.HoverProvider {\n  return {\n    async provideHover(model, position) {\n      const worker = await getWorker(model.uri);\n\n      const hover = await worker.doHover(\n        String(model.uri),\n        model.getLanguageId(),\n        monacoPositionToLsPosition(position),\n      );\n\n      return hover && lsHoverToMonacoHover(hover);\n    },\n  };\n}\n\nexport function createCompletionItemProvider(\n  getWorker: WorkerAccessor,\n): languages.CompletionItemProvider {\n  return {\n    async provideCompletionItems(model, position, context) {\n      const worker = await getWorker(model.uri);\n\n      const completionList = await worker.doComplete(\n        String(model.uri),\n        model.getLanguageId(),\n        monacoPositionToLsPosition(position),\n        monacoCompletionContextToLsCompletionContext(context),\n      );\n\n      return completionList && lsCompletionListToMonacoCompletionList(completionList);\n    },\n\n    async resolveCompletionItem(item) {\n      const worker = await getWorker();\n\n      const result = await worker.resolveCompletionItem(\n        monacoCompletionItemToLsCompletionItem(item),\n      );\n\n      return lsCompletionItemToMonacoCompletionItem(result);\n    },\n  };\n}\n\nexport function createMarkerDataProvider(\n  monaco: typeof import('monaco-editor'),\n  getWorker: WorkerAccessor,\n): MarkerDataProvider {\n  return {\n    owner: 'tailwindcss',\n    async provideMarkerData(model) {\n      const worker = await getWorker(model.uri);\n\n      const diagnostics = await worker.doValidate(String(model.uri), model.getLanguageId());\n\n      return diagnostics.map((diagnostic) =>\n        augmentedDiagnosticToMonacoModelMarker(diagnostic, monaco),\n      );\n    },\n  };\n}\n", "import { languages } from 'monaco-editor';\n\nfunction createTailwindDirective(name: string, value: string): languages.css.IAtDirectiveData {\n  return {\n    name: `@${name}`,\n    description: { kind: 'markdown', value },\n    references: [\n      {\n        name: `@${name} documentation`,\n        url: `https://tailwindcss.com/docs/functions-and-directives#${name}`,\n      },\n    ],\n  };\n}\n\n// The descriptions have been taken from\n// https://github.com/tailwindlabs/tailwindcss.com/blob/master/src/pages/docs/functions-and-directives.mdx\n\nconst tailwindDirective = createTailwindDirective(\n  'tailwind',\n  `Use the \\`@tailwind\\` directive to insert Tailwind's \\`base\\`, \\`components\\`, \\`utilities\\` and \\`variants\\` styles into your CSS.\n\n\\`\\`\\`css\n/**\n * This injects Tailwind's base styles and any base styles registered by\n * plugins.\n */\n@tailwind base;\n\n/**\n * This injects Tailwind's component classes and any component classes\n * registered by plugins.\n */\n@tailwind components;\n\n/**\n * This injects Tailwind's utility classes and any utility classes registered\n * by plugins.\n */\n@tailwind utilities;\n\n/**\n * Use this directive to control where Tailwind injects the hover, focus,\n * responsive, dark mode, and other variants of each class.\n *\n * If omitted, Tailwind will append these classes to the very end of\n * your stylesheet by default.\n */\n@tailwind variants;\n\\`\\`\\``,\n);\n\nconst layerDirective = createTailwindDirective(\n  'layer',\n  `Use the \\`@layer\\` directive to tell Tailwind which \"bucket\" a set of custom styles belong to. Valid layers are \\`base\\`, \\`components\\`, and \\`utilities\\`.\n\n\\`\\`\\`css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  h1 {\n    @apply text-2xl;\n  }\n  h2 {\n    @apply text-xl;\n  }\n}\n\n@layer components {\n  .btn-blue {\n    @apply bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded;\n  }\n}\n\n@layer utilities {\n  .filter-none {\n    filter: none;\n  }\n  .filter-grayscale {\n    filter: grayscale(100%);\n  }\n}\n\\`\\`\\`\n\nTailwind will automatically move any CSS within a \\`@layer\\` directive to the same place as the corresponding \\`@tailwind\\` rule, so you don't have to worry about authoring your CSS in a specific order to avoid specificity issues.\n\nAny custom CSS added to a layer will only be included in the final build if that CSS is actually used in your HTML, just like all of the classes built in to Tailwind by default.\n\nWrapping any custom CSS in a \\`@layer\\` directive also makes it possible to use modifiers with those rules, like \\`hover:\\` and \\`focus:\\` or responsive modifiers like \\`md:\\` and \\`lg:\\`.`,\n);\n\nconst applyDirective = createTailwindDirective(\n  'apply',\n  `Use \\`@apply\\` to inline any existing utility classes into your own custom CSS.\n\nThis is useful when you need to write custom CSS (like to override the styles in a third-party library) but still want to work with your design tokens and use the same syntax you're used to using in your HTML.\n\n\\`\\`\\`css\n.select2-dropdown {\n  @apply rounded-b-lg shadow-md;\n}\n.select2-search {\n  @apply border border-gray-300 rounded;\n}\n.select2-results__group {\n  @apply text-lg font-bold text-gray-900;\n}\n\\`\\`\\`\n\nAny rules inlined with \\`@apply\\` will have \\`!important\\` **removed** by default to avoid specificity issues:\n\n\\`\\`\\`css\n/* Input */\n.foo {\n  color: blue !important;\n}\n\n.bar {\n  @apply foo;\n}\n\n/* Output */\n.foo {\n  color: blue !important;\n}\n\n.bar {\n  color: blue;\n}\n\\`\\`\\`\n\nIf you'd like to \\`@apply\\` an existing class and make it \\`!important\\`, simply add \\`!important\\` to the end of the declaration:\n\n\\`\\`\\`css\n/* Input */\n.btn {\n  @apply font-bold py-2 px-4 rounded !important;\n}\n\n/* Output */\n.btn {\n  font-weight: 700 !important;\n  padding-top: .5rem !important;\n  padding-bottom: .5rem !important;\n  padding-right: 1rem !important;\n  padding-left: 1rem !important;\n  border-radius: .25rem !important;\n}\n\\`\\`\\`\n\nNote that if you're using Sass/SCSS, you'll need to use Sass' interpolation feature to get this to work:\n\n\\`\\`\\`css\n.btn {\n  @apply font-bold py-2 px-4 rounded #{!important};\n}\n\\`\\`\\``,\n);\n\nconst configDirective = createTailwindDirective(\n  'config',\n  `Use the \\`@config\\` directive to specify which config file Tailwind should use when compiling CSS file. This is useful for projects that need to use different configuration files for different CSS entry points.\n\n\\`\\`\\`css\n@config \"./tailwind.site.config.js\";\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\\`\\`\\`\n\n\\`\\`\\`css\n@config \"./tailwind.admin.config.js\";\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\\`\\`\\`\n\nThe path you provide to the \\`@config\\` directive is relative to that CSS file, and will take precedence over a path defined in your PostCSS configuration or in the Tailwind CLI.`,\n);\n\nexport const tailwindcssData: languages.css.CSSDataV1 = {\n  version: 1.1,\n  atDirectives: [tailwindDirective, layerDirective, applyDirective, configDirective],\n};\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\n/**\n * Check if given code is a number\n */\nfunction isNumber$1(code) {\n    return code > 47 && code < 58;\n}\n/**\n * Check if given character code is alpha code (letter through A to Z)\n */\nfunction isAlpha$1(code, from, to) {\n    from = from || 65; // A\n    to = to || 90; // Z\n    code &= ~32; // quick hack to convert any char code to uppercase char code\n    return code >= from && code <= to;\n}\nfunction isAlphaNumericWord(code) {\n    return isNumber$1(code) || isAlphaWord(code);\n}\nfunction isAlphaWord(code) {\n    return code === 95 /* _ */ || isAlpha$1(code);\n}\n/**\n * Check if given character code is a white-space character: a space character\n * or line breaks\n */\nfunction isWhiteSpace$3(code) {\n    return code === 32 /* space */\n        || code === 9 /* tab */\n        || code === 160; /* non-breaking space */\n}\n/**\n * Check if given character code is a space character\n */\nfunction isSpace(code) {\n    return isWhiteSpace$3(code)\n        || code === 10 /* LF */\n        || code === 13; /* CR */\n}\n/**\n * Check if given character code is a quote character\n */\nfunction isQuote$2(code) {\n    return code === 39 /* ' */ || code === 34 /* \" */;\n}\n\n/**\n * A streaming, character code-based string reader\n */\nclass Scanner {\n    constructor(str, start, end) {\n        if (end == null && typeof str === 'string') {\n            end = str.length;\n        }\n        this.string = str;\n        this.pos = this.start = start || 0;\n        this.end = end || 0;\n    }\n    /**\n     * Returns true only if the stream is at the end of the file.\n     */\n    eof() {\n        return this.pos >= this.end;\n    }\n    /**\n     * Creates a new stream instance which is limited to given `start` and `end`\n     * range. E.g. its `eof()` method will look at `end` property, not actual\n     * stream end\n     */\n    limit(start, end) {\n        return new Scanner(this.string, start, end);\n    }\n    /**\n     * Returns the next character code in the stream without advancing it.\n     * Will return NaN at the end of the file.\n     */\n    peek() {\n        return this.string.charCodeAt(this.pos);\n    }\n    /**\n     * Returns the next character in the stream and advances it.\n     * Also returns <code>undefined</code> when no more characters are available.\n     */\n    next() {\n        if (this.pos < this.string.length) {\n            return this.string.charCodeAt(this.pos++);\n        }\n    }\n    /**\n     * `match` can be a character code or a function that takes a character code\n     * and returns a boolean. If the next character in the stream 'matches'\n     * the given argument, it is consumed and returned.\n     * Otherwise, `false` is returned.\n     */\n    eat(match) {\n        const ch = this.peek();\n        const ok = typeof match === 'function' ? match(ch) : ch === match;\n        if (ok) {\n            this.next();\n        }\n        return ok;\n    }\n    /**\n     * Repeatedly calls <code>eat</code> with the given argument, until it\n     * fails. Returns <code>true</code> if any characters were eaten.\n     */\n    eatWhile(match) {\n        const start = this.pos;\n        while (!this.eof() && this.eat(match)) { /* */ }\n        return this.pos !== start;\n    }\n    /**\n     * Backs up the stream n characters. Backing it up further than the\n     * start of the current token will cause things to break, so be careful.\n     */\n    backUp(n) {\n        this.pos -= (n || 1);\n    }\n    /**\n     * Get the string between the start of the current token and the\n     * current stream position.\n     */\n    current() {\n        return this.substring(this.start, this.pos);\n    }\n    /**\n     * Returns substring for given range\n     */\n    substring(start, end) {\n        return this.string.slice(start, end);\n    }\n    /**\n     * Creates error object with current stream state\n     */\n    error(message, pos = this.pos) {\n        return new ScannerError(`${message} at ${pos + 1}`, pos, this.string);\n    }\n}\nclass ScannerError extends Error {\n    constructor(message, pos, str) {\n        super(message);\n        this.pos = pos;\n        this.string = str;\n    }\n}\n\nfunction tokenScanner$1(tokens) {\n    return {\n        tokens,\n        start: 0,\n        pos: 0,\n        size: tokens.length\n    };\n}\nfunction peek$3(scanner) {\n    return scanner.tokens[scanner.pos];\n}\nfunction next(scanner) {\n    return scanner.tokens[scanner.pos++];\n}\nfunction slice(scanner, from = scanner.start, to = scanner.pos) {\n    return scanner.tokens.slice(from, to);\n}\nfunction readable$1(scanner) {\n    return scanner.pos < scanner.size;\n}\nfunction consume$2(scanner, test) {\n    const token = peek$3(scanner);\n    if (token && test(token)) {\n        scanner.pos++;\n        return true;\n    }\n    return false;\n}\nfunction error$1(scanner, message, token = peek$3(scanner)) {\n    if (token && token.start != null) {\n        message += ` at ${token.start}`;\n    }\n    const err = new Error(message);\n    err['pos'] = token && token.start;\n    return err;\n}\n\nfunction abbreviation(abbr, options = {}) {\n    const scanner = tokenScanner$1(abbr);\n    const result = statements(scanner, options);\n    if (readable$1(scanner)) {\n        throw error$1(scanner, 'Unexpected character');\n    }\n    return result;\n}\nfunction statements(scanner, options) {\n    const result = {\n        type: 'TokenGroup',\n        elements: []\n    };\n    let ctx = result;\n    let node;\n    const stack = [];\n    while (readable$1(scanner)) {\n        if (node = element$2(scanner, options) || group(scanner, options)) {\n            ctx.elements.push(node);\n            if (consume$2(scanner, isChildOperator)) {\n                stack.push(ctx);\n                ctx = node;\n            }\n            else if (consume$2(scanner, isSiblingOperator$1)) {\n                continue;\n            }\n            else if (consume$2(scanner, isClimbOperator)) {\n                do {\n                    if (stack.length) {\n                        ctx = stack.pop();\n                    }\n                } while (consume$2(scanner, isClimbOperator));\n            }\n        }\n        else {\n            break;\n        }\n    }\n    return result;\n}\n/**\n * Consumes group from given scanner\n */\nfunction group(scanner, options) {\n    if (consume$2(scanner, isGroupStart)) {\n        const result = statements(scanner, options);\n        const token = next(scanner);\n        if (isBracket$2(token, 'group', false)) {\n            result.repeat = repeater(scanner);\n        }\n        return result;\n    }\n}\n/**\n * Consumes single element from given scanner\n */\nfunction element$2(scanner, options) {\n    let attr;\n    const elem = {\n        type: 'TokenElement',\n        name: void 0,\n        attributes: void 0,\n        value: void 0,\n        repeat: void 0,\n        selfClose: false,\n        elements: []\n    };\n    if (elementName(scanner, options)) {\n        elem.name = slice(scanner);\n    }\n    while (readable$1(scanner)) {\n        scanner.start = scanner.pos;\n        if (!elem.repeat && !isEmpty(elem) && consume$2(scanner, isRepeater)) {\n            elem.repeat = scanner.tokens[scanner.pos - 1];\n        }\n        else if (!elem.value && text(scanner)) {\n            elem.value = getText(scanner);\n        }\n        else if (attr = shortAttribute(scanner, 'id', options) || shortAttribute(scanner, 'class', options) || attributeSet(scanner)) {\n            if (!elem.attributes) {\n                elem.attributes = Array.isArray(attr) ? attr.slice() : [attr];\n            }\n            else {\n                elem.attributes = elem.attributes.concat(attr);\n            }\n        }\n        else {\n            if (!isEmpty(elem) && consume$2(scanner, isCloseOperator)) {\n                elem.selfClose = true;\n                if (!elem.repeat && consume$2(scanner, isRepeater)) {\n                    elem.repeat = scanner.tokens[scanner.pos - 1];\n                }\n            }\n            break;\n        }\n    }\n    return !isEmpty(elem) ? elem : void 0;\n}\n/**\n * Consumes attribute set from given scanner\n */\nfunction attributeSet(scanner) {\n    if (consume$2(scanner, isAttributeSetStart)) {\n        const attributes = [];\n        let attr;\n        while (readable$1(scanner)) {\n            if (attr = attribute(scanner)) {\n                attributes.push(attr);\n            }\n            else if (consume$2(scanner, isAttributeSetEnd)) {\n                break;\n            }\n            else if (!consume$2(scanner, isWhiteSpace$2)) {\n                throw error$1(scanner, `Unexpected \"${peek$3(scanner).type}\" token`);\n            }\n        }\n        return attributes;\n    }\n}\n/**\n * Consumes attribute shorthand (class or id) from given scanner\n */\nfunction shortAttribute(scanner, type, options) {\n    if (isOperator$1(peek$3(scanner), type)) {\n        scanner.pos++;\n        const attr = {\n            name: [createLiteral$1(type)]\n        };\n        // Consume expression after shorthand start for React-like components\n        if (options.jsx && text(scanner)) {\n            attr.value = getText(scanner);\n            attr.expression = true;\n        }\n        else {\n            attr.value = literal$2(scanner) ? slice(scanner) : void 0;\n        }\n        return attr;\n    }\n}\n/**\n * Consumes single attribute from given scanner\n */\nfunction attribute(scanner) {\n    if (quoted(scanner)) {\n        // Consumed quoted value: it\u2019s a value for default attribute\n        return {\n            value: slice(scanner)\n        };\n    }\n    if (literal$2(scanner, true)) {\n        return {\n            name: slice(scanner),\n            value: consume$2(scanner, isEquals) && (quoted(scanner) || literal$2(scanner, true))\n                ? slice(scanner)\n                : void 0\n        };\n    }\n}\nfunction repeater(scanner) {\n    return isRepeater(peek$3(scanner))\n        ? scanner.tokens[scanner.pos++]\n        : void 0;\n}\n/**\n * Consumes quoted value from given scanner, if possible\n */\nfunction quoted(scanner) {\n    const start = scanner.pos;\n    const quote = peek$3(scanner);\n    if (isQuote$1(quote)) {\n        scanner.pos++;\n        while (readable$1(scanner)) {\n            if (isQuote$1(next(scanner), quote.single)) {\n                scanner.start = start;\n                return true;\n            }\n        }\n        throw error$1(scanner, 'Unclosed quote', quote);\n    }\n    return false;\n}\n/**\n * Consumes literal (unquoted value) from given scanner\n */\nfunction literal$2(scanner, allowBrackets) {\n    const start = scanner.pos;\n    const brackets = {\n        attribute: 0,\n        expression: 0,\n        group: 0\n    };\n    while (readable$1(scanner)) {\n        const token = peek$3(scanner);\n        if (brackets.expression) {\n            // If we\u2019re inside expression, we should consume all content in it\n            if (isBracket$2(token, 'expression')) {\n                brackets[token.context] += token.open ? 1 : -1;\n            }\n        }\n        else if (isQuote$1(token) || isOperator$1(token) || isWhiteSpace$2(token) || isRepeater(token)) {\n            break;\n        }\n        else if (isBracket$2(token)) {\n            if (!allowBrackets) {\n                break;\n            }\n            if (token.open) {\n                brackets[token.context]++;\n            }\n            else if (!brackets[token.context]) {\n                // Stop if found unmatched closing brace: it must be handled\n                // by parent consumer\n                break;\n            }\n            else {\n                brackets[token.context]--;\n            }\n        }\n        scanner.pos++;\n    }\n    if (start !== scanner.pos) {\n        scanner.start = start;\n        return true;\n    }\n    return false;\n}\n/**\n * Consumes element name from given scanner\n */\nfunction elementName(scanner, options) {\n    const start = scanner.pos;\n    if (options.jsx && consume$2(scanner, isCapitalizedLiteral)) {\n        // Check for edge case: consume immediate capitalized class names\n        // for React-like components, e.g. `Foo.Bar.Baz`\n        while (readable$1(scanner)) {\n            const { pos } = scanner;\n            if (!consume$2(scanner, isClassNameOperator) || !consume$2(scanner, isCapitalizedLiteral)) {\n                scanner.pos = pos;\n                break;\n            }\n        }\n    }\n    while (readable$1(scanner) && consume$2(scanner, isElementName)) {\n        // empty\n    }\n    if (scanner.pos !== start) {\n        scanner.start = start;\n        return true;\n    }\n    return false;\n}\n/**\n * Consumes text value from given scanner\n */\nfunction text(scanner) {\n    const start = scanner.pos;\n    if (consume$2(scanner, isTextStart)) {\n        let brackets = 0;\n        while (readable$1(scanner)) {\n            const token = next(scanner);\n            if (isBracket$2(token, 'expression')) {\n                if (token.open) {\n                    brackets++;\n                }\n                else if (!brackets) {\n                    break;\n                }\n                else {\n                    brackets--;\n                }\n            }\n        }\n        scanner.start = start;\n        return true;\n    }\n    return false;\n}\nfunction getText(scanner) {\n    let from = scanner.start;\n    let to = scanner.pos;\n    if (isBracket$2(scanner.tokens[from], 'expression', true)) {\n        from++;\n    }\n    if (isBracket$2(scanner.tokens[to - 1], 'expression', false)) {\n        to--;\n    }\n    return slice(scanner, from, to);\n}\nfunction isBracket$2(token, context, isOpen) {\n    return Boolean(token && token.type === 'Bracket'\n        && (!context || token.context === context)\n        && (isOpen == null || token.open === isOpen));\n}\nfunction isOperator$1(token, type) {\n    return Boolean(token && token.type === 'Operator' && (!type || token.operator === type));\n}\nfunction isQuote$1(token, isSingle) {\n    return Boolean(token && token.type === 'Quote' && (isSingle == null || token.single === isSingle));\n}\nfunction isWhiteSpace$2(token) {\n    return Boolean(token && token.type === 'WhiteSpace');\n}\nfunction isEquals(token) {\n    return isOperator$1(token, 'equal');\n}\nfunction isRepeater(token) {\n    return Boolean(token && token.type === 'Repeater');\n}\nfunction isLiteral$2(token) {\n    return token.type === 'Literal';\n}\nfunction isCapitalizedLiteral(token) {\n    if (isLiteral$2(token)) {\n        const ch = token.value.charCodeAt(0);\n        return ch >= 65 && ch <= 90;\n    }\n    return false;\n}\nfunction isElementName(token) {\n    return token.type === 'Literal' || token.type === 'RepeaterNumber' || token.type === 'RepeaterPlaceholder';\n}\nfunction isClassNameOperator(token) {\n    return isOperator$1(token, 'class');\n}\nfunction isAttributeSetStart(token) {\n    return isBracket$2(token, 'attribute', true);\n}\nfunction isAttributeSetEnd(token) {\n    return isBracket$2(token, 'attribute', false);\n}\nfunction isTextStart(token) {\n    return isBracket$2(token, 'expression', true);\n}\nfunction isGroupStart(token) {\n    return isBracket$2(token, 'group', true);\n}\nfunction createLiteral$1(value) {\n    return { type: 'Literal', value };\n}\nfunction isEmpty(elem) {\n    return !elem.name && !elem.value && !elem.attributes;\n}\nfunction isChildOperator(token) {\n    return isOperator$1(token, 'child');\n}\nfunction isSiblingOperator$1(token) {\n    return isOperator$1(token, 'sibling');\n}\nfunction isClimbOperator(token) {\n    return isOperator$1(token, 'climb');\n}\nfunction isCloseOperator(token) {\n    return isOperator$1(token, 'close');\n}\n\n/**\n * If consumes escape character, sets current stream range to escaped value\n */\nfunction escaped(scanner) {\n    if (scanner.eat(92 /* Escape */)) {\n        scanner.start = scanner.pos;\n        if (!scanner.eof()) {\n            scanner.pos++;\n        }\n        return true;\n    }\n    return false;\n}\n\nfunction tokenize$1(source) {\n    const scanner = new Scanner(source);\n    const result = [];\n    const ctx = {\n        group: 0,\n        attribute: 0,\n        expression: 0,\n        quote: 0\n    };\n    let ch = 0;\n    let token;\n    while (!scanner.eof()) {\n        ch = scanner.peek();\n        token = getToken$1(scanner, ctx);\n        if (token) {\n            result.push(token);\n            if (token.type === 'Quote') {\n                ctx.quote = ch === ctx.quote ? 0 : ch;\n            }\n            else if (token.type === 'Bracket') {\n                ctx[token.context] += token.open ? 1 : -1;\n            }\n        }\n        else {\n            throw scanner.error('Unexpected character');\n        }\n    }\n    return result;\n}\n/**\n * Returns next token from given scanner, if possible\n */\nfunction getToken$1(scanner, ctx) {\n    return field$2(scanner, ctx)\n        || repeaterPlaceholder(scanner)\n        || repeaterNumber(scanner)\n        || repeater$1(scanner)\n        || whiteSpace$1(scanner)\n        || literal$1$1(scanner, ctx)\n        || operator$1(scanner)\n        || quote(scanner)\n        || bracket$1(scanner);\n}\n/**\n * Consumes literal from given scanner\n */\nfunction literal$1$1(scanner, ctx) {\n    const start = scanner.pos;\n    let value = '';\n    while (!scanner.eof()) {\n        // Consume escaped sequence no matter of context\n        if (escaped(scanner)) {\n            value += scanner.current();\n            continue;\n        }\n        const ch = scanner.peek();\n        if (ch === ctx.quote || ch === 36 /* Dollar */ || isAllowedOperator(ch, ctx)) {\n            // 1. Found matching quote\n            // 2. The `$` character has special meaning in every context\n            // 3. Depending on context, some characters should be treated as operators\n            break;\n        }\n        if (ctx.expression && ch === 125 /* CurlyBracketClose */) {\n            break;\n        }\n        if (!ctx.quote && !ctx.expression) {\n            // Consuming element name\n            if (!ctx.attribute && !isElementName$1(ch)) {\n                break;\n            }\n            if (isAllowedSpace(ch, ctx) || isAllowedRepeater(ch, ctx) || isQuote$2(ch) || bracketType(ch)) {\n                // Stop for characters not allowed in unquoted literal\n                break;\n            }\n        }\n        value += scanner.string[scanner.pos++];\n    }\n    if (start !== scanner.pos) {\n        scanner.start = start;\n        return {\n            type: 'Literal',\n            value,\n            start,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes white space characters as string literal from given scanner\n */\nfunction whiteSpace$1(scanner) {\n    const start = scanner.pos;\n    if (scanner.eatWhile(isSpace)) {\n        return {\n            type: 'WhiteSpace',\n            start,\n            end: scanner.pos,\n            value: scanner.substring(start, scanner.pos)\n        };\n    }\n}\n/**\n * Consumes quote from given scanner\n */\nfunction quote(scanner) {\n    const ch = scanner.peek();\n    if (isQuote$2(ch)) {\n        return {\n            type: 'Quote',\n            single: ch === 39 /* SingleQuote */,\n            start: scanner.pos++,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes bracket from given scanner\n */\nfunction bracket$1(scanner) {\n    const ch = scanner.peek();\n    const context = bracketType(ch);\n    if (context) {\n        return {\n            type: 'Bracket',\n            open: isOpenBracket$2(ch),\n            context,\n            start: scanner.pos++,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes operator from given scanner\n */\nfunction operator$1(scanner) {\n    const op = operatorType$1(scanner.peek());\n    if (op) {\n        return {\n            type: 'Operator',\n            operator: op,\n            start: scanner.pos++,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes node repeat token from current stream position and returns its\n * parsed value\n */\nfunction repeater$1(scanner) {\n    const start = scanner.pos;\n    if (scanner.eat(42 /* Asterisk */)) {\n        scanner.start = scanner.pos;\n        let count = 1;\n        let implicit = false;\n        if (scanner.eatWhile(isNumber$1)) {\n            count = Number(scanner.current());\n        }\n        else {\n            implicit = true;\n        }\n        return {\n            type: 'Repeater',\n            count,\n            value: 0,\n            implicit,\n            start,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes repeater placeholder `$#` from given scanner\n */\nfunction repeaterPlaceholder(scanner) {\n    const start = scanner.pos;\n    if (scanner.eat(36 /* Dollar */) && scanner.eat(35 /* Hash */)) {\n        return {\n            type: 'RepeaterPlaceholder',\n            value: void 0,\n            start,\n            end: scanner.pos\n        };\n    }\n    scanner.pos = start;\n}\n/**\n * Consumes numbering token like `$` from given scanner state\n */\nfunction repeaterNumber(scanner) {\n    const start = scanner.pos;\n    if (scanner.eatWhile(36 /* Dollar */)) {\n        const size = scanner.pos - start;\n        let reverse = false;\n        let base = 1;\n        let parent = 0;\n        if (scanner.eat(64 /* At */)) {\n            // Consume numbering modifiers\n            while (scanner.eat(94 /* Climb */)) {\n                parent++;\n            }\n            reverse = scanner.eat(45 /* Dash */);\n            scanner.start = scanner.pos;\n            if (scanner.eatWhile(isNumber$1)) {\n                base = Number(scanner.current());\n            }\n        }\n        scanner.start = start;\n        return {\n            type: 'RepeaterNumber',\n            size,\n            reverse,\n            base,\n            parent,\n            start,\n            end: scanner.pos\n        };\n    }\n}\nfunction field$2(scanner, ctx) {\n    const start = scanner.pos;\n    // Fields are allowed inside expressions and attributes\n    if ((ctx.expression || ctx.attribute) && scanner.eat(36 /* Dollar */) && scanner.eat(123 /* CurlyBracketOpen */)) {\n        scanner.start = scanner.pos;\n        let index;\n        let name = '';\n        if (scanner.eatWhile(isNumber$1)) {\n            // It\u2019s a field\n            index = Number(scanner.current());\n            name = scanner.eat(58 /* Colon */) ? consumePlaceholder$2(scanner) : '';\n        }\n        else if (isAlpha$1(scanner.peek())) {\n            // It\u2019s a variable\n            name = consumePlaceholder$2(scanner);\n        }\n        if (scanner.eat(125 /* CurlyBracketClose */)) {\n            return {\n                type: 'Field',\n                index, name,\n                start,\n                end: scanner.pos\n            };\n        }\n        throw scanner.error('Expecting }');\n    }\n    // If we reached here then there\u2019s no valid field here, revert\n    // back to starting position\n    scanner.pos = start;\n}\n/**\n * Consumes a placeholder: value right after `:` in field. Could be empty\n */\nfunction consumePlaceholder$2(stream) {\n    const stack = [];\n    stream.start = stream.pos;\n    while (!stream.eof()) {\n        if (stream.eat(123 /* CurlyBracketOpen */)) {\n            stack.push(stream.pos);\n        }\n        else if (stream.eat(125 /* CurlyBracketClose */)) {\n            if (!stack.length) {\n                stream.pos--;\n                break;\n            }\n            stack.pop();\n        }\n        else {\n            stream.pos++;\n        }\n    }\n    if (stack.length) {\n        stream.pos = stack.pop();\n        throw stream.error(`Expecting }`);\n    }\n    return stream.current();\n}\n/**\n * Check if given character code is an operator and it\u2019s allowed in current context\n */\nfunction isAllowedOperator(ch, ctx) {\n    const op = operatorType$1(ch);\n    if (!op || ctx.quote || ctx.expression) {\n        // No operators inside quoted values or expressions\n        return false;\n    }\n    // Inside attributes, only `equals` is allowed\n    return !ctx.attribute || op === 'equal';\n}\n/**\n * Check if given character is a space character and is allowed to be consumed\n * as a space token in current context\n */\nfunction isAllowedSpace(ch, ctx) {\n    return isSpace(ch) && !ctx.expression;\n}\n/**\n * Check if given character can be consumed as repeater in current context\n */\nfunction isAllowedRepeater(ch, ctx) {\n    return ch === 42 /* Asterisk */ && !ctx.attribute && !ctx.expression;\n}\n/**\n * If given character is a bracket, returns it\u2019s type\n */\nfunction bracketType(ch) {\n    if (ch === 40 /* RoundBracketOpen */ || ch === 41 /* RoundBracketClose */) {\n        return 'group';\n    }\n    if (ch === 91 /* SquareBracketOpen */ || ch === 93 /* SquareBracketClose */) {\n        return 'attribute';\n    }\n    if (ch === 123 /* CurlyBracketOpen */ || ch === 125 /* CurlyBracketClose */) {\n        return 'expression';\n    }\n}\n/**\n * If given character is an operator, returns it\u2019s type\n */\nfunction operatorType$1(ch) {\n    return (ch === 62 /* Child */ && 'child')\n        || (ch === 43 /* Sibling */ && 'sibling')\n        || (ch === 94 /* Climb */ && 'climb')\n        || (ch === 46 /* Dot */ && 'class')\n        || (ch === 35 /* Hash */ && 'id')\n        || (ch === 47 /* Slash */ && 'close')\n        || (ch === 61 /* Equals */ && 'equal')\n        || void 0;\n}\n/**\n * Check if given character is an open bracket\n */\nfunction isOpenBracket$2(ch) {\n    return ch === 123 /* CurlyBracketOpen */\n        || ch === 91 /* SquareBracketOpen */\n        || ch === 40 /* RoundBracketOpen */;\n}\n/**\n * Check if given character is allowed in element name\n */\nfunction isElementName$1(ch) {\n    return isAlphaNumericWord(ch)\n        || ch === 45 /* Dash */\n        || ch === 58 /* Colon */\n        || ch === 33 /* Excl */;\n}\n\nconst operators = {\n    child: '>',\n    class: '.',\n    climb: '^',\n    id: '#',\n    equal: '=',\n    close: '/',\n    sibling: '+'\n};\nconst tokenVisitor = {\n    Literal(token) {\n        return token.value;\n    },\n    Quote(token) {\n        return token.single ? '\\'' : '\"';\n    },\n    Bracket(token) {\n        if (token.context === 'attribute') {\n            return token.open ? '[' : ']';\n        }\n        else if (token.context === 'expression') {\n            return token.open ? '{' : '}';\n        }\n        else {\n            return token.open ? '(' : '}';\n        }\n    },\n    Operator(token) {\n        return operators[token.operator];\n    },\n    Field(token, state) {\n        if (token.index != null) {\n            // It\u2019s a field: by default, return TextMate-compatible field\n            return token.name\n                ? `\\${${token.index}:${token.name}}`\n                : `\\${${token.index}`;\n        }\n        else if (token.name) {\n            // It\u2019s a variable\n            return state.getVariable(token.name);\n        }\n        return '';\n    },\n    RepeaterPlaceholder(token, state) {\n        // Find closest implicit repeater\n        let repeater;\n        for (let i = state.repeaters.length - 1; i >= 0; i--) {\n            if (state.repeaters[i].implicit) {\n                repeater = state.repeaters[i];\n                break;\n            }\n        }\n        state.inserted = true;\n        return state.getText(repeater && repeater.value);\n    },\n    RepeaterNumber(token, state) {\n        let value = 1;\n        const lastIx = state.repeaters.length - 1;\n        // const repeaterIx = Math.max(0, state.repeaters.length - 1 - token.parent);\n        const repeater = state.repeaters[lastIx];\n        if (repeater) {\n            value = token.reverse\n                ? token.base + repeater.count - repeater.value - 1\n                : token.base + repeater.value;\n            if (token.parent) {\n                const parentIx = Math.max(0, lastIx - token.parent);\n                if (parentIx !== lastIx) {\n                    const parentRepeater = state.repeaters[parentIx];\n                    value += repeater.count * parentRepeater.value;\n                }\n            }\n        }\n        let result = String(value);\n        while (result.length < token.size) {\n            result = '0' + result;\n        }\n        return result;\n    },\n    WhiteSpace(token) {\n        return token.value;\n    }\n};\n/**\n * Converts given value token to string\n */\nfunction stringify$1(token, state) {\n    if (!tokenVisitor[token.type]) {\n        throw new Error(`Unknown token ${token.type}`);\n    }\n    return tokenVisitor[token.type](token, state);\n}\n\nconst urlRegex = /^((https?:|ftp:|file:)?\\/\\/|(www|ftp)\\.)[^ ]*$/;\nconst emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,5}$/;\n/**\n * Converts given token-based abbreviation into simplified and unrolled node-based\n * abbreviation\n */\nfunction convert(abbr, options = {}) {\n    let textInserted = false;\n    let cleanText;\n    if (options.text) {\n        if (Array.isArray(options.text)) {\n            cleanText = options.text.filter(s => s.trim());\n        }\n        else {\n            cleanText = options.text;\n        }\n    }\n    const result = {\n        type: 'Abbreviation',\n        children: convertGroup(abbr, {\n            inserted: false,\n            repeaters: [],\n            text: options.text,\n            cleanText,\n            repeatGuard: options.maxRepeat || Number.POSITIVE_INFINITY,\n            getText(pos) {\n                var _a;\n                textInserted = true;\n                let value;\n                if (Array.isArray(options.text)) {\n                    if (pos !== undefined && pos >= 0 && pos < cleanText.length) {\n                        return cleanText[pos];\n                    }\n                    value = pos !== undefined ? options.text[pos] : options.text.join('\\n');\n                }\n                else {\n                    value = (_a = options.text) !== null && _a !== void 0 ? _a : '';\n                }\n                return value;\n            },\n            getVariable(name) {\n                const varValue = options.variables && options.variables[name];\n                return varValue != null ? varValue : name;\n            }\n        })\n    };\n    if (options.text != null && !textInserted) {\n        // Text given but no implicitly repeated elements: insert it into\n        // deepest child\n        const deepest = deepestNode(last$1(result.children));\n        if (deepest) {\n            const text = Array.isArray(options.text) ? options.text.join('\\n') : options.text;\n            insertText(deepest, text);\n            if (deepest.name === 'a' && options.href) {\n                // Automatically update value of `<a>` element if inserting URL or email\n                insertHref(deepest, text);\n            }\n        }\n    }\n    return result;\n}\n/**\n * Converts given statement to abbreviation nodes\n */\nfunction convertStatement(node, state) {\n    let result = [];\n    if (node.repeat) {\n        // Node is repeated: we should create copies of given node\n        // and supply context token with actual repeater state\n        const original = node.repeat;\n        const repeat = Object.assign({}, original);\n        repeat.count = repeat.implicit && Array.isArray(state.text)\n            ? state.cleanText.length\n            : (repeat.count || 1);\n        let items;\n        state.repeaters.push(repeat);\n        for (let i = 0; i < repeat.count; i++) {\n            repeat.value = i;\n            node.repeat = repeat;\n            items = isGroup(node)\n                ? convertGroup(node, state)\n                : convertElement(node, state);\n            if (repeat.implicit && !state.inserted) {\n                // It\u2019s an implicit repeater but no repeater placeholders found inside,\n                // we should insert text into deepest node\n                const target = last$1(items);\n                const deepest = target && deepestNode(target);\n                if (deepest) {\n                    insertText(deepest, state.getText(repeat.value));\n                }\n            }\n            result = result.concat(items);\n            // We should output at least one repeated item even if it\u2019s reached\n            // repeat limit\n            if (--state.repeatGuard <= 0) {\n                break;\n            }\n        }\n        state.repeaters.pop();\n        node.repeat = original;\n        if (repeat.implicit) {\n            state.inserted = true;\n        }\n    }\n    else {\n        result = result.concat(isGroup(node) ? convertGroup(node, state) : convertElement(node, state));\n    }\n    return result;\n}\nfunction convertElement(node, state) {\n    let children = [];\n    const elem = {\n        type: 'AbbreviationNode',\n        name: node.name && stringifyName(node.name, state),\n        value: node.value && stringifyValue$1(node.value, state),\n        attributes: void 0,\n        children,\n        repeat: node.repeat && Object.assign({}, node.repeat),\n        selfClosing: node.selfClose,\n    };\n    let result = [elem];\n    for (const child of node.elements) {\n        children = children.concat(convertStatement(child, state));\n    }\n    if (node.attributes) {\n        elem.attributes = [];\n        for (const attr of node.attributes) {\n            elem.attributes.push(convertAttribute(attr, state));\n        }\n    }\n    // In case if current node is a text-only snippet without fields, we should\n    // put all children as siblings\n    if (!elem.name && !elem.attributes && elem.value && !elem.value.some(isField$1)) {\n        // XXX it\u2019s unclear that `children` is not bound to `elem`\n        // due to concat operation\n        result = result.concat(children);\n    }\n    else {\n        elem.children = children;\n    }\n    return result;\n}\nfunction convertGroup(node, state) {\n    let result = [];\n    for (const child of node.elements) {\n        result = result.concat(convertStatement(child, state));\n    }\n    if (node.repeat) {\n        result = attachRepeater(result, node.repeat);\n    }\n    return result;\n}\nfunction convertAttribute(node, state) {\n    let implied = false;\n    let isBoolean = false;\n    let valueType = node.expression ? 'expression' : 'raw';\n    let value;\n    const name = node.name && stringifyName(node.name, state);\n    if (name && name[0] === '!') {\n        implied = true;\n    }\n    if (name && name[name.length - 1] === '.') {\n        isBoolean = true;\n    }\n    if (node.value) {\n        const tokens = node.value.slice();\n        if (isQuote$1(tokens[0])) {\n            // It\u2019s a quoted value: remove quotes from output but mark attribute\n            // value as quoted\n            const quote = tokens.shift();\n            if (tokens.length && last$1(tokens).type === quote.type) {\n                tokens.pop();\n            }\n            valueType = quote.single ? 'singleQuote' : 'doubleQuote';\n        }\n        else if (isBracket$2(tokens[0], 'expression', true)) {\n            // Value is expression: remove brackets but mark value type\n            valueType = 'expression';\n            tokens.shift();\n            if (isBracket$2(last$1(tokens), 'expression', false)) {\n                tokens.pop();\n            }\n        }\n        value = stringifyValue$1(tokens, state);\n    }\n    return {\n        name: isBoolean || implied\n            ? name.slice(implied ? 1 : 0, isBoolean ? -1 : void 0)\n            : name,\n        value,\n        boolean: isBoolean,\n        implied,\n        valueType\n    };\n}\n/**\n * Converts given token list to string\n */\nfunction stringifyName(tokens, state) {\n    let str = '';\n    for (let i = 0; i < tokens.length; i++) {\n        str += stringify$1(tokens[i], state);\n    }\n    return str;\n}\n/**\n * Converts given token list to value list\n */\nfunction stringifyValue$1(tokens, state) {\n    const result = [];\n    let str = '';\n    for (let i = 0, token; i < tokens.length; i++) {\n        token = tokens[i];\n        if (isField$1(token)) {\n            // We should keep original fields in output since some editors has their\n            // own syntax for field or doesn\u2019t support fields at all so we should\n            // capture actual field location in output stream\n            if (str) {\n                result.push(str);\n                str = '';\n            }\n            result.push(token);\n        }\n        else {\n            str += stringify$1(token, state);\n        }\n    }\n    if (str) {\n        result.push(str);\n    }\n    return result;\n}\nfunction isGroup(node) {\n    return node.type === 'TokenGroup';\n}\nfunction isField$1(token) {\n    return typeof token === 'object' && token.type === 'Field' && token.index != null;\n}\nfunction last$1(arr) {\n    return arr[arr.length - 1];\n}\nfunction deepestNode(node) {\n    return node.children.length ? deepestNode(last$1(node.children)) : node;\n}\nfunction insertText(node, text) {\n    if (node.value) {\n        const lastToken = last$1(node.value);\n        if (typeof lastToken === 'string') {\n            node.value[node.value.length - 1] += text;\n        }\n        else {\n            node.value.push(text);\n        }\n    }\n    else {\n        node.value = [text];\n    }\n}\nfunction insertHref(node, text) {\n    var _a;\n    let href = '';\n    if (urlRegex.test(text)) {\n        href = text;\n        if (!/\\w+:/.test(href) && !href.startsWith('//')) {\n            href = `http://${href}`;\n        }\n    }\n    else if (emailRegex.test(text)) {\n        href = `mailto:${text}`;\n    }\n    const hrefAttribute = (_a = node.attributes) === null || _a === void 0 ? void 0 : _a.find(attr => attr.name === 'href');\n    if (!hrefAttribute) {\n        if (!node.attributes) {\n            node.attributes = [];\n        }\n        node.attributes.push({ name: 'href', value: [href], valueType: 'doubleQuote' });\n    }\n    else if (!hrefAttribute.value) {\n        hrefAttribute.value = [href];\n    }\n}\nfunction attachRepeater(items, repeater) {\n    for (const item of items) {\n        if (!item.repeat) {\n            item.repeat = Object.assign({}, repeater);\n        }\n    }\n    return items;\n}\n\n/**\n * Parses given abbreviation into node tree\n */\nfunction parseAbbreviation(abbr, options) {\n    try {\n        const tokens = typeof abbr === 'string' ? tokenize$1(abbr) : abbr;\n        return convert(abbreviation(tokens, options), options);\n    }\n    catch (err) {\n        if (err instanceof ScannerError && typeof abbr === 'string') {\n            err.message += `\\n${abbr}\\n${'-'.repeat(err.pos)}^`;\n        }\n        throw err;\n    }\n}\n\nfunction tokenize(abbr, isValue) {\n    let brackets = 0;\n    let token;\n    const scanner = new Scanner(abbr);\n    const tokens = [];\n    while (!scanner.eof()) {\n        token = getToken(scanner, brackets === 0 && !isValue);\n        if (!token) {\n            throw scanner.error('Unexpected character');\n        }\n        if (token.type === 'Bracket') {\n            if (!brackets && token.open) {\n                mergeTokens(scanner, tokens);\n            }\n            brackets += token.open ? 1 : -1;\n            if (brackets < 0) {\n                throw scanner.error('Unexpected bracket', token.start);\n            }\n        }\n        tokens.push(token);\n        // Forcibly consume next operator after unit-less numeric value or color:\n        // next dash `-` must be used as value delimiter\n        if (shouldConsumeDashAfter(token) && (token = operator(scanner))) {\n            tokens.push(token);\n        }\n    }\n    return tokens;\n}\n/**\n * Returns next token from given scanner, if possible\n */\nfunction getToken(scanner, short) {\n    return field$1(scanner)\n        || numberValue(scanner)\n        || colorValue(scanner)\n        || stringValue(scanner)\n        || bracket(scanner)\n        || operator(scanner)\n        || whiteSpace(scanner)\n        || literal$1(scanner, short);\n}\nfunction field$1(scanner) {\n    const start = scanner.pos;\n    if (scanner.eat(36 /* Dollar */) && scanner.eat(123 /* CurlyBracketOpen */)) {\n        scanner.start = scanner.pos;\n        let index;\n        let name = '';\n        if (scanner.eatWhile(isNumber$1)) {\n            // It\u2019s a field\n            index = Number(scanner.current());\n            name = scanner.eat(58 /* Colon */) ? consumePlaceholder$1(scanner) : '';\n        }\n        else if (isAlpha$1(scanner.peek())) {\n            // It\u2019s a variable\n            name = consumePlaceholder$1(scanner);\n        }\n        if (scanner.eat(125 /* CurlyBracketClose */)) {\n            return {\n                type: 'Field',\n                index, name,\n                start,\n                end: scanner.pos\n            };\n        }\n        throw scanner.error('Expecting }');\n    }\n    // If we reached here then there\u2019s no valid field here, revert\n    // back to starting position\n    scanner.pos = start;\n}\n/**\n * Consumes a placeholder: value right after `:` in field. Could be empty\n */\nfunction consumePlaceholder$1(stream) {\n    const stack = [];\n    stream.start = stream.pos;\n    while (!stream.eof()) {\n        if (stream.eat(123 /* CurlyBracketOpen */)) {\n            stack.push(stream.pos);\n        }\n        else if (stream.eat(125 /* CurlyBracketClose */)) {\n            if (!stack.length) {\n                stream.pos--;\n                break;\n            }\n            stack.pop();\n        }\n        else {\n            stream.pos++;\n        }\n    }\n    if (stack.length) {\n        stream.pos = stack.pop();\n        throw stream.error(`Expecting }`);\n    }\n    return stream.current();\n}\n/**\n * Consumes literal from given scanner\n * @param short Use short notation for consuming value.\n * The difference between \u201Cshort\u201D and \u201Cfull\u201D notation is that first one uses\n * alpha characters only and used for extracting keywords from abbreviation,\n * while \u201Cfull\u201D notation also supports numbers and dashes\n */\nfunction literal$1(scanner, short) {\n    const start = scanner.pos;\n    if (scanner.eat(isIdentPrefix)) {\n        // SCSS or LESS variable\n        // NB a bit dirty hack: if abbreviation starts with identifier prefix,\n        // consume alpha characters only to allow embedded variables\n        scanner.eatWhile(start ? isKeyword : isLiteral);\n    }\n    else if (scanner.eat(isAlphaWord)) {\n        scanner.eatWhile(short ? isLiteral : isKeyword);\n    }\n    else {\n        // Allow dots only at the beginning of literal\n        scanner.eat(46 /* Dot */);\n        scanner.eatWhile(isLiteral);\n    }\n    if (start !== scanner.pos) {\n        scanner.start = start;\n        return createLiteral(scanner, scanner.start = start);\n    }\n}\nfunction createLiteral(scanner, start = scanner.start, end = scanner.pos) {\n    return {\n        type: 'Literal',\n        value: scanner.substring(start, end),\n        start,\n        end\n    };\n}\n/**\n * Consumes numeric CSS value (number with optional unit) from current stream,\n * if possible\n */\nfunction numberValue(scanner) {\n    const start = scanner.pos;\n    if (consumeNumber(scanner)) {\n        scanner.start = start;\n        const rawValue = scanner.current();\n        // eat unit, which can be a % or alpha word\n        scanner.start = scanner.pos;\n        scanner.eat(37 /* Percent */) || scanner.eatWhile(isAlphaWord);\n        return {\n            type: 'NumberValue',\n            value: Number(rawValue),\n            rawValue,\n            unit: scanner.current(),\n            start,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes quoted string value from given scanner\n */\nfunction stringValue(scanner) {\n    const ch = scanner.peek();\n    const start = scanner.pos;\n    let finished = false;\n    if (isQuote$2(ch)) {\n        scanner.pos++;\n        while (!scanner.eof()) {\n            // Do not throw error on malformed string\n            if (scanner.eat(ch)) {\n                finished = true;\n                break;\n            }\n            else {\n                scanner.pos++;\n            }\n        }\n        scanner.start = start;\n        return {\n            type: 'StringValue',\n            value: scanner.substring(start + 1, scanner.pos - (finished ? 1 : 0)),\n            quote: ch === 39 /* SingleQuote */ ? 'single' : 'double',\n            start,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes a color token from given string\n */\nfunction colorValue(scanner) {\n    // supported color variations:\n    // #abc   \u2192 #aabbccc\n    // #0     \u2192 #000000\n    // #fff.5 \u2192 rgba(255, 255, 255, 0.5)\n    // #t     \u2192 transparent\n    const start = scanner.pos;\n    if (scanner.eat(35 /* Hash */)) {\n        const valueStart = scanner.pos;\n        let color = '';\n        let alpha = '';\n        if (scanner.eatWhile(isHex)) {\n            color = scanner.substring(valueStart, scanner.pos);\n            alpha = colorAlpha(scanner);\n        }\n        else if (scanner.eat(116 /* Transparent */)) {\n            color = '0';\n            alpha = colorAlpha(scanner) || '0';\n        }\n        else {\n            alpha = colorAlpha(scanner);\n        }\n        if (color || alpha || scanner.eof()) {\n            const { r, g, b, a } = parseColor(color, alpha);\n            return {\n                type: 'ColorValue',\n                r, g, b, a,\n                raw: scanner.substring(start + 1, scanner.pos),\n                start,\n                end: scanner.pos\n            };\n        }\n        else {\n            // Consumed # but no actual value: invalid color value, treat it as literal\n            return createLiteral(scanner, start);\n        }\n    }\n    scanner.pos = start;\n}\n/**\n * Consumes alpha value of color: `.1`\n */\nfunction colorAlpha(scanner) {\n    const start = scanner.pos;\n    if (scanner.eat(46 /* Dot */)) {\n        scanner.start = start;\n        if (scanner.eatWhile(isNumber$1)) {\n            return scanner.current();\n        }\n        return '1';\n    }\n    return '';\n}\n/**\n * Consumes white space characters as string literal from given scanner\n */\nfunction whiteSpace(scanner) {\n    const start = scanner.pos;\n    if (scanner.eatWhile(isSpace)) {\n        return {\n            type: 'WhiteSpace',\n            start,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes bracket from given scanner\n */\nfunction bracket(scanner) {\n    const ch = scanner.peek();\n    if (isBracket(ch)) {\n        return {\n            type: 'Bracket',\n            open: ch === 40 /* RoundBracketOpen */,\n            start: scanner.pos++,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Consumes operator from given scanner\n */\nfunction operator(scanner) {\n    const op = operatorType(scanner.peek());\n    if (op) {\n        return {\n            type: 'Operator',\n            operator: op,\n            start: scanner.pos++,\n            end: scanner.pos\n        };\n    }\n}\n/**\n * Eats number value from given stream\n * @return Returns `true` if number was consumed\n */\nfunction consumeNumber(stream) {\n    const start = stream.pos;\n    stream.eat(45 /* Dash */);\n    const afterNegative = stream.pos;\n    const hasDecimal = stream.eatWhile(isNumber$1);\n    const prevPos = stream.pos;\n    if (stream.eat(46 /* Dot */)) {\n        // It\u2019s perfectly valid to have numbers like `1.`, which enforces\n        // value to float unit type\n        const hasFloat = stream.eatWhile(isNumber$1);\n        if (!hasDecimal && !hasFloat) {\n            // Lone dot\n            stream.pos = prevPos;\n        }\n    }\n    // Edge case: consumed dash only: not a number, bail-out\n    if (stream.pos === afterNegative) {\n        stream.pos = start;\n    }\n    return stream.pos !== start;\n}\nfunction isIdentPrefix(code) {\n    return code === 64 /* At */ || code === 36 /* Dollar */;\n}\n/**\n * If given character is an operator, returns it\u2019s type\n */\nfunction operatorType(ch) {\n    return (ch === 43 /* Sibling */ && \"+\" /* Sibling */)\n        || (ch === 33 /* Excl */ && \"!\" /* Important */)\n        || (ch === 44 /* Comma */ && \",\" /* ArgumentDelimiter */)\n        || (ch === 58 /* Colon */ && \":\" /* PropertyDelimiter */)\n        || (ch === 45 /* Dash */ && \"-\" /* ValueDelimiter */)\n        || void 0;\n}\n/**\n * Check if given code is a hex value (/0-9a-f/)\n */\nfunction isHex(code) {\n    return isNumber$1(code) || isAlpha$1(code, 65, 70); // A-F\n}\nfunction isKeyword(code) {\n    return isAlphaNumericWord(code) || code === 45 /* Dash */;\n}\nfunction isBracket(code) {\n    return code === 40 /* RoundBracketOpen */ || code === 41 /* RoundBracketClose */;\n}\nfunction isLiteral(code) {\n    return isAlphaWord(code) || code === 37 /* Percent */ || code === 47 /* Slash */;\n}\n/**\n * Parses given color value from abbreviation into RGBA format\n */\nfunction parseColor(value, alpha) {\n    let r = '0';\n    let g = '0';\n    let b = '0';\n    let a = Number(alpha != null && alpha !== '' ? alpha : 1);\n    if (value === 't') {\n        a = 0;\n    }\n    else {\n        switch (value.length) {\n            case 0:\n                break;\n            case 1:\n                r = g = b = value + value;\n                break;\n            case 2:\n                r = g = b = value;\n                break;\n            case 3:\n                r = value[0] + value[0];\n                g = value[1] + value[1];\n                b = value[2] + value[2];\n                break;\n            default:\n                value += value;\n                r = value.slice(0, 2);\n                g = value.slice(2, 4);\n                b = value.slice(4, 6);\n        }\n    }\n    return {\n        r: parseInt(r, 16),\n        g: parseInt(g, 16),\n        b: parseInt(b, 16),\n        a\n    };\n}\n/**\n * Check if scanner reader must consume dash after given token.\n * Used in cases where user must explicitly separate numeric values\n */\nfunction shouldConsumeDashAfter(token) {\n    return token.type === 'ColorValue' || (token.type === 'NumberValue' && !token.unit);\n}\n/**\n * Merges last adjacent tokens into a single literal.\n * This function is used to overcome edge case when function name was parsed\n * as a list of separate tokens. For example, a `scale3d()` value will be\n * parsed as literal and number tokens (`scale` and `3d`) which is a perfectly\n * valid abbreviation but undesired result. This function will detect last adjacent\n * literal and number values and combine them into single literal\n */\nfunction mergeTokens(scanner, tokens) {\n    let start = 0;\n    let end = 0;\n    while (tokens.length) {\n        const token = last(tokens);\n        if (token.type === 'Literal' || token.type === 'NumberValue') {\n            start = token.start;\n            if (!end) {\n                end = token.end;\n            }\n            tokens.pop();\n        }\n        else {\n            break;\n        }\n    }\n    if (start !== end) {\n        tokens.push(createLiteral(scanner, start, end));\n    }\n}\nfunction last(arr) {\n    return arr[arr.length - 1];\n}\n\nfunction tokenScanner(tokens) {\n    return {\n        tokens,\n        start: 0,\n        pos: 0,\n        size: tokens.length\n    };\n}\nfunction peek$2(scanner) {\n    return scanner.tokens[scanner.pos];\n}\nfunction readable(scanner) {\n    return scanner.pos < scanner.size;\n}\nfunction consume$1(scanner, test) {\n    if (test(peek$2(scanner))) {\n        scanner.pos++;\n        return true;\n    }\n    return false;\n}\nfunction error(scanner, message, token = peek$2(scanner)) {\n    if (token && token.start != null) {\n        message += ` at ${token.start}`;\n    }\n    const err = new Error(message);\n    err['pos'] = token && token.start;\n    return err;\n}\n\nfunction parser(tokens, options = {}) {\n    const scanner = tokenScanner(tokens);\n    const result = [];\n    let property;\n    while (readable(scanner)) {\n        if (property = consumeProperty(scanner, options)) {\n            result.push(property);\n        }\n        else if (!consume$1(scanner, isSiblingOperator)) {\n            throw error(scanner, 'Unexpected token');\n        }\n    }\n    return result;\n}\n/**\n * Consumes single CSS property\n */\nfunction consumeProperty(scanner, options) {\n    let name;\n    let important = false;\n    let valueFragment;\n    const value = [];\n    const token = peek$2(scanner);\n    const valueMode = !!options.value;\n    if (!valueMode && isLiteral$1(token) && !isFunctionStart(scanner)) {\n        scanner.pos++;\n        name = token.value;\n        // Consume any following value delimiter after property name\n        consume$1(scanner, isValueDelimiter);\n    }\n    // Skip whitespace right after property name, if any\n    if (valueMode) {\n        consume$1(scanner, isWhiteSpace$1);\n    }\n    while (readable(scanner)) {\n        if (consume$1(scanner, isImportant)) {\n            important = true;\n        }\n        else if (valueFragment = consumeValue(scanner, valueMode)) {\n            value.push(valueFragment);\n        }\n        else if (!consume$1(scanner, isFragmentDelimiter)) {\n            break;\n        }\n    }\n    if (name || value.length || important) {\n        return { name, value, important };\n    }\n}\n/**\n * Consumes single value fragment, e.g. all value tokens before comma\n */\nfunction consumeValue(scanner, inArgument) {\n    const result = [];\n    let token;\n    let args;\n    while (readable(scanner)) {\n        token = peek$2(scanner);\n        if (isValue(token)) {\n            scanner.pos++;\n            if (isLiteral$1(token) && (args = consumeArguments(scanner))) {\n                result.push({\n                    type: 'FunctionCall',\n                    name: token.value,\n                    arguments: args\n                });\n            }\n            else {\n                result.push(token);\n            }\n        }\n        else if (isValueDelimiter(token) || (inArgument && isWhiteSpace$1(token))) {\n            scanner.pos++;\n        }\n        else {\n            break;\n        }\n    }\n    return result.length\n        ? { type: 'CSSValue', value: result }\n        : void 0;\n}\nfunction consumeArguments(scanner) {\n    const start = scanner.pos;\n    if (consume$1(scanner, isOpenBracket$1)) {\n        const args = [];\n        let value;\n        while (readable(scanner) && !consume$1(scanner, isCloseBracket$1)) {\n            if (value = consumeValue(scanner, true)) {\n                args.push(value);\n            }\n            else if (!consume$1(scanner, isWhiteSpace$1) && !consume$1(scanner, isArgumentDelimiter)) {\n                throw error(scanner, 'Unexpected token');\n            }\n        }\n        scanner.start = start;\n        return args;\n    }\n}\nfunction isLiteral$1(token) {\n    return token && token.type === 'Literal';\n}\nfunction isBracket$1(token, open) {\n    return token && token.type === 'Bracket' && (open == null || token.open === open);\n}\nfunction isOpenBracket$1(token) {\n    return isBracket$1(token, true);\n}\nfunction isCloseBracket$1(token) {\n    return isBracket$1(token, false);\n}\nfunction isWhiteSpace$1(token) {\n    return token && token.type === 'WhiteSpace';\n}\nfunction isOperator(token, operator) {\n    return token && token.type === 'Operator' && (!operator || token.operator === operator);\n}\nfunction isSiblingOperator(token) {\n    return isOperator(token, \"+\" /* Sibling */);\n}\nfunction isArgumentDelimiter(token) {\n    return isOperator(token, \",\" /* ArgumentDelimiter */);\n}\nfunction isFragmentDelimiter(token) {\n    return isArgumentDelimiter(token);\n}\nfunction isImportant(token) {\n    return isOperator(token, \"!\" /* Important */);\n}\nfunction isValue(token) {\n    return token.type === 'StringValue'\n        || token.type === 'ColorValue'\n        || token.type === 'NumberValue'\n        || token.type === 'Literal'\n        || token.type === 'Field';\n}\nfunction isValueDelimiter(token) {\n    return isOperator(token, \":\" /* PropertyDelimiter */)\n        || isOperator(token, \"-\" /* ValueDelimiter */);\n}\nfunction isFunctionStart(scanner) {\n    const t1 = scanner.tokens[scanner.pos];\n    const t2 = scanner.tokens[scanner.pos + 1];\n    return t1 && t2 && isLiteral$1(t1) && t2.type === 'Bracket';\n}\n\n/**\n * Parses given abbreviation into property set\n */\nfunction parse$2(abbr, options) {\n    try {\n        const tokens = typeof abbr === 'string' ? tokenize(abbr, options && options.value) : abbr;\n        return parser(tokens, options);\n    }\n    catch (err) {\n        if (err instanceof ScannerError && typeof abbr === 'string') {\n            err.message += `\\n${abbr}\\n${'-'.repeat(err.pos)}^`;\n        }\n        throw err;\n    }\n}\n\n/**\n * Merges attributes in current node: de-duplicates attributes with the same name\n * and merges class names\n */\nfunction mergeAttributes(node, config) {\n    if (!node.attributes) {\n        return;\n    }\n    const attributes = [];\n    const lookup = {};\n    for (const attr of node.attributes) {\n        if (attr.name) {\n            const attrName = attr.name;\n            if (attrName in lookup) {\n                const prev = lookup[attrName];\n                if (attrName === 'class') {\n                    prev.value = mergeValue(prev.value, attr.value, ' ');\n                }\n                else {\n                    mergeDeclarations(prev, attr, config);\n                }\n            }\n            else {\n                // Create new attribute instance so we can safely modify it later\n                attributes.push(lookup[attrName] = Object.assign({}, attr));\n            }\n        }\n        else {\n            attributes.push(attr);\n        }\n    }\n    node.attributes = attributes;\n}\n/**\n * Merges two token lists into single list. Adjacent strings are merged together\n */\nfunction mergeValue(prev, next, glue) {\n    if (prev && next) {\n        if (prev.length && glue) {\n            append(prev, glue);\n        }\n        for (const t of next) {\n            append(prev, t);\n        }\n        return prev;\n    }\n    const result = prev || next;\n    return result && result.slice();\n}\n/**\n * Merges data from `src` attribute into `dest` and returns it\n */\nfunction mergeDeclarations(dest, src, config) {\n    dest.name = src.name;\n    if (!config.options['output.reverseAttributes']) {\n        dest.value = src.value;\n    }\n    // Keep high-priority properties\n    if (!dest.implied) {\n        dest.implied = src.implied;\n    }\n    if (!dest.boolean) {\n        dest.boolean = src.boolean;\n    }\n    if (dest.valueType !== 'expression') {\n        dest.valueType = src.valueType;\n    }\n    return dest;\n}\nfunction append(tokens, value) {\n    const lastIx = tokens.length - 1;\n    if (typeof tokens[lastIx] === 'string' && typeof value === 'string') {\n        tokens[lastIx] += value;\n    }\n    else {\n        tokens.push(value);\n    }\n}\n\n/**\n * Walks over each child node of given markup abbreviation AST node (not including\n * given one) and invokes `fn` on each node.\n * The `fn` callback accepts context node, list of ancestor nodes and optional\n * state object\n */\nfunction walk(node, fn, state) {\n    const ancestors = [node];\n    const callback = (ctx) => {\n        fn(ctx, ancestors, state);\n        ancestors.push(ctx);\n        ctx.children.forEach(callback);\n        ancestors.pop();\n    };\n    node.children.forEach(callback);\n}\n/**\n * Finds node which is the deepest for in current node or node itself.\n */\nfunction findDeepest(node) {\n    let parent;\n    while (node.children.length) {\n        parent = node;\n        node = node.children[node.children.length - 1];\n    }\n    return { parent, node };\n}\nfunction isNode(node) {\n    return node.type === 'AbbreviationNode';\n}\n\n/**\n * Finds matching snippet from `registry` and resolves it into a parsed abbreviation.\n * Resolved node is then updated or replaced with matched abbreviation tree.\n *\n * A HTML registry basically contains aliases to another Emmet abbreviations,\n * e.g. a predefined set of name, attributes and so on, possibly a complex\n * abbreviation with multiple elements. So we have to get snippet, parse it\n * and recursively resolve it.\n */\nfunction resolveSnippets(abbr, config) {\n    const stack = [];\n    const reversed = config.options['output.reverseAttributes'];\n    const resolve = (child) => {\n        const snippet = child.name && config.snippets[child.name];\n        // A snippet in stack means circular reference.\n        // It can be either a user error or a perfectly valid snippet like\n        // \"img\": \"img[src alt]/\", e.g. an element with predefined shape.\n        // In any case, simply stop parsing and keep element as is\n        if (!snippet || stack.includes(snippet)) {\n            return null;\n        }\n        const snippetAbbr = parseAbbreviation(snippet, config);\n        stack.push(snippet);\n        walkResolve(snippetAbbr, resolve);\n        stack.pop();\n        // Add attributes from current node into every top-level node of parsed abbreviation\n        for (const topNode of snippetAbbr.children) {\n            if (child.attributes) {\n                const from = topNode.attributes || [];\n                const to = child.attributes || [];\n                topNode.attributes = reversed ? to.concat(from) : from.concat(to);\n            }\n            mergeNodes(child, topNode);\n        }\n        return snippetAbbr;\n    };\n    walkResolve(abbr, resolve);\n    return abbr;\n}\nfunction walkResolve(node, resolve, config) {\n    let children = [];\n    for (const child of node.children) {\n        const resolved = resolve(child);\n        if (resolved) {\n            children = children.concat(resolved.children);\n            const deepest = findDeepest(resolved);\n            if (isNode(deepest.node)) {\n                deepest.node.children = deepest.node.children.concat(walkResolve(child, resolve));\n            }\n        }\n        else {\n            children.push(child);\n            child.children = walkResolve(child, resolve);\n        }\n    }\n    return node.children = children;\n}\n/**\n * Adds data from first node into second node\n */\nfunction mergeNodes(from, to) {\n    if (from.selfClosing) {\n        to.selfClosing = true;\n    }\n    if (from.value != null) {\n        to.value = from.value;\n    }\n    if (from.repeat) {\n        to.repeat = from.repeat;\n    }\n}\n\nfunction createOutputStream(options, level = 0) {\n    return {\n        options,\n        value: '',\n        level,\n        offset: 0,\n        line: 0,\n        column: 0\n    };\n}\n/**\n * Pushes plain string into output stream without newline processing\n */\nfunction push(stream, text) {\n    const processText = stream.options['output.text'];\n    _push(stream, processText(text, stream.offset, stream.line, stream.column));\n}\n/**\n * Pushes given string with possible newline formatting into output\n */\nfunction pushString(stream, value) {\n    // If given value contains newlines, we should push content line-by-line and\n    // use `pushNewline()` to maintain proper line/column state\n    const lines = splitByLines(value);\n    for (let i = 0, il = lines.length - 1; i <= il; i++) {\n        push(stream, lines[i]);\n        if (i !== il) {\n            pushNewline(stream, true);\n        }\n    }\n}\n/**\n * Pushes new line into given output stream\n */\nfunction pushNewline(stream, indent) {\n    const baseIndent = stream.options['output.baseIndent'];\n    const newline = stream.options['output.newline'];\n    push(stream, newline + baseIndent);\n    stream.line++;\n    stream.column = baseIndent.length;\n    if (indent) {\n        pushIndent(stream, indent === true ? stream.level : indent);\n    }\n}\n/**\n * Adds indentation of `size` to current output stream\n */\nfunction pushIndent(stream, size = stream.level) {\n    const indent = stream.options['output.indent'];\n    push(stream, indent.repeat(Math.max(size, 0)));\n}\n/**\n * Pushes field/tabstop into output stream\n */\nfunction pushField(stream, index, placeholder) {\n    const field = stream.options['output.field'];\n    // NB: use `_push` instead of `push` to skip text processing\n    _push(stream, field(index, placeholder, stream.offset, stream.line, stream.column));\n}\n/**\n * Returns given tag name formatted according to given config\n */\nfunction tagName(name, config) {\n    return strCase(name, config.options['output.tagCase']);\n}\n/**\n * Returns given attribute name formatted according to given config\n */\nfunction attrName(name, config) {\n    return strCase(name, config.options['output.attributeCase']);\n}\n/**\n * Returns character for quoting value of given attribute\n */\nfunction attrQuote(attr, config, isOpen) {\n    if (attr.valueType === 'expression') {\n        return isOpen ? '{' : '}';\n    }\n    return config.options['output.attributeQuotes'] === 'single' ? '\\'' : '\"';\n}\n/**\n * Check if given attribute is boolean\n */\nfunction isBooleanAttribute(attr, config) {\n    return attr.boolean\n        || config.options['output.booleanAttributes'].includes((attr.name || '').toLowerCase());\n}\n/**\n * Returns a token for self-closing tag, depending on current options\n */\nfunction selfClose(config) {\n    switch (config.options['output.selfClosingStyle']) {\n        case 'xhtml': return ' /';\n        case 'xml': return '/';\n        default: return '';\n    }\n}\n/**\n * Check if given tag name belongs to inline-level element\n * @param node Parsed node or tag name\n */\nfunction isInline(node, config) {\n    if (typeof node === 'string') {\n        return config.options.inlineElements.includes(node.toLowerCase());\n    }\n    // inline node is a node either with inline-level name or text-only node\n    return node.name ? isInline(node.name, config) : Boolean(node.value && !node.attributes);\n}\n/**\n * Splits given text by lines\n */\nfunction splitByLines(text) {\n    return text.split(/\\r\\n|\\r|\\n/g);\n}\n/**\n * Pushes raw string into output stream without any processing\n */\nfunction _push(stream, text) {\n    stream.value += text;\n    stream.offset += text.length;\n    stream.column += text.length;\n}\nfunction strCase(str, type) {\n    if (type) {\n        return type === 'upper' ? str.toUpperCase() : str.toLowerCase();\n    }\n    return str;\n}\n\nconst elementMap = {\n    p: 'span',\n    ul: 'li',\n    ol: 'li',\n    table: 'tr',\n    tr: 'td',\n    tbody: 'tr',\n    thead: 'tr',\n    tfoot: 'tr',\n    colgroup: 'col',\n    select: 'option',\n    optgroup: 'option',\n    audio: 'source',\n    video: 'source',\n    object: 'param',\n    map: 'area'\n};\nfunction implicitTag(node, ancestors, config) {\n    if (!node.name && node.attributes) {\n        resolveImplicitTag(node, ancestors, config);\n    }\n}\nfunction resolveImplicitTag(node, ancestors, config) {\n    const parent = getParentElement(ancestors);\n    const contextName = config.context ? config.context.name : '';\n    const parentName = lowercase(parent ? parent.name : contextName);\n    node.name = elementMap[parentName]\n        || (isInline(parentName, config) ? 'span' : 'div');\n}\nfunction lowercase(str) {\n    return (str || '').toLowerCase();\n}\n/**\n * Returns closest element node from given ancestors list\n */\nfunction getParentElement(ancestors) {\n    for (let i = ancestors.length - 1; i >= 0; i--) {\n        const elem = ancestors[i];\n        if (isNode(elem)) {\n            return elem;\n        }\n    }\n}\n\nvar latin = {\n\t\"common\": [\"lorem\", \"ipsum\", \"dolor\", \"sit\", \"amet\", \"consectetur\", \"adipisicing\", \"elit\"],\n\t\"words\": [\"exercitationem\", \"perferendis\", \"perspiciatis\", \"laborum\", \"eveniet\",\n\t\t\"sunt\", \"iure\", \"nam\", \"nobis\", \"eum\", \"cum\", \"officiis\", \"excepturi\",\n\t\t\"odio\", \"consectetur\", \"quasi\", \"aut\", \"quisquam\", \"vel\", \"eligendi\",\n\t\t\"itaque\", \"non\", \"odit\", \"tempore\", \"quaerat\", \"dignissimos\",\n\t\t\"facilis\", \"neque\", \"nihil\", \"expedita\", \"vitae\", \"vero\", \"ipsum\",\n\t\t\"nisi\", \"animi\", \"cumque\", \"pariatur\", \"velit\", \"modi\", \"natus\",\n\t\t\"iusto\", \"eaque\", \"sequi\", \"illo\", \"sed\", \"ex\", \"et\", \"voluptatibus\",\n\t\t\"tempora\", \"veritatis\", \"ratione\", \"assumenda\", \"incidunt\", \"nostrum\",\n\t\t\"placeat\", \"aliquid\", \"fuga\", \"provident\", \"praesentium\", \"rem\",\n\t\t\"necessitatibus\", \"suscipit\", \"adipisci\", \"quidem\", \"possimus\",\n\t\t\"voluptas\", \"debitis\", \"sint\", \"accusantium\", \"unde\", \"sapiente\",\n\t\t\"voluptate\", \"qui\", \"aspernatur\", \"laudantium\", \"soluta\", \"amet\",\n\t\t\"quo\", \"aliquam\", \"saepe\", \"culpa\", \"libero\", \"ipsa\", \"dicta\",\n\t\t\"reiciendis\", \"nesciunt\", \"doloribus\", \"autem\", \"impedit\", \"minima\",\n\t\t\"maiores\", \"repudiandae\", \"ipsam\", \"obcaecati\", \"ullam\", \"enim\",\n\t\t\"totam\", \"delectus\", \"ducimus\", \"quis\", \"voluptates\", \"dolores\",\n\t\t\"molestiae\", \"harum\", \"dolorem\", \"quia\", \"voluptatem\", \"molestias\",\n\t\t\"magni\", \"distinctio\", \"omnis\", \"illum\", \"dolorum\", \"voluptatum\", \"ea\",\n\t\t\"quas\", \"quam\", \"corporis\", \"quae\", \"blanditiis\", \"atque\", \"deserunt\",\n\t\t\"laboriosam\", \"earum\", \"consequuntur\", \"hic\", \"cupiditate\",\n\t\t\"quibusdam\", \"accusamus\", \"ut\", \"rerum\", \"error\", \"minus\", \"eius\",\n\t\t\"ab\", \"ad\", \"nemo\", \"fugit\", \"officia\", \"at\", \"in\", \"id\", \"quos\",\n\t\t\"reprehenderit\", \"numquam\", \"iste\", \"fugiat\", \"sit\", \"inventore\",\n\t\t\"beatae\", \"repellendus\", \"magnam\", \"recusandae\", \"quod\", \"explicabo\",\n\t\t\"doloremque\", \"aperiam\", \"consequatur\", \"asperiores\", \"commodi\",\n\t\t\"optio\", \"dolor\", \"labore\", \"temporibus\", \"repellat\", \"veniam\",\n\t\t\"architecto\", \"est\", \"esse\", \"mollitia\", \"nulla\", \"a\", \"similique\",\n\t\t\"eos\", \"alias\", \"dolore\", \"tenetur\", \"deleniti\", \"porro\", \"facere\",\n\t\t\"maxime\", \"corrupti\"]\n};\n\nvar ru = {\n\t\"common\": [\"\u0434\u0430\u043B\u0435\u043A\u043E-\u0434\u0430\u043B\u0435\u043A\u043E\", \"\u0437\u0430\", \"\u0441\u043B\u043E\u0432\u0435\u0441\u043D\u044B\u043C\u0438\", \"\u0433\u043E\u0440\u0430\u043C\u0438\", \"\u0432 \u0441\u0442\u0440\u0430\u043D\u0435\", \"\u0433\u043B\u0430\u0441\u043D\u044B\u0445\", \"\u0438 \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u044B\u0445\", \"\u0436\u0438\u0432\u0443\u0442\", \"\u0440\u044B\u0431\u043D\u044B\u0435\", \"\u0442\u0435\u043A\u0441\u0442\u044B\"],\n\t\"words\": [\"\u0432\u0434\u0430\u043B\u0438\", \"\u043E\u0442 \u0432\u0441\u0435\u0445\", \"\u043E\u043D\u0438\", \"\u0431\u0443\u043A\u0432\u0435\u043D\u043D\u044B\u0445\", \"\u0434\u043E\u043C\u0430\u0445\", \"\u043D\u0430 \u0431\u0435\u0440\u0435\u0433\u0443\", \"\u0441\u0435\u043C\u0430\u043D\u0442\u0438\u043A\u0430\",\n\t\t\"\u0431\u043E\u043B\u044C\u0448\u043E\u0433\u043E\", \"\u044F\u0437\u044B\u043A\u043E\u0432\u043E\u0433\u043E\", \"\u043E\u043A\u0435\u0430\u043D\u0430\", \"\u043C\u0430\u043B\u0435\u043D\u044C\u043A\u0438\u0439\", \"\u0440\u0443\u0447\u0435\u0435\u043A\", \"\u0434\u0430\u043B\u044C\",\n\t\t\"\u0436\u0443\u0440\u0447\u0438\u0442\", \"\u043F\u043E \u0432\u0441\u0435\u0439\", \"\u043E\u0431\u0435\u0441\u043F\u0435\u0447\u0438\u0432\u0430\u0435\u0442\", \"\u0435\u0435\",\"\u0432\u0441\u0435\u043C\u0438\", \"\u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u043C\u0438\",\n\t\t\"\u043F\u0440\u0430\u0432\u0438\u043B\u0430\u043C\u0438\", \"\u044D\u0442\u0430\", \"\u043F\u0430\u0440\u0430\u0434\u0438\u0433\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F\", \"\u0441\u0442\u0440\u0430\u043D\u0430\", \"\u043A\u043E\u0442\u043E\u0440\u043E\u0439\", \"\u0436\u0430\u0440\u0435\u043D\u043D\u044B\u0435\",\n\t\t\"\u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F\", \"\u0437\u0430\u043B\u0435\u0442\u0430\u044E\u0442\", \"\u043F\u0440\u044F\u043C\u043E\", \"\u0440\u043E\u0442\", \"\u0434\u0430\u0436\u0435\", \"\u0432\u0441\u0435\u043C\u043E\u0433\u0443\u0449\u0430\u044F\",\n\t\t\"\u043F\u0443\u043D\u043A\u0442\u0443\u0430\u0446\u0438\u044F\", \"\u043D\u0435\", \"\u0438\u043C\u0435\u0435\u0442\", \"\u0432\u043B\u0430\u0441\u0442\u0438\", \"\u043D\u0430\u0434\", \"\u0440\u044B\u0431\u043D\u044B\u043C\u0438\", \"\u0442\u0435\u043A\u0441\u0442\u0430\u043C\u0438\",\n\t\t\"\u0432\u0435\u0434\u0443\u0449\u0438\u043C\u0438\", \"\u0431\u0435\u0437\u043E\u0440\u0444\u043E\u0433\u0440\u0430\u0444\u0438\u0447\u043D\u044B\u0439\", \"\u043E\u0431\u0440\u0430\u0437\", \"\u0436\u0438\u0437\u043D\u0438\", \"\u043E\u0434\u043D\u0430\u0436\u0434\u044B\", \"\u043E\u0434\u043D\u0430\",\n\t\t\"\u043C\u0430\u043B\u0435\u043D\u044C\u043A\u0430\u044F\", \"\u0441\u0442\u0440\u043E\u0447\u043A\u0430\",\"\u0440\u044B\u0431\u043D\u043E\u0433\u043E\", \"\u0442\u0435\u043A\u0441\u0442\u0430\", \"\u0438\u043C\u0435\u043D\u0438\", \"lorem\", \"ipsum\",\n\t\t\"\u0440\u0435\u0448\u0438\u043B\u0430\", \"\u0432\u044B\u0439\u0442\u0438\", \"\u0431\u043E\u043B\u044C\u0448\u043E\u0439\", \"\u043C\u0438\u0440\", \"\u0433\u0440\u0430\u043C\u043C\u0430\u0442\u0438\u043A\u0438\", \"\u0432\u0435\u043B\u0438\u043A\u0438\u0439\", \"\u043E\u043A\u0441\u043C\u043E\u043A\u0441\",\n\t\t\"\u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0430\u043B\", \"\u043E\", \"\u0437\u043B\u044B\u0445\", \"\u0437\u0430\u043F\u044F\u0442\u044B\u0445\", \"\u0434\u0438\u043A\u0438\u0445\", \"\u0437\u043D\u0430\u043A\u0430\u0445\", \"\u0432\u043E\u043F\u0440\u043E\u0441\u0430\",\n\t\t\"\u043A\u043E\u0432\u0430\u0440\u043D\u044B\u0445\", \"\u0442\u043E\u0447\u043A\u0430\u0445\", \"\u0437\u0430\u043F\u044F\u0442\u043E\u0439\", \"\u043D\u043E\", \"\u0442\u0435\u043A\u0441\u0442\", \"\u0434\u0430\u043B\", \"\u0441\u0431\u0438\u0442\u044C\",\n\t\t\"\u0441\u0435\u0431\u044F\", \"\u0442\u043E\u043B\u043A\u0443\", \"\u043E\u043D\", \"\u0441\u043E\u0431\u0440\u0430\u043B\", \"\u0441\u0435\u043C\u044C\", \"\u0441\u0432\u043E\u0438\u0445\", \"\u0437\u0430\u0433\u043B\u0430\u0432\u043D\u044B\u0445\", \"\u0431\u0443\u043A\u0432\",\n\t\t\"\u043F\u043E\u0434\u043F\u043E\u044F\u0441\u0430\u043B\", \"\u0438\u043D\u0438\u0446\u0438\u0430\u043B\", \"\u0437\u0430\", \"\u043F\u043E\u044F\u0441\", \"\u043F\u0443\u0441\u0442\u0438\u043B\u0441\u044F\", \"\u0434\u043E\u0440\u043E\u0433\u0443\",\n\t\t\"\u0432\u0437\u043E\u0431\u0440\u0430\u0432\u0448\u0438\u0441\u044C\", \"\u043F\u0435\u0440\u0432\u0443\u044E\", \"\u0432\u0435\u0440\u0448\u0438\u043D\u0443\", \"\u043A\u0443\u0440\u0441\u0438\u0432\u043D\u044B\u0445\", \"\u0433\u043E\u0440\", \"\u0431\u0440\u043E\u0441\u0438\u043B\",\n\t\t\"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439\", \"\u0432\u0437\u0433\u043B\u044F\u0434\", \"\u043D\u0430\u0437\u0430\u0434\", \"\u0441\u0438\u043B\u0443\u044D\u0442\", \"\u0441\u0432\u043E\u0435\u0433\u043E\", \"\u0440\u043E\u0434\u043D\u043E\u0433\u043E\", \"\u0433\u043E\u0440\u043E\u0434\u0430\",\n\t\t\"\u0431\u0443\u043A\u0432\u043E\u0433\u0440\u0430\u0434\", \"\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A\", \"\u0434\u0435\u0440\u0435\u0432\u043D\u0438\", \"\u0430\u043B\u0444\u0430\u0432\u0438\u0442\", \"\u043F\u043E\u0434\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A\", \"\u0441\u0432\u043E\u0435\u0433\u043E\",\n\t\t\"\u043F\u0435\u0440\u0435\u0443\u043B\u043A\u0430\", \"\u0433\u0440\u0443\u0441\u0442\u043D\u044B\u0439\", \"\u0440\u0435\u0442\u043E\u0440\u0438\u0447\u0435\u0441\u043A\u0438\u0439\", \"\u0432\u043E\u043F\u0440\u043E\u0441\", \"\u0441\u043A\u0430\u0442\u0438\u043B\u0441\u044F\", \"\u0435\u0433\u043E\",\n\t\t\"\u0449\u0435\u043A\u0435\", \"\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u043B\", \"\u0441\u0432\u043E\u0439\", \"\u043F\u0443\u0442\u044C\", \"\u0434\u043E\u0440\u043E\u0433\u0435\", \"\u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043B\", \"\u0440\u0443\u043A\u043E\u043F\u0438\u0441\u044C\",\n\t\t\"\u043E\u043D\u0430\", \"\u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0434\u0438\u043B\u0430\",  \"\u043C\u043E\u0435\u0439\", \"\u0432\u0441\u0435\", \"\u043F\u0435\u0440\u0435\u043F\u0438\u0441\u044B\u0432\u0430\u0435\u0442\u0441\u044F\", \"\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E\",\n\t\t\"\u0440\u0430\u0437\", \"\u0435\u0434\u0438\u043D\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0435\", \"\u0447\u0442\u043E\", \"\u043C\u0435\u043D\u044F\", \"\u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C\", \"\u044D\u0442\u043E\", \"\u043F\u0440\u0438\u0441\u0442\u0430\u0432\u043A\u0430\",\n\t\t\"\u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0439\u0441\u044F\", \"\u0442\u044B\", \"\u043B\u0443\u0447\u0448\u0435\", \"\u0441\u0432\u043E\u044E\", \"\u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u0443\u044E\", \"\u0441\u0442\u0440\u0430\u043D\u0443\", \"\u043F\u043E\u0441\u043B\u0443\u0448\u0430\u0432\u0448\u0438\u0441\u044C\",\n\t\t\"\u0440\u0443\u043A\u043E\u043F\u0438\u0441\u0438\", \"\u043D\u0430\u0448\", \"\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u043B\", \"\u0441\u0432\u043E\u0439\", \"\u043F\u0443\u0442\u044C\", \"\u0432\u0441\u043A\u043E\u0440\u0435\", \"\u0435\u043C\u0443\",\n\t\t\"\u043F\u043E\u0432\u0441\u0442\u0440\u0435\u0447\u0430\u043B\u0441\u044F\", \"\u043A\u043E\u0432\u0430\u0440\u043D\u044B\u0439\", \"\u0441\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043B\u044C\", \"\u0440\u0435\u043A\u043B\u0430\u043C\u043D\u044B\u0445\", \"\u0442\u0435\u043A\u0441\u0442\u043E\u0432\",\n\t\t\"\u043D\u0430\u043F\u043E\u0438\u0432\u0448\u0438\u0439\", \"\u044F\u0437\u044B\u043A\u043E\u043C\", \"\u0440\u0435\u0447\u044C\u044E\", \"\u0437\u0430\u043C\u0430\u043D\u0438\u0432\u0448\u0438\u0439\", \"\u0441\u0432\u043E\u0435\", \"\u0430\u0433\u0435\u043D\u0442\u0441\u0442\u0432\u043E\",\n\t\t\"\u043A\u043E\u0442\u043E\u0440\u043E\u0435\", \"\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B\u043E\", \"\u0441\u043D\u043E\u0432\u0430\", \"\u0441\u043D\u043E\u0432\u0430\", \"\u0441\u0432\u043E\u0438\u0445\", \"\u043F\u0440\u043E\u0435\u043A\u0442\u0430\u0445\",\n\t\t\"\u0435\u0441\u043B\u0438\", \"\u043F\u0435\u0440\u0435\u043F\u0438\u0441\u0430\u043B\u0438\", \"\u0442\u043E\", \"\u0436\u0438\u0432\u0435\u0442\", \"\u0442\u0430\u043C\", \"\u0434\u043E\", \"\u0441\u0438\u0445\", \"\u043F\u043E\u0440\"]\n};\n\nvar sp = {\n\t\"common\": [\"mujer\", \"uno\", \"dolor\", \"m\u00E1s\", \"de\", \"poder\", \"mismo\", \"si\"],\n\t\"words\": [\"ejercicio\", \"preferencia\", \"perspicacia\", \"laboral\", \"pa\u00F1o\",\n\t\t\"suntuoso\", \"molde\", \"namibia\", \"planeador\", \"mirar\", \"dem\u00E1s\", \"oficinista\", \"excepci\u00F3n\",\n\t\t\"odio\", \"consecuencia\", \"casi\", \"auto\", \"chicharra\", \"velo\", \"elixir\",\n\t\t\"ataque\", \"no\", \"odio\", \"temporal\", \"cu\u00F3rum\", \"dign\u00EDsimo\",\n\t\t\"facilismo\", \"letra\", \"nihilista\", \"expedici\u00F3n\", \"alma\", \"alveolar\", \"aparte\",\n\t\t\"le\u00F3n\", \"animal\", \"como\", \"paria\", \"belleza\", \"modo\", \"natividad\",\n\t\t\"justo\", \"ataque\", \"s\u00E9quito\", \"pillo\", \"sed\", \"ex\", \"y\", \"voluminoso\",\n\t\t\"temporalidad\", \"verdades\", \"racional\", \"asunci\u00F3n\", \"incidente\", \"marejada\",\n\t\t\"placenta\", \"amanecer\", \"fuga\", \"previsor\", \"presentaci\u00F3n\", \"lejos\",\n\t\t\"necesariamente\", \"sospechoso\", \"adiposidad\", \"quind\u00EDo\", \"p\u00F3cima\",\n\t\t\"voluble\", \"d\u00E9bito\", \"sinti\u00F3\", \"accesorio\", \"falda\", \"sapiencia\",\n\t\t\"volutas\", \"queso\", \"permacultura\", \"laudo\", \"soluciones\", \"entero\",\n\t\t\"pan\", \"litro\", \"tonelada\", \"culpa\", \"libertario\", \"mosca\", \"dictado\",\n\t\t\"reincidente\", \"nascimiento\", \"dolor\", \"escolar\", \"impedimento\", \"m\u00EDnima\",\n\t\t\"mayores\", \"repugnante\", \"dulce\", \"obcecado\", \"monta\u00F1a\", \"enigma\",\n\t\t\"total\", \"delet\u00E9reo\", \"d\u00E9cima\", \"c\u00E1bala\", \"fotograf\u00EDa\", \"dolores\",\n\t\t\"molesto\", \"olvido\", \"paciencia\", \"resiliencia\", \"voluntad\", \"molestias\",\n\t\t\"magn\u00EDfico\", \"distinci\u00F3n\", \"ovni\", \"marejada\", \"cerro\", \"torre\", \"y\",\n\t\t\"abogada\", \"manantial\", \"corporal\", \"agua\", \"crep\u00FAsculo\", \"ataque\", \"desierto\",\n\t\t\"laboriosamente\", \"angustia\", \"afortunado\", \"alma\", \"encefalograma\",\n\t\t\"materialidad\", \"cosas\", \"o\", \"renuncia\", \"error\", \"menos\", \"conejo\",\n\t\t\"abad\u00EDa\", \"analfabeto\", \"remo\", \"fugacidad\", \"oficio\", \"en\", \"alm\u00E1cigo\", \"vos\", \"pan\",\n\t\t\"represi\u00F3n\", \"n\u00FAmeros\", \"triste\", \"refugiado\", \"trote\", \"inventor\",\n\t\t\"corchea\", \"repelente\", \"magma\", \"recusado\", \"patr\u00F3n\", \"expl\u00EDcito\",\n\t\t\"paloma\", \"s\u00EDndrome\", \"inmune\", \"autoinmune\", \"comodidad\",\n\t\t\"ley\", \"vietnamita\", \"demonio\", \"tasmania\", \"repeler\", \"ap\u00E9ndice\",\n\t\t\"arquitecto\", \"columna\", \"yugo\", \"computador\", \"mula\", \"a\", \"prop\u00F3sito\",\n\t\t\"fantas\u00EDa\", \"alias\", \"rayo\", \"tenedor\", \"deleznable\", \"ventana\", \"cara\",\n\t\t\"anemia\", \"corrupto\"]\n};\n\nconst vocabularies = { ru, sp, latin };\nconst reLorem = /^lorem([a-z]*)(\\d*)(-\\d*)?$/i;\nfunction lorem(node, ancestors, config) {\n    let m;\n    if (node.name && (m = node.name.match(reLorem))) {\n        const db = vocabularies[m[1]] || vocabularies.latin;\n        const minWordCount = m[2] ? Math.max(1, Number(m[2])) : 30;\n        const maxWordCount = m[3] ? Math.max(minWordCount, Number(m[3].slice(1))) : minWordCount;\n        const wordCount = rand(minWordCount, maxWordCount);\n        const repeat = node.repeat || findRepeater(ancestors);\n        node.name = node.attributes = void 0;\n        node.value = [paragraph(db, wordCount, !repeat || repeat.value === 0)];\n        if (node.repeat && ancestors.length > 1) {\n            resolveImplicitTag(node, ancestors, config);\n        }\n    }\n}\n/**\n * Returns random integer between <code>from</code> and <code>to</code> values\n */\nfunction rand(from, to) {\n    return Math.floor(Math.random() * (to - from) + from);\n}\nfunction sample(arr, count) {\n    const len = arr.length;\n    const iterations = Math.min(len, count);\n    const result = [];\n    while (result.length < iterations) {\n        const str = arr[rand(0, len)];\n        if (!result.includes(str)) {\n            result.push(str);\n        }\n    }\n    return result;\n}\nfunction choice(val) {\n    return val[rand(0, val.length - 1)];\n}\nfunction sentence(words, end) {\n    if (words.length) {\n        words = [capitalize(words[0])].concat(words.slice(1));\n    }\n    return words.join(' ') + (end || choice('?!...')); // more dots than question marks\n}\nfunction capitalize(word) {\n    return word[0].toUpperCase() + word.slice(1);\n}\n/**\n * Insert commas at randomly selected words. This function modifies values\n * inside `words` array\n */\nfunction insertCommas(words) {\n    if (words.length < 2) {\n        return words;\n    }\n    words = words.slice();\n    const len = words.length;\n    const hasComma = /,$/;\n    let totalCommas = 0;\n    if (len > 3 && len <= 6) {\n        totalCommas = rand(0, 1);\n    }\n    else if (len > 6 && len <= 12) {\n        totalCommas = rand(0, 2);\n    }\n    else {\n        totalCommas = rand(1, 4);\n    }\n    for (let i = 0, pos; i < totalCommas; i++) {\n        pos = rand(0, len - 2);\n        if (!hasComma.test(words[pos])) {\n            words[pos] += ',';\n        }\n    }\n    return words;\n}\n/**\n * Generate a paragraph of \"Lorem ipsum\" text\n * @param dict Words dictionary\n * @param wordCount Words count in paragraph\n * @param startWithCommon Should paragraph start with common \"lorem ipsum\" sentence.\n */\nfunction paragraph(dict, wordCount, startWithCommon) {\n    const result = [];\n    let totalWords = 0;\n    let words;\n    if (startWithCommon && dict.common) {\n        words = dict.common.slice(0, wordCount);\n        totalWords += words.length;\n        result.push(sentence(insertCommas(words), '.'));\n    }\n    while (totalWords < wordCount) {\n        words = sample(dict.words, Math.min(rand(2, 30), wordCount - totalWords));\n        totalWords += words.length;\n        result.push(sentence(insertCommas(words)));\n    }\n    return result.join(' ');\n}\nfunction findRepeater(ancestors) {\n    for (let i = ancestors.length - 1; i >= 0; i--) {\n        const element = ancestors[i];\n        if (element.type === 'AbbreviationNode' && element.repeat) {\n            return element.repeat;\n        }\n    }\n}\n\n/**\n * JSX transformer: replaces `class` and `for` attributes with `className` and\n * `htmlFor` attributes respectively\n */\nfunction jsx(node) {\n    if (node.attributes) {\n        node.attributes.forEach(rename);\n    }\n}\nfunction rename(attr) {\n    if (attr.name === 'class') {\n        attr.name = 'className';\n    }\n    else if (attr.name === 'for') {\n        attr.name = 'htmlFor';\n    }\n}\n\n/**\n * XSL transformer: removes `select` attributes from certain nodes that contain\n * children\n */\nfunction xsl(node) {\n    if (matchesName(node.name) && node.attributes && (node.children.length || node.value)) {\n        node.attributes = node.attributes.filter(isAllowed);\n    }\n}\nfunction isAllowed(attr) {\n    return attr.name !== 'select';\n}\nfunction matchesName(name) {\n    return name === 'xsl:variable' || name === 'xsl:with-param';\n}\n\nconst reElement = /^(-+)([a-z0-9]+[a-z0-9-]*)/i;\nconst reModifier = /^(_+)([a-z0-9]+[a-z0-9-_]*)/i;\nconst blockCandidates1 = (className) => /^[a-z]\\-/i.test(className);\nconst blockCandidates2 = (className) => /^[a-z]/i.test(className);\nfunction bem(node, ancestors, config) {\n    expandClassNames(node);\n    expandShortNotation(node, ancestors, config);\n}\n/**\n * Expands existing class names in BEM notation in given `node`.\n * For example, if node contains `b__el_mod` class name, this method ensures\n * that element contains `b__el` class as well\n */\nfunction expandClassNames(node) {\n    const data = getBEMData(node);\n    const classNames = [];\n    for (const cl of data.classNames) {\n        // remove all modifiers and element prefixes from class name to get a base element name\n        const ix = cl.indexOf('_');\n        if (ix > 0 && !cl.startsWith('-')) {\n            classNames.push(cl.slice(0, ix));\n            classNames.push(cl.slice(ix));\n        }\n        else {\n            classNames.push(cl);\n        }\n    }\n    if (classNames.length) {\n        data.classNames = classNames.filter(uniqueClass);\n        data.block = findBlockName(data.classNames);\n        updateClass(node, data.classNames.join(' '));\n    }\n}\n/**\n * Expands short BEM notation, e.g. `-element` and `_modifier`\n */\nfunction expandShortNotation(node, ancestors, config) {\n    const data = getBEMData(node);\n    const classNames = [];\n    const { options } = config;\n    const path = ancestors.slice(1).concat(node);\n    for (let cl of data.classNames) {\n        let prefix = '';\n        let m;\n        const originalClass = cl;\n        // parse element definition (could be only one)\n        if (m = cl.match(reElement)) {\n            prefix = getBlockName(path, m[1].length, config.context) + options['bem.element'] + m[2];\n            classNames.push(prefix);\n            cl = cl.slice(m[0].length);\n        }\n        // parse modifiers definitions\n        if (m = cl.match(reModifier)) {\n            if (!prefix) {\n                prefix = getBlockName(path, m[1].length);\n                classNames.push(prefix);\n            }\n            classNames.push(`${prefix}${options['bem.modifier']}${m[2]}`);\n            cl = cl.slice(m[0].length);\n        }\n        if (cl === originalClass) {\n            // class name wasn\u2019t modified: it\u2019s not a BEM-specific class,\n            // add it as-is into output\n            classNames.push(originalClass);\n        }\n    }\n    const arrClassNames = classNames.filter(uniqueClass);\n    if (arrClassNames.length) {\n        updateClass(node, arrClassNames.join(' '));\n    }\n}\n/**\n * Returns BEM data from given abbreviation node\n */\nfunction getBEMData(node) {\n    if (!node._bem) {\n        let classValue = '';\n        if (node.attributes) {\n            for (const attr of node.attributes) {\n                if (attr.name === 'class' && attr.value) {\n                    classValue = stringifyValue(attr.value);\n                    break;\n                }\n            }\n        }\n        node._bem = parseBEM(classValue);\n    }\n    return node._bem;\n}\nfunction getBEMDataFromContext(context) {\n    if (!context._bem) {\n        context._bem = parseBEM(context.attributes && context.attributes.class || '');\n    }\n    return context._bem;\n}\n/**\n * Parses BEM data from given class name\n */\nfunction parseBEM(classValue) {\n    const classNames = classValue ? classValue.split(/\\s+/) : [];\n    return {\n        classNames,\n        block: findBlockName(classNames)\n    };\n}\n/**\n * Returns block name for given `node` by `prefix`, which tells the depth of\n * of parent node lookup\n */\nfunction getBlockName(ancestors, depth = 0, context) {\n    const maxParentIx = 0;\n    let parentIx = Math.max(ancestors.length - depth, maxParentIx);\n    do {\n        const parent = ancestors[parentIx];\n        if (parent) {\n            const data = getBEMData(parent);\n            if (data.block) {\n                return data.block;\n            }\n        }\n    } while (maxParentIx < parentIx--);\n    if (context) {\n        const data = getBEMDataFromContext(context);\n        if (data.block) {\n            return data.block;\n        }\n    }\n    return '';\n}\nfunction findBlockName(classNames) {\n    return find(classNames, blockCandidates1)\n        || find(classNames, blockCandidates2)\n        || void 0;\n}\n/**\n * Finds class name from given list which may be used as block name\n */\nfunction find(classNames, filter) {\n    for (const cl of classNames) {\n        if (reElement.test(cl) || reModifier.test(cl)) {\n            break;\n        }\n        if (filter(cl)) {\n            return cl;\n        }\n    }\n}\nfunction updateClass(node, value) {\n    for (const attr of node.attributes) {\n        if (attr.name === 'class') {\n            attr.value = [value];\n            break;\n        }\n    }\n}\nfunction stringifyValue(value) {\n    let result = '';\n    for (const t of value) {\n        result += typeof t === 'string' ? t : t.name;\n    }\n    return result;\n}\nfunction uniqueClass(item, ix, arr) {\n    return !!item && arr.indexOf(item) === ix;\n}\n\nfunction walk$1(abbr, visitor, state) {\n    const callback = (ctx, index, items) => {\n        const { parent, current } = state;\n        state.parent = current;\n        state.current = ctx;\n        visitor(ctx, index, items, state, next);\n        state.current = current;\n        state.parent = parent;\n    };\n    const next = (node, index, items) => {\n        state.ancestors.push(state.current);\n        callback(node, index, items);\n        state.ancestors.pop();\n    };\n    abbr.children.forEach(callback);\n}\nfunction createWalkState(config) {\n    return {\n        // @ts-ignore: Will set value in iterator\n        current: null,\n        parent: void 0,\n        ancestors: [],\n        config,\n        field: 1,\n        out: createOutputStream(config.options)\n    };\n}\n\nconst caret = [{ type: 'Field', index: 0, name: '' }];\n/**\n * Check if given node is a snippet: a node without name and attributes\n */\nfunction isSnippet(node) {\n    return node ? !node.name && !node.attributes : false;\n}\n/**\n * Check if given node is inline-level element, e.g. element with explicitly\n * defined node name\n */\nfunction isInlineElement(node, config) {\n    return node ? isInline(node, config) : false;\n}\n/**\n * Check if given value token is a field\n */\nfunction isField(token) {\n    return typeof token === 'object' && token.type === 'Field';\n}\nfunction pushTokens(tokens, state) {\n    const { out } = state;\n    let largestIndex = -1;\n    for (const t of tokens) {\n        if (typeof t === 'string') {\n            pushString(out, t);\n        }\n        else {\n            pushField(out, state.field + t.index, t.name);\n            if (t.index > largestIndex) {\n                largestIndex = t.index;\n            }\n        }\n    }\n    if (largestIndex !== -1) {\n        state.field += largestIndex + 1;\n    }\n}\n/**\n * Splits given value token by lines: returns array where each entry is a token list\n * for a single line\n */\nfunction splitByLines$1(tokens) {\n    const result = [];\n    let line = [];\n    for (const t of tokens) {\n        if (typeof t === 'string') {\n            const lines = t.split(/\\r\\n?|\\n/g);\n            line.push(lines.shift() || '');\n            while (lines.length) {\n                result.push(line);\n                line = [lines.shift() || ''];\n            }\n        }\n        else {\n            line.push(t);\n        }\n    }\n    line.length && result.push(line);\n    return result;\n}\n/**\n * Check if given attribute should be outputted\n */\nfunction shouldOutputAttribute(attr) {\n    // In case if attribute is implied, check if it has a defined value:\n    // either non-empty value or quoted empty value\n    return !attr.implied || attr.valueType !== 'raw' || (!!attr.value && attr.value.length > 0);\n}\n\n/**\n * Splits given string into template tokens.\n * Template is a string which contains placeholders which are uppercase names\n * between `[` and `]`, for example: `[PLACEHOLDER]`.\n * Unlike other templates, a placeholder may contain extra characters before and\n * after name: `[%PLACEHOLDER.]`. If data for `PLACEHOLDER` is defined, it will\n * be outputted with with these extra character, otherwise will be completely omitted.\n */\nfunction template(text) {\n    const tokens = [];\n    const scanner = { pos: 0, text };\n    let placeholder;\n    let offset = scanner.pos;\n    let pos = scanner.pos;\n    while (scanner.pos < scanner.text.length) {\n        pos = scanner.pos;\n        if (placeholder = consumePlaceholder(scanner)) {\n            if (offset !== scanner.pos) {\n                tokens.push(text.slice(offset, pos));\n            }\n            tokens.push(placeholder);\n            offset = scanner.pos;\n        }\n        else {\n            scanner.pos++;\n        }\n    }\n    if (offset !== scanner.pos) {\n        tokens.push(text.slice(offset));\n    }\n    return tokens;\n}\n/**\n * Consumes placeholder like `[#ID]` from given scanner\n */\nfunction consumePlaceholder(scanner) {\n    if (peek(scanner) === 91 /* Start */) {\n        const start = ++scanner.pos;\n        let namePos = start;\n        let afterPos = start;\n        let stack = 1;\n        while (scanner.pos < scanner.text.length) {\n            const code = peek(scanner);\n            if (isTokenStart(code)) {\n                namePos = scanner.pos;\n                while (isToken(peek(scanner))) {\n                    scanner.pos++;\n                }\n                afterPos = scanner.pos;\n            }\n            else {\n                if (code === 91 /* Start */) {\n                    stack++;\n                }\n                else if (code === 93 /* End */) {\n                    if (--stack === 0) {\n                        return {\n                            before: scanner.text.slice(start, namePos),\n                            after: scanner.text.slice(afterPos, scanner.pos++),\n                            name: scanner.text.slice(namePos, afterPos)\n                        };\n                    }\n                }\n                scanner.pos++;\n            }\n        }\n    }\n}\nfunction peek(scanner, pos = scanner.pos) {\n    return scanner.text.charCodeAt(pos);\n}\nfunction isTokenStart(code) {\n    return code >= 65 && code <= 90; // A-Z\n}\nfunction isToken(code) {\n    return isTokenStart(code)\n        || (code > 47 && code < 58) /* 0-9 */\n        || code === 95 /* Underscore */\n        || code === 45 /* Dash */;\n}\n\nfunction createCommentState(config) {\n    const { options } = config;\n    return {\n        enabled: options['comment.enabled'],\n        trigger: options['comment.trigger'],\n        before: options['comment.before'] ? template(options['comment.before']) : void 0,\n        after: options['comment.after'] ? template(options['comment.after']) : void 0\n    };\n}\n/**\n * Adds comment prefix for given node, if required\n */\nfunction commentNodeBefore(node, state) {\n    if (shouldComment(node, state) && state.comment.before) {\n        output(node, state.comment.before, state);\n    }\n}\n/**\n * Adds comment suffix for given node, if required\n */\nfunction commentNodeAfter(node, state) {\n    if (shouldComment(node, state) && state.comment.after) {\n        output(node, state.comment.after, state);\n    }\n}\n/**\n * Check if given node should be commented\n */\nfunction shouldComment(node, state) {\n    const { comment } = state;\n    if (!comment.enabled || !comment.trigger || !node.name || !node.attributes) {\n        return false;\n    }\n    for (const attr of node.attributes) {\n        if (attr.name && comment.trigger.includes(attr.name)) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Pushes given template tokens into output stream\n */\nfunction output(node, tokens, state) {\n    const attrs = {};\n    const { out } = state;\n    // Collect attributes payload\n    for (const attr of node.attributes) {\n        if (attr.name && attr.value) {\n            attrs[attr.name.toUpperCase()] = attr.value;\n        }\n    }\n    // Output parsed tokens\n    for (const token of tokens) {\n        if (typeof token === 'string') {\n            pushString(out, token);\n        }\n        else if (attrs[token.name]) {\n            pushString(out, token.before);\n            pushTokens(attrs[token.name], state);\n            pushString(out, token.after);\n        }\n    }\n}\n\nconst htmlTagRegex = /^<([\\w\\-:]+)[\\s>]/;\nfunction html(abbr, config) {\n    const state = createWalkState(config);\n    state.comment = createCommentState(config);\n    walk$1(abbr, element, state);\n    return state.out.value;\n}\n/**\n * Outputs `node` content to output stream of `state`\n * @param node Context node\n * @param index Index of `node` in `items`\n * @param items List of `node`\u2019s siblings\n * @param state Current walk state\n */\nfunction element(node, index, items, state, next) {\n    const { out, config } = state;\n    const format = shouldFormat(node, index, items, state);\n    // Pick offset level for current node\n    const level = getIndent(state);\n    out.level += level;\n    format && pushNewline(out, true);\n    if (node.name) {\n        const name = tagName(node.name, config);\n        commentNodeBefore(node, state);\n        pushString(out, `<${name}`);\n        if (node.attributes) {\n            for (const attr of node.attributes) {\n                if (shouldOutputAttribute(attr)) {\n                    pushAttribute(attr, state);\n                }\n            }\n        }\n        if (node.selfClosing && !node.children.length && !node.value) {\n            pushString(out, `${selfClose(config)}>`);\n        }\n        else {\n            pushString(out, '>');\n            if (!pushSnippet(node, state, next)) {\n                if (node.value) {\n                    const innerFormat = node.value.some(hasNewline) || startsWithBlockTag(node.value, config);\n                    innerFormat && pushNewline(state.out, ++out.level);\n                    pushTokens(node.value, state);\n                    innerFormat && pushNewline(state.out, --out.level);\n                }\n                node.children.forEach(next);\n                if (!node.value && !node.children.length) {\n                    const innerFormat = config.options['output.formatLeafNode']\n                        || config.options['output.formatForce'].includes(node.name);\n                    innerFormat && pushNewline(state.out, ++out.level);\n                    pushTokens(caret, state);\n                    innerFormat && pushNewline(state.out, --out.level);\n                }\n            }\n            pushString(out, `</${name}>`);\n            commentNodeAfter(node, state);\n        }\n    }\n    else if (!pushSnippet(node, state, next) && node.value) {\n        // A text-only node (snippet)\n        pushTokens(node.value, state);\n        node.children.forEach(next);\n    }\n    if (format && index === items.length - 1 && state.parent) {\n        const offset = isSnippet(state.parent) ? 0 : 1;\n        pushNewline(out, out.level - offset);\n    }\n    out.level -= level;\n}\n/**\n * Outputs given attribute\u2019s content into output stream\n */\nfunction pushAttribute(attr, state) {\n    const { out, config } = state;\n    if (attr.name) {\n        const name = attrName(attr.name, config);\n        const lQuote = attrQuote(attr, config, true);\n        const rQuote = attrQuote(attr, config);\n        let value = attr.value;\n        if (isBooleanAttribute(attr, config) && !value) {\n            // If attribute value is omitted and it\u2019s a boolean value, check for\n            // `compactBoolean` option: if it\u2019s disabled, set value to attribute name\n            // (XML style)\n            if (!config.options['output.compactBoolean']) {\n                value = [name];\n            }\n        }\n        else if (!value) {\n            value = caret;\n        }\n        pushString(out, ' ' + name);\n        if (value) {\n            pushString(out, '=' + lQuote);\n            pushTokens(value, state);\n            pushString(out, rQuote);\n        }\n        else if (config.options['output.selfClosingStyle'] !== 'html') {\n            pushString(out, '=' + lQuote + rQuote);\n        }\n    }\n}\nfunction pushSnippet(node, state, next) {\n    if (node.value && node.children.length) {\n        // We have a value and child nodes. In case if value contains fields,\n        // we should output children as a content of first field\n        const fieldIx = node.value.findIndex(isField);\n        if (fieldIx !== -1) {\n            pushTokens(node.value.slice(0, fieldIx), state);\n            const line = state.out.line;\n            let pos = fieldIx + 1;\n            node.children.forEach(next);\n            // If there was a line change, trim leading whitespace for better result\n            if (state.out.line !== line && typeof node.value[pos] === 'string') {\n                pushString(state.out, node.value[pos++].trimLeft());\n            }\n            pushTokens(node.value.slice(pos), state);\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Check if given node should be formatted in its parent context\n */\nfunction shouldFormat(node, index, items, state) {\n    const { config, parent } = state;\n    if (!config.options['output.format']) {\n        return false;\n    }\n    if (index === 0 && !parent) {\n        // Do not format very first node\n        return false;\n    }\n    // Do not format single child of snippet\n    if (parent && isSnippet(parent) && items.length === 1) {\n        return false;\n    }\n    /**\n     * Adjacent text-only/snippet nodes\n     */\n    if (isSnippet(node)) {\n        // Adjacent text-only/snippet nodes\n        const format = isSnippet(items[index - 1]) || isSnippet(items[index + 1])\n            // Has newlines: looks like wrapping code fragment\n            || node.value.some(hasNewline)\n            // Format as wrapper: contains children which will be outputted as field content\n            || (node.value.some(isField) && node.children.length);\n        if (format) {\n            return true;\n        }\n    }\n    if (isInline(node, config)) {\n        // Check if inline node is the next sibling of block-level node\n        if (index === 0) {\n            // First node in parent: format if it\u2019s followed by a block-level element\n            for (let i = 0; i < items.length; i++) {\n                if (!isInline(items[i], config)) {\n                    return true;\n                }\n            }\n        }\n        else if (!isInline(items[index - 1], config)) {\n            // Node is right after block-level element\n            return true;\n        }\n        if (config.options['output.inlineBreak']) {\n            // check for adjacent inline elements before and after current element\n            let adjacentInline = 1;\n            let before = index;\n            let after = index;\n            while (isInlineElement(items[--before], config)) {\n                adjacentInline++;\n            }\n            while (isInlineElement(items[++after], config)) {\n                adjacentInline++;\n            }\n            if (adjacentInline >= config.options['output.inlineBreak']) {\n                return true;\n            }\n        }\n        // Edge case: inline node contains node that should receive formatting\n        for (let i = 0, il = node.children.length; i < il; i++) {\n            if (shouldFormat(node.children[i], i, node.children, state)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Returns indentation offset for given node\n */\nfunction getIndent(state) {\n    const { config, parent } = state;\n    if (!parent || isSnippet(parent) || (parent.name && config.options['output.formatSkip'].includes(parent.name))) {\n        return 0;\n    }\n    return 1;\n}\n/**\n * Check if given node value contains newlines\n */\nfunction hasNewline(value) {\n    return typeof value === 'string' && /\\r|\\n/.test(value);\n}\n/**\n * Check if given node value starts with block-level tag\n */\nfunction startsWithBlockTag(value, config) {\n    if (value.length && typeof value[0] === 'string') {\n        const matches = htmlTagRegex.exec(value[0]);\n        if ((matches === null || matches === void 0 ? void 0 : matches.length) && !config.options['inlineElements'].includes(matches[1].toLowerCase())) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction indentFormat(abbr, config, options) {\n    const state = createWalkState(config);\n    state.options = options || {};\n    walk$1(abbr, element$1, state);\n    return state.out.value;\n}\n/**\n * Outputs `node` content to output stream of `state`\n * @param node Context node\n * @param index Index of `node` in `items`\n * @param items List of `node`\u2019s siblings\n * @param state Current walk state\n */\nfunction element$1(node, index, items, state, next) {\n    const { out, options } = state;\n    const { primary, secondary } = collectAttributes(node);\n    // Pick offset level for current node\n    const level = state.parent ? 1 : 0;\n    out.level += level;\n    // Do not indent top-level elements\n    if (shouldFormat$1(node, index, items, state)) {\n        pushNewline(out, true);\n    }\n    if (node.name && (node.name !== 'div' || !primary.length)) {\n        pushString(out, (options.beforeName || '') + node.name + (options.afterName || ''));\n    }\n    pushPrimaryAttributes(primary, state);\n    pushSecondaryAttributes(secondary.filter(shouldOutputAttribute), state);\n    if (node.selfClosing && !node.value && !node.children.length) {\n        if (state.options.selfClose) {\n            pushString(out, state.options.selfClose);\n        }\n    }\n    else {\n        pushValue(node, state);\n        node.children.forEach(next);\n    }\n    out.level -= level;\n}\n/**\n * From given node, collects all attributes as `primary` (id, class) and\n * `secondary` (all the rest) lists. In most indent-based syntaxes, primary attribute\n * has special syntax\n */\nfunction collectAttributes(node) {\n    const primary = [];\n    const secondary = [];\n    if (node.attributes) {\n        for (const attr of node.attributes) {\n            if (isPrimaryAttribute(attr)) {\n                primary.push(attr);\n            }\n            else {\n                secondary.push(attr);\n            }\n        }\n    }\n    return { primary, secondary };\n}\n/**\n * Outputs given attributes as primary into output stream\n */\nfunction pushPrimaryAttributes(attrs, state) {\n    for (const attr of attrs) {\n        if (attr.value) {\n            if (attr.name === 'class') {\n                pushString(state.out, '.');\n                // All whitespace characters must be replaced with dots in class names\n                const tokens = attr.value.map(t => typeof t === 'string' ? t.replace(/\\s+/g, '.') : t);\n                pushTokens(tokens, state);\n            }\n            else {\n                // ID attribute\n                pushString(state.out, '#');\n                pushTokens(attr.value, state);\n            }\n        }\n    }\n}\n/**\n * Outputs given attributes as secondary into output stream\n */\nfunction pushSecondaryAttributes(attrs, state) {\n    if (attrs.length) {\n        const { out, config, options } = state;\n        options.beforeAttribute && pushString(out, options.beforeAttribute);\n        for (let i = 0; i < attrs.length; i++) {\n            const attr = attrs[i];\n            pushString(out, attrName(attr.name || '', config));\n            if (isBooleanAttribute(attr, config) && !attr.value) {\n                if (!config.options['output.compactBoolean'] && options.booleanValue) {\n                    pushString(out, '=' + options.booleanValue);\n                }\n            }\n            else {\n                pushString(out, '=' + attrQuote(attr, config, true));\n                pushTokens(attr.value || caret, state);\n                pushString(out, attrQuote(attr, config));\n            }\n            if (i !== attrs.length - 1 && options.glueAttribute) {\n                pushString(out, options.glueAttribute);\n            }\n        }\n        options.afterAttribute && pushString(out, options.afterAttribute);\n    }\n}\n/**\n * Outputs given node value into state output stream\n */\nfunction pushValue(node, state) {\n    // We should either output value or add caret but for leaf nodes only (no children)\n    if (!node.value && node.children.length) {\n        return;\n    }\n    const value = node.value || caret;\n    const lines = splitByLines$1(value);\n    const { out, options } = state;\n    if (lines.length === 1) {\n        if (node.name || node.attributes) {\n            push(out, ' ');\n        }\n        pushTokens(value, state);\n    }\n    else {\n        // We should format multi-line value with terminating `|` character\n        // and same line length\n        const lineLengths = [];\n        let maxLength = 0;\n        // Calculate lengths of all lines and max line length\n        for (const line of lines) {\n            const len = valueLength(line);\n            lineLengths.push(len);\n            if (len > maxLength) {\n                maxLength = len;\n            }\n        }\n        // Output each line, padded to max length\n        out.level++;\n        for (let i = 0; i < lines.length; i++) {\n            pushNewline(out, true);\n            options.beforeTextLine && push(out, options.beforeTextLine);\n            pushTokens(lines[i], state);\n            if (options.afterTextLine) {\n                push(out, ' '.repeat(maxLength - lineLengths[i]));\n                push(out, options.afterTextLine);\n            }\n        }\n        out.level--;\n    }\n}\nfunction isPrimaryAttribute(attr) {\n    return attr.name === 'class' || attr.name === 'id';\n}\n/**\n * Calculates string length from given tokens\n */\nfunction valueLength(tokens) {\n    let len = 0;\n    for (const token of tokens) {\n        len += typeof token === 'string' ? token.length : token.name.length;\n    }\n    return len;\n}\nfunction shouldFormat$1(node, index, items, state) {\n    // Do not format first top-level element or snippets\n    if (!state.parent && index === 0) {\n        return false;\n    }\n    return !isSnippet(node);\n}\n\nfunction haml(abbr, config) {\n    return indentFormat(abbr, config, {\n        beforeName: '%',\n        beforeAttribute: '(',\n        afterAttribute: ')',\n        glueAttribute: ' ',\n        afterTextLine: ' |',\n        booleanValue: 'true',\n        selfClose: '/'\n    });\n}\n\nfunction slim(abbr, config) {\n    return indentFormat(abbr, config, {\n        beforeAttribute: ' ',\n        glueAttribute: ' ',\n        beforeTextLine: '| ',\n        selfClose: '/'\n    });\n}\n\nfunction pug(abbr, config) {\n    return indentFormat(abbr, config, {\n        beforeAttribute: '(',\n        afterAttribute: ')',\n        glueAttribute: ', ',\n        beforeTextLine: '| ',\n        selfClose: config.options['output.selfClosingStyle'] === 'xml' ? '/' : ''\n    });\n}\n\nconst formatters = { html, haml, slim, pug };\n/**\n * Parses given Emmet abbreviation into a final abbreviation tree with all\n * required transformations applied\n */\nfunction parse(abbr, config) {\n    let oldTextValue;\n    if (typeof abbr === 'string') {\n        let parseOpt = config;\n        if (config.options['jsx.enabled']) {\n            parseOpt = Object.assign(Object.assign({}, parseOpt), { jsx: true });\n        }\n        if (config.options['markup.href']) {\n            parseOpt = Object.assign(Object.assign({}, parseOpt), { href: true });\n        }\n        abbr = parseAbbreviation(abbr, parseOpt);\n        // remove text field before snippets(abbr, config) call\n        // as abbreviation(abbr, parseOpt) already handled it\n        oldTextValue = config.text;\n        config.text = undefined;\n    }\n    // Run abbreviation resolve in two passes:\n    // 1. Map each node to snippets, which are abbreviations as well. A single snippet\n    // may produce multiple nodes\n    // 2. Transform every resolved node\n    abbr = resolveSnippets(abbr, config);\n    walk(abbr, transform, config);\n    config.text = oldTextValue !== null && oldTextValue !== void 0 ? oldTextValue : config.text;\n    return abbr;\n}\n/**\n * Converts given abbreviation to string according to provided `config`\n */\nfunction stringify(abbr, config) {\n    const formatter = formatters[config.syntax] || html;\n    return formatter(abbr, config);\n}\n/**\n * Modifies given node and prepares it for output\n */\nfunction transform(node, ancestors, config) {\n    implicitTag(node, ancestors, config);\n    mergeAttributes(node, config);\n    lorem(node, ancestors, config);\n    if (config.syntax === 'xsl') {\n        xsl(node);\n    }\n    if (config.options['jsx.enabled']) {\n        jsx(node);\n    }\n    if (config.options['bem.enabled']) {\n        bem(node, ancestors, config);\n    }\n}\n\nconst reProperty = /^([a-z-]+)(?:\\s*:\\s*([^\\n\\r;]+?);*)?$/;\nconst opt = { value: true };\n/**\n * Creates structure for holding resolved CSS snippet\n */\nfunction createSnippet(key, value) {\n    // A snippet could be a raw text snippet (e.g. arbitrary text string) or a\n    // CSS property with possible values separated by `|`.\n    // In latter case, we have to parse snippet as CSS abbreviation\n    const m = value.match(reProperty);\n    if (m) {\n        const keywords = {};\n        const parsed = m[2] ? m[2].split('|').map(parseValue) : [];\n        for (const item of parsed) {\n            for (const cssVal of item) {\n                collectKeywords(cssVal, keywords);\n            }\n        }\n        return {\n            type: \"Property\" /* Property */,\n            key,\n            property: m[1],\n            value: parsed,\n            keywords,\n            dependencies: []\n        };\n    }\n    return { type: \"Raw\" /* Raw */, key, value };\n}\n/**\n * Nests more specific CSS properties into shorthand ones, e.g.\n * `background-position-x` -> `background-position` -> `background`\n */\nfunction nest(snippets) {\n    snippets = snippets.slice().sort(snippetsSort);\n    const stack = [];\n    let prev;\n    // For sorted list of CSS properties, create dependency graph where each\n    // shorthand property contains its more specific one, e.g.\n    // background -> background-position -> background-position-x\n    for (const cur of snippets.filter(isProperty)) {\n        // Check if current property belongs to one from parent stack.\n        // Since `snippets` array is sorted, items are perfectly aligned\n        // from shorthands to more specific variants\n        while (stack.length) {\n            prev = stack[stack.length - 1];\n            if (cur.property.startsWith(prev.property)\n                && cur.property.charCodeAt(prev.property.length) === 45 /* - */) {\n                prev.dependencies.push(cur);\n                stack.push(cur);\n                break;\n            }\n            stack.pop();\n        }\n        if (!stack.length) {\n            stack.push(cur);\n        }\n    }\n    return snippets;\n}\n/**\n * A sorting function for array of snippets\n */\nfunction snippetsSort(a, b) {\n    if (a.key === b.key) {\n        return 0;\n    }\n    return a.key < b.key ? -1 : 1;\n}\nfunction parseValue(value) {\n    return parse$2(value.trim(), opt)[0].value;\n}\nfunction isProperty(snippet) {\n    return snippet.type === \"Property\" /* Property */;\n}\nfunction collectKeywords(cssVal, dest) {\n    for (const v of cssVal.value) {\n        if (v.type === 'Literal') {\n            dest[v.value] = v;\n        }\n        else if (v.type === 'FunctionCall') {\n            dest[v.name] = v;\n        }\n        else if (v.type === 'Field') {\n            // Create literal from field, if available\n            const value = v.name.trim();\n            if (value) {\n                dest[value] = { type: 'Literal', value };\n            }\n        }\n    }\n}\n\n/**\n * Calculates how close `str1` matches `str2` using fuzzy match.\n * How matching works:\n * \u2013 first characters of both `str1` and `str2` *must* match\n * \u2013 `str1` length larger than `str2` length is allowed only when `unmatched` is true\n * \u2013 ideal match is when `str1` equals to `str2` (score: 1)\n * \u2013 next best match is `str2` starts with `str1` (score: 1 \u00D7 percent of matched characters)\n * \u2013 other scores depend on how close characters of `str1` to the beginning of `str2`\n * @param partialMatch Allow length `str1` to be greater than `str2` length\n */\nfunction scoreMatch(str1, str2, partialMatch = false) {\n    str1 = str1.toLowerCase();\n    str2 = str2.toLowerCase();\n    if (str1 === str2) {\n        return 1;\n    }\n    // Both strings MUST start with the same character\n    if (!str1 || !str2 || str1.charCodeAt(0) !== str2.charCodeAt(0)) {\n        return 0;\n    }\n    const str1Len = str1.length;\n    const str2Len = str2.length;\n    if (!partialMatch && str1Len > str2Len) {\n        return 0;\n    }\n    // Characters from `str1` which are closer to the beginning of a `str2` should\n    // have higher score.\n    // For example, if `str2` is `abcde`, it\u2019s max score is:\n    // 5 + 4 + 3 + 2 + 1 = 15 (sum of character positions in reverse order)\n    // Matching `abd` against `abcde` should produce:\n    // 5 + 4 + 2 = 11\n    // Acronym bonus for match right after `-`. Matching `abd` against `abc-de`\n    // should produce:\n    // 6 + 5 + 4 (use `d` position in `abd`, not in abc-de`)\n    const minLength = Math.min(str1Len, str2Len);\n    const maxLength = Math.max(str1Len, str2Len);\n    let i = 1;\n    let j = 1;\n    let score = maxLength;\n    let ch1 = 0;\n    let ch2 = 0;\n    let found = false;\n    let acronym = false;\n    while (i < str1Len) {\n        ch1 = str1.charCodeAt(i);\n        found = false;\n        acronym = false;\n        while (j < str2Len) {\n            ch2 = str2.charCodeAt(j);\n            if (ch1 === ch2) {\n                found = true;\n                score += maxLength - (acronym ? i : j);\n                break;\n            }\n            // add acronym bonus for exactly next match after unmatched `-`\n            acronym = ch2 === 45 /* - */;\n            j++;\n        }\n        if (!found) {\n            if (!partialMatch) {\n                return 0;\n            }\n            break;\n        }\n        i++;\n    }\n    const matchRatio = i / maxLength;\n    const delta = maxLength - minLength;\n    const maxScore = sum(maxLength) - sum(delta);\n    return (score * matchRatio) / maxScore;\n}\n/**\n * Calculates sum of first `n` numbers, e.g. 1+2+3+...n\n */\nfunction sum(n) {\n    return n * (n + 1) / 2;\n}\n\nfunction color(token, shortHex) {\n    if (!token.r && !token.g && !token.b && !token.a) {\n        return 'transparent';\n    }\n    else if (token.a === 1) {\n        return asHex(token, shortHex);\n    }\n    return asRGB(token);\n}\n/**\n * Output given color as hex value\n * @param short Produce short value (e.g. #fff instead of #ffffff), if possible\n */\nfunction asHex(token, short) {\n    const fn = (short && isShortHex(token.r) && isShortHex(token.g) && isShortHex(token.b))\n        ? toShortHex : toHex;\n    return '#' + fn(token.r) + fn(token.g) + fn(token.b);\n}\n/**\n * Output current color as `rgba?(...)` CSS color\n */\nfunction asRGB(token) {\n    const values = [token.r, token.g, token.b];\n    if (token.a !== 1) {\n        values.push(frac(token.a, 8));\n    }\n    return `${values.length === 3 ? 'rgb' : 'rgba'}(${values.join(', ')})`;\n}\nfunction frac(num, digits = 4) {\n    return num.toFixed(digits).replace(/\\.?0+$/, '');\n}\nfunction isShortHex(hex) {\n    return !(hex % 17);\n}\nfunction toShortHex(num) {\n    return (num >> 4).toString(16);\n}\nfunction toHex(num) {\n    return pad(num.toString(16), 2);\n}\nfunction pad(value, len) {\n    while (value.length < len) {\n        value = '0' + value;\n    }\n    return value;\n}\n\nfunction css(abbr, config) {\n    var _a;\n    const out = createOutputStream(config.options);\n    const format = config.options['output.format'];\n    if (((_a = config.context) === null || _a === void 0 ? void 0 : _a.name) === \"@@section\" /* Section */) {\n        // For section context, filter out unmatched snippets\n        abbr = abbr.filter(node => node.snippet);\n    }\n    for (let i = 0; i < abbr.length; i++) {\n        if (format && i !== 0) {\n            pushNewline(out, true);\n        }\n        property(abbr[i], out, config);\n    }\n    return out.value;\n}\n/**\n * Outputs given abbreviation node into output stream\n */\nfunction property(node, out, config) {\n    const isJSON = config.options['stylesheet.json'];\n    if (node.name) {\n        // It\u2019s a CSS property\n        const name = isJSON ? toCamelCase(node.name) : node.name;\n        pushString(out, name + config.options['stylesheet.between']);\n        if (node.value.length) {\n            propertyValue(node, out, config);\n        }\n        else {\n            pushField(out, 0, '');\n        }\n        if (isJSON) {\n            // For CSS-in-JS, always finalize property with comma\n            // NB: seems like `important` is not available in CSS-in-JS syntaxes\n            push(out, ',');\n        }\n        else {\n            outputImportant(node, out, true);\n            push(out, config.options['stylesheet.after']);\n        }\n    }\n    else {\n        // It\u2019s a regular snippet, output plain tokens without any additional formatting\n        for (const cssVal of node.value) {\n            for (const v of cssVal.value) {\n                outputToken(v, out, config);\n            }\n        }\n        outputImportant(node, out, node.value.length > 0);\n    }\n}\nfunction propertyValue(node, out, config) {\n    const isJSON = config.options['stylesheet.json'];\n    const num = isJSON ? getSingleNumeric(node) : null;\n    if (num && (!num.unit || num.unit === 'px')) {\n        // For CSS-in-JS, if property contains single numeric value, output it\n        // as JS number\n        push(out, String(num.value));\n    }\n    else {\n        const quote = getQuote(config);\n        isJSON && push(out, quote);\n        for (let i = 0; i < node.value.length; i++) {\n            if (i !== 0) {\n                push(out, ', ');\n            }\n            outputValue(node.value[i], out, config);\n        }\n        isJSON && push(out, quote);\n    }\n}\nfunction outputImportant(node, out, separator) {\n    if (node.important) {\n        if (separator) {\n            push(out, ' ');\n        }\n        push(out, '!important');\n    }\n}\nfunction outputValue(value, out, config) {\n    for (let i = 0, prevEnd = -1; i < value.value.length; i++) {\n        const token = value.value[i];\n        // Handle edge case: a field is written close to previous token like this: `foo${bar}`.\n        // We should not add delimiter here\n        if (i !== 0 && (token.type !== 'Field' || token.start !== prevEnd)) {\n            push(out, ' ');\n        }\n        outputToken(token, out, config);\n        prevEnd = token['end'];\n    }\n}\nfunction outputToken(token, out, config) {\n    if (token.type === 'ColorValue') {\n        push(out, color(token, config.options['stylesheet.shortHex']));\n    }\n    else if (token.type === 'Literal') {\n        pushString(out, token.value);\n    }\n    else if (token.type === 'NumberValue') {\n        pushString(out, frac(token.value, 4) + token.unit);\n    }\n    else if (token.type === 'StringValue') {\n        const quote = token.quote === 'double' ? '\"' : '\\'';\n        pushString(out, quote + token.value + quote);\n    }\n    else if (token.type === 'Field') {\n        pushField(out, token.index, token.name);\n    }\n    else if (token.type === 'FunctionCall') {\n        push(out, token.name + '(');\n        for (let i = 0; i < token.arguments.length; i++) {\n            if (i) {\n                push(out, ', ');\n            }\n            outputValue(token.arguments[i], out, config);\n        }\n        push(out, ')');\n    }\n}\n/**\n * If value of given property is a single numeric value, returns this token\n */\nfunction getSingleNumeric(node) {\n    if (node.value.length === 1) {\n        const cssVal = node.value[0];\n        if (cssVal.value.length === 1 && cssVal.value[0].type === 'NumberValue') {\n            return cssVal.value[0];\n        }\n    }\n}\n/**\n * Converts kebab-case string to camelCase\n */\nfunction toCamelCase(str) {\n    return str.replace(/\\-(\\w)/g, (_, letter) => letter.toUpperCase());\n}\nfunction getQuote(config) {\n    return config.options['stylesheet.jsonDoubleQuotes'] ? '\"' : '\\'';\n}\n\nconst gradientName = 'lg';\n/**\n * Parses given Emmet abbreviation into a final abbreviation tree with all\n * required transformations applied\n */\nfunction parse$1(abbr, config) {\n    var _a;\n    const snippets = ((_a = config.cache) === null || _a === void 0 ? void 0 : _a.stylesheetSnippets) || convertSnippets(config.snippets);\n    if (config.cache) {\n        config.cache.stylesheetSnippets = snippets;\n    }\n    if (typeof abbr === 'string') {\n        abbr = parse$2(abbr, { value: isValueScope(config) });\n    }\n    const filteredSnippets = getSnippetsForScope(snippets, config);\n    for (const node of abbr) {\n        resolveNode(node, filteredSnippets, config);\n    }\n    return abbr;\n}\n/**\n * Converts given raw snippets into internal snippets representation\n */\nfunction convertSnippets(snippets) {\n    const result = [];\n    for (const key of Object.keys(snippets)) {\n        result.push(createSnippet(key, snippets[key]));\n    }\n    return nest(result);\n}\n/**\n * Resolves given node: finds matched CSS snippets using fuzzy match and resolves\n * keyword aliases from node value\n */\nfunction resolveNode(node, snippets, config) {\n    if (!resolveGradient(node, config)) {\n        const score = config.options['stylesheet.fuzzySearchMinScore'];\n        if (isValueScope(config)) {\n            // Resolve as value of given CSS property\n            const propName = config.context.name;\n            const snippet = snippets.find(s => s.type === \"Property\" /* Property */ && s.property === propName);\n            resolveValueKeywords(node, config, snippet, score);\n            node.snippet = snippet;\n        }\n        else if (node.name) {\n            const snippet = findBestMatch(node.name, snippets, score, true);\n            node.snippet = snippet;\n            if (snippet) {\n                if (snippet.type === \"Property\" /* Property */) {\n                    resolveAsProperty(node, snippet, config);\n                }\n                else {\n                    resolveAsSnippet(node, snippet);\n                }\n            }\n        }\n    }\n    if (node.name || config.context) {\n        // Resolve numeric values for CSS properties only\n        resolveNumericValue(node, config);\n    }\n    return node;\n}\n/**\n * Resolves CSS gradient shortcut from given property, if possible\n */\nfunction resolveGradient(node, config) {\n    let gradientFn = null;\n    const cssVal = node.value.length === 1 ? node.value[0] : null;\n    if (cssVal && cssVal.value.length === 1) {\n        const v = cssVal.value[0];\n        if (v.type === 'FunctionCall' && v.name === gradientName) {\n            gradientFn = v;\n        }\n    }\n    if (gradientFn || node.name === gradientName) {\n        if (!gradientFn) {\n            gradientFn = {\n                type: 'FunctionCall',\n                name: 'linear-gradient',\n                arguments: [cssValue(field(0, ''))]\n            };\n        }\n        else {\n            gradientFn = Object.assign(Object.assign({}, gradientFn), { name: 'linear-gradient' });\n        }\n        if (!config.context) {\n            node.name = 'background-image';\n        }\n        node.value = [cssValue(gradientFn)];\n        return true;\n    }\n    return false;\n}\n/**\n * Resolves given parsed abbreviation node as CSS property\n */\nfunction resolveAsProperty(node, snippet, config) {\n    const abbr = node.name;\n    // Check for unmatched part of abbreviation\n    // For example, in `dib` abbreviation the matched part is `d` and `ib` should\n    // be considered as inline value. If unmatched fragment exists, we should check\n    // if it matches actual value of snippet. If either explicit value is specified\n    // or unmatched fragment did not resolve to to a keyword, we should consider\n    // matched snippet as invalid\n    const inlineValue = getUnmatchedPart(abbr, snippet.key);\n    if (inlineValue) {\n        if (node.value.length) {\n            // Already have value: unmatched part indicates matched snippet is invalid\n            return node;\n        }\n        const kw = resolveKeyword(inlineValue, config, snippet);\n        if (!kw) {\n            return node;\n        }\n        node.value.push(cssValue(kw));\n    }\n    node.name = snippet.property;\n    if (node.value.length) {\n        // Replace keyword alias from current abbreviation node with matched keyword\n        resolveValueKeywords(node, config, snippet);\n    }\n    else if (snippet.value.length) {\n        const defaultValue = snippet.value[0];\n        // https://github.com/emmetio/emmet/issues/558\n        // We should auto-select inserted value only if there\u2019s multiple value\n        // choice\n        node.value = snippet.value.length === 1 || defaultValue.some(hasField)\n            ? defaultValue\n            : defaultValue.map(n => wrapWithField(n, config));\n    }\n    return node;\n}\nfunction resolveValueKeywords(node, config, snippet, minScore) {\n    for (const cssVal of node.value) {\n        const value = [];\n        for (const token of cssVal.value) {\n            if (token.type === 'Literal') {\n                value.push(resolveKeyword(token.value, config, snippet, minScore) || token);\n            }\n            else if (token.type === 'FunctionCall') {\n                // For function calls, we should find matching function call\n                // and merge arguments\n                const match = resolveKeyword(token.name, config, snippet, minScore);\n                if (match && match.type === 'FunctionCall') {\n                    value.push(Object.assign(Object.assign({}, match), { arguments: token.arguments.concat(match.arguments.slice(token.arguments.length)) }));\n                }\n                else {\n                    value.push(token);\n                }\n            }\n            else {\n                value.push(token);\n            }\n        }\n        cssVal.value = value;\n    }\n}\n/**\n * Resolves given parsed abbreviation node as a snippet: a plain code chunk\n */\nfunction resolveAsSnippet(node, snippet) {\n    // When resolving snippets, we have to do the following:\n    // 1. Replace field placeholders with actual field tokens.\n    // 2. If input values given, put them instead of fields\n    let offset = 0;\n    let m;\n    const reField = /\\$\\{(\\d+)(:[^}]+)?\\}/g;\n    const inputValue = node.value[0];\n    const outputValue = [];\n    while (m = reField.exec(snippet.value)) {\n        if (offset !== m.index) {\n            outputValue.push(literal(snippet.value.slice(offset, m.index)));\n        }\n        offset = m.index + m[0].length;\n        if (inputValue && inputValue.value.length) {\n            outputValue.push(inputValue.value.shift());\n        }\n        else {\n            outputValue.push(field(Number(m[1]), m[2] ? m[2].slice(1) : ''));\n        }\n    }\n    const tail = snippet.value.slice(offset);\n    if (tail) {\n        outputValue.push(literal(tail));\n    }\n    node.name = void 0;\n    node.value = [cssValue(...outputValue)];\n    return node;\n}\n/**\n * Finds best matching item from `items` array\n * @param abbr  Abbreviation to match\n * @param items List of items for match\n * @param minScore The minimum score the best matched item should have to be a valid match.\n */\nfunction findBestMatch(abbr, items, minScore = 0, partialMatch = false) {\n    let matchedItem = null;\n    let maxScore = 0;\n    for (const item of items) {\n        const score = scoreMatch(abbr, getScoringPart(item), partialMatch);\n        if (score === 1) {\n            // direct hit, no need to look further\n            return item;\n        }\n        if (score && score >= maxScore) {\n            maxScore = score;\n            matchedItem = item;\n        }\n    }\n    return maxScore >= minScore ? matchedItem : null;\n}\nfunction getScoringPart(item) {\n    return typeof item === 'string' ? item : item.key;\n}\n/**\n * Returns a part of `abbr` that wasn\u2019t directly matched against `str`.\n * For example, if abbreviation `poas` is matched against `position`,\n * the unmatched part will be `as` since `a` wasn\u2019t found in string stream\n */\nfunction getUnmatchedPart(abbr, str) {\n    for (let i = 0, lastPos = 0; i < abbr.length; i++) {\n        lastPos = str.indexOf(abbr[i], lastPos);\n        if (lastPos === -1) {\n            return abbr.slice(i);\n        }\n        lastPos++;\n    }\n    return '';\n}\n/**\n * Resolves given keyword shorthand into matched snippet keyword or global keyword,\n * if possible\n */\nfunction resolveKeyword(kw, config, snippet, minScore) {\n    let ref;\n    if (snippet) {\n        if (ref = findBestMatch(kw, Object.keys(snippet.keywords), minScore)) {\n            return snippet.keywords[ref];\n        }\n        for (const dep of snippet.dependencies) {\n            if (ref = findBestMatch(kw, Object.keys(dep.keywords), minScore)) {\n                return dep.keywords[ref];\n            }\n        }\n    }\n    if (ref = findBestMatch(kw, config.options['stylesheet.keywords'], minScore)) {\n        return literal(ref);\n    }\n    return null;\n}\n/**\n * Resolves numeric values in given abbreviation node\n */\nfunction resolveNumericValue(node, config) {\n    const aliases = config.options['stylesheet.unitAliases'];\n    const unitless = config.options['stylesheet.unitless'];\n    for (const v of node.value) {\n        for (const t of v.value) {\n            if (t.type === 'NumberValue') {\n                if (t.unit) {\n                    t.unit = aliases[t.unit] || t.unit;\n                }\n                else if (t.value !== 0 && !unitless.includes(node.name)) {\n                    t.unit = t.rawValue.includes('.')\n                        ? config.options['stylesheet.floatUnit']\n                        : config.options['stylesheet.intUnit'];\n                }\n            }\n        }\n    }\n}\n/**\n * Constructs CSS value token\n */\nfunction cssValue(...args) {\n    return {\n        type: 'CSSValue',\n        value: args\n    };\n}\n/**\n * Constructs literal token\n */\nfunction literal(value) {\n    return { type: 'Literal', value };\n}\n/**\n * Constructs field token\n */\nfunction field(index, name) {\n    return { type: 'Field', index, name };\n}\n/**\n * Check if given value contains fields\n */\nfunction hasField(value) {\n    for (const v of value.value) {\n        if (v.type === 'Field' || (v.type === 'FunctionCall' && v.arguments.some(hasField))) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Wraps tokens of given abbreviation with fields\n */\nfunction wrapWithField(node, config, state = { index: 1 }) {\n    let value = [];\n    for (const v of node.value) {\n        switch (v.type) {\n            case 'ColorValue':\n                value.push(field(state.index++, color(v, config.options['stylesheet.shortHex'])));\n                break;\n            case 'Literal':\n                value.push(field(state.index++, v.value));\n                break;\n            case 'NumberValue':\n                value.push(field(state.index++, `${v.value}${v.unit}`));\n                break;\n            case 'StringValue':\n                const q = v.quote === 'single' ? '\\'' : '\"';\n                value.push(field(state.index++, q + v.value + q));\n                break;\n            case 'FunctionCall':\n                value.push(field(state.index++, v.name), literal('('));\n                for (let i = 0, il = v.arguments.length; i < il; i++) {\n                    value = value.concat(wrapWithField(v.arguments[i], config, state).value);\n                    if (i !== il - 1) {\n                        value.push(literal(', '));\n                    }\n                }\n                value.push(literal(')'));\n                break;\n            default:\n                value.push(v);\n        }\n    }\n    return Object.assign(Object.assign({}, node), { value });\n}\n/**\n * Check if abbreviation should be expanded in CSS value context\n */\nfunction isValueScope(config) {\n    if (config.context) {\n        return config.context.name === \"@@value\" /* Value */ || !config.context.name.startsWith('@@');\n    }\n    return false;\n}\n/**\n * Returns snippets for given scope\n */\nfunction getSnippetsForScope(snippets, config) {\n    if (config.context) {\n        if (config.context.name === \"@@section\" /* Section */) {\n            return snippets.filter(s => s.type === \"Raw\" /* Raw */);\n        }\n        if (config.context.name === \"@@property\" /* Property */) {\n            return snippets.filter(s => s.type === \"Property\" /* Property */);\n        }\n    }\n    return snippets;\n}\n\nvar markupSnippets = {\n\t\"a\": \"a[href]\",\n\t\"a:blank\": \"a[href='http://${0}' target='_blank' rel='noopener noreferrer']\",\n\t\"a:link\": \"a[href='http://${0}']\",\n\t\"a:mail\": \"a[href='mailto:${0}']\",\n\t\"a:tel\": \"a[href='tel:+${0}']\",\n\t\"abbr\": \"abbr[title]\",\n\t\"acr|acronym\": \"acronym[title]\",\n\t\"base\": \"base[href]/\",\n\t\"basefont\": \"basefont/\",\n\t\"br\": \"br/\",\n\t\"frame\": \"frame/\",\n\t\"hr\": \"hr/\",\n\t\"bdo\": \"bdo[dir]\",\n\t\"bdo:r\": \"bdo[dir=rtl]\",\n\t\"bdo:l\": \"bdo[dir=ltr]\",\n\t\"col\": \"col/\",\n\t\"link\": \"link[rel=stylesheet href]/\",\n\t\"link:css\": \"link[href='${1:style}.css']\",\n\t\"link:print\": \"link[href='${1:print}.css' media=print]\",\n\t\"link:favicon\": \"link[rel='shortcut icon' type=image/x-icon href='${1:favicon.ico}']\",\n\t\"link:mf|link:manifest\": \"link[rel='manifest' href='${1:manifest.json}']\",\n\t\"link:touch\": \"link[rel=apple-touch-icon href='${1:favicon.png}']\",\n\t\"link:rss\": \"link[rel=alternate type=application/rss+xml title=RSS href='${1:rss.xml}']\",\n\t\"link:atom\": \"link[rel=alternate type=application/atom+xml title=Atom href='${1:atom.xml}']\",\n\t\"link:im|link:import\": \"link[rel=import href='${1:component}.html']\",\n\t\"meta\": \"meta/\",\n\t\"meta:utf\": \"meta[http-equiv=Content-Type content='text/html;charset=UTF-8']\",\n\t\"meta:vp\": \"meta[name=viewport content='width=${1:device-width}, initial-scale=${2:1.0}']\",\n\t\"meta:compat\": \"meta[http-equiv=X-UA-Compatible content='${1:IE=7}']\",\n\t\"meta:edge\": \"meta:compat[content='${1:ie=edge}']\",\n\t\"meta:redirect\": \"meta[http-equiv=refresh content='0; url=${1:http://example.com}']\",\n\t\"meta:kw\": \"meta[name=keywords content]\",\n\t\"meta:desc\": \"meta[name=description content]\",\n\t\"style\": \"style\",\n\t\"script\": \"script\",\n\t\"script:src\": \"script[src]\",\n\t\"img\": \"img[src alt]/\",\n\t\"img:s|img:srcset\": \"img[srcset src alt]\",\n\t\"img:z|img:sizes\": \"img[sizes srcset src alt]\",\n\t\"picture\": \"picture\",\n\t\"src|source\": \"source/\",\n\t\"src:sc|source:src\": \"source[src type]\",\n\t\"src:s|source:srcset\": \"source[srcset]\",\n\t\"src:t|source:type\": \"source[srcset type='${1:image/}']\",\n\t\"src:z|source:sizes\": \"source[sizes srcset]\",\n\t\"src:m|source:media\": \"source[media='(${1:min-width: })' srcset]\",\n\t\"src:mt|source:media:type\": \"source:media[type='${2:image/}']\",\n\t\"src:mz|source:media:sizes\": \"source:media[sizes srcset]\",\n\t\"src:zt|source:sizes:type\": \"source[sizes srcset type='${1:image/}']\",\n\t\"iframe\": \"iframe[src frameborder=0]\",\n\t\"embed\": \"embed[src type]/\",\n\t\"object\": \"object[data type]\",\n\t\"param\": \"param[name value]/\",\n\t\"map\": \"map[name]\",\n\t\"area\": \"area[shape coords href alt]/\",\n\t\"area:d\": \"area[shape=default]\",\n\t\"area:c\": \"area[shape=circle]\",\n\t\"area:r\": \"area[shape=rect]\",\n\t\"area:p\": \"area[shape=poly]\",\n\t\"form\": \"form[action]\",\n\t\"form:get\": \"form[method=get]\",\n\t\"form:post\": \"form[method=post]\",\n\t\"label\": \"label[for]\",\n\t\"input\": \"input[type=${1:text}]/\",\n\t\"inp\": \"input[name=${1} id=${1}]\",\n\t\"input:h|input:hidden\": \"input[type=hidden name]\",\n\t\"input:t|input:text\": \"inp[type=text]\",\n\t\"input:search\": \"inp[type=search]\",\n\t\"input:email\": \"inp[type=email]\",\n\t\"input:url\": \"inp[type=url]\",\n\t\"input:p|input:password\": \"inp[type=password]\",\n\t\"input:datetime\": \"inp[type=datetime]\",\n\t\"input:date\": \"inp[type=date]\",\n\t\"input:datetime-local\": \"inp[type=datetime-local]\",\n\t\"input:month\": \"inp[type=month]\",\n\t\"input:week\": \"inp[type=week]\",\n\t\"input:time\": \"inp[type=time]\",\n\t\"input:tel\": \"inp[type=tel]\",\n\t\"input:number\": \"inp[type=number]\",\n\t\"input:color\": \"inp[type=color]\",\n\t\"input:c|input:checkbox\": \"inp[type=checkbox]\",\n\t\"input:r|input:radio\": \"inp[type=radio]\",\n\t\"input:range\": \"inp[type=range]\",\n\t\"input:f|input:file\": \"inp[type=file]\",\n\t\"input:s|input:submit\": \"input[type=submit value]\",\n\t\"input:i|input:image\": \"input[type=image src alt]\",\n\t\"input:b|input:btn|input:button\": \"input[type=button value]\",\n\t\"input:reset\": \"input:button[type=reset]\",\n\t\"isindex\": \"isindex/\",\n\t\"select\": \"select[name=${1} id=${1}]\",\n\t\"select:d|select:disabled\": \"select[disabled.]\",\n\t\"opt|option\": \"option[value]\",\n\t\"textarea\": \"textarea[name=${1} id=${1} cols=${2:30} rows=${3:10}]\",\n\t\"marquee\": \"marquee[behavior direction]\",\n\t\"menu:c|menu:context\": \"menu[type=context]\",\n\t\"menu:t|menu:toolbar\": \"menu[type=toolbar]\",\n\t\"video\": \"video[src]\",\n\t\"audio\": \"audio[src]\",\n\t\"html:xml\": \"html[xmlns=http://www.w3.org/1999/xhtml]\",\n\t\"keygen\": \"keygen/\",\n\t\"command\": \"command/\",\n\t\"btn:s|button:s|button:submit\" : \"button[type=submit]\",\n\t\"btn:r|button:r|button:reset\" : \"button[type=reset]\",\n\t\"btn:d|button:d|button:disabled\" : \"button[disabled.]\",\n\t\"fst:d|fset:d|fieldset:d|fieldset:disabled\" : \"fieldset[disabled.]\",\n\n\t\"bq\": \"blockquote\",\n\t\"fig\": \"figure\",\n\t\"figc\": \"figcaption\",\n\t\"pic\": \"picture\",\n\t\"ifr\": \"iframe\",\n\t\"emb\": \"embed\",\n\t\"obj\": \"object\",\n\t\"cap\": \"caption\",\n\t\"colg\": \"colgroup\",\n\t\"fst\": \"fieldset\",\n\t\"btn\": \"button\",\n\t\"optg\": \"optgroup\",\n\t\"tarea\": \"textarea\",\n\t\"leg\": \"legend\",\n\t\"sect\": \"section\",\n\t\"art\": \"article\",\n\t\"hdr\": \"header\",\n\t\"ftr\": \"footer\",\n\t\"adr\": \"address\",\n\t\"dlg\": \"dialog\",\n\t\"str\": \"strong\",\n\t\"prog\": \"progress\",\n\t\"mn\": \"main\",\n\t\"tem\": \"template\",\n\t\"fset\": \"fieldset\",\n\t\"datag\": \"datagrid\",\n\t\"datal\": \"datalist\",\n\t\"kg\": \"keygen\",\n\t\"out\": \"output\",\n\t\"det\": \"details\",\n\t\"sum\": \"summary\",\n\t\"cmd\": \"command\",\n\n\t\"ri:d|ri:dpr\": \"img:s\",\n\t\"ri:v|ri:viewport\": \"img:z\",\n\t\"ri:a|ri:art\": \"pic>src:m+img\",\n\t\"ri:t|ri:type\": \"pic>src:t+img\",\n\n\t\"!!!\": \"{<!DOCTYPE html>}\",\n\t\"doc\": \"html[lang=${lang}]>(head>meta[charset=${charset}]+meta[http-equiv='X-UA-Compatible'][content='IE=edge']+meta:vp+title{${1:Document}})+body\",\n\t\"!|html:5\": \"!!!+doc\",\n\n\t\"c\": \"{<!-- ${0} -->}\",\n\t\"cc:ie\": \"{<!--[if IE]>${0}<![endif]-->}\",\n\t\"cc:noie\": \"{<!--[if !IE]><!-->${0}<!--<![endif]-->}\"\n};\n\nvar stylesheetSnippets = {\n\t\"@f\": \"@font-face {\\n\\tfont-family: ${1};\\n\\tsrc: url(${2});\\n}\",\n\t\"@ff\": \"@font-face {\\n\\tfont-family: '${1:FontName}';\\n\\tsrc: url('${2:FileName}.eot');\\n\\tsrc: url('${2:FileName}.eot?#iefix') format('embedded-opentype'),\\n\\t\\t url('${2:FileName}.woff') format('woff'),\\n\\t\\t url('${2:FileName}.ttf') format('truetype'),\\n\\t\\t url('${2:FileName}.svg#${1:FontName}') format('svg');\\n\\tfont-style: ${3:normal};\\n\\tfont-weight: ${4:normal};\\n}\",\n\t\"@i|@import\": \"@import url(${0});\",\n\t\"@kf\": \"@keyframes ${1:identifier} {\\n\\t${2}\\n}\",\n\t\"@m|@media\": \"@media ${1:screen} {\\n\\t${0}\\n}\",\n\t\"ac\": \"align-content:start|end|flex-start|flex-end|center|space-between|space-around|stretch|space-evenly\",\n\t\"ai\": \"align-items:start|end|flex-start|flex-end|center|baseline|stretch\",\n\t\"anim\": \"animation:${1:name} ${2:duration} ${3:timing-function} ${4:delay} ${5:iteration-count} ${6:direction} ${7:fill-mode}\",\n\t\"animdel\": \"animation-delay:time\",\n\t\"animdir\": \"animation-direction:normal|reverse|alternate|alternate-reverse\",\n\t\"animdur\": \"animation-duration:${1:0}s\",\n\t\"animfm\": \"animation-fill-mode:both|forwards|backwards\",\n\t\"animic\": \"animation-iteration-count:1|infinite\",\n\t\"animn\": \"animation-name\",\n\t\"animps\": \"animation-play-state:running|paused\",\n\t\"animtf\": \"animation-timing-function:linear|ease|ease-in|ease-out|ease-in-out|cubic-bezier(${1:0.1}, ${2:0.7}, ${3:1.0}, ${3:0.1})\",\n\t\"ap\": \"appearance:none\",\n\t\"as\": \"align-self:start|end|auto|flex-start|flex-end|center|baseline|stretch\",\n\t\"b\": \"bottom\",\n\t\"bd\": \"border:${1:1px} ${2:solid} ${3:#000}\",\n\t\"bdb\": \"border-bottom:${1:1px} ${2:solid} ${3:#000}\",\n\t\"bdbc\": \"border-bottom-color:${1:#000}\",\n\t\"bdbi\": \"border-bottom-image:url(${0})\",\n\t\"bdbk\": \"border-break:close\",\n\t\"bdbli\": \"border-bottom-left-image:url(${0})|continue\",\n\t\"bdblrs\": \"border-bottom-left-radius\",\n\t\"bdbri\": \"border-bottom-right-image:url(${0})|continue\",\n\t\"bdbrrs\": \"border-bottom-right-radius\",\n\t\"bdbs\": \"border-bottom-style\",\n\t\"bdbw\": \"border-bottom-width\",\n\t\"bdc\": \"border-color:${1:#000}\",\n\t\"bdci\": \"border-corner-image:url(${0})|continue\",\n\t\"bdcl\": \"border-collapse:collapse|separate\",\n\t\"bdf\": \"border-fit:repeat|clip|scale|stretch|overwrite|overflow|space\",\n\t\"bdi\": \"border-image:url(${0})\",\n\t\"bdl\": \"border-left:${1:1px} ${2:solid} ${3:#000}\",\n\t\"bdlc\": \"border-left-color:${1:#000}\",\n\t\"bdlen\": \"border-length\",\n\t\"bdli\": \"border-left-image:url(${0})\",\n\t\"bdls\": \"border-left-style\",\n\t\"bdlw\": \"border-left-width\",\n\t\"bdr\": \"border-right:${1:1px} ${2:solid} ${3:#000}\",\n\t\"bdrc\": \"border-right-color:${1:#000}\",\n\t\"bdri\": \"border-right-image:url(${0})\",\n\t\"bdrs\": \"border-radius\",\n\t\"bdrst\": \"border-right-style\",\n\t\"bdrw\": \"border-right-width\",\n\t\"bds\": \"border-style:none|hidden|dotted|dashed|solid|double|dot-dash|dot-dot-dash|wave|groove|ridge|inset|outset\",\n\t\"bdsp\": \"border-spacing\",\n\t\"bdt\": \"border-top:${1:1px} ${2:solid} ${3:#000}\",\n\t\"bdtc\": \"border-top-color:${1:#000}\",\n\t\"bdti\": \"border-top-image:url(${0})\",\n\t\"bdtli\": \"border-top-left-image:url(${0})|continue\",\n\t\"bdtlrs\": \"border-top-left-radius\",\n\t\"bdtri\": \"border-top-right-image:url(${0})|continue\",\n\t\"bdtrrs\": \"border-top-right-radius\",\n\t\"bdts\": \"border-top-style\",\n\t\"bdtw\": \"border-top-width\",\n\t\"bdw\": \"border-width\",\n\t\"bfv\": \"backface-visibility:hidden|visible\",\n\t\"bg\": \"background:${1:#000}\",\n\t\"bga\": \"background-attachment:fixed|scroll\",\n\t\"bgbk\": \"background-break:bounding-box|each-box|continuous\",\n\t\"bgc\": \"background-color:#${1:fff}\",\n\t\"bgcp\": \"background-clip:padding-box|border-box|content-box|no-clip\",\n\t\"bgi\": \"background-image:url(${0})\",\n\t\"bgo\": \"background-origin:padding-box|border-box|content-box\",\n\t\"bgp\": \"background-position:${1:0} ${2:0}\",\n\t\"bgpx\": \"background-position-x\",\n\t\"bgpy\": \"background-position-y\",\n\t\"bgr\": \"background-repeat:no-repeat|repeat-x|repeat-y|space|round\",\n\t\"bgsz\": \"background-size:contain|cover\",\n\t\"bxsh\": \"box-shadow:${1:inset }${2:hoff} ${3:voff} ${4:blur} ${5:#000}|none\",\n\t\"bxsz\": \"box-sizing:border-box|content-box|border-box\",\n\t\"c\": \"color:${1:#000}\",\n\t\"cr\": \"color:rgb(${1:0}, ${2:0}, ${3:0})\",\n\t\"cra\": \"color:rgba(${1:0}, ${2:0}, ${3:0}, ${4:.5})\",\n\t\"cl\": \"clear:both|left|right|none\",\n\t\"cm\": \"/* ${0} */\",\n\t\"cnt\": \"content:'${0}'|normal|open-quote|no-open-quote|close-quote|no-close-quote|attr(${0})|counter(${0})|counters(${0})\",\n\t\"coi\": \"counter-increment\",\n\t\"colm\": \"columns\",\n\t\"colmc\": \"column-count\",\n\t\"colmf\": \"column-fill\",\n\t\"colmg\": \"column-gap\",\n\t\"colmr\": \"column-rule\",\n\t\"colmrc\": \"column-rule-color\",\n\t\"colmrs\": \"column-rule-style\",\n\t\"colmrw\": \"column-rule-width\",\n\t\"colms\": \"column-span\",\n\t\"colmw\": \"column-width\",\n\t\"cor\": \"counter-reset\",\n\t\"cp\": \"clip:auto|rect(${1:top} ${2:right} ${3:bottom} ${4:left})\",\n\t\"cps\": \"caption-side:top|bottom\",\n\t\"cur\": \"cursor:pointer|auto|default|crosshair|hand|help|move|pointer|text\",\n\t\"d\": \"display:block|none|flex|inline-flex|inline|inline-block|grid|inline-grid|subgrid|list-item|run-in|compact|table|inline-table|table-caption|table-column|table-column-group|table-header-group|table-footer-group|table-row|table-row-group|table-cell|ruby|ruby-base|ruby-base-group|ruby-text|ruby-text-group\",\n\t\"ec\": \"empty-cells:show|hide\",\n\t\"f\": \"font:${1:1em} ${2:sans-serif}\",\n\t\"fd\": \"font-display:auto|block|swap|fallback|optional\",\n\t\"fef\": \"font-effect:none|engrave|emboss|outline\",\n\t\"fem\": \"font-emphasize\",\n\t\"femp\": \"font-emphasize-position:before|after\",\n\t\"fems\": \"font-emphasize-style:none|accent|dot|circle|disc\",\n\t\"ff\": \"font-family:serif|sans-serif|cursive|fantasy|monospace\",\n\t\"fft\": \"font-family:\\\"Times New Roman\\\", Times, Baskerville, Georgia, serif\",\n\t\"ffa\": \"font-family:Arial, \\\"Helvetica Neue\\\", Helvetica, sans-serif\",\n\t\"ffv\": \"font-family:Verdana, Geneva, sans-serif\",\n\t\"fl\": \"float:left|right|none\",\n\t\"fs\": \"font-style:italic|normal|oblique\",\n\t\"fsm\": \"font-smoothing:antialiased|subpixel-antialiased|none\",\n\t\"fst\": \"font-stretch:normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\",\n\t\"fv\": \"font-variant:normal|small-caps\",\n\t\"fvs\": \"font-variation-settings:normal|inherit|initial|unset\",\n\t\"fw\": \"font-weight:normal|bold|bolder|lighter\",\n\t\"fx\": \"flex\",\n\t\"fxb\": \"flex-basis:fill|max-content|min-content|fit-content|content\",\n\t\"fxd\": \"flex-direction:row|row-reverse|column|column-reverse\",\n\t\"fxf\": \"flex-flow\",\n\t\"fxg\": \"flex-grow\",\n\t\"fxsh\": \"flex-shrink\",\n\t\"fxw\": \"flex-wrap:nowrap|wrap|wrap-reverse\",\n\t\"fsz\": \"font-size\",\n\t\"fsza\": \"font-size-adjust\",\n\t\"gtc\": \"grid-template-columns:repeat(${0})|minmax()\",\n\t\"gtr\": \"grid-template-rows:repeat(${0})|minmax()\",\n\t\"gta\": \"grid-template-areas\",\n\t\"gt\": \"grid-template\",\n\t\"gg\": \"grid-gap\",\n\t\"gcg\": \"grid-column-gap\",\n\t\"grg\": \"grid-row-gap\",\n\t\"gac\": \"grid-auto-columns:auto|minmax()\",\n\t\"gar\": \"grid-auto-rows:auto|minmax()\",\n\t\"gaf\": \"grid-auto-flow:row|column|dense|inherit|initial|unset\",\n\t\"gd\": \"grid\",\n\t\"gc\": \"grid-column\",\n\t\"gcs\": \"grid-column-start\",\n\t\"gce\": \"grid-column-end\",\n\t\"gr\": \"grid-row\",\n\t\"grs\": \"grid-row-start\",\n\t\"gre\": \"grid-row-end\",\n\t\"ga\": \"grid-area\",\n\t\"h\": \"height\",\n\t\"jc\": \"justify-content:start|end|stretch|flex-start|flex-end|center|space-between|space-around|space-evenly\",\n\t\"ji\": \"justify-items:start|end|center|stretch\",\n\t\"js\": \"justify-self:start|end|center|stretch\",\n\t\"l\": \"left\",\n\t\"lg\": \"background-image:linear-gradient(${1})\",\n\t\"lh\": \"line-height\",\n\t\"lis\": \"list-style\",\n\t\"lisi\": \"list-style-image\",\n\t\"lisp\": \"list-style-position:inside|outside\",\n\t\"list\": \"list-style-type:disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman\",\n\t\"lts\": \"letter-spacing:normal\",\n\t\"m\": \"margin\",\n\t\"mah\": \"max-height\",\n\t\"mar\": \"max-resolution\",\n\t\"maw\": \"max-width\",\n\t\"mb\": \"margin-bottom\",\n\t\"mih\": \"min-height\",\n\t\"mir\": \"min-resolution\",\n\t\"miw\": \"min-width\",\n\t\"ml\": \"margin-left\",\n\t\"mr\": \"margin-right\",\n\t\"mt\": \"margin-top\",\n\t\"ol\": \"outline\",\n\t\"olc\": \"outline-color:${1:#000}|invert\",\n\t\"olo\": \"outline-offset\",\n\t\"ols\": \"outline-style:none|dotted|dashed|solid|double|groove|ridge|inset|outset\",\n\t\"olw\": \"outline-width|thin|medium|thick\",\n\t\"op|opa\": \"opacity\",\n\t\"ord\": \"order\",\n\t\"ori\": \"orientation:landscape|portrait\",\n\t\"orp\": \"orphans\",\n\t\"ov\": \"overflow:hidden|visible|hidden|scroll|auto\",\n\t\"ovs\": \"overflow-style:scrollbar|auto|scrollbar|panner|move|marquee\",\n\t\"ovx\": \"overflow-x:hidden|visible|hidden|scroll|auto\",\n\t\"ovy\": \"overflow-y:hidden|visible|hidden|scroll|auto\",\n\t\"p\": \"padding\",\n\t\"pb\": \"padding-bottom\",\n\t\"pgba\": \"page-break-after:auto|always|left|right\",\n\t\"pgbb\": \"page-break-before:auto|always|left|right\",\n\t\"pgbi\": \"page-break-inside:auto|avoid\",\n\t\"pl\": \"padding-left\",\n\t\"pos\": \"position:relative|absolute|relative|fixed|static\",\n\t\"pr\": \"padding-right\",\n\t\"pt\": \"padding-top\",\n\t\"q\": \"quotes\",\n\t\"qen\": \"quotes:'\\\\201C' '\\\\201D' '\\\\2018' '\\\\2019'\",\n\t\"qru\": \"quotes:'\\\\00AB' '\\\\00BB' '\\\\201E' '\\\\201C'\",\n\t\"r\": \"right\",\n\t\"rsz\": \"resize:none|both|horizontal|vertical\",\n\t\"t\": \"top\",\n\t\"ta\": \"text-align:left|center|right|justify\",\n\t\"tal\": \"text-align-last:left|center|right\",\n\t\"tbl\": \"table-layout:fixed\",\n\t\"td\": \"text-decoration:none|underline|overline|line-through\",\n\t\"te\": \"text-emphasis:none|accent|dot|circle|disc|before|after\",\n\t\"th\": \"text-height:auto|font-size|text-size|max-size\",\n\t\"ti\": \"text-indent\",\n\t\"tj\": \"text-justify:auto|inter-word|inter-ideograph|inter-cluster|distribute|kashida|tibetan\",\n\t\"to\": \"text-outline:${1:0} ${2:0} ${3:#000}\",\n\t\"tov\": \"text-overflow:ellipsis|clip\",\n\t\"tr\": \"text-replace\",\n\t\"trf\": \"transform:${1}|skewX(${1:angle})|skewY(${1:angle})|scale(${1:x}, ${2:y})|scaleX(${1:x})|scaleY(${1:y})|scaleZ(${1:z})|scale3d(${1:x}, ${2:y}, ${3:z})|rotate(${1:angle})|rotateX(${1:angle})|rotateY(${1:angle})|rotateZ(${1:angle})|translate(${1:x}, ${2:y})|translateX(${1:x})|translateY(${1:y})|translateZ(${1:z})|translate3d(${1:tx}, ${2:ty}, ${3:tz})\",\n\t\"trfo\": \"transform-origin\",\n\t\"trfs\": \"transform-style:preserve-3d\",\n\t\"trs\": \"transition:${1:prop} ${2:time}\",\n\t\"trsde\": \"transition-delay:${1:time}\",\n\t\"trsdu\": \"transition-duration:${1:time}\",\n\t\"trsp\": \"transition-property:${1:prop}\",\n\t\"trstf\": \"transition-timing-function:${1:fn}\",\n\t\"tsh\": \"text-shadow:${1:hoff} ${2:voff} ${3:blur} ${4:#000}\",\n\t\"tt\": \"text-transform:uppercase|lowercase|capitalize|none\",\n\t\"tw\": \"text-wrap:none|normal|unrestricted|suppress\",\n\t\"us\": \"user-select:none\",\n\t\"v\": \"visibility:hidden|visible|collapse\",\n\t\"va\": \"vertical-align:top|super|text-top|middle|baseline|bottom|text-bottom|sub\",\n\t\"w\": \"width\",\n\t\"whs\": \"white-space:nowrap|pre|pre-wrap|pre-line|normal\",\n\t\"whsc\": \"white-space-collapse:normal|keep-all|loose|break-strict|break-all\",\n\t\"wid\": \"widows\",\n\t\"wm\": \"writing-mode:lr-tb|lr-tb|lr-bt|rl-tb|rl-bt|tb-rl|tb-lr|bt-lr|bt-rl\",\n\t\"wob\": \"word-break:normal|keep-all|break-all\",\n\t\"wos\": \"word-spacing\",\n\t\"wow\": \"word-wrap:none|unrestricted|suppress|break-word|normal\",\n\t\"z\": \"z-index\",\n\t\"zom\": \"zoom:1\"\n};\n\nvar xslSnippets = {\n    \"tm|tmatch\": \"xsl:template[match mode]\",\n    \"tn|tname\": \"xsl:template[name]\",\n    \"call\": \"xsl:call-template[name]\",\n    \"ap\": \"xsl:apply-templates[select mode]\",\n    \"api\": \"xsl:apply-imports\",\n    \"imp\": \"xsl:import[href]\",\n    \"inc\": \"xsl:include[href]\",\n    \"ch\": \"xsl:choose\",\n    \"wh|xsl:when\": \"xsl:when[test]\",\n    \"ot\": \"xsl:otherwise\",\n    \"if\": \"xsl:if[test]\",\n    \"par\": \"xsl:param[name]\",\n    \"pare\": \"xsl:param[name select]\",\n    \"var\": \"xsl:variable[name]\",\n    \"vare\": \"xsl:variable[name select]\",\n    \"wp\": \"xsl:with-param[name select]\",\n    \"key\": \"xsl:key[name match use]\",\n    \"elem\": \"xsl:element[name]\",\n    \"attr\": \"xsl:attribute[name]\",\n    \"attrs\": \"xsl:attribute-set[name]\",\n    \"cp\": \"xsl:copy[select]\",\n    \"co\": \"xsl:copy-of[select]\",\n    \"val\": \"xsl:value-of[select]\",\n    \"for|each\": \"xsl:for-each[select]\",\n    \"tex\": \"xsl:text\",\n    \"com\": \"xsl:comment\",\n    \"msg\": \"xsl:message[terminate=no]\",\n    \"fall\": \"xsl:fallback\",\n    \"num\": \"xsl:number[value]\",\n    \"nam\": \"namespace-alias[stylesheet-prefix result-prefix]\",\n    \"pres\": \"xsl:preserve-space[elements]\",\n    \"strip\": \"xsl:strip-space[elements]\",\n    \"proc\": \"xsl:processing-instruction[name]\",\n    \"sort\": \"xsl:sort[select order]\",\n    \"choose\": \"xsl:choose>xsl:when+xsl:otherwise\",\n    \"xsl\": \"!!!+xsl:stylesheet[version=1.0 xmlns:xsl=http://www.w3.org/1999/XSL/Transform]>{\\n|}\",\n    \"!!!\": \"{<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>}\"\n};\n\nvar pugSnippets = {\n\t\"!!!\": \"{doctype html}\"\n};\n\nvar variables = {\n\t\"lang\": \"en\",\n\t\"locale\": \"en-US\",\n\t\"charset\": \"UTF-8\",\n\t\"indentation\": \"\\t\",\n\t\"newline\": \"\\n\"\n};\n\n/**\n * Default syntaxes for abbreviation types\n */\nconst defaultSyntaxes = {\n    markup: 'html',\n    stylesheet: 'css'\n};\nconst defaultOptions = {\n    'inlineElements': [\n        'a', 'abbr', 'acronym', 'applet', 'b', 'basefont', 'bdo',\n        'big', 'br', 'button', 'cite', 'code', 'del', 'dfn', 'em', 'font', 'i',\n        'iframe', 'img', 'input', 'ins', 'kbd', 'label', 'map', 'object', 'q',\n        's', 'samp', 'select', 'small', 'span', 'strike', 'strong', 'sub', 'sup',\n        'textarea', 'tt', 'u', 'var'\n    ],\n    'output.indent': '\\t',\n    'output.baseIndent': '',\n    'output.newline': '\\n',\n    'output.tagCase': '',\n    'output.attributeCase': '',\n    'output.attributeQuotes': 'double',\n    'output.format': true,\n    'output.formatLeafNode': false,\n    'output.formatSkip': ['html'],\n    'output.formatForce': ['body'],\n    'output.inlineBreak': 3,\n    'output.compactBoolean': false,\n    'output.booleanAttributes': [\n        'contenteditable', 'seamless', 'async', 'autofocus',\n        'autoplay', 'checked', 'controls', 'defer', 'disabled', 'formnovalidate',\n        'hidden', 'ismap', 'loop', 'multiple', 'muted', 'novalidate', 'readonly',\n        'required', 'reversed', 'selected', 'typemustmatch'\n    ],\n    'output.reverseAttributes': false,\n    'output.selfClosingStyle': 'html',\n    'output.field': (index, placeholder) => placeholder,\n    'output.text': text => text,\n    'markup.href': true,\n    'comment.enabled': false,\n    'comment.trigger': ['id', 'class'],\n    'comment.before': '',\n    'comment.after': '\\n<!-- /[#ID][.CLASS] -->',\n    'bem.enabled': false,\n    'bem.element': '__',\n    'bem.modifier': '_',\n    'jsx.enabled': false,\n    'stylesheet.keywords': ['auto', 'inherit', 'unset', 'none'],\n    'stylesheet.unitless': ['z-index', 'line-height', 'opacity', 'font-weight', 'zoom', 'flex', 'flex-grow', 'flex-shrink'],\n    'stylesheet.shortHex': true,\n    'stylesheet.between': ': ',\n    'stylesheet.after': ';',\n    'stylesheet.intUnit': 'px',\n    'stylesheet.floatUnit': 'em',\n    'stylesheet.unitAliases': { e: 'em', p: '%', x: 'ex', r: 'rem' },\n    'stylesheet.json': false,\n    'stylesheet.jsonDoubleQuotes': false,\n    'stylesheet.fuzzySearchMinScore': 0\n};\nconst defaultConfig = {\n    type: 'markup',\n    syntax: 'html',\n    variables,\n    snippets: {},\n    options: defaultOptions\n};\n/**\n * Default per-syntax config\n */\nconst syntaxConfig = {\n    markup: {\n        snippets: parseSnippets(markupSnippets),\n    },\n    xhtml: {\n        options: {\n            'output.selfClosingStyle': 'xhtml'\n        }\n    },\n    xml: {\n        options: {\n            'output.selfClosingStyle': 'xml'\n        }\n    },\n    xsl: {\n        snippets: parseSnippets(xslSnippets),\n        options: {\n            'output.selfClosingStyle': 'xml'\n        }\n    },\n    jsx: {\n        options: {\n            'jsx.enabled': true\n        }\n    },\n    pug: {\n        snippets: parseSnippets(pugSnippets)\n    },\n    stylesheet: {\n        snippets: parseSnippets(stylesheetSnippets)\n    },\n    sass: {\n        options: {\n            'stylesheet.after': ''\n        }\n    },\n    stylus: {\n        options: {\n            'stylesheet.between': ' ',\n            'stylesheet.after': '',\n        }\n    }\n};\n/**\n * Parses raw snippets definitions with possibly multiple keys into a plan\n * snippet map\n */\nfunction parseSnippets(snippets) {\n    const result = {};\n    Object.keys(snippets).forEach(k => {\n        for (const name of k.split('|')) {\n            result[name] = snippets[k];\n        }\n    });\n    return result;\n}\nfunction resolveConfig(config = {}, globals = {}) {\n    const type = config.type || 'markup';\n    const syntax = config.syntax || defaultSyntaxes[type];\n    return Object.assign(Object.assign(Object.assign({}, defaultConfig), config), { type,\n        syntax, variables: mergedData(type, syntax, 'variables', config, globals), snippets: mergedData(type, syntax, 'snippets', config, globals), options: mergedData(type, syntax, 'options', config, globals) });\n}\nfunction mergedData(type, syntax, key, config, globals = {}) {\n    const typeDefaults = syntaxConfig[type];\n    const typeOverride = globals[type];\n    const syntaxDefaults = syntaxConfig[syntax];\n    const syntaxOverride = globals[syntax];\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, defaultConfig[key]), (typeDefaults && typeDefaults[key])), (syntaxDefaults && syntaxDefaults[key])), (typeOverride && typeOverride[key])), (syntaxOverride && syntaxOverride[key])), config[key]);\n}\n\n/**\n * Creates structure for scanning given string in backward direction\n */\nfunction backwardScanner(text, start = 0) {\n    return { text, start, pos: text.length };\n}\n/**\n * Check if given scanner position is at start of scanned text\n */\nfunction sol(scanner) {\n    return scanner.pos === scanner.start;\n}\n/**\n * \u201CPeeks\u201D character code an current scanner location without advancing it\n */\nfunction peek$1(scanner, offset = 0) {\n    return scanner.text.charCodeAt(scanner.pos - 1 + offset);\n}\n/**\n * Returns current character code and moves character location one symbol back\n */\nfunction previous(scanner) {\n    if (!sol(scanner)) {\n        return scanner.text.charCodeAt(--scanner.pos);\n    }\n}\n/**\n * Consumes current character code if it matches given `match` code or function\n */\nfunction consume(scanner, match) {\n    if (sol(scanner)) {\n        return false;\n    }\n    const ok = typeof match === 'function'\n        ? match(peek$1(scanner))\n        : match === peek$1(scanner);\n    if (ok) {\n        scanner.pos--;\n    }\n    return !!ok;\n}\nfunction consumeWhile(scanner, match) {\n    const start = scanner.pos;\n    while (consume(scanner, match)) {\n        // empty\n    }\n    return scanner.pos < start;\n}\n\n/**\n * Check if given character code is a quote\n */\nfunction isQuote(c) {\n    return c === 39 /* SingleQuote */ || c === 34 /* DoubleQuote */;\n}\n/**\n * Consumes quoted value, if possible\n * @return Returns `true` is value was consumed\n */\nfunction consumeQuoted(scanner) {\n    const start = scanner.pos;\n    const quote = previous(scanner);\n    if (isQuote(quote)) {\n        while (!sol(scanner)) {\n            if (previous(scanner) === quote && peek$1(scanner) !== 92 /* Escape */) {\n                return true;\n            }\n        }\n    }\n    scanner.pos = start;\n    return false;\n}\n\nconst bracePairs = {\n    [91 /* SquareL */]: 93 /* SquareR */,\n    [40 /* RoundL */]: 41 /* RoundR */,\n    [123 /* CurlyL */]: 125 /* CurlyR */,\n};\n\n/**\n * Check if given reader\u2019s current position points at the end of HTML tag\n */\nfunction isHtml(scanner) {\n    const start = scanner.pos;\n    if (!consume(scanner, 62 /* AngleRight */)) {\n        return false;\n    }\n    let ok = false;\n    consume(scanner, 47 /* Slash */); // possibly self-closed element\n    while (!sol(scanner)) {\n        consumeWhile(scanner, isWhiteSpace);\n        if (consumeIdent(scanner)) {\n            // ate identifier: could be a tag name, boolean attribute or unquoted\n            // attribute value\n            if (consume(scanner, 47 /* Slash */)) {\n                // either closing tag or invalid tag\n                ok = consume(scanner, 60 /* AngleLeft */);\n                break;\n            }\n            else if (consume(scanner, 60 /* AngleLeft */)) {\n                // opening tag\n                ok = true;\n                break;\n            }\n            else if (consume(scanner, isWhiteSpace)) {\n                // boolean attribute\n                continue;\n            }\n            else if (consume(scanner, 61 /* Equals */)) {\n                // simple unquoted value or invalid attribute\n                if (consumeIdent(scanner)) {\n                    continue;\n                }\n                break;\n            }\n            else if (consumeAttributeWithUnquotedValue(scanner)) {\n                // identifier was a part of unquoted value\n                ok = true;\n                break;\n            }\n            // invalid tag\n            break;\n        }\n        if (consumeAttribute(scanner)) {\n            continue;\n        }\n        break;\n    }\n    scanner.pos = start;\n    return ok;\n}\n/**\n * Consumes HTML attribute from given string.\n * @return `true` if attribute was consumed.\n */\nfunction consumeAttribute(scanner) {\n    return consumeAttributeWithQuotedValue(scanner) || consumeAttributeWithUnquotedValue(scanner);\n}\nfunction consumeAttributeWithQuotedValue(scanner) {\n    const start = scanner.pos;\n    if (consumeQuoted(scanner) && consume(scanner, 61 /* Equals */) && consumeIdent(scanner)) {\n        return true;\n    }\n    scanner.pos = start;\n    return false;\n}\nfunction consumeAttributeWithUnquotedValue(scanner) {\n    const start = scanner.pos;\n    const stack = [];\n    while (!sol(scanner)) {\n        const ch = peek$1(scanner);\n        if (isCloseBracket(ch)) {\n            stack.push(ch);\n        }\n        else if (isOpenBracket(ch)) {\n            if (stack.pop() !== bracePairs[ch]) {\n                // Unexpected open bracket\n                break;\n            }\n        }\n        else if (!isUnquotedValue(ch)) {\n            break;\n        }\n        scanner.pos--;\n    }\n    if (start !== scanner.pos && consume(scanner, 61 /* Equals */) && consumeIdent(scanner)) {\n        return true;\n    }\n    scanner.pos = start;\n    return false;\n}\n/**\n * Consumes HTML identifier from stream\n */\nfunction consumeIdent(scanner) {\n    return consumeWhile(scanner, isIdent);\n}\n/**\n * Check if given character code belongs to HTML identifier\n */\nfunction isIdent(ch) {\n    return ch === 58 /* Colon */ || ch === 45 /* Dash */ || isAlpha(ch) || isNumber(ch);\n}\n/**\n * Check if given character code is alpha code (letter though A to Z)\n */\nfunction isAlpha(ch) {\n    ch &= ~32; // quick hack to convert any char code to uppercase char code\n    return ch >= 65 && ch <= 90; // A-Z\n}\n/**\n * Check if given code is a number\n */\nfunction isNumber(ch) {\n    return ch > 47 && ch < 58;\n}\n/**\n * Check if given code is a whitespace\n */\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* Space */ || ch === 9 /* Tab */;\n}\n/**\n * Check if given code may belong to unquoted attribute value\n */\nfunction isUnquotedValue(ch) {\n    return !isNaN(ch) && ch !== 61 /* Equals */ && !isWhiteSpace(ch) && !isQuote(ch);\n}\nfunction isOpenBracket(ch) {\n    return ch === 123 /* CurlyL */ || ch === 40 /* RoundL */ || ch === 91 /* SquareL */;\n}\nfunction isCloseBracket(ch) {\n    return ch === 125 /* CurlyR */ || ch === 41 /* RoundR */ || ch === 93 /* SquareR */;\n}\n\nconst code = (ch) => ch.charCodeAt(0);\nconst specialChars = '#.*:$-_!@%^+>/'.split('').map(code);\nconst defaultOptions$1 = {\n    type: 'markup',\n    lookAhead: true,\n    prefix: ''\n};\n/**\n * Extracts Emmet abbreviation from given string.\n * The goal of this module is to extract abbreviation from current editor\u2019s line,\n * e.g. like this: `<span>.foo[title=bar|]</span>` -> `.foo[title=bar]`, where\n * `|` is a current caret position.\n * @param line A text line where abbreviation should be expanded\n * @param pos Caret position in line. If not given, uses end of line\n * @param options Extracting options\n */\nfunction extractAbbreviation$1(line, pos = line.length, options = {}) {\n    // make sure `pos` is within line range\n    const opt = Object.assign(Object.assign({}, defaultOptions$1), options);\n    pos = Math.min(line.length, Math.max(0, pos == null ? line.length : pos));\n    if (opt.lookAhead) {\n        pos = offsetPastAutoClosed(line, pos, opt);\n    }\n    let ch;\n    const start = getStartOffset(line, pos, opt.prefix || '');\n    if (start === -1) {\n        return void 0;\n    }\n    const scanner = backwardScanner(line, start);\n    scanner.pos = pos;\n    const stack = [];\n    while (!sol(scanner)) {\n        ch = peek$1(scanner);\n        if (stack.includes(125 /* CurlyR */)) {\n            if (ch === 125 /* CurlyR */) {\n                stack.push(ch);\n                scanner.pos--;\n                continue;\n            }\n            if (ch !== 123 /* CurlyL */) {\n                scanner.pos--;\n                continue;\n            }\n        }\n        if (isCloseBrace(ch, opt.type)) {\n            stack.push(ch);\n        }\n        else if (isOpenBrace(ch, opt.type)) {\n            if (stack.pop() !== bracePairs[ch]) {\n                // unexpected brace\n                break;\n            }\n        }\n        else if (stack.includes(93 /* SquareR */) || stack.includes(125 /* CurlyR */)) {\n            // respect all characters inside attribute sets or text nodes\n            scanner.pos--;\n            continue;\n        }\n        else if (isHtml(scanner) || !isAbbreviation(ch)) {\n            break;\n        }\n        scanner.pos--;\n    }\n    if (!stack.length && scanner.pos !== pos) {\n        // Found something, remove some invalid symbols from the\n        // beginning and return abbreviation\n        const abbreviation = line.slice(scanner.pos, pos).replace(/^[*+>^]+/, '');\n        return {\n            abbreviation,\n            location: pos - abbreviation.length,\n            start: options.prefix\n                ? start - options.prefix.length\n                : pos - abbreviation.length,\n            end: pos\n        };\n    }\n}\n/**\n * Returns new `line` index which is right after characters beyound `pos` that\n * editor will likely automatically close, e.g. }, ], and quotes\n */\nfunction offsetPastAutoClosed(line, pos, options) {\n    // closing quote is allowed only as a next character\n    if (isQuote(line.charCodeAt(pos))) {\n        pos++;\n    }\n    // offset pointer until non-autoclosed character is found\n    while (isCloseBrace(line.charCodeAt(pos), options.type)) {\n        pos++;\n    }\n    return pos;\n}\n/**\n * Returns start offset (left limit) in `line` where we should stop looking for\n * abbreviation: it\u2019s nearest to `pos` location of `prefix` token\n */\nfunction getStartOffset(line, pos, prefix) {\n    if (!prefix) {\n        return 0;\n    }\n    const scanner = backwardScanner(line);\n    const compiledPrefix = prefix.split('').map(code);\n    scanner.pos = pos;\n    let result;\n    while (!sol(scanner)) {\n        if (consumePair(scanner, 93 /* SquareR */, 91 /* SquareL */) || consumePair(scanner, 125 /* CurlyR */, 123 /* CurlyL */)) {\n            continue;\n        }\n        result = scanner.pos;\n        if (consumeArray(scanner, compiledPrefix)) {\n            return result;\n        }\n        scanner.pos--;\n    }\n    return -1;\n}\n/**\n * Consumes full character pair, if possible\n */\nfunction consumePair(scanner, close, open) {\n    const start = scanner.pos;\n    if (consume(scanner, close)) {\n        while (!sol(scanner)) {\n            if (consume(scanner, open)) {\n                return true;\n            }\n            scanner.pos--;\n        }\n    }\n    scanner.pos = start;\n    return false;\n}\n/**\n * Consumes all character codes from given array, right-to-left, if possible\n */\nfunction consumeArray(scanner, arr) {\n    const start = scanner.pos;\n    let consumed = false;\n    for (let i = arr.length - 1; i >= 0 && !sol(scanner); i--) {\n        if (!consume(scanner, arr[i])) {\n            break;\n        }\n        consumed = i === 0;\n    }\n    if (!consumed) {\n        scanner.pos = start;\n    }\n    return consumed;\n}\nfunction isAbbreviation(ch) {\n    return (ch > 64 && ch < 91) // uppercase letter\n        || (ch > 96 && ch < 123) // lowercase letter\n        || (ch > 47 && ch < 58) // number\n        || specialChars.includes(ch); // special character\n}\nfunction isOpenBrace(ch, syntax) {\n    return ch === 40 /* RoundL */ || (syntax === 'markup' && (ch === 91 /* SquareL */ || ch === 123 /* CurlyL */));\n}\nfunction isCloseBrace(ch, syntax) {\n    return ch === 41 /* RoundR */ || (syntax === 'markup' && (ch === 93 /* SquareR */ || ch === 125 /* CurlyR */));\n}\n\nfunction expandAbbreviation$1(abbr, config) {\n    const resolvedConfig = resolveConfig(config);\n    return resolvedConfig.type === 'stylesheet'\n        ? stylesheet(abbr, resolvedConfig)\n        : markup(abbr, resolvedConfig);\n}\n/**\n * Expands given *markup* abbreviation (e.g. regular Emmet abbreviation that\n * produces structured output like HTML) and outputs it according to options\n * provided in config\n */\nfunction markup(abbr, config) {\n    return stringify(parse(abbr, config), config);\n}\n/**\n * Expands given *stylesheet* abbreviation (a special Emmet abbreviation designed for\n * stylesheet languages like CSS, SASS etc.) and outputs it according to options\n * provided in config\n */\nfunction stylesheet(abbr, config) {\n    return css(parse$1(abbr, config), config);\n}\n\nvar cssData = {\n    \"properties\": [\"additive-symbols\", \"align-content\", \"align-items\", \"justify-items\", \"justify-self\", \"justify-items\", \"align-self\", \"all\", \"alt\", \"animation\", \"animation-delay\", \"animation-direction\", \"animation-duration\", \"animation-fill-mode\", \"animation-iteration-count\", \"animation-name\", \"animation-play-state\", \"animation-timing-function\", \"backface-visibility\", \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\", \"background-color\", \"background-image\", \"background-origin\", \"background-position\", \"background-position-x\", \"background-position-y\", \"background-repeat\", \"background-size\", \"behavior\", \"block-size\", \"border\", \"border-block-end\", \"border-block-start\", \"border-block-end-color\", \"border-block-start-color\", \"border-block-end-style\", \"border-block-start-style\", \"border-block-end-width\", \"border-block-start-width\", \"border-bottom\", \"border-bottom-color\", \"border-bottom-left-radius\", \"border-bottom-right-radius\", \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\", \"border-color\", \"border-image\", \"border-image-outset\", \"border-image-repeat\", \"border-image-slice\", \"border-image-source\", \"border-image-width\", \"border-inline-end\", \"border-inline-start\", \"border-inline-end-color\", \"border-inline-start-color\", \"border-inline-end-style\", \"border-inline-start-style\", \"border-inline-end-width\", \"border-inline-start-width\", \"border-left\", \"border-left-color\", \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\", \"border-right-color\", \"border-right-style\", \"border-right-width\", \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\", \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\", \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\", \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\", \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"clip-path\", \"clip-rule\", \"color\", \"color-interpolation-filters\", \"column-count\", \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\", \"column-rule-style\", \"column-rule-width\", \"columns\", \"column-span\", \"column-width\", \"contain\", \"content\", \"counter-increment\", \"counter-reset\", \"cursor\", \"direction\", \"display\", \"empty-cells\", \"enable-background\", \"fallback\", \"fill\", \"fill-opacity\", \"fill-rule\", \"filter\", \"flex\", \"flex-basis\", \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\", \"float\", \"flood-color\", \"flood-opacity\", \"font\", \"font-family\", \"font-feature-settings\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\", \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\", \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\", \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\", \"font-weight\", \"glyph-orientation-horizontal\", \"glyph-orientation-vertical\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\", \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\", \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\", \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\", \"grid-template-rows\", \"height\", \"hyphens\", \"image-orientation\", \"image-rendering\", \"ime-mode\", \"inline-size\", \"isolation\", \"justify-content\", \"kerning\", \"left\", \"letter-spacing\", \"lighting-color\", \"line-break\", \"line-height\", \"list-style\", \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\", \"margin-block-end\", \"margin-block-start\", \"margin-bottom\", \"margin-inline-end\", \"margin-inline-start\", \"margin-left\", \"margin-right\", \"margin-top\", \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"mask-type\", \"max-block-size\", \"max-height\", \"max-inline-size\", \"max-width\", \"min-block-size\", \"min-height\", \"min-inline-size\", \"min-width\", \"mix-blend-mode\", \"motion\", \"motion-offset\", \"motion-path\", \"motion-rotation\", \"-moz-animation\", \"-moz-animation-delay\", \"-moz-animation-direction\", \"-moz-animation-duration\", \"-moz-animation-iteration-count\", \"-moz-animation-name\", \"-moz-animation-play-state\", \"-moz-animation-timing-function\", \"-moz-appearance\", \"-moz-backface-visibility\", \"-moz-background-clip\", \"-moz-background-inline-policy\", \"-moz-background-origin\", \"-moz-border-bottom-colors\", \"-moz-border-image\", \"-moz-border-left-colors\", \"-moz-border-right-colors\", \"-moz-border-top-colors\", \"-moz-box-align\", \"-moz-box-direction\", \"-moz-box-flex\", \"-moz-box-flexgroup\", \"-moz-box-ordinal-group\", \"-moz-box-orient\", \"-moz-box-pack\", \"-moz-box-sizing\", \"-moz-column-count\", \"-moz-column-gap\", \"-moz-column-rule\", \"-moz-column-rule-color\", \"-moz-column-rule-style\", \"-moz-column-rule-width\", \"-moz-columns\", \"-moz-column-width\", \"-moz-font-feature-settings\", \"-moz-hyphens\", \"-moz-perspective\", \"-moz-perspective-origin\", \"-moz-text-align-last\", \"-moz-text-decoration-color\", \"-moz-text-decoration-line\", \"-moz-text-decoration-style\", \"-moz-text-size-adjust\", \"-moz-transform\", \"-moz-transform-origin\", \"-moz-transition\", \"-moz-transition-delay\", \"-moz-transition-duration\", \"-moz-transition-property\", \"-moz-transition-timing-function\", \"-moz-user-focus\", \"-moz-user-select\", \"-ms-accelerator\", \"-ms-behavior\", \"-ms-block-progression\", \"-ms-content-zoom-chaining\", \"-ms-content-zooming\", \"-ms-content-zoom-limit\", \"-ms-content-zoom-limit-max\", \"-ms-content-zoom-limit-min\", \"-ms-content-zoom-snap\", \"-ms-content-zoom-snap-points\", \"-ms-content-zoom-snap-type\", \"-ms-filter\", \"-ms-flex\", \"-ms-flex-align\", \"-ms-flex-direction\", \"-ms-flex-flow\", \"-ms-flex-item-align\", \"-ms-flex-line-pack\", \"-ms-flex-order\", \"-ms-flex-pack\", \"-ms-flex-wrap\", \"-ms-flow-from\", \"-ms-flow-into\", \"-ms-grid-column\", \"-ms-grid-column-align\", \"-ms-grid-columns\", \"-ms-grid-column-span\", \"-ms-grid-layer\", \"-ms-grid-row\", \"-ms-grid-row-align\", \"-ms-grid-rows\", \"-ms-grid-row-span\", \"-ms-high-contrast-adjust\", \"-ms-hyphenate-limit-chars\", \"-ms-hyphenate-limit-lines\", \"-ms-hyphenate-limit-zone\", \"-ms-hyphens\", \"-ms-ime-mode\", \"-ms-interpolation-mode\", \"-ms-layout-grid\", \"-ms-layout-grid-char\", \"-ms-layout-grid-line\", \"-ms-layout-grid-mode\", \"-ms-layout-grid-type\", \"-ms-line-break\", \"-ms-overflow-style\", \"-ms-perspective\", \"-ms-perspective-origin\", \"-ms-perspective-origin-x\", \"-ms-perspective-origin-y\", \"-ms-progress-appearance\", \"-ms-scrollbar-3dlight-color\", \"-ms-scrollbar-arrow-color\", \"-ms-scrollbar-base-color\", \"-ms-scrollbar-darkshadow-color\", \"-ms-scrollbar-face-color\", \"-ms-scrollbar-highlight-color\", \"-ms-scrollbar-shadow-color\", \"-ms-scrollbar-track-color\", \"-ms-scroll-chaining\", \"-ms-scroll-limit\", \"-ms-scroll-limit-x-max\", \"-ms-scroll-limit-x-min\", \"-ms-scroll-limit-y-max\", \"-ms-scroll-limit-y-min\", \"-ms-scroll-rails\", \"-ms-scroll-snap-points-x\", \"-ms-scroll-snap-points-y\", \"-ms-scroll-snap-type\", \"-ms-scroll-snap-x\", \"-ms-scroll-snap-y\", \"-ms-scroll-translation\", \"-ms-text-align-last\", \"-ms-text-autospace\", \"-ms-text-combine-horizontal\", \"-ms-text-justify\", \"-ms-text-kashida-space\", \"-ms-text-overflow\", \"-ms-text-size-adjust\", \"-ms-text-underline-position\", \"-ms-touch-action\", \"-ms-touch-select\", \"-ms-transform\", \"-ms-transform-origin\", \"-ms-transform-origin-x\", \"-ms-transform-origin-y\", \"-ms-transform-origin-z\", \"-ms-user-select\", \"-ms-word-break\", \"-ms-word-wrap\", \"-ms-wrap-flow\", \"-ms-wrap-margin\", \"-ms-wrap-through\", \"-ms-writing-mode\", \"-ms-zoom\", \"-ms-zoom-animation\", \"nav-down\", \"nav-index\", \"nav-left\", \"nav-right\", \"nav-up\", \"negative\", \"-o-animation\", \"-o-animation-delay\", \"-o-animation-direction\", \"-o-animation-duration\", \"-o-animation-fill-mode\", \"-o-animation-iteration-count\", \"-o-animation-name\", \"-o-animation-play-state\", \"-o-animation-timing-function\", \"object-fit\", \"object-position\", \"-o-border-image\", \"-o-object-fit\", \"-o-object-position\", \"opacity\", \"order\", \"orphans\", \"-o-table-baseline\", \"-o-tab-size\", \"-o-text-overflow\", \"-o-transform\", \"-o-transform-origin\", \"-o-transition\", \"-o-transition-delay\", \"-o-transition-duration\", \"-o-transition-property\", \"-o-transition-timing-function\", \"offset-block-end\", \"offset-block-start\", \"offset-inline-end\", \"offset-inline-start\", \"outline\", \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\", \"overflow\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\", \"pad\", \"padding\", \"padding-bottom\", \"padding-block-end\", \"padding-block-start\", \"padding-inline-end\", \"padding-inline-start\", \"padding-left\", \"padding-right\", \"padding-top\", \"page-break-after\", \"page-break-before\", \"page-break-inside\", \"paint-order\", \"perspective\", \"perspective-origin\", \"pointer-events\", \"position\", \"prefix\", \"quotes\", \"range\", \"resize\", \"right\", \"ruby-align\", \"ruby-overhang\", \"ruby-position\", \"ruby-span\", \"scrollbar-3dlight-color\", \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-darkshadow-color\", \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\", \"scrollbar-track-color\", \"scroll-behavior\", \"scroll-snap-coordinate\", \"scroll-snap-destination\", \"scroll-snap-points-x\", \"scroll-snap-points-y\", \"scroll-snap-type\", \"shape-image-threshold\", \"shape-margin\", \"shape-outside\", \"shape-rendering\", \"size\", \"src\", \"stop-color\", \"stop-opacity\", \"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\", \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"suffix\", \"system\", \"symbols\", \"table-layout\", \"tab-size\", \"text-align\", \"text-align-last\", \"text-anchor\", \"text-decoration\", \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-style\", \"text-indent\", \"text-justify\", \"text-orientation\", \"text-overflow\", \"text-rendering\", \"text-shadow\", \"text-transform\", \"text-underline-position\", \"top\", \"touch-action\", \"transform\", \"transform-origin\", \"transform-style\", \"transition\", \"transition-delay\", \"transition-duration\", \"transition-property\", \"transition-timing-function\", \"unicode-bidi\", \"unicode-range\", \"user-select\", \"vertical-align\", \"visibility\", \"-webkit-animation\", \"-webkit-animation-delay\", \"-webkit-animation-direction\", \"-webkit-animation-duration\", \"-webkit-animation-fill-mode\", \"-webkit-animation-iteration-count\", \"-webkit-animation-name\", \"-webkit-animation-play-state\", \"-webkit-animation-timing-function\", \"-webkit-appearance\", \"-webkit-backdrop-filter\", \"-webkit-backface-visibility\", \"-webkit-background-clip\", \"-webkit-background-composite\", \"-webkit-background-origin\", \"-webkit-border-image\", \"-webkit-box-align\", \"-webkit-box-direction\", \"-webkit-box-flex\", \"-webkit-box-flex-group\", \"-webkit-box-ordinal-group\", \"-webkit-box-orient\", \"-webkit-box-pack\", \"-webkit-box-reflect\", \"-webkit-box-sizing\", \"-webkit-break-after\", \"-webkit-break-before\", \"-webkit-break-inside\", \"-webkit-column-break-after\", \"-webkit-column-break-before\", \"-webkit-column-break-inside\", \"-webkit-column-count\", \"-webkit-column-gap\", \"-webkit-column-rule\", \"-webkit-column-rule-color\", \"-webkit-column-rule-style\", \"-webkit-column-rule-width\", \"-webkit-columns\", \"-webkit-column-span\", \"-webkit-column-width\", \"-webkit-filter\", \"-webkit-flow-from\", \"-webkit-flow-into\", \"-webkit-font-feature-settings\", \"-webkit-hyphens\", \"-webkit-line-break\", \"-webkit-margin-bottom-collapse\", \"-webkit-margin-collapse\", \"-webkit-margin-start\", \"-webkit-margin-top-collapse\", \"-webkit-mask-clip\", \"-webkit-mask-image\", \"-webkit-mask-origin\", \"-webkit-mask-repeat\", \"-webkit-mask-size\", \"-webkit-nbsp-mode\", \"-webkit-overflow-scrolling\", \"-webkit-padding-start\", \"-webkit-perspective\", \"-webkit-perspective-origin\", \"-webkit-region-fragment\", \"-webkit-tap-highlight-color\", \"-webkit-text-fill-color\", \"-webkit-text-size-adjust\", \"-webkit-text-stroke\", \"-webkit-text-stroke-color\", \"-webkit-text-stroke-width\", \"-webkit-touch-callout\", \"-webkit-transform\", \"-webkit-transform-origin\", \"-webkit-transform-origin-x\", \"-webkit-transform-origin-y\", \"-webkit-transform-origin-z\", \"-webkit-transform-style\", \"-webkit-transition\", \"-webkit-transition-delay\", \"-webkit-transition-duration\", \"-webkit-transition-property\", \"-webkit-transition-timing-function\", \"-webkit-user-drag\", \"-webkit-user-modify\", \"-webkit-user-select\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\", \"word-spacing\", \"word-wrap\", \"writing-mode\", \"z-index\", \"zoom\"]\n};\nvar htmlData = {\n    \"tags\": [\n        \"body\", \"head\", \"html\",\n        \"address\", \"blockquote\", \"dd\", \"div\", \"section\", \"article\", \"aside\", \"header\", \"footer\", \"nav\", \"menu\", \"dl\", \"dt\", \"fieldset\", \"form\", \"frame\", \"frameset\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"iframe\", \"noframes\", \"object\", \"ol\", \"p\", \"ul\", \"applet\", \"center\", \"dir\", \"hr\", \"pre\",\n        \"a\", \"abbr\", \"acronym\", \"area\", \"b\", \"base\", \"basefont\", \"bdo\", \"big\", \"br\", \"button\", \"caption\", \"cite\", \"code\", \"col\", \"colgroup\", \"del\", \"dfn\", \"em\", \"font\", \"i\", \"img\", \"input\", \"ins\", \"isindex\", \"kbd\", \"label\", \"legend\", \"li\", \"link\", \"map\", \"meta\", \"noscript\", \"optgroup\", \"option\", \"param\", \"q\", \"s\", \"samp\", \"script\", \"select\", \"small\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"sup\", \"table\", \"tbody\", \"td\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"title\", \"tr\", \"tt\", \"u\", \"var\",\n        \"canvas\", \"main\", \"figure\", \"plaintext\", \"figcaption\", \"hgroup\", \"details\", \"summary\"\n    ]\n};\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar snippetKeyCache = new Map();\nvar markupSnippetKeys;\nvar stylesheetCustomSnippetsKeyCache = new Map();\nvar htmlAbbreviationStartRegex = /^[a-z,A-Z,!,(,[,#,\\.\\{]/;\n// take off { for jsx because it interferes with the language\nvar jsxAbbreviationStartRegex = /^[a-z,A-Z,!,(,[,#,\\.]/;\nvar cssAbbreviationRegex = /^-?[a-z,A-Z,!,@,#]/;\nvar htmlAbbreviationRegex = /[a-z,A-Z\\.]/;\nvar commonlyUsedTags = __spreadArray(__spreadArray([], htmlData.tags, true), ['lorem'], false);\nvar bemFilterSuffix = 'bem';\nvar filterDelimitor = '|';\nvar trimFilterSuffix = 't';\nvar commentFilterSuffix = 'c';\nvar maxFilters = 3;\n/**\n * Returns all applicable emmet expansions for abbreviation at given position in a CompletionList\n * @param model TextModel in which completions are requested\n * @param position Position in the document at which completions are requested\n * @param syntax Emmet supported language\n * @param emmetConfig Emmet Configurations as derived from VS Code\n */\nfunction doComplete(monaco, model, position, syntax, emmetConfig) {\n    var _a;\n    var isStyleSheetRes = isStyleSheet(syntax);\n    // Fetch markupSnippets so that we can provide possible abbreviation completions\n    // For example, when text at position is `a`, completions should return `a:blank`, `a:link`, `acr` etc.\n    if (!isStyleSheetRes) {\n        if (!snippetKeyCache.has(syntax)) {\n            var registry = getDefaultSnippets(syntax);\n            snippetKeyCache.set(syntax, Object.keys(registry));\n        }\n        markupSnippetKeys = (_a = snippetKeyCache.get(syntax)) !== null && _a !== void 0 ? _a : [];\n    }\n    var extractOptions = {\n        lookAhead: !isStyleSheetRes,\n        type: getSyntaxType(syntax),\n    };\n    var extractedValue = extractAbbreviation(monaco, model, position, extractOptions);\n    if (!extractedValue)\n        return;\n    var abbreviationRange = extractedValue.abbreviationRange, abbreviation = extractedValue.abbreviation, currentLineTillPosition = extractedValue.currentLineTillPosition, filter = extractedValue.filter;\n    var currentWord = getCurrentWord(currentLineTillPosition);\n    // Don't attempt to expand open tags\n    if (currentWord === abbreviation && currentLineTillPosition.endsWith(\"<\".concat(abbreviation)) && !isStyleSheetRes) {\n        return;\n    }\n    var expandOptions = getExpandOptions(syntax, filter);\n    var expandedText = '';\n    var expandedAbbr;\n    var completionItems = [];\n    // Create completion item after expanding given abbreviation\n    // if abbreviation is valid and expanded value is not noise\n    var createExpandedAbbr = function (syntax, abbr) {\n        if (!isAbbreviationValid(syntax, abbreviation))\n            return;\n        try {\n            expandedText = expandAbbreviation$1(abbr, expandOptions);\n            // manually patch https://github.com/microsoft/vscode/issues/120245 for now\n            if (isStyleSheetRes && '!important'.startsWith(abbr)) {\n                expandedText = '!important';\n            }\n        }\n        catch (e) { }\n        if (!expandedText || isExpandedTextNoise(syntax, abbr, expandedText, expandOptions.options)) {\n            return;\n        }\n        expandedAbbr = {\n            kind: monaco.languages.CompletionItemKind.Property,\n            label: abbreviation + (filter ? '|' + filter.replace(',', '|') : ''),\n            documentation: replaceTabStopsWithCursors(expandedText),\n            detail: 'Emmet abbreviation',\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            range: abbreviationRange,\n            insertText: escapeNonTabStopDollar(addFinalTabStop(expandedText)),\n        };\n        completionItems = [expandedAbbr];\n    };\n    createExpandedAbbr(syntax, abbreviation);\n    if (isStyleSheetRes) {\n        // When abbr is longer than usual emmet snippets and matches better with existing css property, then no emmet\n        if (abbreviation.length > 4 && cssData.properties.some(function (x) { return x.startsWith(abbreviation); })) {\n            return { suggestions: [], incomplete: true };\n        }\n        if (expandedAbbr && expandedText.length) {\n            expandedAbbr.range = abbreviationRange;\n            expandedAbbr.insertText = escapeNonTabStopDollar(addFinalTabStop(expandedText));\n            expandedAbbr.documentation = replaceTabStopsWithCursors(expandedText);\n            expandedAbbr.label = removeTabStops(expandedText);\n            expandedAbbr.filterText = abbreviation;\n            // Custom snippets should show up in completions if abbreviation is a prefix\n            var stylesheetCustomSnippetsKeys = stylesheetCustomSnippetsKeyCache.has(syntax)\n                ? stylesheetCustomSnippetsKeyCache.get(syntax)\n                : stylesheetCustomSnippetsKeyCache.get('css');\n            completionItems = makeSnippetSuggestion(monaco, stylesheetCustomSnippetsKeys !== null && stylesheetCustomSnippetsKeys !== void 0 ? stylesheetCustomSnippetsKeys : [], abbreviation, abbreviation, abbreviationRange, expandOptions, 'Emmet Custom Snippet', false);\n            if (!completionItems.find(function (x) { return x.insertText === (expandedAbbr === null || expandedAbbr === void 0 ? void 0 : expandedAbbr.insertText); })) {\n                // Fix for https://github.com/Microsoft/vscode/issues/28933#issuecomment-309236902\n                // When user types in propertyname, emmet uses it to match with snippet names, resulting in width -> widows or font-family -> font: family\n                // Filter out those cases here.\n                var abbrRegex = new RegExp('.*' +\n                    abbreviation\n                        .split('')\n                        .map(function (x) { return (x === '$' || x === '+' ? '\\\\' + x : x); })\n                        .join('.*') +\n                    '.*', 'i');\n                if (/\\d/.test(abbreviation) || abbrRegex.test(expandedAbbr.label)) {\n                    completionItems.push(expandedAbbr);\n                }\n            }\n        }\n    }\n    else {\n        var tagToFindMoreSuggestionsFor = abbreviation;\n        var newTagMatches = abbreviation.match(/(>|\\+)([\\w:-]+)$/);\n        if (newTagMatches && newTagMatches.length === 3) {\n            tagToFindMoreSuggestionsFor = newTagMatches[2];\n        }\n        if (syntax !== 'xml') {\n            var commonlyUsedTagSuggestions = makeSnippetSuggestion(monaco, commonlyUsedTags, tagToFindMoreSuggestionsFor, abbreviation, abbreviationRange, expandOptions, 'Emmet Abbreviation');\n            completionItems = completionItems.concat(commonlyUsedTagSuggestions);\n        }\n        if (emmetConfig.showAbbreviationSuggestions === true) {\n            var abbreviationSuggestions = makeSnippetSuggestion(monaco, markupSnippetKeys.filter(function (x) { return !commonlyUsedTags.includes(x); }), tagToFindMoreSuggestionsFor, abbreviation, abbreviationRange, expandOptions, 'Emmet Abbreviation');\n            // Workaround for the main expanded abbr not appearing before the snippet suggestions\n            if (expandedAbbr && abbreviationSuggestions.length > 0 && tagToFindMoreSuggestionsFor !== abbreviation) {\n                expandedAbbr.sortText = '0' + expandedAbbr.label;\n                abbreviationSuggestions.forEach(function (item) {\n                    // Workaround for snippet suggestions items getting filtered out as the complete abbr does not start with snippetKey\n                    item.filterText = abbreviation;\n                    // Workaround for the main expanded abbr not appearing before the snippet suggestions\n                    item.sortText = '9' + abbreviation;\n                });\n            }\n            completionItems = completionItems.concat(abbreviationSuggestions);\n        }\n        // https://github.com/microsoft/vscode/issues/66680\n        if (syntax === 'html' &&\n            completionItems.length >= 2 &&\n            abbreviation.includes(':') &&\n            (expandedAbbr === null || expandedAbbr === void 0 ? void 0 : expandedAbbr.insertText) === \"<\".concat(abbreviation, \">${0}</\").concat(abbreviation, \">\")) {\n            completionItems = completionItems.filter(function (item) { return item.label !== abbreviation; });\n        }\n    }\n    if (emmetConfig.showSuggestionsAsSnippets === true) {\n        completionItems.forEach(function (x) { return (x.kind = monaco.languages.CompletionItemKind.Snippet); });\n    }\n    return completionItems.length ? { suggestions: completionItems, incomplete: true } : undefined;\n}\n/**\n * Create & return snippets for snippet keys that start with given prefix\n */\nfunction makeSnippetSuggestion(monaco, snippetKeys, prefix, abbreviation, abbreviationRange, expandOptions, snippetDetail, skipFullMatch) {\n    if (skipFullMatch === void 0) { skipFullMatch = true; }\n    if (!prefix || !snippetKeys) {\n        return [];\n    }\n    var snippetCompletions = [];\n    snippetKeys.forEach(function (snippetKey) {\n        if (!snippetKey.startsWith(prefix.toLowerCase()) || (skipFullMatch && snippetKey === prefix.toLowerCase())) {\n            return;\n        }\n        var currentAbbr = abbreviation + snippetKey.substr(prefix.length);\n        var expandedAbbr;\n        try {\n            expandedAbbr = expandAbbreviation$1(currentAbbr, expandOptions);\n        }\n        catch (e) { }\n        if (!expandedAbbr) {\n            return;\n        }\n        var item = {\n            kind: monaco.languages.CompletionItemKind.Property,\n            label: prefix + snippetKey.substr(prefix.length),\n            documentation: replaceTabStopsWithCursors(expandedAbbr),\n            detail: snippetDetail,\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n            range: abbreviationRange,\n            insertText: escapeNonTabStopDollar(addFinalTabStop(expandedAbbr)),\n        };\n        snippetCompletions.push(item);\n    });\n    return snippetCompletions;\n}\nfunction getCurrentWord(currentLineTillPosition) {\n    if (currentLineTillPosition) {\n        var matches = currentLineTillPosition.match(/[\\w,:,-,\\.]*$/);\n        if (matches) {\n            return matches[0];\n        }\n    }\n}\nfunction replaceTabStopsWithCursors(expandedWord) {\n    return expandedWord.replace(/([^\\\\])\\$\\{\\d+\\}/g, '$1|').replace(/\\$\\{\\d+:([^\\}]+)\\}/g, '$1');\n}\nfunction removeTabStops(expandedWord) {\n    return expandedWord.replace(/([^\\\\])\\$\\{\\d+\\}/g, '$1').replace(/\\$\\{\\d+:([^\\}]+)\\}/g, '$1');\n}\nfunction escapeNonTabStopDollar(text) {\n    return text ? text.replace(/([^\\\\])(\\$)([^\\{])/g, '$1\\\\$2$3') : text;\n}\nfunction addFinalTabStop(text) {\n    if (!text || !text.trim()) {\n        return text;\n    }\n    var maxTabStop = -1;\n    var maxTabStopRanges = [];\n    var foundLastStop = false;\n    var replaceWithLastStop = false;\n    var i = 0;\n    var n = text.length;\n    try {\n        while (i < n && !foundLastStop) {\n            // Look for ${\n            if (text[i++] != '$' || text[i++] != '{') {\n                continue;\n            }\n            // Find tabstop\n            var numberStart = -1;\n            var numberEnd = -1;\n            while (i < n && /\\d/.test(text[i])) {\n                numberStart = numberStart < 0 ? i : numberStart;\n                numberEnd = i + 1;\n                i++;\n            }\n            // If ${ was not followed by a number and either } or :, then its not a tabstop\n            if (numberStart === -1 || numberEnd === -1 || i >= n || (text[i] != '}' && text[i] != ':')) {\n                continue;\n            }\n            // If ${0} was found, then break\n            var currentTabStop = text.substring(numberStart, numberEnd);\n            foundLastStop = currentTabStop === '0';\n            if (foundLastStop) {\n                break;\n            }\n            var foundPlaceholder = false;\n            if (text[i++] == ':') {\n                // TODO: Nested placeholders may break here\n                while (i < n) {\n                    if (text[i] == '}') {\n                        foundPlaceholder = true;\n                        break;\n                    }\n                    i++;\n                }\n            }\n            // Decide to replace currentTabStop with ${0} only if its the max among all tabstops and is not a placeholder\n            if (Number(currentTabStop) > Number(maxTabStop)) {\n                maxTabStop = Number(currentTabStop);\n                maxTabStopRanges = [{ numberStart: numberStart, numberEnd: numberEnd }];\n                replaceWithLastStop = !foundPlaceholder;\n            }\n            else if (Number(currentTabStop) === maxTabStop) {\n                maxTabStopRanges.push({ numberStart: numberStart, numberEnd: numberEnd });\n            }\n        }\n    }\n    catch (e) { }\n    if (replaceWithLastStop && !foundLastStop) {\n        for (var i_1 = 0; i_1 < maxTabStopRanges.length; i_1++) {\n            var rangeStart = maxTabStopRanges[i_1].numberStart;\n            var rangeEnd = maxTabStopRanges[i_1].numberEnd;\n            text = text.substr(0, rangeStart) + '0' + text.substr(rangeEnd);\n        }\n    }\n    return text;\n}\nvar emmetSnippetField = function (index, placeholder) { return \"${\".concat(index).concat(placeholder ? ':' + placeholder : '', \"}\"); };\n/** Returns whether or not syntax is a supported stylesheet syntax, like CSS */\nfunction isStyleSheet(syntax) {\n    return syntax === 'css';\n}\n/** Returns the syntax type, either markup (e.g. for HTML) or stylesheet (e.g. for CSS) */\nfunction getSyntaxType(syntax) {\n    return isStyleSheet(syntax) ? 'stylesheet' : 'markup';\n}\n/** Returns the default snippets that Emmet suggests */\nfunction getDefaultSnippets(syntax) {\n    var syntaxType = getSyntaxType(syntax);\n    var emptyUserConfig = { type: syntaxType, syntax: syntax };\n    var resolvedConfig = resolveConfig(emptyUserConfig);\n    // https://github.com/microsoft/vscode/issues/97632\n    // don't return markup (HTML) snippets for XML\n    return syntax === 'xml' ? {} : resolvedConfig.snippets;\n}\nfunction getFilters(text, pos) {\n    var filter;\n    for (var i = 0; i < maxFilters; i++) {\n        if (text.endsWith(\"\".concat(filterDelimitor).concat(bemFilterSuffix), pos)) {\n            pos -= bemFilterSuffix.length + 1;\n            filter = filter ? bemFilterSuffix + ',' + filter : bemFilterSuffix;\n        }\n        else if (text.endsWith(\"\".concat(filterDelimitor).concat(commentFilterSuffix), pos)) {\n            pos -= commentFilterSuffix.length + 1;\n            filter = filter ? commentFilterSuffix + ',' + filter : commentFilterSuffix;\n        }\n        else if (text.endsWith(\"\".concat(filterDelimitor).concat(trimFilterSuffix), pos)) {\n            pos -= trimFilterSuffix.length + 1;\n            filter = filter ? trimFilterSuffix + ',' + filter : trimFilterSuffix;\n        }\n        else {\n            break;\n        }\n    }\n    return {\n        pos: pos,\n        filter: filter,\n    };\n}\n/**\n * Extracts abbreviation from the given position in the given document\n * @param model The TextModel from which abbreviation needs to be extracted\n * @param position The Position in the given document from where abbreviation needs to be extracted\n * @param options The options to pass to the @emmetio/extract-abbreviation module\n */\nfunction extractAbbreviation(monaco, model, position, options) {\n    var currentLine = model.getLineContent(position.lineNumber);\n    var currentLineTillPosition = currentLine.substr(0, position.column - 1);\n    var _a = getFilters(currentLineTillPosition, position.column - 1), pos = _a.pos, filter = _a.filter;\n    var lengthOccupiedByFilter = filter ? filter.length + 1 : 0;\n    var result = extractAbbreviation$1(currentLine, pos, options);\n    if (!result)\n        return;\n    var rangeToReplace = new monaco.Range(position.lineNumber, result.location + 1, position.lineNumber, result.location + result.abbreviation.length + lengthOccupiedByFilter + 1);\n    return {\n        abbreviationRange: rangeToReplace,\n        abbreviation: result.abbreviation,\n        currentLineTillPosition: currentLineTillPosition,\n        filter: filter,\n    };\n}\n/**\n * Returns a boolean denoting validity of given abbreviation in the context of given syntax\n * Not needed once https://github.com/emmetio/atom-plugin/issues/22 is fixed\n * @param syntax string\n * @param abbreviation string\n */\nfunction isAbbreviationValid(syntax, abbreviation) {\n    if (!abbreviation) {\n        return false;\n    }\n    if (isStyleSheet(syntax)) {\n        if (abbreviation.includes('#')) {\n            if (abbreviation.startsWith('#')) {\n                var hexColorRegex = /^#[\\d,a-f,A-F]{1,6}$/;\n                return hexColorRegex.test(abbreviation);\n            }\n            else if (commonlyUsedTags.includes(abbreviation.substring(0, abbreviation.indexOf('#')))) {\n                return false;\n            }\n        }\n        return cssAbbreviationRegex.test(abbreviation);\n    }\n    if (abbreviation.startsWith('!')) {\n        return !/[^!]/.test(abbreviation);\n    }\n    // Its common for users to type (sometextinsidebrackets), this should not be treated as an abbreviation\n    // Grouping in abbreviation is valid only if it's inside a text node or preceeded/succeeded with one of the symbols for nesting, sibling, repeater or climb up\n    // Also, cases such as `span[onclick=\"alert();\"]` are valid\n    if ((/\\(/.test(abbreviation) || /\\)/.test(abbreviation)) &&\n        !/\\{[^\\}\\{]*[\\(\\)]+[^\\}\\{]*\\}(?:[>\\+\\*\\^]|$)/.test(abbreviation) &&\n        !/\\(.*\\)[>\\+\\*\\^]/.test(abbreviation) &&\n        !/\\[[^\\[\\]\\(\\)]+=\".*\"\\]/.test(abbreviation) &&\n        !/[>\\+\\*\\^]\\(.*\\)/.test(abbreviation)) {\n        return false;\n    }\n    if (syntax === 'jsx') {\n        return jsxAbbreviationStartRegex.test(abbreviation) && htmlAbbreviationRegex.test(abbreviation);\n    }\n    return htmlAbbreviationStartRegex.test(abbreviation) && htmlAbbreviationRegex.test(abbreviation);\n}\nfunction isExpandedTextNoise(syntax, abbreviation, expandedText, options) {\n    var _a, _b;\n    // Unresolved css abbreviations get expanded to a blank property value\n    // Eg: abc -> abc: ; or abc:d -> abc: d; which is noise if it gets suggested for every word typed\n    if (isStyleSheet(syntax) && options) {\n        var between = (_a = options['stylesheet.between']) !== null && _a !== void 0 ? _a : ': ';\n        var after = (_b = options['stylesheet.after']) !== null && _b !== void 0 ? _b : ';';\n        // Remove overlapping between `abbreviation` and `between`, if any\n        var endPrefixIndex = abbreviation.indexOf(between[0], Math.max(abbreviation.length - between.length, 0));\n        endPrefixIndex = endPrefixIndex >= 0 ? endPrefixIndex : abbreviation.length;\n        var abbr = abbreviation.substring(0, endPrefixIndex);\n        return (expandedText === \"\".concat(abbr).concat(between, \"${0}\").concat(after) ||\n            expandedText.replace(/\\s/g, '') === abbreviation.replace(/\\s/g, '') + after);\n    }\n    // we don't want common html tags suggested for xml\n    if (syntax === 'xml' && commonlyUsedTags.some(function (tag) { return tag.startsWith(abbreviation.toLowerCase()); })) {\n        return true;\n    }\n    if (commonlyUsedTags.includes(abbreviation.toLowerCase()) || markupSnippetKeys.includes(abbreviation)) {\n        return false;\n    }\n    // Custom tags can have - or :\n    if (/[-,:]/.test(abbreviation) && !/--|::/.test(abbreviation) && !abbreviation.endsWith(':')) {\n        return false;\n    }\n    // Its common for users to type some text and end it with period, this should not be treated as an abbreviation\n    // Else it becomes noise.\n    // When user just types '.', return the expansion\n    // Otherwise emmet loses change to participate later\n    // For example in `.foo`. See https://github.com/Microsoft/vscode/issues/66013\n    if (abbreviation === '.') {\n        return false;\n    }\n    var dotMatches = abbreviation.match(/^([a-z,A-Z,\\d]*)\\.$/);\n    if (dotMatches) {\n        // Valid html tags such as `div.`\n        if (dotMatches[1] && htmlData.tags.includes(dotMatches[1])) {\n            return false;\n        }\n        return true;\n    }\n    // Fix for https://github.com/microsoft/vscode/issues/89746\n    // PascalCase tags are common in jsx code, which should not be treated as noise.\n    // Eg: MyAwesomComponent -> <MyAwesomComponent></MyAwesomComponent>\n    if (syntax === 'jsx' && /^([A-Z][A-Za-z0-9]*)+$/.test(abbreviation)) {\n        return false;\n    }\n    // Unresolved html abbreviations get expanded as if it were a tag\n    // Eg: abc -> <abc></abc> which is noise if it gets suggested for every word typed\n    return expandedText.toLowerCase() === \"<\".concat(abbreviation.toLowerCase(), \">${1}</\").concat(abbreviation.toLowerCase(), \">\");\n}\n/**\n * Returns options to be used by emmet\n */\nfunction getExpandOptions(syntax, filter) {\n    var type = getSyntaxType(syntax);\n    var filters = filter ? filter.split(',').map(function (x) { return x.trim(); }) : [];\n    var bemEnabled = filters.includes('bem');\n    var commentEnabled = filters.includes('c');\n    var combinedOptions = {\n        'output.formatSkip': ['html'],\n        'output.formatForce': ['body'],\n        'output.field': emmetSnippetField,\n        'output.inlineBreak': 0,\n        'output.compactBoolean': false,\n        'output.reverseAttributes': false,\n        'markup.href': true,\n        'comment.enabled': commentEnabled,\n        'comment.trigger': ['id', 'class'],\n        'comment.before': '',\n        'comment.after': '\\n<!-- /[#ID][.CLASS] -->',\n        'bem.enabled': bemEnabled,\n        'bem.element': '__',\n        'bem.modifier': '_',\n        'jsx.enabled': syntax === 'jsx',\n        'stylesheet.shortHex': true,\n        'stylesheet.between': syntax === 'stylus' ? ' ' : ': ',\n        'stylesheet.after': syntax === 'sass' || syntax === 'stylus' ? '' : ';',\n        'stylesheet.intUnit': 'px',\n        'stylesheet.floatUnit': 'em',\n        'stylesheet.unitAliases': {\n            e: 'em',\n            p: '%',\n            x: 'ex',\n            r: 'rem',\n        },\n        'stylesheet.fuzzySearchMinScore': 0.3,\n        'output.format': true,\n        'output.selfClosingStyle': 'html',\n    };\n    return {\n        type: type,\n        options: combinedOptions,\n        variables: {},\n        snippets: {},\n        syntax: syntax,\n        // context: null,\n        text: undefined,\n        maxRepeat: 1000,\n        // cache: null\n    };\n}\n/**\n * Expands given abbreviation using given options\n * @param abbreviation string or parsed abbreviation\n * @param config options used by the @emmetio/expand-abbreviation module to expand given abbreviation\n */\nfunction expandAbbreviation(abbreviation, config) {\n    var expandedText;\n    var resolvedConfig = resolveConfig(config);\n    if (config.type === 'stylesheet') {\n        if (typeof abbreviation === 'string') {\n            expandedText = expandAbbreviation$1(abbreviation, resolvedConfig);\n        }\n        else {\n            expandedText = css(abbreviation, resolvedConfig);\n        }\n    }\n    else {\n        if (typeof abbreviation === 'string') {\n            expandedText = expandAbbreviation$1(abbreviation, resolvedConfig);\n        }\n        else {\n            expandedText = stringify(abbreviation, resolvedConfig);\n        }\n    }\n    return escapeNonTabStopDollar(addFinalTabStop(expandedText));\n}\n\nfunction isValidEmmetToken(tokens, index, syntax, language) {\n    var currentTokenType = tokens[index].type;\n    if (syntax === 'html') {\n        // prevent emmet triggered within attributes\n        return ((currentTokenType === '' && (index === 0 || tokens[index - 1].type === 'delimiter.html')) ||\n            // #7 compatible with https://github.com/NeekSandhu/monaco-textmate\n            tokens[0].type === 'text.html.basic');\n    }\n    if (syntax === 'css') {\n        if (currentTokenType === '')\n            return true;\n        // less / scss allow nesting\n        return currentTokenType === 'tag.' + language;\n    }\n    if (syntax === 'jsx') {\n        // type must be `identifier` and not at start\n        return (!!index &&\n            ['identifier.js', 'type.identifier.js', 'identifier.ts', 'type.identifier.ts'].includes(currentTokenType));\n    }\n    return false;\n}\n// vscode did a complex node analysis, we just use monaco's built-in tokenizer\n// to achieve almost the same effect\nfunction isValidLocationForEmmetAbbreviation(model, position, syntax, language) {\n    var column = position.column, lineNumber = position.lineNumber;\n    // get current line's tokens\n    var _tokenization = \n    // monaco-editor < 0.34.0\n    model._tokenization ||\n        // monaco-editor >= 0.34.0\n        model.tokenization._tokenization;\n    var _tokenizationStateStore = _tokenization._tokenizationStateStore;\n    var _tokenizationSupport = \n    // monaco-editor >= 0.32.0\n    _tokenizationStateStore.tokenizationSupport ||\n        // monaco-editor < 0.32.0\n        _tokenization._tokenizationSupport;\n    var state = _tokenizationStateStore.getBeginState(lineNumber - 1).clone();\n    var tokenizationResult = _tokenizationSupport.tokenize(model.getLineContent(lineNumber), true, state, 0);\n    var tokens = tokenizationResult.tokens;\n    var valid = false;\n    // get token type at current column\n    for (var i = tokens.length - 1; i >= 0; i--) {\n        if (column - 1 > tokens[i].offset) {\n            valid = isValidEmmetToken(tokens, i, syntax, language);\n            break;\n        }\n    }\n    return valid;\n}\n\n// https://github.com/microsoft/vscode/blob/main/extensions/emmet/src/util.ts#L86\nvar LANGUAGE_MODES = {\n    html: ['!', '.', '}', ':', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    jade: ['!', '.', '}', ':', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    slim: ['!', '.', '}', ':', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    haml: ['!', '.', '}', ':', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    xml: ['.', '}', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    xsl: ['!', '.', '}', '*', '$', '/', ']', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    css: [':', '!', '-', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    scss: [':', '!', '-', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    sass: [':', '!', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    less: [':', '!', '-', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    stylus: [':', '!', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    javascript: ['!', '.', '}', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    typescript: ['!', '.', '}', '*', '$', ']', '/', '>', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n};\n// https://github.com/microsoft/vscode/blob/main/extensions/emmet/src/util.ts#L124\nvar MAPPED_MODES = {\n    handlebars: 'html',\n    php: 'html',\n    twig: 'html',\n};\nvar DEFAULT_CONFIG = {\n    showExpandedAbbreviation: 'always',\n    showAbbreviationSuggestions: true,\n    showSuggestionsAsSnippets: false,\n};\n/**\n * add completion provider\n * @param monaco monaco self\n * @param language added language\n * @param isMarkup is markup language\n * @param isLegalToken check whether given token is legal or not\n * @param getLegalEmmetSets get legal emmet substring from a string.\n */\nfunction registerProvider(monaco, languages, syntax) {\n    if (!monaco) {\n        console.error(\"emmet-monaco-es: 'monaco' should be either declared on window or passed as first parameter\");\n        return;\n    }\n    var providers = languages.map(function (language) {\n        return monaco.languages.registerCompletionItemProvider(language, {\n            triggerCharacters: LANGUAGE_MODES[MAPPED_MODES[language] || language],\n            provideCompletionItems: function (model, position) {\n                return isValidLocationForEmmetAbbreviation(model, position, syntax, language)\n                    ? doComplete(monaco, model, position, syntax, DEFAULT_CONFIG)\n                    : undefined;\n            },\n        });\n    });\n    return function () {\n        providers.forEach(function (provider) { return provider.dispose(); });\n    };\n}\nfunction emmetHTML(monaco, languages) {\n    if (monaco === void 0) { monaco = window.monaco; }\n    if (languages === void 0) { languages = ['html']; }\n    return registerProvider(monaco, languages, 'html');\n}\nfunction emmetCSS(monaco, languages) {\n    if (monaco === void 0) { monaco = window.monaco; }\n    if (languages === void 0) { languages = ['css']; }\n    return registerProvider(monaco, languages, 'css');\n}\nfunction emmetJSX(monaco, languages) {\n    if (monaco === void 0) { monaco = window.monaco; }\n    if (languages === void 0) { languages = ['javascript']; }\n    return registerProvider(monaco, languages, 'jsx');\n}\n\nexport { emmetCSS, emmetHTML, emmetJSX, expandAbbreviation };\n", "import { IDisposable } from \"monaco-editor\";\nimport { PackageFrontendConfiguration } from \"../manifest\";\n\nexport const registerDocumentationForFusionObjects = (\n    monaco: typeof import(\"monaco-editor\"),\n    fusionObjects: PackageFrontendConfiguration[\"afx\"][\"fusionObjects\"],\n    languageId: string\n): IDisposable | undefined => {\n    const fusionObjectsWithDoc = Object.entries(fusionObjects)\n        .filter(([, { documentation }]) => documentation)\n        .map(([name]) => name);\n\n    if (!fusionObjectsWithDoc.length) {\n        return;\n    }\n\n    // - we look at the current line\n    //      and and use a from all fusionObjects composed regex\n    //      too see if there were any matches\n    // - for each map we look if it is in range of the mouse cursor.\n    // - if so we return a doc note for the fusionObject\n\n    const regex = new RegExp(`<(${fusionObjectsWithDoc.join(\"|\")})\\\\b`, \"g\");\n\n    return monaco.languages.registerHoverProvider(languageId, {\n        provideHover(model, position) {\n            const currentLine = position.lineNumber;\n            const currentCursor = position.column;\n\n            const line = model.getLineContent(currentLine);\n            if (line.trim() === \"\") {\n                return null;\n            }\n\n            const matches = line.matchAll(regex);\n\n            for (const match of matches) {\n                const [, matchedTag] = match;\n                const startPosition = match.index! + 1 + 1; // +1 to remove < // +1 to convert to column\n                const endPosition = startPosition + matchedTag.length;\n                // is in range?\n                if (\n                    currentCursor >= startPosition &&\n                    currentCursor <= endPosition\n                ) {\n                    return {\n                        range: new monaco.Range(\n                            currentLine,\n                            startPosition,\n                            currentLine,\n                            endPosition\n                        ),\n                        contents: [\n                            {\n                                value: fusionObjects[matchedTag].documentation!,\n                            },\n                        ],\n                    };\n                }\n            }\n            return null;\n        },\n    });\n};\n", "import type * as Monaco from 'monaco-editor'\n\ninterface Token {\n  readonly offset: number\n  readonly type: string\n  readonly language: string\n}\n\nfunction isValidEmmetToken(tokens: Token[], index: number, syntax: string, language: string): boolean {\n  const currentTokenType = tokens[index].type\n\n  if (syntax === 'html') {\n    // prevent emmet triggered within attributes\n    return (\n      (currentTokenType === '' && (index === 0 || tokens[index - 1].type === 'delimiter.html')) ||\n      // #7 compatible with https://github.com/NeekSandhu/monaco-textmate\n      tokens[0].type === 'text.html.basic'\n    )\n  }\n\n  if (syntax === 'css') {\n    if (currentTokenType === '') return true\n    // less / scss allow nesting\n    return currentTokenType === 'tag.' + language\n  }\n\n  if (syntax === 'jsx') {\n    // type must be `identifier` and not at start\n    return (\n      !!index &&\n      ['identifier.js', 'type.identifier.js', 'identifier.ts', 'type.identifier.ts'].includes(currentTokenType)\n    )\n  }\n\n  return false\n}\n\n// vscode did a complex node analysis, we just use monaco's built-in tokenizer\n// to achieve almost the same effect\nexport function isValidLocationForEmmetAbbreviation(\n  model: Monaco.editor.ITextModel,\n  position: Monaco.Position,\n  syntax: string,\n  language: string,\n) {\n  const { column, lineNumber } = position\n\n  // get current line's tokens\n  const _tokenization =\n    // monaco-editor < 0.34.0\n    (model as any)._tokenization ||\n    // monaco-editor >= 0.34.0\n    (model as any).tokenization._tokenization\n  const _tokenizationStateStore = _tokenization._tokenizationStateStore\n  const _tokenizationSupport =\n    // monaco-editor >= 0.32.0\n    _tokenizationStateStore.tokenizationSupport ||\n    // monaco-editor < 0.32.0\n    _tokenization._tokenizationSupport\n\n  const state = _tokenizationStateStore.getBeginState(lineNumber - 1).clone()\n  const tokenizationResult = _tokenizationSupport.tokenize(model.getLineContent(lineNumber), true, state, 0)\n  const tokens: Token[] = tokenizationResult.tokens\n\n  let valid = false\n\n  // get token type at current column\n  for (let i = tokens.length - 1; i >= 0; i--) {\n    if (column - 1 > tokens[i].offset) {\n      valid = isValidEmmetToken(tokens, i, syntax, language)\n\n      break\n    }\n  }\n\n  return valid\n}\n", "import { IDisposable } from \"monaco-editor\";\nimport { PackageFrontendConfiguration } from \"../manifest\";\n// not api see https://github.com/troy351/emmet-monaco-es/issues/102\nimport { isValidLocationForEmmetAbbreviation } from \"emmet-monaco-es/src/abbreviationActions\";\n\nexport const registerCompletionForFusionObjects = (\n    monaco: typeof import(\"monaco-editor\"),\n    fusionObjects: PackageFrontendConfiguration[\"afx\"][\"fusionObjects\"],\n    languageId: string\n): IDisposable | undefined => {\n    const fusionObjectsWithSnippet = Object.entries(fusionObjects).filter(\n        ([, { snippet }]) => snippet\n    );\n\n    if (!fusionObjectsWithSnippet.length) {\n        return;\n    }\n\n    return monaco.languages.registerCompletionItemProvider(languageId, {\n        triggerCharacters: [\n            \"!\",\n            \".\",\n            \"}\",\n            \":\",\n            \"*\",\n            \"$\",\n            \"]\",\n            \"/\",\n            \">\",\n            \"0\",\n            \"1\",\n            \"2\",\n            \"3\",\n            \"4\",\n            \"5\",\n            \"6\",\n            \"7\",\n            \"8\",\n            \"9\",\n        ],\n        provideCompletionItems(model, position) {\n            const word = model.getWordUntilPosition(position);\n\n            const range = {\n                startLineNumber: position.lineNumber,\n                endLineNumber: position.lineNumber,\n                startColumn: word.startColumn,\n                endColumn: word.endColumn,\n            };\n\n            if (\n                !isValidLocationForEmmetAbbreviation(\n                    model,\n                    position,\n                    \"html\",\n                    \"html\"\n                )\n            ) {\n                return;\n            }\n\n            return {\n                suggestions: fusionObjectsWithSnippet.map(\n                    ([label, { documentation, snippet }]) => ({\n                        label,\n                        range,\n                        insertText: snippet!,\n                        insertTextRules:\n                            monaco.languages.CompletionItemInsertTextRule\n                                .InsertAsSnippet,\n                        kind: monaco.languages.CompletionItemKind.Snippet,\n                        documentation,\n                    })\n                ),\n            };\n        },\n    });\n};\n", "import { PackageFrontendConfiguration } from \"../manifest\";\nimport * as monaco from \"monaco-editor\";\nimport {\n    configureMonacoTailwindcss,\n    MonacoTailwindcss,\n} from \"monaco-tailwindcss\";\nimport { emmetHTML, emmetCSS } from \"emmet-monaco-es\";\nimport {\n    conf as htmlConf,\n    language as htmlLanguage,\n    // @ts-expect-error\n} from \"monaco-editor/esm/vs/basic-languages/html/html\";\nimport { registerDocumentationForFusionObjects } from \"./registerDocumentationForFusionObjects\";\nimport { registerCompletionForFusionObjects } from \"./registerCompletionForFusionObjects\";\nimport { afxMappedLanguageId } from \"./afxMappedLanguageId\";\n\ndeclare global {\n    interface Window {\n        MonacoEnvironment?: monaco.Environment;\n    }\n}\n\nexport const initializeMonacoFromConfig = (\n    packageConfig: PackageFrontendConfiguration\n): {\n    monaco: typeof monaco;\n    monacoTailwindCss?: MonacoTailwindcss;\n} => {\n    window.MonacoEnvironment = {\n        getWorkerUrl(_workerId, label) {\n            switch (label) {\n                case \"json\":\n                    return new URL(\"json.worker.js\", import.meta.url).pathname;\n                case \"css\":\n                case \"scss\":\n                case \"less\":\n                    return new URL(\"css.worker.js\", import.meta.url).pathname;\n                case \"html\":\n                case \"handlebars\":\n                    return new URL(\"html.worker.js\", import.meta.url).pathname;\n                case \"typescript\":\n                case \"javascript\":\n                    return new URL(\"ts.worker.js\", import.meta.url).pathname;\n                case \"editorWorkerService\":\n                    return new URL(\"editor.worker.js\", import.meta.url)\n                        .pathname;\n                case \"tailwindcss\":\n                    return new URL(\n                        \"configTailwindcss.worker.js\",\n                        import.meta.url\n                    ).pathname;\n                default:\n                    throw new Error(`Unknown label ${label}`);\n            }\n        },\n    };\n\n    monaco.languages.register({\n        id: afxMappedLanguageId,\n        extensions: [\".afx\"],\n        aliases: [\"AFX\", \"afx\"],\n        mimetypes: [\"text/html\"],\n    });\n\n    monaco.languages.registerTokensProviderFactory(afxMappedLanguageId, {\n        create() {\n            return htmlLanguage;\n        },\n    });\n    monaco.languages.setLanguageConfiguration(afxMappedLanguageId, htmlConf);\n\n    const fusionObjectsConfig = packageConfig.afx.fusionObjects;\n    registerDocumentationForFusionObjects(\n        monaco,\n        fusionObjectsConfig,\n        afxMappedLanguageId\n    );\n    registerCompletionForFusionObjects(\n        monaco,\n        fusionObjectsConfig,\n        afxMappedLanguageId\n    );\n\n    let monacoTailwindCss: MonacoTailwindcss | undefined;\n\n    if (packageConfig.tailwindcss.enabled) {\n        monacoTailwindCss = configureMonacoTailwindcss(monaco, {\n            languageSelector: [\"html\", afxMappedLanguageId],\n            // configTailwindcss.worker.ts handles the input.\n            tailwindConfig: packageConfig.tailwindcss.clientConfig,\n        });\n    }\n\n    emmetHTML(monaco, [\"html\", afxMappedLanguageId]);\n    emmetCSS(monaco, [\"css\", \"scss\", \"less\"]);\n\n    return {\n        monaco,\n        monacoTailwindCss,\n    };\n};\n"],
  "mappings": "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AAO,EACX,CACF,CAEA,SAASC,GACPC,EAC8B,CAC9B,OAAQA,EAAoB,CAE1B,IAAK,GACH,MAAO,IAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,IACH,MAAO,GAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,GAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,QACE,MAAO,GACX,CACF,CAEA,SAASC,GACPD,EACuB,CACvB,OAAQA,EAAoB,CAE1B,IAAK,IACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,GAET,IAAK,GACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,GACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,IAAK,IACH,MAAO,IAET,QACE,MAAO,GACX,CACF,CAEA,SAASE,GACPC,EACmB,CACnB,MAAO,CACL,YAAaN,GACXM,EAAkB,WACpB,EACA,iBAAkBA,EAAkB,gBACtC,CAC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",
  "names": ["require_formatActions", "__commonJSMin", "exports", "init_arrays", "init_cancellation", "init_errors", "init_keyCodes", "init_lifecycle", "init_editorExtensions", "init_codeEditorService", "init_characterClassifier", "init_range", "init_editorContextKeys", "init_editorWorker", "init_languageFeatures", "init_format", "init_formattingEdit", "init_nls", "init_commands", "init_contextkey", "init_instantiation", "init_progress", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "FormatOnType", "_editor", "_languageFeaturesService", "_workerService", "DisposableStore", "model", "support", "triggerChars", "CharacterSet", "ch", "text", "lastCharCode", "position", "cts", "CancellationTokenSource", "unbind", "len", "getOnTypeFormattingEdits", "edits", "isNonEmptyArray", "FormattingEdit", "alertFormattingEdits", "ILanguageFeaturesService", "IEditorWorkerService", "FormatOnPaste", "editor", "_instantiationService", "range", "formatDocumentRangesWithSelectedProvider", "Progress", "CancellationToken", "onUnexpectedError", "IInstantiationService", "FormatDocumentAction", "EditorAction", "localize", "ContextKeyExpr", "EditorContextKeys", "accessor", "instaService", "IEditorProgressService", "formatDocumentWithSelectedProvider", "FormatSelectionAction", "KeyChord", "ranges", "Range", "registerEditorContribution", "registerEditorAction", "CommandsRegistry", "ICodeEditorService", "commandService", "ICommandService", "__decorate", "__param", "__awaiter", "TreeElement", "OutlineElement", "OutlineGroup", "OutlineModel", "IOutlineModelService", "OutlineModelService", "init_outlineModel", "__esmMin", "init_arrays", "init_cancellation", "init_errors", "init_iterator", "init_map", "init_position", "init_range", "init_languageFeatureDebounce", "init_instantiation", "init_extensions", "init_model", "init_lifecycle", "init_languageFeatures", "decorators", "target", "key", "desc", "c", "d", "i", "paramIndex", "decorator", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "_a", "candidate", "container", "candidateId", "id", "element", "parent", "symbol", "label", "order", "uri", "registry", "textModel", "token", "cts", "CancellationTokenSource", "provider", "promises", "index", "group", "info", "err", "onUnexpectedExternalError", "listener", "newProvider", "equals", "res", "childInfo", "count", "Iterable", "child", "roots", "a", "b", "Range", "bucket", "Position", "entries", "overrideContainerLabel", "entry", "createDecorator", "_languageFeaturesService", "debounces", "modelService", "DisposableStore", "LRUCache", "data", "source", "now", "outlineModel", "_err", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "IModelService", "registerSingleton", "require_documentSymbols", "__commonJSMin", "exports", "init_cancellation", "init_types", "init_uri", "init_resolverService", "init_outlineModel", "init_commands", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "CommandsRegistry", "accessor", "args", "resource", "assertType", "URI", "outlineService", "IOutlineModelService", "reference", "ITextModelService", "CancellationToken", "InPlaceReplaceCommand", "init_inPlaceReplaceCommand", "__esmMin", "init_selection", "editRange", "originalSelection", "text", "model", "builder", "helper", "srcRange", "Selection", "require_inPlaceReplace", "__commonJSMin", "exports", "init_async", "init_errors", "init_editorState", "init_editorExtensions", "init_range", "init_selection", "init_editorContextKeys", "init_textModel", "init_editorWorker", "init_editorColorRegistry", "init_nls", "init_themeService", "init_inPlaceReplaceCommand", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "InPlaceReplaceController", "editor", "editorWorkerService", "source", "up", "editorSelection", "model", "selection", "state", "EditorState", "modelURI", "createCancelablePromise", "token", "result", "editRange", "Range", "highlightRange", "diff", "Selection", "command", "InPlaceReplaceCommand", "timeout", "onUnexpectedError", "ModelDecorationOptions", "IEditorWorkerService", "InPlaceReplaceUp", "EditorAction", "localize", "EditorContextKeys", "accessor", "controller", "InPlaceReplaceDown", "registerEditorContribution", "registerEditorAction", "registerThemingParticipant", "theme", "collector", "border", "editorBracketMatchBorder", "require_stickyScroll", "__commonJSMin", "exports", "init_lifecycle", "init_editorExtensions", "init_languageFeatures", "init_outlineModel", "init_cancellation", "init_dom", "init_stringBuilder", "init_viewLineRenderer", "init_lineDecorations", "init_async", "init_position", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "_a", "StickyScrollController", "Disposable", "editor", "_languageFeaturesService", "DisposableStore", "StickyScrollWidget", "RunOnceScheduler", "event", "stickyLineNumbers", "stickyLineNumber", "range", "updateOutline", "_b", "CancellationTokenSource", "hiddenRanges", "hiddenRange", "outlineElement", "depth", "didRecursion", "outline", "kind", "currentStartLine", "currentEndLine", "OutlineElement", "token", "model", "modelVersionId", "outlineModel", "OutlineModel", "b", "previous", "index", "arr", "start", "end", "_depth", "lineHeight", "scrollTop", "beginningLinesConsidered", "topOfElementAtDepth", "bottomOfElementAtDepth", "bottomOfBeginningLine", "topOfEndLine", "bottomOfEndLine", "StickyScrollCodeLine", "ILanguageFeaturesService", "_ttPolicy", "_lineNumber", "_editor", "_zIndex", "_relativePosition", "root", "viewModel", "viewLineNumber", "Position", "lineRenderingData", "actualInlineDecorations", "LineDecoration", "renderLineInput", "RenderLineInput", "sb", "createStringBuilder", "renderViewLine", "newLine", "lineHTMLNode", "lineNumberHTMLNode", "innerLineNumberHTML", "widgetLineRange", "codeLine", "widgetHeight", "line", "clearNode", "registerEditorContribution", "ToggleTabFocusModeAction", "init_toggleTabFocusMode", "__esmMin", "init_aria", "init_tabFocus", "init_editorExtensions", "init_nls", "EditorAction", "localize", "accessor", "editor", "newValue", "TabFocus", "alert", "registerEditorAction", "require_viewportSemanticTokens", "__commonJSMin", "exports", "init_async", "init_lifecycle", "init_editorExtensions", "init_getSemanticTokens", "init_model", "init_modelService", "init_semanticTokensProviderStyling", "init_configuration", "init_themeService", "init_languageFeatureDebounce", "init_stopwatch", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ViewportSemanticTokensContribution", "Disposable", "editor", "_modelService", "_themeService", "_configurationService", "languageFeatureDebounceService", "languageFeaturesService", "RunOnceScheduler", "scheduleTokenizeViewport", "e", "SEMANTIC_HIGHLIGHTING_SETTING_ID", "request", "req", "len", "model", "isSemanticColoringEnabled", "hasDocumentRangeSemanticTokensProvider", "visibleRanges", "range", "requestVersionId", "createCancelablePromise", "token", "getDocumentRangeSemanticTokens", "sw", "StopWatch", "r", "provider", "result", "styling", "toMultilineTokens2", "IModelService", "IThemeService", "IConfigurationService", "ILanguageFeatureDebounceService", "ILanguageFeaturesService", "registerEditorContribution", "require_accessibilityHelp", "__commonJSMin", "exports", "init_", "init_dom", "init_fastDomNode", "init_formattedTextRenderer", "init_aria", "init_widget", "init_lifecycle", "init_platform", "init_strings", "init_uri", "init_editorExtensions", "init_editorContextKeys", "init_toggleTabFocusMode", "init_contextkey", "init_instantiation", "init_keybinding", "init_opener", "init_colorRegistry", "init_themeService", "init_standaloneStrings", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE", "RawContextKey", "AccessibilityHelpController", "Disposable", "editor", "instantiationService", "AccessibilityHelpWidget", "IInstantiationService", "getSelectionLabel", "selections", "charactersSelected", "AccessibilityHelpNLS", "format", "Widget", "_contextKeyService", "_keybindingService", "_openerService", "createFastDomNode", "addStandardDisposableListener", "e", "alert", "clearNode", "url", "URI", "commandId", "msg", "noKbMsg", "kb", "options", "model", "selection", "text", "turnOnMessage", "isMacintosh", "ToggleTabFocusModeAction", "openDocMessage", "renderFormattedText", "editorLayout", "w", "h", "top", "left", "IContextKeyService", "IKeybindingService", "IOpenerService", "ShowAccessibilityHelpAction", "EditorAction", "accessor", "controller", "registerEditorContribution", "registerEditorAction", "AccessibilityHelpCommand", "EditorCommand", "registerEditorCommand", "x", "EditorContextKeys", "registerThemingParticipant", "theme", "collector", "widgetBackground", "editorWidgetBackground", "widgetForeground", "editorWidgetForeground", "widgetShadowColor", "widgetShadow", "hcBorder", "contrastBorder", "require_inspectTokens", "__commonJSMin", "exports", "init_", "init_dom", "init_color", "init_lifecycle", "init_editorExtensions", "init_languages", "init_encodedTokenAttributes", "init_nullTokenize", "init_language", "init_standaloneTheme", "init_colorRegistry", "init_themeService", "init_standaloneStrings", "init_theme", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "InspectTokensController", "Disposable", "editor", "standaloneColorService", "languageService", "e", "TokenizationRegistry", "InspectTokensWidget", "IStandaloneThemeService", "ILanguageService", "InspectTokens", "EditorAction", "InspectTokensNLS", "accessor", "controller", "renderTokenText", "tokenText", "result", "charIndex", "len", "charCode", "getSafeTokenizationSupport", "languageIdCodec", "languageId", "tokenizationSupport", "encodedLanguageId", "NullState", "line", "hasEOL", "state", "nullTokenize", "nullTokenizeEncoded", "position", "data", "token1Index", "t", "token2Index", "lineContent", "tokenStartIndex", "tokenEndIndex", "reset", "$", "append", "metadata", "Color", "colorMap", "TokenMetadata", "tokenType", "fontStyle", "foreground", "background", "r", "lineNumber", "stateBeforeLine", "tokenizationResult1", "tokenizationResult2", "registerEditorContribution", "registerEditorAction", "registerThemingParticipant", "theme", "collector", "border", "editorHoverBorder", "borderWidth", "isHighContrast", "editorHoverBackground", "editorHoverForeground", "editor_main_exports", "__export", "CancellationTokenSource", "Emitter", "KeyCode", "KeyMod", "MarkerSeverity", "MarkerTag", "Position", "Range", "Selection", "SelectionDirection", "Token", "Uri", "editor", "languages", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "to", "from", "except", "desc", "key", "__reExport", "target", "mod", "secondTarget", "monaco_editor_core_exports", "editor_api_exports", "languageDefinitions", "lazyLanguageLoaders", "LazyLanguageLoader", "languageId", "__publicField", "resolve", "reject", "err", "registerLanguage", "def", "languageId", "languageDefinitions", "monaco_editor_core_exports", "lazyLanguageLoader", "LazyLanguageLoader", "mod", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "registerLanguage", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "to", "from", "except", "desc", "key", "__reExport", "target", "mod", "secondTarget", "monaco_editor_core_exports", "editor_api_exports", "LanguageServiceDefaultsImpl", "languageId", "options", "modeConfiguration", "__publicField", "optionsDefault", "modeConfigurationDefault", "cssDefaults", "scssDefaults", "lessDefaults", "getMode", "mode", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "to", "from", "except", "desc", "key", "__reExport", "target", "mod", "secondTarget", "monaco_editor_core_exports", "editor_api_exports", "LanguageServiceDefaultsImpl", "languageId", "options", "modeConfiguration", "__publicField", "formatDefaults", "optionsDefault", "getConfigurationDefault", "htmlLanguageId", "handlebarsLanguageId", "razorLanguageId", "htmlLanguageService", "registerHTMLLanguageService", "htmlDefaults", "handlebarLanguageService", "handlebarDefaults", "razorLanguageService", "razorDefaults", "getMode", "defaults", "mode", "onLanguageListener", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__copyProps", "to", "from", "except", "desc", "key", "__reExport", "target", "mod", "secondTarget", "monaco_editor_core_exports", "editor_api_exports", "LanguageServiceDefaultsImpl", "languageId", "diagnosticsOptions", "modeConfiguration", "__publicField", "options", "diagnosticDefault", "modeConfigurationDefault", "jsonDefaults", "getMode", "mode", "init_aria", "init_keyCodes", "init_editorExtensions", "init_selection", "init_editorContextKeys", "init_nls", "init_contextkey", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "SelectionAnchorSet", "RawContextKey", "SelectionAnchorController", "editor", "contextKeyService", "position", "accessor", "Selection", "MarkdownString", "localize", "alert", "anchorPosition", "start", "end", "decorationId", "IContextKeyService", "SetSelectionAnchor", "EditorAction", "EditorContextKeys", "KeyChord", "_accessor", "_a", "GoToSelectionAnchor", "SelectFromAnchorToCursor", "CancelSelectionAnchor", "registerEditorContribution", "registerEditorAction", "init_async", "init_lifecycle", "init_editorExtensions", "init_position", "init_range", "init_selection", "init_editorContextKeys", "init_model", "init_textModel", "init_editorColorRegistry", "init_nls", "init_actions", "init_colorRegistry", "init_themeService", "overviewRulerBracketMatchForeground", "registerColor", "localize", "JumpToBracketAction", "EditorAction", "EditorContextKeys", "accessor", "editor", "_a", "BracketMatchingController", "SelectToBracketAction", "args", "selectBrackets", "BracketsData", "position", "brackets", "options", "Disposable", "RunOnceScheduler", "e", "model", "newSelections", "selection", "newCursorPosition", "enclosingBrackets", "nextBracket", "Selection", "selectFrom", "selectTo", "Range", "open", "close", "tmp", "newDecorations", "newDecorationsLen", "bracketData", "selections", "versionId", "previousData", "positions", "positionsLen", "i", "len", "Position", "newData", "newDataLen", "previousIndex", "previousLen", "ModelDecorationOptions", "themeColorFromId", "OverviewRulerLane", "registerEditorContribution", "registerEditorAction", "registerThemingParticipant", "theme", "collector", "bracketMatchBackground", "editorBracketMatchBackground", "bracketMatchBorder", "editorBracketMatchBorder", "MenuRegistry", "MenuId", "init_editorExtensions", "init_editorContextKeys", "init_range", "init_selection", "MoveCaretCommand", "selection", "isMovingLeft", "model", "builder", "lineNumber", "startColumn", "endColumn", "rangeBefore", "Range", "charBefore", "rangeAfter", "charAfter", "helper", "Selection", "init_nls", "MoveCaretAction", "EditorAction", "left", "opts", "accessor", "editor", "commands", "selections", "selection", "MoveCaretCommand", "MoveCaretLeftAction", "localize", "EditorContextKeys", "MoveCaretRightAction", "registerEditorAction", "init_editorExtensions", "init_range", "init_editorContextKeys", "init_nls", "TransposeLettersAction", "EditorAction", "localize", "EditorContextKeys", "accessor", "editor", "model", "commands", "selections", "selection", "lineNumber", "column", "lastColumn", "endPosition", "MoveOperations", "middlePosition", "beginPosition", "leftChar", "Range", "rightChar", "replaceRange", "ReplaceCommand", "registerEditorAction", "init_browser", "init_platform", "init_editorExtensions", "init_codeEditorService", "init_editorContextKeys", "init_nls", "init_actions", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "CLIPBOARD_CONTEXT_MENU_GROUP", "supportsCut", "isNative", "supportsCopy", "supportsPaste", "isFirefox", "registerCommand", "command", "CutAction", "MultiCommand", "MenuId", "localize", "EditorContextKeys", "CopyAction", "MenuRegistry", "PasteAction", "ExecCommandCopyWithSyntaxHighlightingAction", "EditorAction", "accessor", "editor", "CopyOptions", "registerExecCommandImpl", "target", "browserCommand", "args", "focusedEditor", "ICodeEditorService", "emptySelectionClipboard", "selection", "codeEditorService", "clipboardService", "IClipboardService", "isWeb", "clipboardText", "metadata", "InMemoryClipboardMetadataManager", "pasteOnNewLine", "multicursorText", "mode", "registerEditorAction", "init_editorExtensions", "init_cancellation", "init_lazy", "init_lifecycle", "init_strings", "init_editorExtensions", "init_editorContextKeys", "init_languageFeatures", "init_arrays", "init_cancellation", "init_errors", "init_lifecycle", "init_uri", "init_editorState", "init_range", "init_selection", "init_model", "init_commands", "init_progress", "CodeActionKind", "value", "other", "part", "CodeActionTriggerSource", "mayIncludeActionsOfKind", "filter", "providedKind", "exclude", "excludesAction", "filtersAction", "action", "actionKind", "include", "CodeActionCommandArgs", "kind", "apply", "preferred", "arg", "defaults", "defaultAutoApply", "defaultKind", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "codeActionCommandId", "refactorCommandId", "refactorPreviewCommandId", "sourceActionCommandId", "organizeImportsCommandId", "fixAllCommandId", "CodeActionItem", "action", "provider", "token", "_a", "err", "onUnexpectedExternalError", "ManagedCodeActionSet", "Disposable", "actions", "documentation", "disposables", "a", "b", "isNonEmptyArray", "fix", "CodeActionKind", "emptyCodeActionsResponse", "getCodeActions", "registry", "model", "rangeOrSelection", "trigger", "progress", "filter", "codeActionContext", "cts", "TextModelCancellationTokenSource", "providers", "getCodeActionProviders", "DisposableStore", "promises", "providedCodeActions", "filteredActions", "filtersAction", "getDocumentation", "isCancellationError", "listener", "newProviders", "equals", "allActions", "allDocumentation", "coalesce", "kind", "mayIncludeActionsOfKind", "only", "entry", "currentBest", "CommandsRegistry", "accessor", "resource", "itemResolveCount", "URI", "illegalArgument", "codeActionProvider", "ILanguageFeaturesService", "IModelService", "validatedRangeOrSelection", "Selection", "Range", "include", "codeActionSet", "CodeActionTriggerSource", "Progress", "CancellationToken", "resolving", "resolveCount", "i", "item", "init_errors", "init_lazy", "init_lifecycle", "init_aria", "init_async", "init_lifecycle", "init_editorExtensions", "init_range", "init_nls", "init_contextkey", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "MessageController", "editor", "contextKeyService", "MutableDisposable", "DisposableStore", "message", "position", "alert", "MessageWidget", "TimeoutTimer", "bounds", "e", "Range", "RawContextKey", "localize", "IContextKeyService", "MessageCommand", "EditorCommand", "MessageController", "registerEditorCommand", "c", "MessageWidget", "editor", "lineNumber", "column", "text", "anchorTop", "message", "anchorBottom", "messageWidget", "dispose", "handle", "position", "registerEditorContribution", "init_instantiation", "init_dom", "init_actions", "init_errors", "init_lazy", "init_lifecycle", "init_position", "init_languageFeatures", "init_nls", "init_configuration", "init_contextkey", "init_keybinding", "init_telemetry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "Context", "RawContextKey", "localize", "CodeActionAction", "Action", "action", "callback", "stripNewlines", "str", "TEMPLATE_ID", "codeActionLineHeight", "CodeMenuRenderer", "acceptKeybindings", "keybindingService", "container", "data", "element", "index", "templateData", "text", "isEnabled", "isSeparator", "isDocumentation", "_a", "_b", "accept", "preview", "dispose", "IKeybindingService", "CodeActionMenu", "Disposable", "_editor", "_delegate", "_contextMenuService", "_languageFeaturesService", "_telemetryService", "_themeService", "_configurationService", "_contextViewService", "_contextKeyService", "MutableDisposable", "CodeActionKeybindingResolver", "model", "_c", "_d", "inputArray", "renderDisposables", "DisposableStore", "renderMenu", "menuBlock", "addDisposableListener", "EventType", "List", "item", "currIsSeparator", "menuItem", "height", "arr", "maxWidth", "focusTracker", "trackFocus", "blurListener", "startIndex", "Separator", "openedFromString", "didCancel", "CodeActions", "trigger", "codeActions", "at", "options", "actionsToShow", "canceled", "menuActions", "anchor", "Position", "resolver", "useShadowDOM", "CodeActionTriggerSource", "documentation", "toCodeActionAction", "allDocumentation", "provider", "command", "CodeActionItem", "position", "cursorCoords", "editorCoords", "getDomNodePagePosition", "x", "y", "IContextMenuService", "ILanguageFeaturesService", "ITelemetryService", "IThemeService", "IConfigurationService", "IContextViewService", "IContextKeyService", "CodeActionKeybindingResolver", "_keybindingProvider", "allCodeActionBindings", "Lazy", "item", "commandArgs", "organizeImportsCommandId", "CodeActionKind", "fixAllCommandId", "CodeActionCommandArgs", "action", "binding", "candidates", "kind", "candidate", "currentBest", "refactorCommandId", "codeActionCommandId", "sourceActionCommandId", "init_dom", "init_touch", "init_codicons", "init_event", "init_lifecycle", "init_utils", "init_nls", "init_keybinding", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "LightBulbState", "Showing", "actions", "trigger", "editorPosition", "widgetPosition", "LightBulbWidget", "Disposable", "_editor", "_quickFixActionId", "_preferredFixActionId", "_keybindingService", "Emitter", "Codicon", "_", "editorModel", "Gesture", "addStandardDisposableGenericMouseDownListener", "e", "top", "height", "getDomNodePagePosition", "lineHeight", "pad", "addDisposableListener", "atPosition", "options", "model", "lineNumber", "column", "tabSize", "fontInfo", "lineContent", "indent", "computeIndentLevel", "lineHasSpace", "isFolded", "effectiveLineNumber", "value", "preferredKb", "localize", "kb", "IKeybindingService", "registerThemingParticipant", "theme", "collector", "_a", "editorBackgroundColor", "editorBackground", "editorLightBulbForegroundColor", "editorLightBulbForeground", "Codicon", "editorLightBulbAutoFixForegroundColor", "editorLightBulbAutoFixForeground", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "__classPrivateFieldSet", "receiver", "state", "kind", "f", "__classPrivateFieldGet", "_CodeActionUi_disposed", "CodeActionUi", "Disposable", "_editor", "quickFixActionId", "preferredFixActionId", "delegate", "instantiationService", "MutableDisposable", "Lazy", "CodeActionMenu", "action", "trigger", "widget", "LightBulbWidget", "navUp", "newState", "_a", "_b", "_c", "_d", "_e", "actions", "onUnexpectedError", "validActionToApply", "invalidAction", "MessageController", "includeDisabledActions", "at", "options", "IInstantiationService", "init_nls", "init_commands", "init_contextkey", "init_instantiation", "init_progress", "init_telemetry", "init_async", "init_errors", "init_event", "init_lifecycle", "init_resources", "init_range", "init_contextkey", "init_progress", "__classPrivateFieldGet", "receiver", "state", "kind", "f", "__classPrivateFieldSet", "value", "_CodeActionModel_isDisposed", "SUPPORTED_CODE_ACTIONS", "RawContextKey", "CodeActionOracle", "Disposable", "_editor", "_markerService", "_signalChange", "_delay", "TimeoutTimer", "e", "trigger", "selection", "resources", "model", "resource", "isEqual", "CodeActionTriggerSource", "marker", "markerRange", "Range", "lineNumber", "column", "line", "position", "CodeActionsState", "Triggered", "rangeOrSelection", "_cancellablePromise", "isCancellationError", "emptyCodeActionSet", "CodeActionModel", "_registry", "contextKeyService", "_progressService", "MutableDisposable", "Emitter", "supportedActions", "provider", "_a", "actions", "createCancelablePromise", "token", "getCodeActions", "Progress", "newState", "skipNotify", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "contextKeyForSupportedActions", "kind", "ContextKeyExpr", "SUPPORTED_CODE_ACTIONS", "escapeRegExpCharacters", "refactorTrigger", "editor", "userArgs", "preview", "codeActionFrom", "args", "CodeActionCommandArgs", "CodeActionKind", "triggerCodeActionsForEditorSelection", "localize", "argsSchema", "QuickFixController", "Disposable", "markerService", "contextKeyService", "progressService", "_instantiationService", "languageFeaturesService", "CodeActionModel", "newState", "Lazy", "CodeActionUi", "QuickFixAction", "AutoFixAction", "action", "retrigger", "CodeActionTriggerSource", "navUp", "trigger", "actions", "at", "notAvailableMessage", "triggerAction", "filter", "autoApply", "_a", "MessageController", "triggerPosition", "applyCodeAction", "ApplyCodeActionReason", "IMarkerService", "IContextKeyService", "IEditorProgressService", "IInstantiationService", "ILanguageFeaturesService", "ApplyCodeActionReason", "applyCodeAction", "accessor", "item", "codeActionReason", "options", "__awaiter", "bulkEditService", "IBulkEditService", "commandService", "ICommandService", "telemetryService", "ITelemetryService", "notificationService", "INotificationService", "CancellationToken", "ResourceEdit", "err", "message", "asMessage", "localize", "triggerCodeActionsForEditorSelection", "editor", "notAvailableMessage", "filter", "autoApply", "preview", "triggerAction", "CodeActionTriggerSource", "controller", "QuickFixController", "QuickFixAction", "EditorAction", "ContextKeyExpr", "EditorContextKeys", "_accessor", "CodeActionCommand", "EditorCommand", "codeActionCommandId", "argsSchema", "userArgs", "args", "CodeActionCommandArgs", "CodeActionKind", "RefactorAction", "refactorCommandId", "contextKeyForSupportedActions", "refactorTrigger", "RefactorPreview", "refactorPreviewCommandId", "SourceAction", "sourceActionCommandId", "OrganizeImportsAction", "organizeImportsCommandId", "FixAllAction", "fixAllCommandId", "AutoFixAction", "CodeActionContribution", "weight", "registerEditorCommand", "Context", "x", "init_nls", "init_configurationRegistry", "init_platform", "Registry", "Extensions", "editorConfigurationBaseNode", "localize", "registerEditorContribution", "QuickFixController", "registerEditorAction", "QuickFixAction", "RefactorAction", "RefactorPreview", "SourceAction", "OrganizeImportsAction", "AutoFixAction", "FixAllAction", "registerEditorCommand", "CodeActionCommand", "init_dom", "init_async", "init_errors", "init_hash", "init_lifecycle", "init_editorExtensions", "init_editorContextKeys", "init_cancellation", "init_errors", "init_lifecycle", "init_types", "init_uri", "init_model", "init_commands", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "CodeLensModel", "DisposableStore", "list", "provider", "symbol", "getCodeLensModel", "registry", "model", "token", "providerRanks", "promises", "i", "err", "onUnexpectedExternalError", "b", "CommandsRegistry", "accessor", "args", "uri", "itemResolveCount", "assertType", "URI", "codeLensProvider", "ILanguageFeaturesService", "IModelService", "illegalArgument", "disposables", "CancellationToken", "item", "init_async", "init_functional", "init_map", "init_range", "init_extensions", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ICodeLensCache", "createDecorator", "CacheItem", "lineCount", "data", "CodeLensCache", "storageService", "LRUCache", "oldkey", "runWhenIdle", "raw", "once", "e", "WillSaveStateReason", "model", "copyItems", "item", "_a", "copyModel", "CodeLensModel", "value", "lines", "element", "lenses", "line", "Range", "IStorageService", "registerSingleton", "ICodeLensCache", "CodeLensCache", "init_dom", "init_range", "init_textModel", "CodeLensViewZone", "afterLineNumber", "heightInPx", "onHeight", "height", "CodeLensContentWidget", "editor", "className", "line", "lenses", "animate", "children", "hasSymbol", "i", "lens", "title", "renderLabelWithIcons", "$", "reset", "link", "column", "CodeLensHelper", "decoration", "callback", "decorationId", "changeAccessor", "resultingDecorations", "len", "CodeLensWidget", "data", "helper", "viewZoneChangeAccessor", "updateCallback", "range", "codeLensData", "ModelDecorationOptions", "id", "Range", "symbol", "model", "symbols", "resolved", "_a", "init_nls", "init_commands", "init_languageFeatureDebounce", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "CodeLensContribution", "_editor", "_languageFeaturesService", "debounceService", "_commandService", "_notificationService", "_codeLensCache", "DisposableStore", "RunOnceScheduler", "hash", "createStyleSheet", "isInShadowDOM", "_a", "lineHeightFactor", "fontSize", "codeLensHeight", "fontFamily", "editorFontInfo", "fontFamilyVar", "fontFeaturesVar", "newStyle", "EDITOR_FONT_DEFAULTS", "accessor", "lens", "_b", "_c", "model", "cachedLenses", "disposableTimeout", "cachedLensesNow", "provider", "registration", "scheduler", "t1", "createCancelablePromise", "token", "getCodeLensModel", "newDelay", "onUnexpectedError", "toDisposable", "decorationsAccessor", "viewZonesAccessor", "toDispose", "lastLensLineNumber", "helper", "CodeLensHelper", "l", "scrollState", "StableEditorScrollState", "command", "err", "decChangeAccessor", "viewZoneChangeAccessor", "symbols", "maxLineNumber", "groups", "lastGroup", "symbol", "line", "layoutInfo", "viewZoneAccessor", "codeLensIndex", "groupsIndex", "symbolsLineNumber", "codeLensLineNumber", "CodeLensWidget", "toResolve", "lenses", "request", "resolvePromise", "promises", "resolvedSymbols", "onUnexpectedExternalError", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "ICommandService", "INotificationService", "ICodeLensCache", "registerEditorContribution", "CodeLensContribution", "registerEditorAction", "EditorAction", "EditorContextKeys", "localize", "accessor", "editor", "__awaiter", "quickInputService", "IQuickInputService", "commandService", "ICommandService", "notificationService", "INotificationService", "lineNumber", "codelensController", "model", "items", "lens", "item", "err", "init_lifecycle", "init_editorExtensions", "init_range", "init_async", "init_color", "init_errors", "init_lifecycle", "init_stopwatch", "init_strings", "init_editorExtensions", "init_range", "init_textModel", "init_languageFeatureDebounce", "init_languageFeatures", "init_cancellation", "init_errors", "init_uri", "init_range", "init_model", "init_commands", "init_languageFeatures", "getColors", "registry", "model", "token", "colors", "promises", "provider", "result", "colorInfo", "getColorPresentations", "CommandsRegistry", "accessor", "args", "resource", "URI", "illegalArgument", "colorProviderRegistry", "ILanguageFeaturesService", "IModelService", "rawCIs", "CancellationToken", "ci", "color", "context", "uri", "range", "Range", "red", "green", "blue", "alpha", "presentations", "init_configuration", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "ColorDecorationInjectedTextMarker", "MAX_DECORATORS", "ColorDetector", "Disposable", "_editor", "_configurationService", "_languageFeaturesService", "languageFeatureDebounceService", "DisposableStore", "DynamicCssRules", "prevIsEnabled", "model", "languageId", "deprecatedConfig", "colorDecorators", "editor", "TimeoutTimer", "createCancelablePromise", "token", "sw", "StopWatch", "colors", "getColors", "colorInfos", "onUnexpectedError", "colorDatas", "decorations", "ModelDecorationOptions", "changeAccessor", "id", "colorData", "red", "green", "blue", "alpha", "rgba", "RGBA", "color", "ref", "noBreakWhitespace", "position", "Range", "decoration", "IConfigurationService", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "registerEditorContribution", "ColorDetector", "init_async", "init_cancellation", "init_color", "init_lifecycle", "init_range", "init_event", "ColorPickerModel", "color", "availableColorPresentations", "presentationIndex", "Emitter", "colorPresentations", "originalText", "init_browser", "init_dom", "init_widget", "init_color", "init_event", "init_lifecycle", "init_nls", "init_colorRegistry", "init_themeService", "$", "ColorPickerHeader", "Disposable", "container", "model", "themeService", "append", "tooltip", "localize", "colorBox", "Color", "editorHoverBackground", "registerThemingParticipant", "theme", "collector", "addDisposableListener", "EventType", "color", "ColorPickerBody", "pixelRatio", "SaturationBox", "OpacityStrip", "HueStrip", "s", "v", "hsva", "HSVA", "a", "value", "h", "Emitter", "e", "GlobalPointerMoveMonitor", "origin", "getDomNodePagePosition", "event", "pointerUpListener", "left", "top", "saturatedColor", "ctx", "whiteGradient", "blackGradient", "Strip", "monitor", "r", "g", "b", "opaque", "RGBA", "transparent", "ColorPickerWidget", "Widget", "PixelRatio", "element", "header", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "ColorHover", "owner", "range", "model", "provider", "anchor", "ColorHoverParticipant", "_editor", "_themeService", "lineDecorations", "token", "AsyncIterableObject", "colorDetector", "ColorDetector", "colorData", "editorModel", "colorInfo", "originalText", "red", "green", "blue", "alpha", "rgba", "RGBA", "color", "Color", "colorPresentations", "getColorPresentations", "CancellationToken", "ColorPickerModel", "Range", "context", "hoverParts", "Disposable", "disposables", "DisposableStore", "colorHover", "widget", "ColorPickerWidget", "updateEditorModel", "textEdits", "newRange", "trackedRange", "updateColorPresentations", "IThemeService", "init_keyCodes", "init_lifecycle", "init_editorExtensions", "init_range", "init_editorContextKeys", "init_language", "init_async", "init_errors", "init_lifecycle", "init_types", "init_editorState", "init_editorExtensions", "init_range", "init_language", "init_resolverService", "init_event", "init_lifecycle", "init_platform", "hasModifier", "e", "modifier", "ClickLinkMouseEvent", "source", "opts", "ClickLinkKeyboardEvent", "ClickLinkOptions", "triggerKey", "triggerModifier", "triggerSideBySideKey", "triggerSideBySideModifier", "other", "createOptions", "multiCursorModifier", "isMacintosh", "ClickLinkGesture", "Disposable", "editor", "Emitter", "newOpts", "mouseEvent", "currentLineNumber", "init_dom", "init_actions", "init_codicons", "init_color", "init_event", "init_objects", "init_editorExtensions", "init_codeEditorService", "init_objects", "init_codeEditorService", "init_commands", "init_contextkey", "init_instantiation", "init_themeService", "init_languageConfigurationRegistry", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "EmbeddedCodeEditorWidget", "CodeEditorWidget", "domElement", "options", "parentEditor", "instantiationService", "codeEditorService", "commandService", "contextKeyService", "themeService", "notificationService", "accessibilityService", "languageConfigurationService", "languageFeaturesService", "e", "newOptions", "mixin", "IInstantiationService", "ICodeEditorService", "ICommandService", "IContextKeyService", "IThemeService", "INotificationService", "IAccessibilityService", "ILanguageConfigurationService", "ILanguageFeaturesService", "init_dom", "init_color", "init_lifecycle", "init_objects", "init_range", "init_textModel", "defaultColor", "Color", "RGBA", "defaultOptions", "WIDGET_ID", "ViewZoneDelegate", "domNode", "afterLineNumber", "afterColumn", "heightInLines", "onDomNodeTop", "onComputedHeight", "top", "height", "OverlayWidgetDelegate", "id", "Arrow", "_editor", "removeCSSRulesContainingSelector", "value", "createCSSRule", "where", "Range", "IdGenerator", "ZoneWidget", "editor", "options", "DisposableStore", "deepClone", "mixin", "info", "width", "accessor", "styles", "frameColor", "arrowColor", "containerHeight", "layoutInfo", "range", "rangeOrPos", "ModelDecorationOptions", "lineHeight", "result", "arrowHeight", "frameThickness", "position", "viewZoneDomNode", "maxHeightInLines", "model", "revealLine", "lineNumber", "isLastLine", "className", "classToReplace", "widthInPixel", "heightInPixel", "newHeightInLines", "Sash", "data", "e", "evt", "lineDelta", "roundedLineDelta", "init_nls", "init_dom", "init_keyboardEvent", "init_dom", "init_dom", "init_keyboardEvent", "init_touch", "init_actions", "init_event", "BaseDropdown", "ActionRunner", "container", "options", "Emitter", "append", "$", "labelRenderer", "event", "EventType", "addDisposableListener", "e", "EventHelper", "StandardKeyboardEvent", "cleanupFn", "Gesture", "DropdownMenu", "actions", "action", "init_event", "DropdownMenuActionViewItem", "BaseActionViewItem", "action", "menuActionsOrProvider", "contextMenuProvider", "options", "Emitter", "container", "labelRenderer", "el", "append", "$", "classNames", "s", "c", "isActionsArray", "DropdownMenu", "visible", "_a", "that", "title", "newContext", "_b", "disabled", "init_actions", "init_lifecycle", "init_platform", "init_nls", "init_actions", "init_contextkey", "init_instantiation", "init_keybinding", "init_themeService", "init_theme", "init_types", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "createAndFillInActionBarActions", "menu", "options", "primaryGroup", "primaryMaxCount", "shouldInlineSubmenu", "useSeparatorsInPrimaryActions", "groups", "fillInActions", "actionGroup", "asDisposable", "disposables", "DisposableStore", "actions", "action", "useAlternativeActions", "isPrimaryAction", "primaryBucket", "secondaryBucket", "submenuInfo", "group", "Separator", "MenuItemAction", "newLen", "SubmenuAction", "index", "submenuActions", "overflow", "MenuEntryActionViewItem", "ActionViewItem", "_keybindingService", "_notificationService", "_contextKeyService", "_themeService", "_contextMenuService", "MutableDisposable", "ModifierKeyEmitter", "event", "err", "container", "mouseOver", "alternativeKeyDown", "isWindows", "isLinux", "updateAltState", "_a", "wantsAltCommand", "addDisposableListener", "_", "keybinding", "keybindingLabel", "tooltip", "title", "localize", "altTooltip", "altKeybinding", "altKeybindingLabel", "altTitleSection", "UILabelProvider", "OS", "item", "element", "label", "icon", "ThemeIcon", "iconClasses", "toDisposable", "isDark", "asCSSUrl", "combinedDisposable", "IKeybindingService", "INotificationService", "IContextKeyService", "IThemeService", "IContextMenuService", "SubmenuEntryActionViewItem", "DropdownMenuActionViewItem", "action", "options", "_contextMenuService", "_themeService", "_a", "_b", "dropdownOptions", "ThemeIcon", "container", "assertType", "icon", "setBackgroundImage", "isDark", "asCSSUrl", "__decorate", "__param", "IContextMenuService", "IThemeService", "DropdownWithDefaultActionViewItem", "BaseActionViewItem", "submenuAction", "options", "_keybindingService", "_notificationService", "_contextMenuService", "_menuService", "_instaService", "_storageService", "_a", "_b", "_c", "defaultAction", "defaultActionId", "a", "MenuEntryActionViewItem", "dropdownOptions", "ActionRunner", "DropdownMenuActionViewItem", "e", "MenuItemAction", "lastAction", "action", "context", "__awaiter", "prepend", "$", "defaultActionKeybinding", "kb", "newContext", "container", "primaryContainer", "append", "addDisposableListener", "EventType", "event", "StandardKeyboardEvent", "dropdownContainer", "fromRight", "focusable", "__decorate", "__param", "IKeybindingService", "INotificationService", "IContextMenuService", "IMenuService", "IInstantiationService", "IStorageService", "createActionViewItem", "instaService", "action", "options", "MenuItemAction", "MenuEntryActionViewItem", "SubmenuItemAction", "DropdownWithDefaultActionViewItem", "SubmenuEntryActionViewItem", "init_contextkey", "init_extensions", "init_instantiation", "init_colorRegistry", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "IPeekViewService", "createDecorator", "registerSingleton", "editor", "widget", "existing", "remove", "data", "PeekContext", "RawContextKey", "localize", "PeekContextController", "contextKeyService", "EmbeddedCodeEditorWidget", "IContextKeyService", "registerEditorContribution", "getOuterEditor", "accessor", "ICodeEditorService", "defaultOptions", "Color", "PeekViewWidget", "ZoneWidget", "options", "instantiationService", "Emitter", "mixin", "styles", "container", "$", "noCloseAction", "titleElement", "addStandardDisposableListener", "event", "append", "actionsContainer", "actionBarOptions", "ActionBar", "Action", "Codicon", "createActionViewItem", "primaryHeading", "secondaryHeading", "clearNode", "value", "show", "hide", "heightInPixel", "widthInPixel", "headHeight", "bodyHeight", "IInstantiationService", "peekViewTitleBackground", "registerColor", "transparent", "editorInfoForeground", "localize", "peekViewTitleForeground", "Color", "editorForeground", "peekViewTitleInfoForeground", "peekViewBorder", "contrastBorder", "peekViewResultsBackground", "peekViewResultsMatchForeground", "peekViewResultsFileForeground", "peekViewResultsSelectionBackground", "peekViewResultsSelectionForeground", "peekViewEditorBackground", "peekViewEditorGutterBackground", "peekViewResultsMatchHighlight", "peekViewEditorMatchHighlight", "peekViewEditorMatchHighlightBorder", "activeContrastBorder", "init_nls", "init_contextkey", "init_colorRegistry", "init_themeService", "init_browser", "init_aria", "init_async", "init_keyCodes", "init_platform", "init_types", "init_uri", "init_editorState", "init_editorBrowser", "init_editorExtensions", "init_codeEditorService", "init_position", "init_range", "init_editorContextKeys", "init_languages", "init_async", "init_errors", "init_keyCodes", "init_lifecycle", "init_codeEditorService", "init_position", "init_range", "init_nls", "init_commands", "init_configuration", "init_contextkey", "init_instantiation", "init_keybindingsRegistry", "init_errors", "init_event", "init_lifecycle", "init_map", "init_resources", "init_strings", "init_range", "init_nls", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "OneReference", "isProviderFirst", "parent", "link", "_rangeCallback", "defaultGenerator", "_a", "_b", "preview", "localize", "basename", "FilePreview", "_modelReference", "range", "n", "model", "startLineNumber", "startColumn", "endLineNumber", "endColumn", "word", "beforeRange", "Range", "afterRange", "before", "inside", "after", "FileReferences", "uri", "ResourceMap", "dispose", "child", "len", "textModelResolverService", "ref", "err", "onUnexpectedError", "ReferencesModel", "links", "title", "Emitter", "providersFirst", "current", "extUri", "oneRef", "reference", "next", "idx", "childCount", "groupCount", "resource", "position", "nearest", "commonPrefixLength", "a", "b", "init_dom", "init_color", "init_event", "init_lifecycle", "init_network", "init_resources", "init_range", "init_textModel", "init_languageConfigurationRegistry", "init_modesRegistry", "init_language", "init_resolverService", "init_dom", "init_lifecycle", "init_resources", "init_resolverService", "init_nls", "init_instantiation", "init_keybinding", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "DataSource", "_resolverService", "element", "ReferencesModel", "FileReferences", "val", "ITextModelService", "Delegate", "element", "FileReferences", "FileReferencesRenderer", "OneReferenceRenderer", "StringRepresentationProvider", "_keybindingService", "_a", "OneReference", "parts", "basename", "__decorate", "__param", "IKeybindingService", "IdentityProvider", "element", "OneReference", "FileReferencesTemplate", "Disposable", "container", "_labelService", "themeService", "parent", "IconLabel", "CountBadge", "append", "$", "attachBadgeStyler", "matches", "dirname", "len", "localize", "__decorate", "__param", "ILabelService", "IThemeService", "FileReferencesRenderer", "_instantiationService", "node", "index", "template", "createMatches", "templateData", "IInstantiationService", "OneReferenceTemplate", "container", "HighlightedLabel", "element", "score", "_a", "preview", "basename", "value", "highlight", "FuzzyScore", "createMatches", "OneReferenceRenderer", "node", "index", "templateData", "AccessibilityProvider", "localize", "init_nls", "init_instantiation", "init_keybinding", "init_themeService", "init_undoRedo", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "DecorationsManager", "_editor", "_model", "DisposableStore", "model", "ref", "reference", "newDecorations", "newDecorationsActualIndex", "len", "oneReference", "changeAccessor", "decorations", "toRemove", "decorationId", "newRange", "ignore", "Range", "lineLength", "newLineLength", "ModelDecorationOptions", "LayoutData", "raw", "ratio", "heightInLines", "data", "ReferencesTree", "WorkbenchAsyncDataTree", "ReferenceWidget", "PeekViewWidget", "editor", "_defaultTreeKeyboardSupport", "layoutData", "themeService", "_textModelResolverService", "_instantiationService", "_peekViewService", "_uriLabel", "_undoRedoService", "_keybindingService", "_languageService", "_languageConfigurationService", "Emitter", "Dimension", "dispose", "theme", "borderColor", "peekViewBorder", "Color", "peekViewTitleBackground", "peekViewTitleForeground", "peekViewTitleInfoForeground", "where", "containerElement", "append", "$", "hide", "SplitView", "options", "EmbeddedCodeEditorWidget", "TextModel", "localize", "PLAINTEXT_LANGUAGE_ID", "treeOptions", "AccessibilityProvider", "StringRepresentationProvider", "IdentityProvider", "peekViewResultsBackground", "addStandardDisposableListener", "Delegate", "FileReferencesRenderer", "OneReferenceRenderer", "DataSource", "Event", "width", "Sizing", "onEvent", "element", "kind", "OneReference", "heightInPixel", "widthInPixel", "selection", "newModel", "show", "event", "FileReferences", "revealParent", "Schemas", "basenameOrAuthority", "dirname", "promise", "scrollType", "sel", "IThemeService", "ITextModelService", "IInstantiationService", "IPeekViewService", "ILabelService", "IUndoRedoService", "IKeybindingService", "ILanguageService", "ILanguageConfigurationService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "ctxReferenceSearchVisible", "RawContextKey", "localize", "ReferencesController", "_defaultTreeKeyboardSupport", "_editor", "contextKeyService", "_editorService", "_notificationService", "_instantiationService", "_storageService", "_configurationService", "DisposableStore", "editor", "_a", "_b", "range", "modelPromise", "peekMode", "widgetPosition", "storageKey", "data", "LayoutData", "ReferenceWidget", "event", "element", "kind", "requestId", "model", "uri", "pos", "Position", "selection", "error", "fwd", "currentPosition", "source", "editorFocus", "previewEditorFocus", "reference", "focusEditor", "ref", "Range", "openedEditor", "other", "createCancelablePromise", "_", "err", "onUnexpectedError", "sideBySide", "pinned", "IContextKeyService", "ICodeEditorService", "INotificationService", "IInstantiationService", "IStorageService", "IConfigurationService", "withController", "accessor", "fn", "outerEditor", "getOuterEditor", "controller", "ReferencesController", "KeybindingsRegistry", "KeyChord", "ContextKeyExpr", "ctxReferenceSearchVisible", "PeekContext", "CommandsRegistry", "WorkbenchListFocusContextKey", "WorkbenchTreeElementCanCollapse", "WorkbenchTreeElementCanExpand", "_a", "focus", "IListService", "OneReference", "init_event", "init_lifecycle", "init_resources", "init_editorExtensions", "init_codeEditorService", "init_range", "init_nls", "init_contextkey", "init_extensions", "init_instantiation", "init_keybinding", "init_keybindingsRegistry", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ctxHasSymbols", "RawContextKey", "localize", "ISymbolNavigationService", "createDecorator", "SymbolNavigationService", "contextKeyService", "_editorService", "_notificationService", "_keybindingService", "_a", "_b", "anchor", "refModel", "editorState", "EditorState", "listener", "_", "editor", "model", "position", "seenUri", "seenPosition", "reference", "isEqual", "Range", "combinedDisposable", "source", "kb", "message", "IContextKeyService", "ICodeEditorService", "INotificationService", "IKeybindingService", "registerSingleton", "registerEditorCommand", "EditorCommand", "accessor", "KeybindingsRegistry", "editorService", "DisposableStore", "Emitter", "dispose", "init_nls", "init_actions", "init_commands", "init_contextkey", "init_instantiation", "init_progress", "init_cancellation", "init_errors", "init_editorExtensions", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "getLocationLinks", "model", "position", "registry", "provide", "promises", "provider", "err", "onUnexpectedExternalError", "values", "getDefinitionsAtPosition", "token", "getDeclarationsAtPosition", "getImplementationsAtPosition", "getTypeDefinitionsAtPosition", "getReferencesAtPosition", "compact", "resultWithoutDeclaration", "_sortedAndDeduped", "callback", "rawLinks", "ReferencesModel", "modelLinks", "ref", "registerModelAndPositionCommand", "accessor", "languageFeaturesService", "ILanguageFeaturesService", "promise", "CancellationToken", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "_h", "MenuRegistry", "MenuId", "localize", "_goToActionIds", "registerGoToAction", "ctor", "registerInstantiatedEditorAction", "SymbolNavigationAnchor", "model", "position", "thing", "Position", "SymbolNavigationAction", "EditorAction", "configuration", "opts", "accessor", "editor", "arg", "notificationService", "INotificationService", "editorService", "ICodeEditorService", "progressService", "IEditorProgressService", "symbolNavService", "ISymbolNavigationService", "languageFeaturesService", "ILanguageFeaturesService", "anchor", "cts", "EditorStateCancellationTokenSource", "promise", "raceCancellation", "references", "alert", "altAction", "altActionId", "referenceCount", "info", "MessageController", "err", "gotoLocation", "EmbeddedCodeEditorWidget", "next", "peek", "targetEditor", "reference", "sideBySide", "highlight", "range", "isLocationLink", "Range", "modelNow", "decorations", "target", "controller", "ReferencesController", "createCancelablePromise", "_", "DefinitionAction", "token", "ReferencesModel", "getDefinitionsAtPosition", "goToDefinitionKb", "isWeb", "isStandalone", "GoToDefinitionAction", "ContextKeyExpr", "EditorContextKeys", "CommandsRegistry", "OpenDefinitionToSideAction", "KeyChord", "PeekDefinitionAction", "PeekContext", "DeclarationAction", "getDeclarationsAtPosition", "GoToDeclarationAction", "TypeDefinitionAction", "getTypeDefinitionsAtPosition", "GoToTypeDefinitionAction", "PeekTypeDefinitionAction", "ImplementationAction", "getImplementationsAtPosition", "GoToImplementationAction", "PeekImplementationAction", "ReferencesAction", "getReferencesAtPosition", "GenericGoToLocationAction", "config", "_references", "_gotoMultipleBehaviour", "_model", "_position", "_token", "URI", "resource", "multiple", "noResultsMessage", "openInPeek", "assertType", "isCodeEditor", "command", "IInstantiationService", "ICommandService", "codeEditorService", "control", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "GotoDefinitionAtPositionEditorContribution", "editor", "textModelResolverService", "languageService", "languageFeaturesService", "DisposableStore", "linkGesture", "ClickLinkGesture", "mouseEvent", "keyboardEvent", "withNullAsUndefined", "error", "onUnexpectedError", "position", "e", "withKey", "_a", "word", "state", "EditorState", "createCancelablePromise", "token", "results", "Range", "MarkdownString", "localize", "result", "ref", "textEditorModel", "startLineNumber", "previewValue", "wordRange", "languageId", "rangeToUse", "previewRange", "minIndent", "endLineNumber", "endIndent", "startIndent", "maxLineNumber", "range", "hoverMessage", "newDecorations", "model", "getDefinitionsAtPosition", "openToSide", "accessor", "canPeek", "DefinitionAction", "contextKeyService", "IContextKeyService", "PeekContext", "ITextModelService", "ILanguageService", "ILanguageFeaturesService", "registerEditorContribution", "GotoDefinitionAtPositionEditorContribution", "registerThemingParticipant", "theme", "collector", "activeLinkForeground", "editorActiveLinkForeground", "init_dom", "init_dom", "init_keyboardEvent", "init_lifecycle", "$", "HoverWidget", "Disposable", "DomScrollableElement", "HoverAction", "parent", "actionOptions", "keybindingLabel", "append", "label", "addDisposableListener", "EventType", "e", "StandardKeyboardEvent", "enabled", "init_arrays", "init_lifecycle", "init_position", "init_range", "init_textModel", "init_languages", "init_async", "init_errors", "init_event", "init_lifecycle", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "__asyncValues", "m", "i", "verb", "n", "v", "settle", "d", "HoverResult", "isComplete", "hasLoadingMessage", "HoverOperation", "Disposable", "_editor", "_computer", "Emitter", "RunOnceScheduler", "state", "fireResult", "createCancelableAsyncIterable", "token", "e_1", "_a", "_b", "_c", "item", "e_1_1", "onUnexpectedError", "mode", "HoverRangeAnchor", "priority", "range", "other", "lastAnchor", "showAtPosition", "HoverForeignElementAnchor", "owner", "HoverParticipantRegistry", "ctor", "init_contextkey", "init_instantiation", "init_keybinding", "init_cancellation", "init_errors", "init_lifecycle", "init_stopwatch", "init_types", "init_uri", "init_position", "init_range", "init_resolverService", "Scanner", "ch", "value", "token", "pos", "len", "type", "Marker", "child", "Text", "others", "parent", "idx", "newChildren", "_fixParent", "children", "candidate", "TextmateSnippet", "prev", "cur", "TransformableMarker", "Placeholder", "index", "a", "b", "Choice", "ret", "marker", "Transform", "_this", "didMatch", "FormatString", "groups", "shorthandName", "ifValue", "elseValue", "match", "word", "Variable", "name", "resolver", "walk", "visitor", "stack", "all", "last", "found", "placeholder", "SnippetParser", "template", "insertFinalTabstop", "enforceFinalTabstop", "snippet", "offset", "placeholderDefaultValues", "incompletePlaceholders", "defaultValues", "clone", "p", "start", "nextToken", "choice", "values", "variable", "transform", "regexValue", "regexOptions", "escaped", "complex", "shorthand", "init_nls", "init_actions", "init_commands", "init_contextkey", "init_languageFeatures", "init_dom", "init_widget", "init_codicons", "init_event", "init_nls", "NLS_DEFAULT_LABEL", "localize", "NLS_PRESERVE_CASE_LABEL", "PreserveCaseToggle", "Toggle", "opts", "Codicon", "ReplaceInput", "Widget", "parent", "contextViewProvider", "_showOptionButtons", "options", "Emitter", "appendPreserveCaseLabel", "history", "flexibleHeight", "flexibleWidth", "flexibleMaxHeight", "HistoryInputBox", "viaKeyboard", "e", "indexes", "event", "index", "newIndex", "EventHelper", "controls", "enabled", "styles", "toggleStyles", "inputBoxStyles", "value", "newWidth", "init_contextkey", "init_keybindingsRegistry", "init_nls", "init_lifecycle", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "historyNavigationVisible", "RawContextKey", "localize", "HistoryNavigationWidgetFocusContext", "HistoryNavigationForwardsEnablementContext", "HistoryNavigationBackwardsEnablementContext", "lastFocusedWidget", "widgets", "registerAndCreateHistoryNavigationContext", "contextKeyService", "widget", "disposableStore", "DisposableStore", "scopedContextKeyService", "historyNavigationWidgetFocus", "historyNavigationForwardsEnablement", "historyNavigationBackwardsEnablement", "onDidFocus", "onDidBlur", "toDisposable", "ContextScopedFindInput", "FindInput", "container", "contextViewProvider", "options", "showFindOptions", "IContextKeyService", "ContextScopedReplaceInput", "ReplaceInput", "container", "contextViewProvider", "options", "contextKeyService", "showReplaceOptions", "registerAndCreateHistoryNavigationContext", "__decorate", "__param", "IContextKeyService", "KeybindingsRegistry", "ContextKeyExpr", "HistoryNavigationWidgetFocusContext", "HistoryNavigationBackwardsEnablementContext", "historyNavigationVisible", "accessor", "lastFocusedWidget", "HistoryNavigationForwardsEnablementContext", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "Context", "historyNavigationVisible", "RawContextKey", "localize", "suggestWidgetStatusbarMenu", "MenuId", "CompletionItem", "position", "completion", "container", "provider", "FuzzyScore", "Range", "Position", "token", "sub", "err", "isCancellationError", "CompletionOptions", "snippetSortOrder", "kindFilter", "providerFilter", "showDeprecated", "_snippetSuggestSupport", "getSnippetSuggestSupport", "CompletionItemModel", "items", "needsClipboard", "durations", "disposable", "provideSuggestionItems", "registry", "model", "options", "context", "CancellationToken", "sw", "StopWatch", "word", "defaultReplaceRange", "defaultRange", "disposables", "DisposableStore", "onCompletionList", "_a", "_b", "_c", "didAddResult", "suggestion", "SnippetParser", "isDisposable", "snippetCompletions", "list", "providerGroup", "onUnexpectedExternalError", "CancellationError", "getSuggestionComparator", "defaultComparator", "a", "b", "snippetUpComparator", "snippetDownComparator", "_snippetComparators", "snippetConfig", "CommandsRegistry", "accessor", "args", "uri", "triggerCharacter", "maxItemsToResolve", "assertType", "URI", "completionProvider", "ILanguageFeaturesService", "ref", "ITextModelService", "resolving", "completions", "item", "showSimpleSuggestions", "editor", "QuickSuggestionsOptions", "config", "tokenType", "init_async", "init_editorContextKeys", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "$", "ContentHoverController", "Disposable", "_editor", "_instantiationService", "_keybindingService", "ContentHoverWidget", "participant", "HoverParticipantRegistry", "p1", "p2", "ContentHoverComputer", "HoverOperation", "result", "addStandardDisposableListener", "e", "TokenizationRegistry", "mouseEvent", "anchorCandidates", "anchor", "HoverRangeAnchor", "epsilon", "a", "b", "range", "mode", "focus", "filteredMessages", "m", "node", "loadingMessage", "isComplete", "hasLoadingMessage", "messages", "showAtPosition", "showAtRange", "highlightRange", "disposables", "DisposableStore", "statusBar", "EditorHoverStatusBar", "fragment", "colorPicker", "context", "widget", "hoverParts", "msg", "highlightDecoration", "toDisposable", "ContentHoverVisibleData", "anchorRange", "anchorLineNumber", "renderStartColumn", "renderEndColumn", "forceShowAtRange", "Range", "Position", "ModelDecorationOptions", "IInstantiationService", "IKeybindingService", "ContentHoverVisibleData", "colorPicker", "showAtPosition", "showAtRange", "preferAbove", "stoleFocus", "disposables", "ContentHoverWidget", "Disposable", "_editor", "_contextKeyService", "EditorContextKeys", "HoverWidget", "e", "_a", "_b", "Context", "visibleData", "height", "fontSize", "lineHeight", "node", "scrollDimensions", "extraBottomPadding", "__decorate", "__param", "IContextKeyService", "EditorHoverStatusBar", "Disposable", "_keybindingService", "$", "append", "actionOptions", "keybinding", "keybindingLabel", "HoverAction", "element", "result", "__decorate", "__param", "IKeybindingService", "ContentHoverComputer", "_editor", "_participants", "value", "editor", "anchor", "model", "lineNumber", "maxColumn", "d", "startColumn", "endColumn", "token", "AsyncIterableObject", "lineDecorations", "participant", "coalesce", "init_dom", "init_arrays", "init_lifecycle", "init_dom", "init_dompurify", "init_formattedTextRenderer", "init_mouseEvent", "init_errors", "init_event", "init_lifecycle", "__marked_exports", "define", "deps", "factory", "global", "exports", "_defineProperties", "target", "props", "i", "descriptor", "_createClass", "Constructor", "protoProps", "staticProps", "_unsupportedIterableToArray", "o", "minLen", "_arrayLikeToArray", "n", "arr", "len", "arr2", "_createForOfIteratorHelperLoose", "allowArrayLike", "it", "getDefaults", "changeDefaults", "newDefaults", "escapeTest", "escapeReplace", "escapeTestNoEncode", "escapeReplaceNoEncode", "escapeReplacements", "getEscapeReplacement", "ch", "escape", "html", "encode", "unescapeTest", "unescape", "_", "caret", "edit", "regex", "opt", "obj", "name", "val", "nonWordAndColonTest", "originIndependentUrl", "cleanUrl", "sanitize", "base", "href", "prot", "resolveUrl", "baseUrls", "justDomain", "protocol", "domain", "rtrim", "relativeBase", "noopTest", "merge", "key", "splitCells", "tableRow", "count", "row", "match", "offset", "str", "escaped", "curr", "cells", "c", "invert", "l", "suffLen", "currChar", "findClosingBracket", "b", "level", "checkSanitizeDeprecation", "repeatString", "pattern", "result", "outputLink", "cap", "link", "raw", "lexer", "title", "text", "token", "indentCodeCompensation", "matchIndentToCode", "indentToCode", "node", "matchIndentInNode", "indentInNode", "Tokenizer", "options", "_proto", "src", "trimmed", "istask", "ischecked", "indent", "blankLine", "endsWithBlankLine", "line", "nextLine", "rawLine", "itemContents", "endEarly", "bull", "isordered", "list", "itemRegex", "nextBulletRegex", "hrRegex", "spacers", "t", "hasMultipleLineBreaks", "chars", "lineBreaks", "_iterator", "_step", "_char", "tag", "item", "j", "k", "trimmedUrl", "rtrimSlash", "lastParenIndex", "start", "linkLen", "links", "maskedSrc", "prevChar", "nextChar", "lLength", "rDelim", "rLength", "delimTotal", "midDelimTotal", "endReg", "_text", "hasNonSpaceChars", "hasSpaceCharsOnBothEnds", "mangle", "prevCapZero", "smartypants", "block", "inline", "out", "Lexer", "rules", "next", "tokens", "_this", "leading", "tabs", "lastToken", "cutSrc", "lastParagraphClipped", "extTokenizer", "startIndex", "tempSrc", "tempStart", "getStartIndex", "errMsg", "_this2", "keepPrevChar", "Renderer", "_code", "infostring", "lang", "quote", "_html", "slugger", "id", "body", "ordered", "type", "startatt", "checked", "header", "content", "flags", "TextRenderer", "Slugger", "value", "originalSlug", "isDryRun", "slug", "occurenceAccumulator", "Parser", "parser", "top", "l2", "l3", "cell", "loose", "itemBody", "task", "checkbox", "ret", "renderer", "marked", "callback", "highlight", "e", "done", "err", "pending", "code", "_tokens", "_len", "args", "_key", "opts", "extensions", "hasExtensions", "pack", "ext", "prevRenderer", "_len2", "_key2", "_loop", "prop", "_len3", "_key3", "tokenizer", "_loop2", "prevTokenizer", "_len4", "_key4", "_walkTokens", "_loop3", "_iterator2", "_step2", "_iterator3", "_step3", "_iterator4", "_step4", "_cell", "childTokens", "setOptions", "use", "walkTokens", "parseInline", "parse", "init_network", "init_objects", "init_resources", "init_strings", "init_uri", "renderMarkdown", "markdown", "options", "markedOptions", "_a", "disposables", "DisposableStore", "isDisposed", "element", "createElement", "_uriMassage", "part", "data", "parse", "cloneAndChange", "value", "URI", "_href", "href", "isDomUri", "uri", "Schemas", "FileAccess", "renderer", "marked", "title", "text", "dimensions", "attributes", "parseHrefAndDimensions", "escapeDoubleQuotes", "removeMarkdownEscapes", "codeBlocks", "code", "lang", "id", "defaultGenerator", "escape", "onClick", "DomEmitter", "onAuxClick", "Event", "e", "mouseEvent", "StandardMouseEvent", "target", "resolveWithBaseUri", "err", "onUnexpectedError", "html", "markdownEscapeEscapedIcons", "renderedMarkdown", "renderLabelWithIcons", "markdownHtmlDoc", "sanitizeRenderedMarkdown", "img", "src", "a", "resolvedHref", "tuples", "_b", "renderedElements", "placeholderElements", "placeholderElement", "renderedElement", "reset", "listener", "addDisposableListener", "baseUri", "resolvePath", "dirname", "config", "allowedSchemes", "getSanitizerOptions", "addHook", "hook", "hookDomPurifyHrefAndSrcSanitizer", "sanitize", "removeHook", "init_opener", "init_language", "init_errors", "init_event", "init_lifecycle", "init_modesRegistry", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "_a", "MarkdownRenderer", "_options", "_languageService", "_openerService", "Emitter", "markdown", "options", "markedOptions", "disposables", "DisposableStore", "renderMarkdown", "languageAlias", "_b", "_c", "languageId", "PLAINTEXT_LANGUAGE_ID", "html", "tokenizeToString", "element", "fontInfo", "applyFontInfo", "content", "onUnexpectedError", "ILanguageService", "IOpenerService", "init_opener", "$", "MarginHoverWidget", "Disposable", "editor", "languageService", "openerService", "NullOpenerService", "DisposableStore", "HoverWidget", "MarkdownRenderer", "MarginHoverComputer", "HoverOperation", "result", "e", "node", "lineNumber", "messages", "fragment", "msg", "markdownHoverElement", "hoverContentsElement", "append", "renderedContents", "editorLayout", "topForLineNumber", "editorScrollTop", "lineHeight", "nodeHeight", "top", "_editor", "value", "toHoverMessage", "contents", "lineDecorations", "d", "hoverMessage", "isEmptyMarkdownString", "asArray", "init_nls", "init_contextkey", "init_instantiation", "init_opener", "init_colorRegistry", "init_themeService", "init_dom", "init_arrays", "init_async", "init_lifecycle", "init_position", "init_range", "init_language", "init_async", "init_cancellation", "init_errors", "init_editorExtensions", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "HoverProviderResult", "provider", "hover", "ordinal", "executeProvider", "model", "position", "token", "isValid", "err", "onUnexpectedExternalError", "getHover", "registry", "promises", "index", "AsyncIterableObject", "getHoverPromise", "item", "registerModelAndPositionCommand", "accessor", "languageFeaturesService", "ILanguageFeaturesService", "CancellationToken", "hasRange", "hasHtmlContent", "init_nls", "init_configuration", "init_opener", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "$", "MarkdownHover", "owner", "range", "contents", "ordinal", "anchor", "MarkdownHoverParticipant", "_editor", "_languageService", "_openerService", "_configurationService", "_languageFeaturesService", "MarkdownString", "localize", "lineDecorations", "model", "lineNumber", "maxColumn", "result", "index", "lineLength", "languageId", "maxTokenizationLineLength", "startColumn", "endColumn", "hoverMessage", "isEmptyMarkdownString", "Range", "asArray", "token", "AsyncIterableObject", "position", "Position", "getHover", "item", "rng", "context", "hoverParts", "renderMarkdownHovers", "ILanguageService", "IOpenerService", "IConfigurationService", "ILanguageFeaturesService", "renderMarkdownHovers", "context", "hoverParts", "editor", "languageService", "openerService", "a", "b", "disposables", "DisposableStore", "hoverPart", "contents", "isEmptyMarkdownString", "markdownHoverElement", "$", "hoverContentsElement", "append", "renderer", "MarkdownRenderer", "renderedContents", "init_dom", "init_arrays", "init_async", "init_errors", "init_lifecycle", "init_resources", "init_range", "init_codicons", "init_lifecycle", "init_editorExtensions", "init_codeEditorService", "init_position", "init_range", "init_editorContextKeys", "init_arrays", "init_event", "init_lifecycle", "init_linkedList", "init_strings", "init_uri", "init_range", "init_extensions", "init_instantiation", "init_configuration", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "MarkerCoordinate", "marker", "index", "total", "MarkerList", "resourceFilter", "_markerService", "_configService", "Emitter", "DisposableStore", "URI", "uri", "compareOrder", "compareMarker", "b", "res", "compare", "Range", "MarkerSeverity", "updateMarker", "m", "uris", "model", "position", "fwd", "found", "idx", "binarySearch", "a", "range", "word", "oldIdx", "IMarkerService", "IConfigurationService", "IMarkerNavigationService", "createDecorator", "MarkerNavigationService", "_markerService", "_configService", "LinkedList", "resource", "provider", "result", "MarkerList", "__decorate", "__param", "IMarkerService", "IConfigurationService", "registerSingleton", "init_nls", "init_actions", "init_contextkey", "init_instantiation", "init_dom", "init_arrays", "init_color", "init_event", "init_lifecycle", "init_resources", "init_strings", "init_range", "init_nls", "init_actions", "init_contextkey", "init_instantiation", "init_opener", "init_codicons", "init_colorRegistry", "init_themeService", "SeverityIcon", "className", "severity", "severity_default", "Codicon", "registerThemingParticipant", "theme", "collector", "errorIconForeground", "problemsErrorIconForeground", "errorCodiconSelector", "warningIconForeground", "problemsWarningIconForeground", "warningCodiconSelector", "infoIconForeground", "problemsInfoIconForeground", "infoCodiconSelector", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "MessageWidget", "parent", "editor", "onRelatedInformation", "_openerService", "_labelService", "DisposableStore", "domNode", "addStandardDisposableListener", "event", "related", "ScrollableElement", "e", "dispose", "marker", "source", "message", "relatedInformation", "code", "sourceAndCodeLength", "lines", "splitLines", "line", "clearNode", "lastLineElement", "detailsElement", "sourceElement", "codeElement", "$", "append", "isNonEmptyArray", "relatedInformationNode", "container", "relatedResource", "relatedMessage", "fontInfo", "scrollWidth", "scrollHeight", "height", "width", "severityLabel", "MarkerSeverity", "localize", "ariaLabel", "model", "MarkerNavigationWidget", "PeekViewWidget", "_themeService", "_menuService", "instantiationService", "_contextKeyService", "Emitter", "Color", "theme", "editorMarkerNavigationBackground", "colorId", "editorMarkerNavigationError", "headerBackground", "editorMarkerNavigationErrorHeader", "editorMarkerNavigationWarning", "editorMarkerNavigationWarningHeader", "editorMarkerNavigationInfo", "editorMarkerNavigationInfoHeader", "frameColor", "headerBg", "peekViewTitleForeground", "peekViewTitleInfoForeground", "actions", "menu", "createAndFillInActionBarActions", "markerIdx", "markerCount", "range", "Range", "editorPosition", "position", "detail", "basename", "SeverityIcon", "heightInPixel", "widthInPixel", "MenuId", "IThemeService", "IOpenerService", "IMenuService", "IInstantiationService", "IContextKeyService", "ILabelService", "errorDefault", "oneOf", "editorErrorForeground", "editorErrorBorder", "warningDefault", "editorWarningForeground", "editorWarningBorder", "infoDefault", "editorInfoForeground", "editorInfoBorder", "editorMarkerNavigationError", "registerColor", "contrastBorder", "localize", "editorMarkerNavigationErrorHeader", "transparent", "editorMarkerNavigationWarning", "editorMarkerNavigationWarningHeader", "editorMarkerNavigationInfo", "editorMarkerNavigationInfoHeader", "editorMarkerNavigationBackground", "editorBackground", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "MarkerController", "editor", "_markerNavigationService", "_contextKeyService", "_editorService", "_instantiationService", "DisposableStore", "CONTEXT_MARKERS_NAVIGATION_VISIBLE", "uri", "reusePosition", "MarkerNavigationWidget", "_a", "_b", "_c", "Range", "info", "related", "focusEditor", "marker", "model", "Position", "next", "multiFile", "otherEditor", "IMarkerNavigationService", "IContextKeyService", "ICodeEditorService", "IInstantiationService", "MarkerNavigationAction", "EditorAction", "_next", "_multiFile", "opts", "_accessor", "editor", "_a", "__awaiter", "MarkerController", "NextMarkerAction", "EditorContextKeys", "MarkerNavigationWidget", "registerIcon", "Codicon", "localize", "PrevMarkerAction", "NextMarkerInFilesAction", "MenuId", "PrevMarkerInFilesAction", "registerEditorContribution", "registerEditorAction", "CONTEXT_MARKERS_NAVIGATION_VISIBLE", "RawContextKey", "MarkerCommand", "EditorCommand", "registerEditorCommand", "x", "init_nls", "init_opener", "init_progress", "init_colorRegistry", "init_themeService", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "$", "MarkerHover", "owner", "range", "marker", "anchor", "markerCodeActionTrigger", "CodeActionKind", "CodeActionTriggerSource", "MarkerHoverParticipant", "_editor", "_markerDecorationsService", "_openerService", "_languageFeaturesService", "lineDecorations", "model", "lineNumber", "maxColumn", "result", "startColumn", "endColumn", "Range", "context", "hoverParts", "Disposable", "disposables", "DisposableStore", "msg", "markerHoverForStatusbar", "a", "b", "MarkerSeverity", "markerHover", "hoverElement", "markerElement", "append", "source", "message", "code", "relatedInformation", "messageElement", "sourceAndCodeElement", "sourceElement", "codeLink", "addDisposableListener", "e", "codeElement", "detailsElement", "isNonEmptyArray", "resource", "startLineNumber", "relatedInfoContainer", "basename", "onUnexpectedError", "localize", "NextMarkerAction", "_a", "MarkerController", "quickfixPlaceholderElement", "IMarkerData", "updatePlaceholderDisposable", "disposableTimeout", "codeActionsPromise", "toDisposable", "actions", "showing", "QuickFixAction", "controller", "QuickFixController", "elementPosition", "getDomNodePagePosition", "createCancelablePromise", "cancellationToken", "getCodeActions", "Progress", "IMarkerDecorationsService", "IOpenerService", "ILanguageFeaturesService", "registerThemingParticipant", "theme", "collector", "linkFg", "textLinkForeground", "activeLinkFg", "textLinkActiveForeground", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ModesHoverController", "_editor", "_instantiationService", "_openerService", "_languageService", "_contextKeyService", "DisposableStore", "e", "editor", "hideWidgetsEventHandler", "hoverOpts", "mouseEvent", "ContentHoverWidget", "MarginHoverWidget", "_a", "targetEm", "_b", "_c", "_d", "_e", "ContentHoverController", "range", "mode", "focus", "IInstantiationService", "IOpenerService", "ILanguageService", "IContextKeyService", "ShowHoverAction", "EditorAction", "localize", "EditorContextKeys", "KeyChord", "accessor", "editor", "controller", "ModesHoverController", "position", "range", "Range", "focus", "ShowDefinitionPreviewHoverAction", "goto", "GotoDefinitionAtPositionEditorContribution", "registerEditorContribution", "registerEditorAction", "HoverParticipantRegistry", "MarkdownHoverParticipant", "MarkerHoverParticipant", "registerThemingParticipant", "theme", "collector", "editorHoverHighlightColor", "editorHoverHighlight", "hoverBackground", "editorHoverBackground", "hoverBorder", "editorHoverBorder", "link", "textLinkForeground", "linkHover", "textLinkActiveForeground", "hoverForeground", "editorHoverForeground", "actionsBackground", "editorHoverStatusBarBackground", "codeBackground", "textCodeBlockBackground", "ColorContribution", "Disposable", "_editor", "e", "mouseEvent", "target", "ColorDecorationInjectedTextMarker", "hoverController", "ModesHoverController", "range", "Range", "registerEditorContribution", "HoverParticipantRegistry", "ColorHoverParticipant", "init_editorExtensions", "init_dom", "init_async", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "createStringDataTransferItem", "stringOrPromise", "createFileDataTransferItem", "fileName", "uri", "data", "VSDataTransfer", "mimeType", "_a", "existing", "mine", "items", "item", "f", "mime", "init_lifecycle", "init_mime", "generateUuid", "getRandomValues", "bucket", "i", "_data", "_hex", "result", "init_arrays", "init_mime", "init_uri", "init_uri", "init_opener", "init_platform", "CodeDataTransfers", "extractEditorsDropData", "e", "_a", "editors", "rawEditorsData", "parse", "rawResourcesData", "DataTransfers", "createDraggedEditorInputFromRawResourcesData", "i", "file", "URI", "rawCodeFiles", "codeFiles", "codeFile", "contributions", "Registry", "Extensions", "contribution", "data", "resourcesRaw", "resourceRaw", "selection", "uri", "extractSelection", "DragAndDropContributionRegistry", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "toVSDataTransfer", "dataTransfer", "vsDataTransfer", "VSDataTransfer", "item", "type", "asStringValue", "createStringDataTransferItem", "file", "createFileDataTransferItemFromFile", "uri", "URI", "createFileDataTransferItem", "INTERNAL_DND_MIME_TYPES", "CodeDataTransfers", "DataTransfers", "addExternalEditorsDropData", "dragEvent", "overwriteUriList", "_a", "Mimes", "editorData", "extractEditorsDropData", "input", "UriList", "internal", "entries", "distinct", "x", "str", "init_range", "init_languageFeatures", "init_editorState", "init_lifecycle", "init_types", "init_editorExtensions", "init_position", "init_selection", "init_editorContextKeys", "init_languageConfigurationRegistry", "init_languageFeatures", "init_nls", "init_contextkey", "init_log", "init_arrays", "init_lifecycle", "init_strings", "init_editOperation", "init_range", "init_selection", "init_languageConfigurationRegistry", "init_textModel", "init_extpath", "init_platform", "normalizeDriveLetter", "path", "isWindowsOS", "isWindows", "hasDriveLetter", "init_path", "init_resources", "init_strings", "init_languageConfigurationRegistry", "init_nls", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "KnownSnippetVariableNames", "CompositeSnippetVariableResolver", "_delegates", "variable", "delegate", "value", "SelectionBasedVariableResolver", "_model", "_selection", "_selectionIdx", "_overtypingCapturer", "name", "isMultiline", "info", "line", "lineLeadingWhitespace", "getLeadingWhitespace", "varLeadingWhitespace", "marker", "Text", "splitLines", "whitespaceCommonLength", "commonPrefixLength", "m", "newline", "rest", "ModelBasedVariableResolver", "_labelService", "basename", "idx", "dirname", "ClipboardBasedVariableResolver", "_readClipboardText", "_selectionCount", "_spread", "clipboardText", "lines", "s", "isFalsyOrWhitespace", "CommentBasedVariableResolver", "_languageConfigurationService", "langId", "config", "ILanguageConfigurationService", "TimeBasedVariableResolver", "variable", "name", "localize", "WorkspaceBasedVariableResolver", "_workspaceService", "workspaceIdentifier", "toWorkspaceIdentifier", "isSingleFolderWorkspaceIdentifier", "basename", "filename", "WORKSPACE_EXTENSION", "normalizeDriveLetter", "folderpath", "RandomBasedVariableResolver", "generateUuid", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "OneSnippet", "_editor", "_snippet", "_snippetLineLeadingWhitespace", "groupBy", "Placeholder", "textChange", "model", "accessor", "placeholder", "placeholderOffset", "placeholderLen", "range", "Range", "options", "handle", "fwd", "operations", "id", "currentValue", "transformedValueLines", "EditOperation", "couldSkipThisPlaceholder", "newSelections", "activePlaceholders", "selections", "Selection", "enclosingPlaceholder", "marker", "result", "placeholdersWithEqualIndex", "ranges", "Choice", "others", "nested", "indexLastPlaceholder", "nestedPlaceholder", "ModelDecorationOptions", "_defaultOptions", "SnippetSession", "_template", "_options", "_languageConfigurationService", "position", "snippet", "adjustIndentation", "adjustNewlines", "line", "lineLeadingWhitespace", "getLeadingWhitespace", "snippetTextString", "Text", "lines", "offset", "prevChar", "newValue", "selection", "overwriteBefore", "overwriteAfter", "positionLineNumber", "positionColumn", "positionColumnBefore", "positionColumnAfter", "editor", "template", "enforceFinalTabstop", "adjustWhitespace", "clipboardText", "overtypingCapturer", "languageConfigurationService", "edits", "snippets", "workspaceService", "IWorkspaceContextService", "modelBasedVariableResolver", "ModelBasedVariableResolver", "ILabelService", "readClipboardText", "firstBeforeText", "firstAfterText", "firstLineFirstNonWhitespace", "indexedSelections", "idx", "a", "b", "extensionBefore", "extensionAfter", "snippetSelection", "SnippetParser", "start", "snippetLineLeadingWhitespace", "CompositeSnippetVariableResolver", "ClipboardBasedVariableResolver", "SelectionBasedVariableResolver", "CommentBasedVariableResolver", "TimeBasedVariableResolver", "WorkspaceBasedVariableResolver", "RandomBasedVariableResolver", "snippetEdits", "parser", "TextmateSnippet", "resolver", "lastRange", "textRange", "textNode", "snippetText", "snippetFragmentText", "edit", "dispose", "_undoEdits", "undoEdits", "isTrivialSnippet", "oneSelection", "allPossibleSelections", "possibleSelections", "index", "array", "ILanguageConfigurationService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "_defaultOptions", "SnippetController2", "_editor", "_logService", "_languageFeaturesService", "contextKeyService", "_languageConfigurationService", "DisposableStore", "editor", "_a", "edits", "opts", "e", "template", "assertType", "SnippetSession", "model", "position", "Position", "activeChoice", "word", "isAnyOfOptions", "o", "suggestions", "option", "localize", "registration", "showSimpleSuggestions", "resetSelection", "RawContextKey", "ILogService", "ILanguageFeaturesService", "IContextKeyService", "ILanguageConfigurationService", "registerEditorContribution", "SnippetController2", "CommandCtor", "EditorCommand", "registerEditorCommand", "ContextKeyExpr", "ctrl", "EditorContextKeys", "performSnippetEdit", "editor", "snippet", "selections", "controller", "selection", "Selection", "init_configuration", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "vscodeClipboardMime", "CopyPasteController", "Disposable", "editor", "_bulkEditService", "_clipboardService", "_configurationService", "_languageFeaturesService", "container", "addDisposableListener", "model", "_a", "selections", "ranges", "primarySelection", "wasFromEmptySelection", "Range", "providers", "x", "dataTransfer", "toVSDataTransfer", "handle", "generateUuid", "promise", "createCancelablePromise", "token", "results", "provider", "metadata", "_b", "_c", "rawMetadata", "originalDocVersion", "tokenSource", "EditorStateCancellationTokenSource", "Mimes", "resources", "createStringDataTransferItem", "UriList", "type", "DataTransfers", "item", "edit", "performSnippetEdit", "SnippetParser", "ResourceEdit", "textDataTransfer", "text", "IBulkEditService", "IClipboardService", "IConfigurationService", "ILanguageFeaturesService", "init_nls", "init_configurationRegistry", "init_platform", "registerEditorContribution", "CopyPasteController", "Registry", "Extensions", "editorConfigurationBaseNode", "localize", "init_keyCodes", "init_editorExtensions", "init_range", "init_editorContextKeys", "init_languageConfigurationRegistry", "init_editOperation", "init_position", "init_range", "init_selection", "BlockCommentCommand", "selection", "insertSpace", "languageConfigurationService", "haystack", "needle", "offset", "needleLength", "haystackLength", "i", "codeA", "codeB", "startToken", "endToken", "model", "builder", "startLineNumber", "startColumn", "endLineNumber", "endColumn", "startLineText", "endLineText", "startTokenIndex", "endTokenIndex", "startLineAfterStartToken", "endLineBeforeEndToken", "ops", "Range", "op", "r", "res", "EditOperation", "Position", "languageId", "config", "helper", "inverseEditOperations", "startTokenEditOperation", "endTokenEditOperation", "Selection", "srcRange", "deltaColumn", "init_strings", "init_editOperation", "init_position", "init_range", "init_selection", "LineCommentCommand", "languageConfigurationService", "selection", "tabSize", "type", "insertSpace", "ignoreEmptyLines", "ignoreFirstLine", "model", "startLineNumber", "endLineNumber", "languageId", "config", "commentStr", "lines", "i", "lineCount", "onlyWhitespaceLines", "shouldRemoveComments", "lineData", "lineNumber", "lineContent", "lineContentStartOffset", "firstNonWhitespaceIndex", "BlockCommentCommand", "commentStrEndOffset", "builder", "data", "s", "ops", "cursorPosition", "Position", "len", "Range", "startToken", "endToken", "startTokenAllowedBeforeColumn", "startTokenIndex", "endTokenIndex", "op", "helper", "result", "Selection", "res", "EditOperation", "afterCommentStr", "currentVisibleColumn", "isTab", "columnSize", "minVisibleColumn", "j", "lenJ", "init_nls", "init_actions", "CommentLineAction", "EditorAction", "type", "opts", "accessor", "editor", "languageConfigurationService", "ILanguageConfigurationService", "model", "commands", "modelOptions", "commentsOptions", "selections", "selection", "index", "a", "b", "Range", "prev", "i", "curr", "LineCommentCommand", "ToggleCommentLineAction", "localize", "EditorContextKeys", "MenuId", "AddLineCommentAction", "KeyChord", "RemoveLineCommentAction", "BlockCommentAction", "BlockCommentCommand", "registerEditorAction", "init_dom", "init_actions", "init_lifecycle", "init_platform", "init_editorExtensions", "init_editorContextKeys", "init_nls", "init_contextkey", "init_keybinding", "init_configuration", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ContextMenuController", "editor", "_contextMenuService", "_contextViewService", "_contextKeyService", "_keybindingService", "_menuService", "_configurationService", "DisposableStore", "e", "view", "getShadowRoot", "hasSelectionAtPosition", "selection", "anchor", "menuActions", "MenuId", "model", "menuId", "result", "menu", "groups", "group", "actions", "addedItems", "action", "SubmenuItemAction", "subActions", "SubmenuAction", "Separator", "oldHoverSetting", "cursorCoords", "editorCoords", "getDomNodePagePosition", "posx", "posy", "useShadowDOM", "isIOS", "keybinding", "ActionViewItem", "customActionViewItem", "wasCancelled", "minimapOptions", "lastId", "createAction", "opts", "createSubmenuAction", "label", "createEnumAction", "enabled", "configName", "configuredValue", "options", "createRunner", "value", "option", "localize", "IContextMenuService", "IContextViewService", "IContextKeyService", "IKeybindingService", "IMenuService", "IConfigurationService", "ShowContextMenu", "EditorAction", "localize", "EditorContextKeys", "accessor", "editor", "_a", "ContextMenuController", "registerEditorContribution", "registerEditorAction", "init_lifecycle", "init_editorExtensions", "init_editorContextKeys", "init_nls", "CursorState", "selections", "other", "thisLen", "otherLen", "i", "StackElement", "cursorState", "scrollTop", "scrollLeft", "CursorUndoRedoController", "Disposable", "editor", "e", "prevState", "stackElement", "CursorUndo", "EditorAction", "localize", "EditorContextKeys", "accessor", "args", "_a", "CursorRedo", "registerEditorContribution", "registerEditorAction", "init_lifecycle", "init_platform", "init_editorExtensions", "init_position", "init_range", "init_selection", "init_textModel", "init_range", "init_selection", "DragAndDropCommand", "selection", "targetPosition", "copy", "model", "builder", "text", "Range", "Selection", "helper", "hasTriggerModifier", "e", "isMacintosh", "DragAndDropController", "Disposable", "editor", "mouseEvent", "target", "possibleSelections", "selection", "newCursorPosition", "Position", "newSelections", "primarySelection", "selectionStartLineNumber", "selectionStartColumn", "Selection", "DragAndDropCommand", "position", "Range", "ModelDecorationOptions", "registerEditorContribution", "init_async", "init_lifecycle", "init_mime", "init_resources", "init_uri", "init_editorExtensions", "init_range", "init_selection", "init_languageFeatures", "init_editorState", "init_nls", "init_progress", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "DropIntoEditorController", "Disposable", "editor", "_bulkEditService", "_languageFeaturesService", "_progressService", "workspaceContextService", "DefaultOnDropProvider", "position", "dragEvent", "model", "initialModelVersion", "ourDataTransfer", "tokenSource", "EditorStateCancellationTokenSource", "providers", "edit", "localize", "raceCancellation", "provider", "range", "Range", "performSnippetEdit", "SnippetParser", "Selection", "ResourceEdit", "VSDataTransfer", "textEditorDataTransfer", "toVSDataTransfer", "addExternalEditorsDropData", "IBulkEditService", "ILanguageFeaturesService", "IProgressService", "IWorkspaceContextService", "DefaultOnDropProvider", "_workspaceContextService", "_model", "_position", "dataTransfer", "_token", "_a", "__awaiter", "urlListEntry", "Mimes", "urlList", "snippet", "textEntry", "strUriList", "uris", "resource", "UriList", "URI", "uri", "root", "rel", "relativePath", "__decorate", "__param", "IWorkspaceContextService", "registerEditorContribution", "DropIntoEditorController", "init_async", "init_lifecycle", "init_strings", "init_editorExtensions", "init_editorContextKeys", "init_arrays", "init_async", "init_lifecycle", "init_position", "init_range", "init_selection", "init_textModelSearch", "init_range", "init_model", "init_textModel", "init_colorRegistry", "init_themeService", "FindDecorations", "editor", "scopes", "findScopeDecorationId", "element", "newStartPosition", "decorationId", "index", "desiredRange", "candidates", "candidate", "candidateOpts", "nextMatch", "newCurrentDecorationId", "matchPosition", "i", "len", "range", "changeAccessor", "rng", "lineBeforeEnd", "lineBeforeEndMaxColumn", "Range", "findMatches", "findScopes", "accessor", "findMatchesOptions", "newOverviewRulerApproximateDecorations", "lineCount", "approxPixelsPerLine", "mergeLinesDelta", "prevStartLineNumber", "prevEndLineNumber", "newFindMatchesDecorations", "findScope", "position", "r", "result", "ModelDecorationOptions", "themeColorFromId", "overviewRulerFindMatchForeground", "OverviewRulerLane", "minimapFindMatch", "MinimapPosition", "init_range", "ReplaceAllCommand", "editorSelection", "ranges", "replaceStrings", "model", "builder", "ops", "i", "o1", "o2", "Range", "resultOps", "previousOp", "op", "helper", "init_strings", "buildReplaceStringWithCasePreserved", "matches", "pattern", "containsHyphens", "validateSpecificSpecialCharacter", "containsUnderscores", "buildReplaceStringForSpecificSpecialCharacter", "containsUppercaseCharacter", "specialCharacter", "splitPatternAtSpecialCharacter", "splitMatchAtSpecialCharacter", "replaceString", "splitValue", "index", "StaticValueReplacePattern", "staticValue", "DynamicPiecesReplacePattern", "pieces", "ReplacePattern", "value", "ReplacePiece", "matches", "preserveCase", "buildReplaceStringWithCasePreserved", "result", "i", "len", "piece", "match", "repl", "lenOps", "opIdx", "idx", "matchIndex", "remainder", "caseOps", "index", "ReplacePieceBuilder", "source", "toCharIndex", "parseReplaceString", "replaceString", "chCode", "nextChCode", "nextNextChCode", "init_contextkey", "CONTEXT_FIND_WIDGET_VISIBLE", "RawContextKey", "CONTEXT_FIND_WIDGET_NOT_VISIBLE", "CONTEXT_FIND_INPUT_FOCUSED", "CONTEXT_REPLACE_INPUT_FOCUSED", "ToggleCaseSensitiveKeybinding", "ToggleWholeWordKeybinding", "ToggleRegexKeybinding", "ToggleSearchScopeKeybinding", "TogglePreserveCaseKeybinding", "FIND_IDS", "MATCHES_LIMIT", "RESEARCH_DELAY", "FindModelBoundToEditorModel", "editor", "state", "DisposableStore", "TimeoutTimer", "FindDecorations", "RunOnceScheduler", "e", "dispose", "model", "findScope", "moveCursor", "newFindScope", "findScopes", "endLineNumber", "Range", "findMatches", "editorSelection", "currentMatchesPosition", "matchAfterSelection", "findFirstInSorted", "match", "range", "matchesPosition", "before", "isUsingLineStops", "lineNumber", "column", "Position", "isRecursed", "nextMatchRange", "prevMatchRange", "searchRange", "position", "prevMatch", "after", "nextMatch", "captureMatches", "forceMove", "parseReplaceString", "ReplacePattern", "replacePattern", "selection", "replaceString", "command", "ReplaceCommand", "limitResultCount", "searchRanges", "scope", "searchData", "SearchParams", "searchRegex", "mod", "modelText", "fullModelRange", "resultText", "preserveCase", "ReplaceCommandThatPreservesSelection", "matches", "replaceStrings", "i", "len", "ReplaceAllCommand", "m", "selections", "Selection", "source", "init_dom", "init_widget", "init_async", "init_colorRegistry", "init_themeService", "FindOptionsWidget", "Widget", "editor", "state", "keybindingService", "themeService", "RunOnceScheduler", "inputActiveOptionBorderColor", "inputActiveOptionBorder", "inputActiveOptionForegroundColor", "inputActiveOptionForeground", "inputActiveOptionBackgroundColor", "inputActiveOptionBackground", "CaseSensitiveToggle", "FIND_IDS", "WholeWordsToggle", "RegexToggle", "e", "somethingChanged", "addDisposableListener", "EventType", "actionId", "kb", "theme", "inputStyles", "registerThemingParticipant", "collector", "widgetBackground", "editorWidgetBackground", "widgetForeground", "editorWidgetForeground", "widgetShadowColor", "widgetShadow", "hcBorder", "contrastBorder", "init_event", "init_lifecycle", "init_range", "effectiveOptionValue", "override", "value", "FindReplaceState", "Disposable", "Emitter", "matchesPosition", "matchesCount", "currentMatch", "changeEvent", "somethingChanged", "Range", "newState", "moveCursor", "updateHistory", "_a", "oldEffectiveIsRegex", "oldEffectiveWholeWords", "oldEffectiveMatchCase", "oldEffectivePreserveCase", "newSearchScope", "existingSearchScope", "MATCHES_LIMIT", "init_dom", "init_aria", "init_widget", "init_async", "init_codicons", "init_errors", "init_lifecycle", "init_platform", "init_strings", "init_range", "init_nls", "showHistoryKeybindingHint", "keybindingService", "_a", "_b", "init_colorRegistry", "init_themeService", "init_theme", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "findSelectionIcon", "registerIcon", "Codicon", "localize", "findCollapsedIcon", "findExpandedIcon", "findReplaceIcon", "findReplaceAllIcon", "findPreviousMatchIcon", "findNextMatchIcon", "NLS_FIND_INPUT_LABEL", "NLS_FIND_INPUT_PLACEHOLDER", "NLS_PREVIOUS_MATCH_BTN_LABEL", "NLS_NEXT_MATCH_BTN_LABEL", "NLS_TOGGLE_SELECTION_FIND_TITLE", "NLS_CLOSE_BTN_LABEL", "NLS_REPLACE_INPUT_LABEL", "NLS_REPLACE_INPUT_PLACEHOLDER", "NLS_REPLACE_BTN_LABEL", "NLS_REPLACE_ALL_BTN_LABEL", "NLS_TOGGLE_REPLACE_MODE_BTN_LABEL", "NLS_MATCHES_COUNT_LIMIT_TITLE", "MATCHES_LIMIT", "NLS_MATCHES_LOCATION", "NLS_NO_RESULTS", "FIND_WIDGET_INITIAL_WIDTH", "PART_WIDTH", "FIND_INPUT_AREA_WIDTH", "MAX_MATCHES_COUNT_WIDTH", "FIND_INPUT_AREA_HEIGHT", "ctrlEnterReplaceAllWarningPromptedKey", "ctrlKeyMod", "isMacintosh", "FindWidgetViewZone", "afterLineNumber", "stopPropagationForMultiLineUpwards", "event", "textarea", "isMultiline", "stopPropagationForMultiLineDownwards", "FindWidget", "Widget", "codeEditor", "controller", "state", "contextViewProvider", "keybindingService", "contextKeyService", "themeService", "storageService", "notificationService", "Delayer", "toDisposable", "addExtraSpaceOnTop", "globalBufferTerm", "CONTEXT_FIND_INPUT_FOCUSED", "trackFocus", "CONTEXT_REPLACE_INPUT_FOCUSED", "getTotalWidth", "showRedOutline", "onUnexpectedError", "label", "matchesCount", "matchesPosition", "format", "alert", "currentMatch", "searchString", "ariaLabel", "model", "selection", "isSelection", "isChecked", "findInputIsNonEmpty", "canReplace", "isSelectionMultipleLine", "adjustEditorScrollTop", "domNode", "editorCoords", "getDomNodePagePosition", "startCoords", "startLeft", "startTop", "leftOfFindWidget", "getTopLeftOffset", "endCoords", "focusTheEditor", "targetScrollTop", "viewZone", "accessor", "adjustScroll", "newHeight", "scrollAdjustment", "theme", "inputStyles", "inputActiveOptionBorder", "inputActiveOptionBackground", "inputActiveOptionForeground", "inputBackground", "inputForeground", "inputBorder", "inputValidationInfoBackground", "inputValidationInfoForeground", "inputValidationInfoBorder", "inputValidationWarningBackground", "inputValidationWarningForeground", "inputValidationWarningBorder", "inputValidationErrorBackground", "inputValidationErrorForeground", "inputValidationErrorBorder", "isInDOM", "layoutInfo", "editorWidth", "minimapWidth", "collapsedFindWidget", "reducedFindWidget", "narrowFindWidget", "findInputWidth", "totalheight", "totalHeight", "selections", "Range", "element", "isWindows", "isNative", "_sash", "actionId", "kb", "ContextScopedFindInput", "FIND_IDS", "showHistoryKeybindingHint", "isLinux", "SimpleButton", "findPart", "actionsContainer", "Toggle", "widgetClose", "ContextScopedReplaceInput", "replacePart", "replaceActionsContainer", "Sash", "originalWidth", "evt", "width", "maxWidth", "getComputedStyle", "currentWidth", "opts", "className", "ThemeIcon", "_a", "_b", "enabled", "expanded", "registerThemingParticipant", "collector", "addBackgroundColorRule", "selector", "color", "editorFindMatchHighlight", "editorFindMatch", "editorFindRangeHighlight", "widgetBackground", "editorWidgetBackground", "widgetShadowColor", "widgetShadow", "findMatchHighlightBorder", "editorFindMatchHighlightBorder", "isHighContrast", "findMatchBorder", "editorFindMatchBorder", "findRangeHighlightBorder", "editorFindRangeHighlightBorder", "hcBorder", "contrastBorder", "foreground", "editorWidgetForeground", "error", "errorForeground", "resizeBorderBackground", "editorWidgetResizeBorder", "border", "editorWidgetBorder", "toolbarHoverBackgroundColor", "toolbarHoverBackground", "focusOutline", "focusBorder", "init_nls", "init_actions", "init_contextkey", "init_keybinding", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "SEARCH_STRING_MAX_LENGTH", "getSelectionSearchString", "editor", "seedSearchStringFromSelection", "seedSearchStringFromNonEmptySelection", "selection", "wordAtPosition", "CommonFindController", "Disposable", "contextKeyService", "storageService", "clipboardService", "CONTEXT_FIND_WIDGET_VISIBLE", "Delayer", "FindReplaceState", "shouldRestartFind", "CONTEXT_FIND_INPUT_FOCUSED", "selections", "element", "searchString", "escapeRegExpCharacters", "ignoreWhenVisible", "opts", "newState", "stateChanges", "selectionSearchString", "currentSelections", "FindModelBoundToEditorModel", "text", "IContextKeyService", "IStorageService", "IClipboardService", "FindController", "CommonFindController", "editor", "_contextViewService", "_contextKeyService", "_keybindingService", "_themeService", "_notificationService", "_storageService", "clipboardService", "opts", "newState", "_super", "__awaiter", "selection", "updateSearchScope", "ignoreWhenVisible", "FindWidget", "FindOptionsWidget", "__decorate", "__param", "IContextViewService", "IContextKeyService", "IKeybindingService", "IThemeService", "INotificationService", "IStorageService", "IClipboardService", "StartFindAction", "registerMultiEditorAction", "MultiEditorAction", "FIND_IDS", "localize", "ContextKeyExpr", "EditorContextKeys", "MenuId", "accessor", "editor", "args", "controller", "CommonFindController", "findArgDescription", "StartFindWithArgsAction", "EditorAction", "__awaiter", "newState", "StartFindWithSelectionAction", "MatchFindAction", "NextMatchFindAction", "CONTEXT_FIND_INPUT_FOCUSED", "PreviousMatchFindAction", "SelectionMatchFindAction", "seedSearchStringFromNonEmptySelection", "selectionSearchString", "getSelectionSearchString", "NextSelectionMatchFindAction", "PreviousSelectionMatchFindAction", "StartFindReplaceAction", "currentSelection", "findInputFocused", "seedSearchStringFromSelection", "shouldFocus", "registerEditorContribution", "FindController", "registerEditorAction", "FindCommand", "EditorCommand", "registerEditorCommand", "CONTEXT_FIND_WIDGET_VISIBLE", "x", "ToggleCaseSensitiveKeybinding", "ToggleWholeWordKeybinding", "ToggleRegexKeybinding", "ToggleSearchScopeKeybinding", "TogglePreserveCaseKeybinding", "CONTEXT_REPLACE_INPUT_FOCUSED", "init_async", "init_errors", "init_keyCodes", "init_lifecycle", "init_strings", "init_types", "init_editorExtensions", "init_editorContextKeys", "init_languages", "init_languageConfigurationRegistry", "init_event", "BitField", "size", "numWords", "index", "arrayIndex", "bit", "newState", "value", "FoldingRegions", "startIndexes", "endIndexes", "types", "parentIndexes", "isInsideLast", "startLineNumber", "endLineNumber", "len", "parentIndex", "source", "type", "hasChanged", "i", "FoldingRegion", "parent", "line", "low", "high", "mid", "res", "ranges", "rangesLength", "gotTypes", "range", "regions", "rangesA", "rangesB", "maxLineNumber", "getIndexedFunction", "r", "limit", "getA", "getB", "indexA", "indexB", "nextA", "nextB", "stackedRanges", "topStackedRange", "prevLineNumber", "resultRanges", "useRange", "scanIndex", "prescanB", "lineNumber", "init_hash", "FoldingModel", "textModel", "decorationProvider", "Emitter", "FoldingRegions", "toggledRegions", "r1", "r2", "processed", "accessor", "k", "dirtyRegionEndLine", "lastHiddenLine", "updateDecorationsUntil", "index", "endLineNumber", "isCollapsed", "isManual", "region", "editorDecorationId", "newCollapseState", "ranges", "newFoldingRanges", "intersects", "foldRange", "range", "i", "newRegions", "blockedLineNumers", "foldedOrManualRanges", "newRanges", "newEditorDecorations", "limit", "startLineNumber", "decorationRange", "isBlocked", "blockedLineNumber", "foldedRanges", "source", "decRange", "result", "checksum", "state", "_a", "_b", "rangesToRestore", "maxLineNumber", "lineNumber1", "lineNumber2", "hash", "lineNumber", "filter", "level", "current", "levelStack", "len", "toggleCollapseState", "foldingModel", "levels", "lineNumbers", "toToggle", "doCollapse", "regionsInside", "r", "setCollapseStateLevelsDown", "setCollapseStateLevelsUp", "regions", "setCollapseStateUp", "setCollapseStateAtLevel", "foldLevel", "blockedLineNumbers", "line", "setCollapseStateForRest", "filteredRegions", "filteredRegion", "setCollapseStateForMatchingLines", "regExp", "editorModel", "setCollapseStateForType", "type", "getParentFoldLine", "foldingRegion", "parentFoldingIdx", "getPreviousFoldLine", "expectedParentIndex", "minLineNumber", "getNextFoldLine", "init_arrays", "init_event", "init_range", "init_eolCounter", "HiddenRangeModel", "model", "Emitter", "_", "change", "countEOL", "updateHiddenAreas", "newHiddenAreas", "k", "lastCollapsedStart", "lastCollapsedEnd", "ranges", "startLineNumber", "endLineNumber", "Range", "line", "findRange", "selections", "hasChanges", "editorModel", "lastRange", "adjustLine", "isInside", "i", "len", "selection", "adjustedStartLine", "adjustedEndLine", "range", "findFirstInSorted", "r", "init_utils", "MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT", "ID_INDENT_PROVIDER", "IndentRangeProvider", "editorModel", "languageConfigurationService", "maxFoldingRegions", "cancelationToken", "notifyTooManyRegions", "foldingRules", "offSide", "markers", "computeRanges", "RangesCollector", "foldingRangesLimit", "_notifyTooManyRegions", "startLineNumber", "endLineNumber", "indent", "index", "model", "_a", "startIndexes", "endIndexes", "i", "k", "FoldingRegions", "entries", "maxIndent", "n", "tabSize", "startIndex", "lineContent", "computeIndentLevel", "result", "pattern", "previousRegions", "line", "previous", "m", "init_nls", "init_contextkey", "init_colorRegistry", "init_themeService", "init_codicons", "init_textModel", "init_nls", "init_themeService", "foldingExpandedIcon", "registerIcon", "Codicon", "localize", "foldingCollapsedIcon", "foldingManualCollapsedIcon", "foldingManualExpandedIcon", "FoldingDecorationProvider", "editor", "isCollapsed", "isHidden", "isManual", "callback", "decorationIds", "ModelDecorationOptions", "ThemeIcon", "init_errors", "init_lifecycle", "foldingContext", "ID_SYNTAX_PROVIDER", "SyntaxRangeProvider", "editorModel", "providers", "handleFoldingRangesChange", "limit", "provider", "DisposableStore", "cancellationToken", "notifyTooManyRegions", "collectSyntaxRanges", "ranges", "sanitizeRanges", "_a", "model", "rangeData", "promises", "i", "nLines", "r", "onUnexpectedExternalError", "_", "RangesCollector", "foldingRangesLimit", "_notifyTooManyRegions", "startLineNumber", "endLineNumber", "type", "nestingLevel", "index", "startIndexes", "endIndexes", "FoldingRegions", "entries", "maxLevel", "n", "types", "k", "level", "sorted", "d1", "d2", "diff", "collector", "top", "previous", "entry", "init_languageFeatureDebounce", "init_stopwatch", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "CONTEXT_FOLDING_ENABLED", "RawContextKey", "FoldingController", "Disposable", "editor", "contextKeyService", "languageConfigurationService", "notificationService", "languageFeatureDebounceService", "languageFeaturesService", "DisposableStore", "options", "FoldingDecorationProvider", "maxFoldingRegions", "severity_default", "localize", "e", "model", "collapsedRegions", "provider", "state", "FoldingModel", "HiddenRangeModel", "hr", "Delayer", "RunOnceScheduler", "editorModel", "IndentRangeProvider", "foldingProviders", "SyntaxRangeProvider", "_a", "foldingModel", "sw", "StopWatch", "foldingRegionPromise", "createCancelablePromise", "token", "foldingRanges", "scrollState", "hasChanges", "FoldingRangeKind", "StableEditorScrollState", "selections", "selectionLineNumbers", "s", "newValue", "err", "onUnexpectedError", "hiddenRanges", "toToggle", "selection", "lineNumber", "r", "range", "iconClicked", "data", "offsetLeftInGutter", "region", "isCollapsed", "surrounding", "filter", "otherRegion", "toMaybeToggle", "recursive", "position", "IContextKeyService", "ILanguageConfigurationService", "INotificationService", "ILanguageFeatureDebounceService", "ILanguageFeaturesService", "FoldingAction", "EditorAction", "accessor", "editor", "args", "languageConfigurationService", "ILanguageConfigurationService", "foldingController", "FoldingController", "foldingModelPromise", "foldingModel", "selection", "selections", "s", "l", "_accessor", "_editor", "foldingArgumentsConstraint", "isUndefined", "isObject", "foldingArgs", "isNumber", "isString", "isArray", "UnfoldAction", "localize", "CONTEXT_FOLDING_ENABLED", "EditorContextKeys", "_foldingController", "levels", "lineNumbers", "setCollapseStateLevelsUp", "setCollapseStateLevelsDown", "UnFoldRecursivelyAction", "KeyChord", "_args", "FoldAction", "direction", "setCollapseStateUp", "ToggleFoldAction", "selectedLines", "toggleCollapseState", "FoldRecursivelyAction", "FoldAllBlockCommentsAction", "setCollapseStateForType", "FoldingRangeKind", "editorModel", "comments", "regExp", "escapeRegExpCharacters", "setCollapseStateForMatchingLines", "FoldAllRegionsAction", "foldingRules", "UnfoldAllRegionsAction", "FoldAllRegionsExceptAction", "setCollapseStateForRest", "UnfoldAllRegionsExceptAction", "FoldAllAction", "UnfoldAllAction", "FoldLevelAction", "setCollapseStateAtLevel", "level", "GotoParentFoldAction", "startLineNumber", "getParentFoldLine", "GotoPreviousFoldAction", "getPreviousFoldLine", "GotoNextFoldAction", "getNextFoldLine", "FoldRangeFromSelectionAction", "_a", "collapseRanges", "endLineNumber", "a", "b", "newRanges", "FoldingRegions", "RemoveFoldRangeFromSelectionAction", "ranges", "registerEditorContribution", "registerEditorAction", "i", "registerInstantiatedEditorAction", "foldBackgroundBackground", "registerColor", "transparent", "editorSelectionBackground", "editorFoldForeground", "iconForeground", "registerThemingParticipant", "theme", "collector", "foldBackground", "editorFoldColor", "ThemeIcon", "foldingExpandedIcon", "foldingCollapsedIcon", "foldingManualExpandedIcon", "foldingManualCollapsedIcon", "init_editorExtensions", "init_nls", "EditorFontZoomIn", "EditorAction", "localize", "accessor", "editor", "EditorZoom", "EditorFontZoomOut", "EditorFontZoomReset", "registerEditorAction", "import_formatActions", "import_documentSymbols", "init_editorExtensions", "init_editorContextKeys", "inlineSuggestCommitId", "init_event", "init_lifecycle", "init_strings", "init_editorExtensions", "init_cursorColumns", "init_editorContextKeys", "init_event", "init_lifecycle", "init_position", "init_languages", "init_async", "init_cancellation", "init_errors", "init_event", "init_lifecycle", "init_editOperation", "init_range", "init_languages", "init_event", "init_lifecycle", "init_range", "createDisposableRef", "object", "disposable", "applyEdits", "text", "edits", "transformer", "PositionOffsetTransformer", "offsetEdits", "e", "range", "Range", "a", "b", "edit", "i", "position", "array", "getReadonlyEmptyArray", "GhostText", "lineNumber", "parts", "additionalReservedLineCount", "lineText", "lastPart", "cappedLineText", "applyEdits", "p", "GhostTextPart", "column", "lines", "preview", "GhostTextReplacement", "columnStart", "length", "newLines", "_lineText", "BaseGhostTextWidgetModel", "Disposable", "editor", "Emitter", "e", "expanded", "init_commands", "init_strings", "init_range", "minimizeInlineCompletion", "model", "inlineCompletion", "valueToReplace", "commonPrefixLen", "commonPrefixLength", "startOffset", "start", "remainingValueToReplace", "commonSuffixLen", "commonSuffixLength", "end", "Range", "normalizedInlineCompletionsEquals", "a", "b", "inlineCompletionToGhostText", "textModel", "mode", "cursorPosition", "previewSuffixLength", "sourceLine", "sourceIndentationLength", "getLeadingWhitespace", "suggestionAddedIndentationLength", "replacedIndentation", "rangeThatDoesNotReplaceIndentation", "suggestionWithoutIndentationChange", "valueToBeReplaced", "changes", "cachingDiff", "lineNumber", "parts", "filteredChanges", "c", "previewStartInCompletionText", "insertColumn", "modifiedEnd", "nonPreviewTextEnd", "nonPreviewText", "italicText", "lines", "splitLines", "GhostTextPart", "GhostText", "lastRequest", "originalValue", "newValue", "smartDiff", "deletedChars", "deletedCharacters", "newChanges", "sum", "smartBracketMatching", "getMaxCharCode", "val", "maxCharCode", "i", "len", "charCode", "getUniqueCharCode", "id", "getElements", "source", "level", "group", "characters", "elements1", "elements2", "LcsDiff", "init_languageConfigurationRegistry", "init_brackets", "init_length", "init_parser", "init_smallImmutableSet", "init_tokenizer", "fixBracketsInLine", "tokens", "languageConfigurationService", "denseKeyProvider", "DenseKeyProvider", "bracketTokens", "LanguageAgnosticBracketTokens", "languageId", "tokenizer", "TextBufferTokenizer", "StaticTokenizerSource", "node", "parseDocument", "str", "line", "processNode", "offset", "lengthAdd", "closingTokenText", "child", "lengthZero", "lines", "lineNumber", "init_languageFeatures", "init_languageFeatureDebounce", "init_types", "init_configuration", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "InlineCompletionsModel", "Disposable", "editor", "cache", "commandService", "languageConfigurationService", "languageFeaturesService", "debounceService", "configurationService", "Emitter", "MutableDisposable", "CoreEditingCommands", "inlineSuggestCommitId", "toDisposable", "_a", "expanded", "active", "InlineCompletionTriggerKind", "triggerKind", "InlineCompletionsSession", "ICommandService", "ILanguageConfigurationService", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "IConfigurationService", "InlineCompletionsSession", "BaseGhostTextWidgetModel", "editor", "triggerPosition", "shouldUpdate", "commandService", "cache", "initialTriggerKind", "languageConfigurationService", "registry", "debounce", "MutableDisposable", "RunOnceScheduler", "triggerKind", "InlineCompletionTriggerKind", "lastCompletionItem", "_a", "currentCompletion", "provider", "toDisposable", "e", "model", "cursorPosition", "c", "originalValue", "filterText", "indent", "cursorPosIndex", "filterTextBefore", "filterTextAfter", "originalValueBefore", "originalValueAfter", "matchesSubString", "idx", "v", "__awaiter", "completions", "newIdx", "mode", "ghostText", "inlineCompletionToGhostText", "GhostTextReplacement", "completion", "position", "startTime", "promise", "createCancelablePromise", "token", "result", "provideInlineCompletions", "endTime", "onUnexpectedError", "operation", "UpdateOperation", "disposable", "EditOperation", "SnippetController2", "onUnexpectedExternalError", "l", "SynchronizedInlineCompletionsCache", "Disposable", "completionsSource", "onChange", "decorationIds", "changeAccessor", "i", "CachedInlineCompletion", "hasChanged", "newRange", "inlineCompletion", "decorationId", "context", "CancellationToken", "defaultReplaceRange", "getDefaultRange", "providers", "results", "itemsByHash", "item", "range", "Range", "insertText", "snippetInfo", "closeBrackets", "diff", "SnippetParser", "assertNever", "trackedItem", "getReadonlyEmptyArray", "word", "maxColumn", "text", "newLine", "newTokens", "slicedTokens", "fixBracketsInLine", "init_async", "init_errors", "init_lifecycle", "init_languages", "init_languageFeatures", "init_arrays", "init_async", "init_event", "init_lifecycle", "init_position", "init_range", "init_aria", "init_arrays", "init_async", "init_cancellation", "init_errors", "init_event", "init_keybindings", "init_lifecycle", "init_platform", "init_stopwatch", "init_types", "init_editorExtensions", "init_editOperation", "init_position", "init_range", "init_editorContextKeys", "init_async", "init_lifecycle", "init_map", "init_languages", "init_configuration", "init_extensions", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "Memory", "name", "model", "pos", "items", "topScore", "score", "suggestion", "NoMemory", "item", "LRUMemory", "LRUCache", "lineSuffix", "indexPreselect", "indexRecency", "seq", "data", "value", "CompletionItemKinds", "PrefixMemory", "TernarySearchTree", "word", "kind", "insertText", "entries", "a", "b", "SuggestMemoryService", "_storageService", "_configService", "DisposableStore", "RunOnceScheduler", "e", "WillSaveStateReason", "_a", "mode", "ctor", "scope", "raw", "IStorageService", "IConfigurationService", "ISuggestMemoryService", "createDecorator", "registerSingleton", "SuggestMemoryService", "init_contextkey", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "WordContextKey", "_editor", "contextKeyService", "e", "_a", "enabled", "checkForWordEnd", "model", "selection", "word", "RawContextKey", "IContextKeyService", "init_nls", "init_commands", "init_contextkey", "init_instantiation", "init_log", "init_contextkey", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "SuggestAlternatives", "_editor", "contextKeyService", "_a", "model", "index", "acceptNext", "fwd", "newIndex", "RawContextKey", "IContextKeyService", "init_arrays", "init_lifecycle", "init_characterClassifier", "CommitCharacterController", "editor", "widget", "accept", "DisposableStore", "text", "ch", "selected", "isNonEmptyArray", "acceptCharacters", "CharacterSet", "init_async", "init_cancellation", "init_errors", "init_event", "init_lifecycle", "init_strings", "init_selection", "init_editorWorker", "init_arrays", "init_range", "init_linkedList", "init_position", "init_range", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "BracketSelectionRangeProvider", "model", "positions", "position", "bucket", "ranges", "round", "pos", "counts", "t1", "bracket", "key", "val", "list", "LinkedList", "closing", "innerBracket", "Range", "outerBracket", "startLine", "column", "Position", "aboveLine", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "WordDistance", "service", "editor", "model", "position", "ranges", "BracketSelectionRangeProvider", "wordRanges", "wordUntilPos", "anchor", "item", "word", "wordLines", "isFalsyOrEmpty", "idx", "binarySearch", "Range", "bestWordRange", "blockDistance", "range", "init_configuration", "init_contextkey", "init_log", "init_telemetry", "init_arrays", "init_strings", "LineContext", "leadingLineContent", "characterCountDelta", "CompletionModel", "items", "column", "lineContext", "wordDistance", "options", "snippetSuggestions", "fuzzyScoreOptions", "FuzzyScoreOptions", "clipboardText", "value", "result", "provider", "incomplete", "except", "res", "labelLengths", "word", "wordLow", "source", "target", "scoreFn", "fuzzyScore", "fuzzyScoreGracefulAggressive", "i", "item", "overwriteBefore", "wordLen", "FuzzyScore", "wordPos", "ch", "match", "compareIgnoreCase", "anyScore", "quickSelect", "a", "b", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "LineContext", "model", "position", "auto", "shy", "noSelect", "editor", "pos", "word", "canShowQuickSuggest", "editor", "contextKeyService", "configurationService", "allowQuickSuggestions", "canShowSuggestOnTriggerCharacters", "SuggestModel", "_editor", "_editorWorkerService", "_clipboardService", "_telemetryService", "_logService", "_contextKeyService", "_configurationService", "_languageFeaturesService", "DisposableStore", "TimeoutTimer", "Emitter", "Selection", "editorIsComposing", "e", "dispose", "supportsByTriggerCharacter", "support", "ch", "set", "getSnippetSuggestSupport", "checkTriggerCharacter", "text", "LineContext", "position", "lastChar", "isLowSurrogate", "isHighSurrogate", "supports", "existing", "retrigger", "_a", "prevSelection", "QuickSuggestionsOptions", "SnippetController2", "model", "pos", "config", "lineTokens", "tokenType", "ctx", "context", "onlyFrom", "noFilter", "auto", "suggestCtx", "CancellationTokenSource", "snippetSuggestions", "snippetSortOrder", "itemKindFilter", "showDeprecated", "completionOptions", "CompletionOptions", "wordDistance", "WordDistance", "completions", "provideSuggestionItems", "__awaiter", "_b", "clipboardText", "items", "cmpFn", "getSuggestionComparator", "CompletionModel", "onUnexpectedError", "durations", "result", "suggestOptions", "getLeadingWhitespace", "inactiveProvider", "provider", "incomplete", "oldLineContext", "isFrozen", "__decorate", "__param", "IEditorWorkerService", "IClipboardService", "ITelemetryService", "ILogService", "IContextKeyService", "IConfigurationService", "ILanguageFeaturesService", "init_lifecycle", "OvertypingCapturer", "editor", "suggestModel", "DisposableStore", "selections", "selectionsLength", "willOvertype", "i", "model", "selection", "e", "idx", "init_dom", "init_async", "init_errors", "init_event", "init_lifecycle", "init_numbers", "init_strings", "init_dom", "init_lifecycle", "init_nls", "init_actions", "init_contextkey", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "StatusBarViewItem", "MenuEntryActionViewItem", "kb", "localize", "_a", "SuggestWidgetStatus", "container", "instantiationService", "_menuService", "_contextKeyService", "DisposableStore", "append", "$", "actionViewItemProvider", "action", "MenuItemAction", "ActionBar", "menu", "suggestWidgetStatusbarMenu", "renderMenu", "left", "right", "group", "actions", "IInstantiationService", "IMenuService", "IContextKeyService", "init_codicons", "init_nls", "init_colorRegistry", "init_themeService", "SYMBOL_ICON_ARRAY_FOREGROUND", "registerColor", "foreground", "localize", "SYMBOL_ICON_BOOLEAN_FOREGROUND", "SYMBOL_ICON_CLASS_FOREGROUND", "SYMBOL_ICON_COLOR_FOREGROUND", "SYMBOL_ICON_CONSTANT_FOREGROUND", "SYMBOL_ICON_CONSTRUCTOR_FOREGROUND", "SYMBOL_ICON_ENUMERATOR_FOREGROUND", "SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND", "SYMBOL_ICON_EVENT_FOREGROUND", "SYMBOL_ICON_FIELD_FOREGROUND", "SYMBOL_ICON_FILE_FOREGROUND", "SYMBOL_ICON_FOLDER_FOREGROUND", "SYMBOL_ICON_FUNCTION_FOREGROUND", "SYMBOL_ICON_INTERFACE_FOREGROUND", "SYMBOL_ICON_KEY_FOREGROUND", "SYMBOL_ICON_KEYWORD_FOREGROUND", "SYMBOL_ICON_METHOD_FOREGROUND", "SYMBOL_ICON_MODULE_FOREGROUND", "SYMBOL_ICON_NAMESPACE_FOREGROUND", "SYMBOL_ICON_NULL_FOREGROUND", "SYMBOL_ICON_NUMBER_FOREGROUND", "SYMBOL_ICON_OBJECT_FOREGROUND", "SYMBOL_ICON_OPERATOR_FOREGROUND", "SYMBOL_ICON_PACKAGE_FOREGROUND", "SYMBOL_ICON_PROPERTY_FOREGROUND", "SYMBOL_ICON_REFERENCE_FOREGROUND", "SYMBOL_ICON_SNIPPET_FOREGROUND", "SYMBOL_ICON_STRING_FOREGROUND", "SYMBOL_ICON_STRUCT_FOREGROUND", "SYMBOL_ICON_TEXT_FOREGROUND", "SYMBOL_ICON_TYPEPARAMETER_FOREGROUND", "SYMBOL_ICON_UNIT_FOREGROUND", "SYMBOL_ICON_VARIABLE_FOREGROUND", "registerThemingParticipant", "theme", "collector", "symbolIconArrayColor", "Codicon", "symbolIconBooleanColor", "symbolIconClassColor", "symbolIconMethodColor", "symbolIconColorColor", "symbolIconConstantColor", "symbolIconConstructorColor", "symbolIconEnumeratorColor", "symbolIconEnumeratorMemberColor", "symbolIconEventColor", "symbolIconFieldColor", "symbolIconFileColor", "symbolIconFolderColor", "symbolIconFunctionColor", "symbolIconInterfaceColor", "symbolIconKeyColor", "symbolIconKeywordColor", "symbolIconModuleColor", "outlineNamespaceColor", "symbolIconNullColor", "symbolIconNumberColor", "symbolIconObjectColor", "symbolIconOperatorColor", "symbolIconPackageColor", "symbolIconPropertyColor", "symbolIconReferenceColor", "symbolIconSnippetColor", "symbolIconStringColor", "symbolIconStructColor", "symbolIconTextColor", "symbolIconTypeParameterColor", "symbolIconUnitColor", "symbolIconVariableColor", "init_nls", "init_contextkey", "init_instantiation", "init_colorRegistry", "init_theme", "init_themeService", "init_dom", "init_event", "init_lifecycle", "ResizableHTMLElement", "Emitter", "DisposableStore", "Dimension", "Sash", "OrthogonalEdge", "currentSize", "deltaY", "deltaX", "Event", "e", "north", "east", "south", "west", "height", "width", "minHeight", "minWidth", "maxHeight", "maxWidth", "newSize", "value", "init_dom", "init_codicons", "init_event", "init_lifecycle", "init_nls", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "canExpandCompletionItem", "item", "SuggestDetailsWidget", "_editor", "instaService", "Emitter", "DisposableStore", "Dimension", "$", "MarkdownRenderer", "DomScrollableElement", "append", "Codicon", "localize", "e", "options", "fontInfo", "fontFamily", "fontSize", "lineHeight", "fontWeight", "fontSizePx", "lineHeightPx", "borderWidth", "borderHeight", "explainMode", "_a", "_b", "detail", "documentation", "md", "MarkdownString", "cappedDetail", "show", "clearNode", "hide", "renderedContents", "width", "height", "newSize", "size", "much", "IInstantiationService", "SuggestDetailsOverlay", "widget", "_editor", "DisposableStore", "ResizableHTMLElement", "topLeftNow", "sizeNow", "deltaTop", "deltaLeft", "e", "updateTopLeft", "_a", "sessionEnded", "anchor", "preferAlignAtTop", "anchorBox", "size", "bodyBox", "getClientArea", "info", "defaultMinSize", "Dimension", "defaultTop", "eastPlacement", "width", "left", "maxSizeTop", "maxSizeBottom", "westPlacement", "southPacement", "top", "placements", "placement", "p", "a", "b", "bottom", "alignAtTop", "height", "maxHeight", "maxSize", "topLeft", "init_dom", "init_codicons", "init_event", "init_lifecycle", "init_uri", "init_languages", "init_network", "init_resources", "init_modesRegistry", "FileKind", "fileIconDirectoryRegex", "getIconClasses", "modelService", "languageService", "resource", "fileKind", "classes", "FileKind", "name", "Schemas", "DataUri", "match", "cssEscape", "dotSegments", "i", "detectedLanguageId", "detectLanguageId", "languageId", "mime", "model", "PLAINTEXT_LANGUAGE_ID", "str", "init_model", "init_language", "init_nls", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "_a", "getAriaId", "index", "suggestMoreInfoIcon", "registerIcon", "Codicon", "localize", "_completionItemColor", "ColorExtractor", "item", "out", "match", "ItemRenderer", "_editor", "_modelService", "_languageService", "_themeService", "Emitter", "container", "data", "DisposableStore", "append", "$", "text", "main", "IconLabel", "ThemeIcon", "configureFont", "options", "fontInfo", "fontFamily", "fontFeatureSettings", "fontSize", "lineHeight", "fontWeight", "letterSpacing", "fontSizePx", "lineHeightPx", "letterSpacingPx", "e", "element", "completion", "labelOptions", "createMatches", "color", "labelClasses", "getIconClasses", "URI", "FileKind", "detailClasses", "CSSIcon", "CompletionItemKinds", "stripNewLines", "show", "hide", "canExpandCompletionItem", "templateData", "IModelService", "ILanguageService", "IThemeService", "stripNewLines", "str", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "editorSuggestWidgetBackground", "registerColor", "editorWidgetBackground", "localize", "editorSuggestWidgetBorder", "editorWidgetBorder", "editorSuggestWidgetForeground", "editorForeground", "editorSuggestWidgetSelectedForeground", "quickInputListFocusForeground", "editorSuggestWidgetSelectedIconForeground", "quickInputListFocusIconForeground", "editorSuggestWidgetSelectedBackground", "quickInputListFocusBackground", "editorSuggestWidgetHighlightForeground", "listHighlightForeground", "editorSuggestWidgetHighlightFocusForeground", "listFocusHighlightForeground", "editorSuggestWidgetStatusForeground", "transparent", "PersistedWidgetSize", "_service", "editor", "EmbeddedCodeEditorWidget", "_a", "raw", "obj", "Dimension", "size", "SuggestWidget", "_storageService", "_contextKeyService", "_themeService", "instantiationService", "TimeoutTimer", "DisposableStore", "Emitter", "ResizableHTMLElement", "SuggestContentWidget", "ResizeState", "persistedSize", "currentSize", "persistHeight", "persistWidth", "state", "_b", "_c", "_d", "itemHeight", "defaultSize", "threshold", "width", "height", "append", "$", "details", "SuggestDetailsWidget", "SuggestDetailsOverlay", "applyIconStyle", "renderer", "ItemRenderer", "List", "_element", "item", "label", "detail", "description", "documentation", "docs", "format", "SuggestWidgetStatus", "applyStatusBarStyle", "attachListStyler", "activeContrastBorder", "t", "Context", "addStandardDisposableListener", "mouseEvent", "index", "completionModel", "theme", "isHighContrast", "createCancelablePromise", "token", "loading", "disposableTimeout", "sub", "getAriaId", "onUnexpectedError", "hide", "show", "auto", "delay", "selectionIndex", "isFrozen", "isAuto", "visibleCount", "isEmpty", "canExpandCompletionItem", "dim", "minPersistedHeight", "position", "bodyBox", "getClientArea", "info", "maxWidth", "preferredWidth", "fullHeight", "minHeight", "editorBox", "getDomNodePagePosition", "cursorBox", "cursorBottom", "maxHeightBelow", "availableSpaceAbove", "maxHeightAbove", "maxHeight", "forceRenderingAboveRequiredSpace", "statusBarHeight", "fontInfo", "clamp", "borderWidth", "borderHeight", "IStorageService", "IContextKeyService", "IThemeService", "IInstantiationService", "SuggestContentWidget", "_widget", "_editor", "height", "width", "borderWidth", "horizontalPadding", "Dimension", "position", "preference", "init_telemetry", "init_resources", "init_hash", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "_sticky", "LineSuffix", "_model", "_position", "offset", "end", "Range", "position", "range", "SuggestController", "editor", "_memoryService", "_commandService", "_contextKeyService", "_instantiationService", "_logService", "_telemetryService", "MutableDisposable", "DisposableStore", "PriorityRegistry", "s", "SuggestModel", "ctxInsertMode", "Context", "IdleValue", "widget", "SuggestWidget", "item", "commitCharacterController", "CommitCharacterController", "e", "ctxMakesTextEdit", "ctxHasInsertAndReplace", "ctxCanResolve", "toDisposable", "startColumn", "endColumn", "value", "Position", "SimpleKeybinding", "isMacintosh", "OvertypingCapturer", "SuggestAlternatives", "WordContextKey", "index", "selector", "acceptSuggestionsOnEnter", "updateFromConfig", "acceptSuggestionOnEnter", "event", "flags", "snippetController", "SnippetController2", "model", "modelVersionNow", "tasks", "cts", "CancellationTokenSource", "info", "scrollState", "StableEditorScrollState", "edit", "EditOperation", "sw", "StopWatch", "docListener", "change", "thisPosition", "oldFlags", "didType", "typeListener", "applied", "insertText", "SnippetParser", "TriggerSuggestAction", "onUnexpectedError", "next", "acceptedSuggestion", "_a", "providerId", "hash", "basename", "extname", "toggleMode", "assertType", "replace", "overwriteBefore", "overwriteAfter", "columnDelta", "suffixDelta", "isNonEmptyArray", "msg", "localize", "alert", "onlyFrom", "auto", "noFilter", "noSelect", "arg", "positionNow", "fallback", "makesTextEdit", "Event", "_", "listener", "dispose", "completionModel", "keepAlternativeSuggestions", "alternativeOverwriteConfig", "ISuggestMemoryService", "ICommandService", "IContextKeyService", "IInstantiationService", "ILogService", "ITelemetryService", "PriorityRegistry", "prioritySelector", "value", "s1", "s2", "idx", "TriggerSuggestAction", "EditorAction", "localize", "ContextKeyExpr", "EditorContextKeys", "_accessor", "editor", "args", "controller", "SuggestController", "auto", "noSelect", "registerEditorContribution", "registerEditorAction", "weight", "SuggestCommand", "EditorCommand", "registerEditorCommand", "Context", "x", "suggestWidgetStatusbarMenu", "CommandsRegistry", "c", "WordContextKey", "SuggestAlternatives", "SnippetController2", "arg", "isObject", "_a", "SuggestWidgetInlineCompletionProvider", "Disposable", "editor", "suggestControllerPreselector", "Emitter", "RunOnceScheduler", "e", "suggestController", "SuggestController", "model", "pos", "suggestItems", "textModel", "normalizedItemToPreselect", "minimizeInlineCompletion", "position", "Position", "candidates", "suggestItem", "index", "inlineSuggestItem", "suggestionToSuggestItemInfo", "normalizedSuggestItem", "valid", "rangeStartsWith", "item", "result", "findMaxBy", "compareBy", "s", "numberComparator", "isBoundToSuggestWidget", "bindToSuggestWidget", "Event", "newActive", "newInlineCompletion", "shouldFire", "suggestItemInfoEquals", "focusedItem", "rangeToTest", "prefix", "a", "b", "normalizedInlineCompletionsEquals", "toggleMode", "Range", "insertText", "isSnippetText", "snippet", "SnippetParser", "SnippetSession", "info", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "SuggestWidgetPreviewModel", "BaseGhostTextWidgetModel", "editor", "cache", "languageFeaturesService", "SuggestWidgetInlineCompletionProvider", "_a", "_b", "MutableDisposable", "RunOnceScheduler", "newGhostText", "sum", "p", "toDisposable", "state", "info", "position", "promise", "createCancelablePromise", "token", "provideInlineCompletions", "InlineCompletionTriggerKind", "onUnexpectedError", "operation", "UpdateOperation", "_c", "isSuggestionPreviewEnabled", "model", "augmentedCompletion", "minimizeInlineCompletion", "suggestWidgetState", "suggestInlineCompletion", "isAugmentedCompletionValid", "finalCompletion", "inlineCompletionPreviewLength", "completion", "mode", "inlineCompletionToGhostText", "GhostText", "ILanguageFeaturesService", "sum", "arr", "a", "b", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "DelegatingModel", "Disposable", "Emitter", "MutableDisposable", "_a", "model", "createDisposableRef", "_b", "expanded", "GhostTextModel", "editor", "instantiationService", "SharedInlineCompletionCache", "SuggestWidgetPreviewModel", "InlineCompletionsModel", "hoverRange", "ghostText", "p", "Position", "InlineCompletionTriggerKind", "IInstantiationService", "SharedInlineCompletionCache", "Disposable", "Emitter", "MutableDisposable", "editor", "completionsSource", "triggerKind", "SynchronizedInlineCompletionsCache", "init_dom", "init_lifecycle", "init_strings", "init_lineTokens", "init_position", "init_range", "init_stringBuilder", "init_model", "init_language", "init_editorColorRegistry", "init_lineDecorations", "init_viewLineRenderer", "init_instantiation", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "_a", "ttPolicy", "value", "GhostTextWidget", "Disposable", "editor", "model", "instantiationService", "languageService", "DecorationsWidget", "AdditionalLinesWidget", "DisposableDecorations", "e", "toDisposable", "viewZoneId", "ghostText", "inlineTexts", "additionalLines", "addToAdditionalLines", "lines", "className", "lastLine", "LineDecoration", "line", "GhostTextReplacement", "Range", "textBufferLine", "hiddenTextStartColumn", "lastIdx", "part", "Position", "position", "firstLineText", "remainingLinesLength", "fontInfo", "domNode", "applyFontInfo", "spacer", "newline", "disposableStore", "DisposableStore", "button", "addStandardDisposableListener", "ViewMoreLinesContentWidget", "IInstantiationService", "ILanguageService", "DisposableDecorations", "editor", "decorations", "accessor", "DecorationsWidget", "lineNumber", "parts", "hiddenText", "hiddenTextDecorations", "Range", "Position", "p", "InjectedTextCursorStops", "AdditionalLinesWidget", "languageIdCodec", "changeAccessor", "additionalLines", "minReservedLineCount", "textModel", "tabSize", "heightInLines", "domNode", "renderLines", "lines", "opts", "disableMonospaceOptimizations", "stopRenderingLineAfter", "renderWhitespace", "renderControlCharacters", "fontLigatures", "fontInfo", "lineHeight", "sb", "createStringBuilder", "i", "len", "lineData", "line", "isBasicASCII", "containsRTL", "lineTokens", "LineTokens", "renderViewLine", "RenderLineInput", "EditorFontLigatures", "applyFontInfo", "html", "trustedhtml", "ttPolicy", "ViewMoreLinesContentWidget", "Disposable", "position", "disposableStore", "toDisposable", "registerThemingParticipant", "theme", "collector", "foreground", "ghostTextForeground", "background", "ghostTextBackground", "border", "ghostTextBorder", "init_nls", "init_contextkey", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "GhostTextController", "Disposable", "editor", "instantiationService", "MutableDisposable", "Emitter", "_a", "suggestOptions", "inlineSuggestOptions", "ActiveGhostTextController", "hoverRange", "viewZoneId", "_b", "RawContextKey", "localize", "IInstantiationService", "GhostTextContextKeys", "contextKeyService", "GhostTextController", "ActiveGhostTextController", "Disposable", "editor", "instantiationService", "GhostTextModel", "GhostTextWidget", "toDisposable", "_a", "startsWithIndentation", "startsWithIndentationLessThanTabSize", "ghostText", "column", "lines", "firstLine", "indentationEndColumn", "firstNonWsIdx", "firstNonWhitespaceIndex", "tabSize", "CursorColumns", "__decorate", "__param", "IInstantiationService", "IContextKeyService", "ShowNextInlineSuggestionAction", "EditorAction", "localize", "ContextKeyExpr", "EditorContextKeys", "GhostTextController", "accessor", "editor", "__awaiter", "controller", "ShowPreviousInlineSuggestionAction", "TriggerInlineSuggestionAction", "init_dom", "init_lifecycle", "init_range", "init_language", "init_nls", "init_actions", "init_commands", "init_contextkey", "init_opener", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "InlineCompletionsHover", "owner", "range", "controller", "anchor", "_a", "_b", "_c", "InlineCompletionsHoverParticipant", "_editor", "_commandService", "_menuService", "_contextKeyService", "_languageService", "_openerService", "accessibilityService", "mouseEvent", "GhostTextController", "viewZoneData", "HoverForeignElementAnchor", "Range", "lineDecorations", "context", "hoverParts", "disposableStore", "DisposableStore", "part", "menu", "MenuId", "previousAction", "localize", "ShowNextInlineSuggestionAction", "nextAction", "ShowPreviousInlineSuggestionAction", "inlineSuggestCommitId", "actions", "action", "hasMore", "command", "_", "group", "MenuItemAction", "$", "markdownHoverElement", "hoverContentsElement", "append", "renderer", "MarkdownRenderer", "render", "code", "inlineSuggestionAvailable", "renderedContents", "MarkdownString", "ghostText", "lineText", "ICommandService", "IMenuService", "IContextKeyService", "ILanguageService", "IOpenerService", "IAccessibilityService", "init_contextkey", "init_keybindingsRegistry", "registerEditorContribution", "GhostTextController", "registerEditorAction", "TriggerInlineSuggestionAction", "ShowNextInlineSuggestionAction", "ShowPreviousInlineSuggestionAction", "HoverParticipantRegistry", "InlineCompletionsHoverParticipant", "GhostTextCommand", "EditorCommand", "commitInlineSuggestionAction", "inlineSuggestCommitId", "x", "registerEditorCommand", "KeybindingsRegistry", "ContextKeyExpr", "EditorContextKeys", "init_lifecycle", "init_strings", "init_editorExtensions", "init_editOperation", "init_range", "init_selection", "init_editorContextKeys", "init_languageConfigurationRegistry", "init_model", "getSpaceCnt", "str", "tabSize", "spacesCnt", "generateIndent", "insertSpaces", "result", "tabsCnt", "i", "init_nls", "init_indentation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "getReindentEditOperations", "model", "languageConfigurationService", "startLineNumber", "endLineNumber", "inheritedIndent", "indentationRules", "text", "tabSize", "indentSize", "insertSpaces", "shiftIndent", "indentation", "count", "ShiftCommand", "unshiftIndent", "indentEdits", "globalIndent", "currentLineText", "adjustedLineContent", "oldIndentation", "getLeadingWhitespace", "EditOperation", "Selection", "normalizeIndentation", "idealIndentForNextLine", "lineNumber", "IndentationToSpacesAction", "EditorAction", "localize", "EditorContextKeys", "accessor", "editor", "modelOpts", "selection", "command", "IndentationToSpacesCommand", "IndentationToTabsAction", "IndentationToTabsCommand", "ChangeIndentationSizeAction", "opts", "quickInputService", "IQuickInputService", "modelService", "IModelService", "creationOpts", "picks", "n", "autoFocusIndex", "pick", "IndentUsingTabs", "IndentUsingSpaces", "DetectIndentation", "ReindentLinesAction", "ILanguageConfigurationService", "edits", "ReindentSelectedLinesAction", "selections", "editOperations", "AutoIndentOnPasteCommand", "initialSelection", "edit", "builder", "Range", "selectionIsSet", "helper", "AutoIndentOnPaste", "_languageConfigurationService", "DisposableStore", "range", "autoIndent", "textEdits", "indentConverter", "firstLineText", "indentOfFirstLine", "getGoodIndentForLine", "newSpaceCnt", "getSpaceCnt", "oldSpaceCnt", "newIndent", "generateIndent", "indentMetadata", "getIndentMetadata", "firstLineNumber", "indentOfSecondLine", "column", "newSpaceCntOfSecondLine", "oldSpaceCntOfSecondLine", "spaceCntOffset", "lineContent", "originalIndent", "newSpacesCnt", "cmd", "nonWhitespaceColumn", "tokens", "firstNonWhitespaceTokenIndex", "getIndentationEditOperations", "model", "builder", "tabSize", "tabsToSpaces", "spaces", "i", "spacesRegExp", "lineNumber", "lineCount", "lastIndentationColumn", "originalIndentationRange", "Range", "originalIndentation", "newIndentation", "IndentationToSpacesCommand", "selection", "helper", "IndentationToTabsCommand", "registerEditorContribution", "AutoIndentOnPaste", "registerEditorAction", "IndentationToSpacesAction", "IndentationToTabsAction", "IndentUsingTabs", "IndentUsingSpaces", "DetectIndentation", "ReindentLinesAction", "ReindentSelectedLinesAction", "init_editorExtensions", "init_dom", "init_arrays", "init_async", "init_cancellation", "init_errors", "init_lifecycle", "init_map", "init_types", "init_uri", "init_editOperation", "init_range", "init_languages", "init_model", "init_textModel", "init_languageFeatureDebounce", "init_languageFeatures", "init_resolverService", "init_errors", "init_lifecycle", "init_position", "init_range", "init_network", "init_uri", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "InlayHintAnchor", "range", "direction", "InlayHintItem", "hint", "anchor", "provider", "delta", "token", "_a", "_b", "newHint", "err", "onUnexpectedExternalError", "InlayHintsFragments", "ranges", "data", "model", "DisposableStore", "items", "list", "position", "wordRange", "Range", "a", "b", "Position", "registry", "promises", "CancellationError", "line", "word", "tokens", "offset", "idx", "start", "end", "asCommandLink", "command", "URI", "Schemas", "init_dom", "init_actions", "init_cancellation", "init_editorExtensions", "init_range", "init_resolverService", "init_actions", "init_commands", "init_contextkey", "init_instantiation", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "showGoToContextMenu", "accessor", "editor", "anchor", "part", "_a", "resolverService", "ITextModelService", "contextMenuService", "IContextMenuService", "commandService", "ICommandService", "instaService", "IInstantiationService", "notificationService", "INotificationService", "CancellationToken", "location", "menuActions", "filter", "MenuRegistry", "MenuId", "item", "isIMenuItem", "delegate", "EditorExtensionsRegistry", "SymbolNavigationAction", "Action", "ref", "SymbolNavigationAnchor", "Range", "command", "Separator", "_b", "err", "Severity", "useShadowDOM", "box", "getDomNodePagePosition", "goToDefinitionWithLocation", "event", "openToSide", "contextKeyService", "IContextKeyService", "isInPeek", "PeekContext", "canPeek", "DefinitionAction", "init_commands", "init_extensions", "init_instantiation", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "InlayHintsCache", "LRUCache", "model", "IInlayHintsCache", "createDecorator", "registerSingleton", "RenderedInlayHintLabelPart", "item", "index", "label", "ActiveInlayHintInfo", "part", "hasTriggerModifier", "InlayHintsController", "_editor", "_languageFeaturesService", "_featureDebounce", "_inlayHintsCache", "_commandService", "_notificationService", "_instaService", "DisposableStore", "DynamicCssRules", "editor", "_a", "options", "cached", "toDisposable", "cts", "watchedProviders", "scheduler", "RunOnceScheduler", "t1", "CancellationTokenSource", "listener", "myToken", "inlayHints", "InlayHintsFragments", "provider", "err", "onUnexpectedError", "delay", "defaultMode", "altMode", "ModifierKeyEmitter", "newRenderMode", "copies", "store", "gesture", "ClickLinkGesture", "sessionStore", "mouseEvent", "labelPart", "lineNumber", "range", "Range", "lineHints", "goToDefinitionWithLocation", "Command", "data", "updateInlayHints", "CancellationToken", "isNonEmptyArray", "edits", "edit", "EditOperation", "showGoToContextMenu", "ModelDecorationInjectedTextOptions", "command", "Severity", "hints", "items", "id", "obj", "anchor", "InlayHintAnchor", "copy", "visibleRanges", "extendedRange", "ranges", "_b", "newDecorationsData", "addInjectedText", "ref", "content", "cursorStops", "attachedData", "opts", "addInjectedWhitespace", "isLast", "marginRule", "fontSize", "InjectedTextCursorStops", "fontFamily", "padding", "isUniform", "fontFamilyVar", "parts", "isFirst", "cssProperties", "EDITOR_FONT_DEFAULTS", "themeColorFromId", "editorActiveLinkForeground", "fixSpace", "decorationIdsToReplace", "metadata", "accessor", "newDecorationIds", "props", "hint", "InlayHintKind", "editorInlayHintParameterBackground", "editorInlayHintParameterForeground", "editorInlayHintTypeBackground", "editorInlayHintTypeForeground", "editorInlayHintBackground", "editorInlayHintForeground", "editorFontSize", "editorFontFamily", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "ICommandService", "INotificationService", "IInstantiationService", "fixSpace", "str", "noBreakWhitespace", "CommandsRegistry", "accessor", "args", "__awaiter", "uri", "range", "assertType", "URI", "Range", "inlayHintsProvider", "ILanguageFeaturesService", "ref", "ITextModelService", "model", "InlayHintsFragments", "CancellationToken", "result", "i", "init_async", "init_position", "init_textModel", "init_language", "init_resolverService", "init_configuration", "init_opener", "init_languageFeatures", "init_nls", "init_platform", "init_arrays", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "__asyncValues", "m", "verb", "n", "v", "settle", "InlayHintsHoverAnchor", "HoverForeignElementAnchor", "part", "owner", "InlayHintsHover", "MarkdownHoverParticipant", "editor", "languageService", "openerService", "configurationService", "_resolverService", "languageFeaturesService", "mouseEvent", "_a", "InlayHintsController", "options", "ModelDecorationInjectedTextOptions", "RenderedInlayHintLabelPart", "anchor", "_lineDecorations", "token", "AsyncIterableObject", "executor", "e_1", "itemTooltip", "MarkdownString", "MarkdownHover", "isNonEmptyArray", "localize", "partTooltip", "linkHint", "kb", "isMacintosh", "asCommandLink", "iterable", "iterable_1", "iterable_1_1", "item", "e_1_1", "uri", "range", "ref", "model", "getHover", "Position", "isEmptyMarkdownString", "ILanguageService", "IOpenerService", "IConfigurationService", "ITextModelService", "ILanguageFeaturesService", "registerEditorContribution", "InlayHintsController", "HoverParticipantRegistry", "InlayHintsHover", "import_inPlaceReplace", "init_editorExtensions", "init_editorContextKeys", "init_nls", "ExpandLineSelectionAction", "EditorAction", "localize", "EditorContextKeys", "_accessor", "editor", "args", "viewModel", "CursorMoveCommands", "registerEditorAction", "init_keyCodes", "init_editorExtensions", "init_strings", "init_editOperation", "init_range", "TrimTrailingWhitespaceCommand", "selection", "cursors", "model", "builder", "ops", "trimTrailingWhitespace", "i", "len", "op", "helper", "a", "b", "r", "rLen", "cursorIndex", "cursorLen", "lineNumber", "lineCount", "lineContent", "maxLineColumn", "minEditColumn", "lastNonWhitespaceIndex", "fromColumn", "EditOperation", "Range", "init_editOperation", "init_position", "init_range", "init_selection", "init_editorContextKeys", "init_range", "init_selection", "CopyLinesCommand", "selection", "isCopyingDown", "noop", "model", "builder", "s", "sourceLines", "i", "sourceText", "Range", "helper", "result", "startLineNumber", "startColumn", "endLineNumber", "endColumn", "Selection", "init_strings", "init_range", "init_selection", "init_languageConfiguration", "init_languageConfigurationRegistry", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "MoveLinesCommand", "selection", "isMovingDown", "autoIndent", "_languageConfigurationService", "model", "builder", "modelLineCount", "s", "tabSize", "indentSize", "insertSpaces", "indentConverter", "virtualModel", "lineNumber", "column", "otherLineNumber", "Range", "Selection", "movingLineNumber", "movingLineText", "insertingText", "movingLineMatchResult", "oldIndentation", "getLeadingWhitespace", "newSpaceCnt", "getSpaceCnt", "generateIndent", "indentOfMovingLine", "getGoodIndentForLine", "oldSpaceCnt", "ret", "newIndentatOfMovingBlock", "spaceCntOffset", "indentOfFirstLine", "oldIndent", "indentation", "ShiftCommand", "line", "enter", "enterPrefix", "IndentAction", "newIndentation", "indentMetadataOfMovelingLine", "getIndentMetadata", "futureAboveLineNumber", "futureAboveLineText", "lastNonWhitespaceIndex", "maxColumn", "getEnterAction", "validPrecedingLine", "lineContent", "oneLineAbove", "previousLineText", "str", "languageAtSelectionStart", "languageAtSelectionEnd", "offset", "originalIndent", "newSpacesCnt", "newIndent", "helper", "result", "ILanguageConfigurationService", "init_editOperation", "init_range", "SortLinesCommand", "selection", "descending", "model", "builder", "op", "sortLines", "helper", "data", "getSortData", "i", "len", "startLineNumber", "endLineNumber", "linesToSort", "lineNumber", "sorted", "EditOperation", "Range", "init_nls", "init_actions", "init_languageConfigurationRegistry", "AbstractCopyLinesAction", "EditorAction", "down", "opts", "_accessor", "editor", "selections", "selection", "index", "a", "b", "Range", "prev", "i", "curr", "commands", "CopyLinesCommand", "CopyLinesUpAction", "localize", "EditorContextKeys", "MenuId", "CopyLinesDownAction", "DuplicateSelectionAction", "accessor", "args", "model", "insertSelection", "Selection", "ReplaceCommandThatSelectsText", "AbstractMoveLinesAction", "languageConfigurationService", "ILanguageConfigurationService", "autoIndent", "MoveLinesCommand", "MoveLinesUpAction", "MoveLinesDownAction", "AbstractSortLinesAction", "descending", "SortLinesCommand", "len", "SortLinesAscendingAction", "SortLinesDescendingAction", "DeleteDuplicateLinesAction", "edits", "endCursorState", "linesDeleted", "uniqueLines", "lines", "line", "selectionToReplace", "adjustedSelectionStart", "finalSelection", "EditOperation", "TrimTrailingWhitespaceAction", "KeyChord", "cursors", "s", "Position", "command", "TrimTrailingWhitespaceCommand", "DeleteLinesAction", "ops", "cursorState", "op", "startLineNumber", "endLineNumber", "startColumn", "endColumn", "operations", "mergedOperations", "previousOperation", "IndentLinesAction", "viewModel", "TypeOperations", "OutdentLinesAction", "CoreEditingCommands", "InsertLineBeforeAction", "InsertLineAfterAction", "AbstractDeleteAllToBoundaryAction", "primaryCursor", "rangesToDelete", "effectiveRanges", "count", "range", "nextRange", "DeleteAllLeftAction", "endPrimaryCursor", "deletedLines", "endCursor", "newStartLine", "deleteFromLine", "deleteFromColumn", "DeleteAllRightAction", "offset", "sel", "maxColumn", "JoinLinesAction", "reducedSelections", "lastSelection", "previousValue", "currentValue", "lineOffset", "columnDeltaOffset", "selectionEndPositionOffset", "position", "trimmedLinesContent", "lineText", "firstNonWhitespaceIdx", "insertSpace", "lineTextWithoutIndent", "deleteSelection", "resultSelection", "TransposeAction", "cursor", "chars", "ReplaceCommand", "ReplaceCommandThatPreservesSelection", "AbstractCaseAction", "wordSeparators", "textEdits", "word", "wordRange", "text", "UpperCaseAction", "LowerCaseAction", "BackwardsCompatibleRegExp", "_pattern", "_flags", "TitleCaseAction", "titleBoundary", "SnakeCaseAction", "caseBoundary", "singleLetters", "KebabCaseAction", "regexp", "_", "underscoreBoundary", "registerEditorAction", "init_arrays", "init_async", "init_cancellation", "init_color", "init_errors", "init_event", "init_lifecycle", "init_strings", "init_uri", "init_editorExtensions", "init_codeEditorService", "init_position", "init_range", "init_editorContextKeys", "init_textModel", "init_languageConfigurationRegistry", "init_nls", "init_contextkey", "init_colorRegistry", "init_themeService", "init_languageFeatures", "init_languageFeatureDebounce", "init_stopwatch", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE", "RawContextKey", "DECORATION_CLASS_NAME", "LinkedEditingContribution", "Disposable", "editor", "contextKeyService", "languageFeaturesService", "languageConfigurationService", "languageFeatureDebounceService", "DisposableStore", "forceRefresh", "model", "isEnabled", "Event", "rangeUpdateScheduler", "Delayer", "triggerRangeUpdate", "_a", "rangeSyncScheduler", "triggerRangeSync", "token", "referenceRange", "referenceValue", "match", "edits", "len", "mirrorRange", "oldValue", "newValue", "rangeStartColumn", "rangeEndColumn", "commonPrefixLength", "commonSuffixLength", "Range", "prevEditOperationType", "force", "position", "modelVersionId", "range", "request", "createCancelablePromise", "sw", "StopWatch", "response", "getLinkedEditingRanges", "ranges", "foundReferenceRange", "decorations", "err", "isCancellationError", "onUnexpectedError", "ModelDecorationOptions", "IContextKeyService", "ILanguageFeaturesService", "ILanguageConfigurationService", "ILanguageFeatureDebounceService", "LinkedEditingAction", "EditorAction", "localize", "ContextKeyExpr", "EditorContextKeys", "accessor", "args", "editorService", "ICodeEditorService", "uri", "pos", "URI", "Position", "editor", "onUnexpectedError", "_accessor", "controller", "LinkedEditingContribution", "LinkedEditingCommand", "EditorCommand", "registerEditorCommand", "CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE", "x", "getLinkedEditingRanges", "providers", "model", "position", "token", "orderedByScore", "first", "provider", "__awaiter", "e", "onUnexpectedExternalError", "result", "isNonEmptyArray", "editorLinkedEditingBackground", "registerColor", "Color", "registerThemingParticipant", "theme", "collector", "editorLinkedEditingBackgroundColor", "DECORATION_CLASS_NAME", "registerModelAndPositionCommand", "linkedEditingRangeProvider", "ILanguageFeaturesService", "CancellationToken", "registerEditorContribution", "registerEditorAction", "init_async", "init_cancellation", "init_errors", "init_lifecycle", "init_network", "init_platform", "init_resources", "init_stopwatch", "init_uri", "init_editorExtensions", "init_textModel", "init_languageFeatureDebounce", "init_languageFeatures", "init_arrays", "init_cancellation", "init_errors", "init_lifecycle", "init_types", "init_uri", "init_range", "init_model", "init_commands", "init_languageFeatures", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "Link", "link", "provider", "token", "LinksList", "tuples", "DisposableStore", "links", "list", "newLinks", "isDisposable", "oldLinks", "oldIndex", "oldLen", "newIndex", "newLen", "oldLink", "newLink", "Range", "getLinks", "providers", "model", "lists", "promises", "i", "onUnexpectedExternalError", "coalesce", "CommandsRegistry", "accessor", "args", "uri", "resolveCount", "assertType", "URI", "linkProvider", "ILanguageFeaturesService", "IModelService", "CancellationToken", "init_nls", "init_opener", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "LinkDetector", "Disposable", "editor", "openerService", "notificationService", "languageFeaturesService", "languageFeatureDebounceService", "RunOnceScheduler", "clickLinkGesture", "ClickLinkGesture", "mouseEvent", "keyboardEvent", "model", "createCancelablePromise", "token", "getLinks", "sw", "StopWatch", "err", "onUnexpectedError", "links", "useMetaKey", "oldDecorations", "keys", "decorationId", "occurence", "newDecorations", "link", "LinkOccurrence", "changeAccessor", "decorations", "len", "withKey", "occurrence", "openToSide", "fromUserGesture", "CancellationToken", "uri", "modelUri", "Schemas", "parsedUri", "URI", "fsPath", "originalFSPath", "relativePath", "joinPath", "messageOrError", "localize", "position", "decoration", "currentOccurrence", "_a", "IOpenerService", "INotificationService", "ILanguageFeaturesService", "ILanguageFeatureDebounceService", "decoration", "ModelDecorationOptions", "LinkOccurrence", "link", "decorationId", "useMetaKey", "isActive", "options", "getHoverMessage", "changeAccessor", "executeCmd", "label", "localize", "kb", "isMacintosh", "nativeLabel", "match", "commandId", "MarkdownString", "OpenLinkAction", "EditorAction", "accessor", "editor", "linkDetector", "LinkDetector", "selections", "sel", "registerEditorContribution", "registerEditorAction", "registerThemingParticipant", "theme", "collector", "activeLinkForeground", "editorActiveLinkForeground", "init_aria", "init_async", "init_keyCodes", "init_lifecycle", "init_editorExtensions", "init_range", "init_selection", "init_editorContextKeys", "init_model", "init_textModel", "init_nls", "init_actions", "init_contextkey", "init_colorRegistry", "init_themeService", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "announceCursorChange", "previousCursorState", "cursorState", "cursorDiff", "cs", "pcs", "cursorPositions", "msg", "localize", "status", "InsertCursorAbove", "EditorAction", "EditorContextKeys", "MenuId", "accessor", "editor", "args", "useLogicalLine", "viewModel", "CursorMoveCommands", "InsertCursorBelow", "InsertCursorAtEndOfEachLineSelected", "selection", "model", "result", "currentLineMaxColumn", "Selection", "selections", "newSelections", "sel", "InsertCursorAtEndOfLineSelected", "lineCount", "InsertCursorAtTopOfLineSelected", "MultiCursorSessionResult", "revealRange", "revealScrollType", "MultiCursorSession", "_editor", "findController", "isDisconnectedFromFindController", "searchText", "wholeWord", "matchCase", "currentMatch", "findState", "s", "word", "nextMatch", "allSelections", "lastAddedSelection", "previousMatch", "searchScope", "editorModel", "MultiCursorSelectionController", "Disposable", "DisposableStore", "session", "newState", "e", "modelRangesContainSameText", "resultingSelections", "len", "matches", "editorSelection", "match", "m", "MultiCursorSelectionControllerAction", "multiCursorController", "CommonFindController", "AddSelectionToNextFindMatchAction", "AddSelectionToPreviousFindMatchAction", "MoveSelectionToNextFindMatchAction", "KeyChord", "MoveSelectionToPreviousFindMatchAction", "SelectHighlightsAction", "CompatChangeAll", "ContextKeyExpr", "SelectionHighlighterState", "_model", "_searchText", "_matchCase", "_wordSeparators", "prevState", "Range", "SelectionHighlighter", "_languageFeaturesService", "RunOnceScheduler", "oldState", "isEnabled", "r", "caseSensitive", "findStateSearchString", "mySearchString", "allMatches", "j", "lenJ", "cmp", "hasFindOccurrences", "decorations", "ModelDecorationOptions", "themeColorFromId", "minimapSelectionOccurrenceHighlight", "MinimapPosition", "overviewRulerSelectionHighlightForeground", "OverviewRulerLane", "ILanguageFeaturesService", "modelRangesContainSameText", "model", "ranges", "matchCase", "selectedText", "getValueInRange", "i", "len", "range", "thisSelectedText", "toLowerCase", "text", "FocusNextCursor", "EditorAction", "localize", "accessor", "editor", "args", "viewModel", "previousCursorState", "firstCursor", "announceCursorChange", "FocusPreviousCursor", "registerEditorContribution", "MultiCursorSelectionController", "SelectionHighlighter", "registerEditorAction", "InsertCursorAbove", "InsertCursorBelow", "InsertCursorAtEndOfEachLineSelected", "AddSelectionToNextFindMatchAction", "AddSelectionToPreviousFindMatchAction", "MoveSelectionToNextFindMatchAction", "MoveSelectionToPreviousFindMatchAction", "SelectHighlightsAction", "CompatChangeAll", "InsertCursorAtEndOfLineSelected", "InsertCursorAtTopOfLineSelected", "init_lifecycle", "init_editorExtensions", "init_editorContextKeys", "init_languages", "init_cancellation", "init_errors", "init_types", "init_uri", "init_position", "init_languages", "init_languageFeatures", "init_resolverService", "init_commands", "init_contextkey", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "Context", "RawContextKey", "provideSignatureHelp", "registry", "model", "position", "context", "token", "supports", "support", "err", "onUnexpectedExternalError", "CommandsRegistry", "accessor", "args", "uri", "triggerCharacter", "assertType", "URI", "Position", "languageFeaturesService", "ILanguageFeaturesService", "ref", "ITextModelService", "SignatureHelpTriggerKind", "CancellationToken", "init_nls", "init_contextkey", "init_instantiation", "init_dom", "init_aria", "init_codicons", "init_event", "init_lifecycle", "init_strings", "init_types", "init_language", "init_languageFeatures", "init_async", "init_errors", "init_event", "init_lifecycle", "init_characterClassifier", "init_languages", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "ParameterHintState", "Pending", "request", "previouslyActiveHints", "Active", "hints", "ParameterHintsModel", "Disposable", "editor", "providers", "delay", "Emitter", "MutableDisposable", "CharacterSet", "Delayer", "_", "text", "silent", "context", "model", "triggerId", "onUnexpectedError", "length", "activeSignature", "last", "cycle", "first", "isRetrigger", "activeSignatureHelp", "mergeTriggerContexts", "triggerContext", "position", "createCancelablePromise", "token", "provideSignatureHelp", "error", "support", "ch", "lastCharIndex", "triggerCharCode", "SignatureHelpTriggerKind", "previous", "current", "init_nls", "init_contextkey", "init_opener", "init_colorRegistry", "init_theme", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "$", "parameterHintsNextIcon", "registerIcon", "Codicon", "localize", "parameterHintsPreviousIcon", "ParameterHintsWidget", "Disposable", "editor", "contextKeyService", "openerService", "languageService", "languageFeaturesService", "DisposableStore", "MarkdownRenderer", "ParameterHintsModel", "Context", "newParameterHints", "element", "wrapper", "append", "controls", "previous", "ThemeIcon", "overloads", "next", "addDisposableListener", "e", "EventHelper", "body", "scrollbar", "DomScrollableElement", "signature", "docs", "updateFont", "fontInfo", "Event", "_a", "hints", "multiple", "code", "hasParameters", "activeParameterIndex", "label", "activeParameter", "documentation", "renderedContents", "hasDocs", "labelToAnnounce", "param", "alert", "markdown", "assertIsDefined", "parent", "start", "end", "beforeSpan", "paramSpan", "afterSpan", "paramIdx", "regex", "escapeRegExpCharacters", "idx", "context", "maxHeight", "IContextKeyService", "IOpenerService", "ILanguageService", "ILanguageFeaturesService", "editorHoverWidgetHighlightForeground", "registerColor", "listHighlightForeground", "localize", "registerThemingParticipant", "theme", "collector", "border", "editorHoverBorder", "borderWidth", "isHighContrast", "background", "editorHoverBackground", "link", "textLinkForeground", "linkHover", "textLinkActiveForeground", "foreground", "editorHoverForeground", "codeBackground", "textCodeBlockBackground", "parameterHighlightColor", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "ParameterHintsController", "Disposable", "editor", "instantiationService", "ParameterHintsWidget", "context", "IInstantiationService", "TriggerParameterHintsAction", "EditorAction", "localize", "EditorContextKeys", "accessor", "controller", "SignatureHelpTriggerKind", "registerEditorContribution", "registerEditorAction", "weight", "ParameterHintsCommand", "EditorCommand", "registerEditorCommand", "Context", "x", "ContextKeyExpr", "init_aria", "init_async", "init_cancellation", "init_errors", "init_lifecycle", "init_types", "init_uri", "init_editorState", "init_editorExtensions", "init_codeEditorService", "init_position", "init_range", "init_editorContextKeys", "init_textResourceConfiguration", "init_nls", "init_configurationRegistry", "init_contextkey", "init_instantiation", "init_log", "init_progress", "init_platform", "init_lifecycle", "init_position", "init_nls", "init_contextkey", "init_keybinding", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "CONTEXT_RENAME_INPUT_VISIBLE", "RawContextKey", "localize", "RenameInputField", "_editor", "_acceptKeybindings", "_themeService", "_keybindingService", "contextKeyService", "DisposableStore", "e", "updateLabel", "_a", "_b", "accept", "preview", "theme", "_c", "_d", "widgetShadowColor", "widgetShadow", "editorWidgetBackground", "inputForeground", "inputBackground", "border", "inputBorder", "fontInfo", "position", "wantsPreview", "focusEditor", "where", "value", "selectionStart", "selectionEnd", "supportPreview", "token", "Position", "disposeOnDone", "resolve", "IThemeService", "IKeybindingService", "IContextKeyService", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "RenameSkeleton", "model", "position", "registry", "token", "rejects", "provider", "res", "word", "Range", "newName", "localize", "rename", "skeleton", "loc", "CancellationToken", "RenameController", "editor", "_instaService", "_notificationService", "_bulkEditService", "_progressService", "_logService", "_configService", "_languageFeaturesService", "DisposableStore", "CancellationTokenSource", "IdleValue", "RenameInputField", "_a", "_b", "EditorStateCancellationTokenSource", "resolveLocationOperation", "MessageController", "selection", "selectionStart", "selectionEnd", "supportPreview", "inputFieldResult", "renameOperation", "raceCancellation", "renameResult", "ResourceEdit", "alert", "err", "wantsPreview", "IInstantiationService", "INotificationService", "IBulkEditService", "IEditorProgressService", "ILogService", "ITextResourceConfigurationService", "ILanguageFeaturesService", "RenameAction", "EditorAction", "ContextKeyExpr", "EditorContextKeys", "accessor", "args", "editorService", "ICodeEditorService", "uri", "pos", "URI", "Position", "onUnexpectedError", "controller", "registerEditorContribution", "registerEditorAction", "RenameCommand", "EditorCommand", "registerEditorCommand", "CONTEXT_RENAME_INPUT_VISIBLE", "x", "registerModelAndPositionCommand", "assertType", "renameProvider", "Registry", "Extensions", "import_stickyScroll", "init_arrays", "init_cancellation", "init_errors", "init_editorExtensions", "init_position", "init_range", "init_selection", "init_editorContextKeys", "init_strings", "init_range", "WordSelectionRangeProvider", "model", "positions", "result", "position", "bucket", "pos", "obj", "word", "startColumn", "offset", "start", "end", "lastCh", "ch", "isLowerAsciiLetter", "isUpperAsciiLetter", "Range", "init_nls", "init_actions", "init_commands", "init_languageFeatures", "init_resolverService", "init_types", "init_uri", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "SelectionRanges", "index", "ranges", "fwd", "res", "SmartSelectController", "_editor", "_languageFeaturesService", "editor", "_a", "forward", "selections", "model", "provideSelectionRanges", "s", "CancellationToken", "isNonEmptyArray", "equals", "b", "range", "state", "newSelections", "Selection", "ILanguageFeaturesService", "AbstractSmartSelect", "EditorAction", "opts", "_accessor", "controller", "GrowSelectionAction", "localize", "EditorContextKeys", "MenuId", "CommandsRegistry", "ShrinkSelectionAction", "registerEditorContribution", "registerEditorAction", "registry", "positions", "options", "token", "providers", "WordSelectionRangeProvider", "BracketSelectionRangeProvider", "work", "allRawRanges", "provider", "allProviderRanges", "oneProviderRanges", "Range", "onUnexpectedExternalError", "oneRawRanges", "a", "Position", "oneRanges", "last", "oneRangesWithTrivia", "prev", "cur", "rangeNoWhitespace", "rangeFull", "accessor", "args", "resource", "assertType", "URI", "reference", "ITextModelService", "init_cancellation", "init_iterator", "init_lifecycle", "init_editorExtensions", "init_codeEditorService", "init_range", "init_languageFeatures", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "SuggestInlineCompletion", "range", "insertText", "filterText", "additionalTextEdits", "command", "completion", "InlineCompletionResults", "RefCountedDisposable", "model", "line", "word", "completionModel", "completions", "_suggestMemoryService", "_a", "items", "selectedIndex", "first", "Iterable", "second", "resolveCount", "item", "FuzzyScore", "Range", "CompletionItemInsertTextRule", "CancellationToken", "ISuggestMemoryService", "SuggestInlineCompletions", "_getEditorOption", "_languageFeatureService", "_clipboardService", "position", "context", "token", "config", "QuickSuggestionsOptions", "lineTokens", "tokenType", "wordInfo", "triggerCharacterInfo", "leadingLineContents", "newLineContext", "LineContext", "provideSuggestionItems", "CompletionOptions", "clipboardText", "CompletionModel", "WordDistance", "_completions", "ch", "providers", "provider", "ILanguageFeaturesService", "IClipboardService", "EditorContribution", "_editor", "languageFeatureService", "editorService", "instaService", "provider", "SuggestInlineCompletions", "id", "model", "_a", "editor", "__decorate", "__param", "ILanguageFeaturesService", "ICodeEditorService", "IInstantiationService", "registerEditorContribution", "init_stopwatch", "init_editorExtensions", "init_nls", "ForceRetokenizeAction", "EditorAction", "localize", "accessor", "editor", "model", "sw", "StopWatch", "registerEditorAction", "init_toggleTabFocusMode", "init_async", "init_codicons", "init_lifecycle", "init_platform", "init_strings", "init_editorExtensions", "init_textModel", "init_editorWorker", "init_language", "init_dom", "init_actions", "init_lifecycle", "init_instantiation", "init_dom", "init_keyboardEvent", "init_touch", "init_event", "init_lifecycle", "init_opener", "init_colorRegistry", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "Link", "Disposable", "container", "_link", "options", "openerService", "_a", "append", "$", "onClickEmitter", "DomEmitter", "onKeyPress", "onEnterPress", "Event", "e", "StandardKeyboardEvent", "onTap", "EventType", "Gesture", "onOpen", "EventHelper", "enabled", "IOpenerService", "registerThemingParticipant", "theme", "collector", "textLinkForegroundColor", "textLinkForeground", "textLinkActiveForegroundColor", "textLinkActiveForeground", "init_themeService", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "BANNER_ELEMENT_HEIGHT", "BannerController", "Disposable", "_editor", "instantiationService", "Banner", "item", "_a", "IInstantiationService", "Banner", "Disposable", "instantiationService", "MarkdownRenderer", "$", "item", "message", "element", "clearNode", "ariaLabel", "iconContainer", "append", "ThemeIcon", "messageContainer", "action", "Link", "actionBarContainer", "ActionBar", "Action", "widgetClose", "__decorate", "__param", "IInstantiationService", "init_nls", "init_configuration", "init_instantiation", "init_opener", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "warningIcon", "registerIcon", "Codicon", "localize", "UnicodeHighlighter", "Disposable", "_editor", "_editorWorkerService", "_workspaceTrustService", "instantiationService", "state", "max", "data", "DisableHighlightingOfNonBasicAsciiCharactersAction", "DisableHighlightingOfAmbiguousCharactersAction", "DisableHighlightingOfInvisibleCharactersAction", "BannerController", "options", "resolveOptions", "option", "highlightOptions", "locale", "language", "DocumentUnicodeHighlighter", "ViewportUnicodeHighlighter", "decoration", "IEditorWorkerService", "IWorkspaceTrustManagementService", "IInstantiationService", "resolveOptions", "trusted", "options", "inUntrustedWorkspace", "DocumentUnicodeHighlighter", "Disposable", "_editor", "_options", "_updateState", "_editorWorkerService", "RunOnceScheduler", "modelVersionId", "info", "decorations", "range", "Decorations", "decoration", "model", "isModelDecorationVisible", "text", "computeReason", "isModelDecorationInComment", "isModelDecorationInString", "__decorate", "__param", "IEditorWorkerService", "ViewportUnicodeHighlighter", "ranges", "totalResult", "result", "UnicodeTextModelHighlighter", "r", "UnicodeHighlighterHoverParticipant", "_languageService", "_openerService", "anchor", "lineDecorations", "unicodeHighlighter", "UnicodeHighlighter", "index", "d", "highlightInfo", "codePoint", "codePointStr", "formatCodePointMarkdown", "reason", "localize", "adjustSettingsArgs", "adjustSettings", "uri", "ShowExcludeOptions", "markdown", "MarkdownString", "MarkdownHover", "context", "hoverParts", "renderMarkdownHovers", "ILanguageService", "IOpenerService", "codePointToHex", "codePoint", "formatCodePointMarkdown", "value", "InvisibleCharacters", "renderCodePointAsInlineCode", "computeReason", "char", "options", "UnicodeTextModelHighlighter", "Decorations", "hideInComments", "hideInStrings", "key", "ModelDecorationOptions", "DisableHighlightingInCommentsAction", "EditorAction", "DisableHighlightingOfAmbiguousCharactersAction", "localize", "accessor", "editor", "args", "__awaiter", "configurationService", "IConfigurationService", "unicodeHighlightConfigKeys", "DisableHighlightingInStringsAction", "DisableHighlightingOfInvisibleCharactersAction", "DisableHighlightingOfNonBasicAsciiCharactersAction", "ShowExcludeOptions", "reason", "inString", "inComment", "quickPickService", "IQuickInputService", "getExcludeCharFromBeingHighlightedLabel", "locale", "excludeLocaleFromBeingHighlighted", "excludeCharFromBeingHighlighted", "action", "expectNever", "result", "charCodes", "existingValue", "charCode", "locales", "_a", "registerEditorAction", "registerEditorContribution", "UnicodeHighlighter", "HoverParticipantRegistry", "UnicodeHighlighterHoverParticipant", "init_lifecycle", "init_resources", "init_editorExtensions", "init_codeEditorService", "init_nls", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "ignoreUnusualLineTerminators", "writeIgnoreState", "codeEditorService", "model", "state", "readIgnoreState", "UnusualLineTerminatorsDetector", "Disposable", "_editor", "_dialogService", "_codeEditorService", "localize", "basename", "IDialogService", "ICodeEditorService", "registerEditorContribution", "UnusualLineTerminatorsDetector", "import_viewportSemanticTokens", "init_aria", "init_arrays", "init_async", "init_cancellation", "init_errors", "init_lifecycle", "init_editorExtensions", "init_range", "init_editorContextKeys", "init_model", "init_textModel", "init_languages", "init_nls", "init_contextkey", "init_colorRegistry", "init_themeService", "init_languageFeatures", "init_theme", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "editorWordHighlight", "registerColor", "localize", "editorWordHighlightStrong", "editorWordHighlightBorder", "activeContrastBorder", "editorWordHighlightStrongBorder", "overviewRulerWordHighlightForeground", "overviewRulerWordHighlightStrongForeground", "ctxHasWordHighlights", "RawContextKey", "getOccurrencesAtPosition", "registry", "model", "position", "token", "orderedByScore", "first", "provider", "onUnexpectedExternalError", "isNonEmptyArray", "OccurenceAtPositionRequest", "_model", "_selection", "_wordSeparators", "createCancelablePromise", "selection", "word", "Range", "decorations", "lineNumber", "startColumn", "endColumn", "currentWordRange", "requestIsValid", "len", "range", "SemanticOccurenceAtPositionRequest", "wordSeparators", "providers", "value", "TextualOccurenceAtPositionRequest", "timeout", "m", "DocumentHighlightKind", "currentSelectionIsEmpty", "computeOccurencesAtPosition", "registerModelAndPositionCommand", "accessor", "languageFeaturesService", "ILanguageFeaturesService", "CancellationToken", "WordHighlighter", "editor", "contextKeyService", "DisposableStore", "e", "newValue", "highlights", "newIndex", "dest", "lineContent", "alert", "editorSelection", "workerRequestIsValid", "myRequestId", "data", "onUnexpectedError", "currentTime", "minimumRenderTime", "info", "kind", "ModelDecorationOptions", "themeColorFromId", "OverviewRulerLane", "minimapSelectionOccurrenceHighlight", "MinimapPosition", "overviewRulerSelectionHighlightForeground", "WordHighlighterContribution", "Disposable", "createWordHighlighterIfPossible", "state", "IContextKeyService", "WordHighlightNavigationAction", "EditorAction", "next", "opts", "controller", "NextWordHighlightAction", "EditorContextKeys", "PrevWordHighlightAction", "TriggerWordHighlightAction", "args", "registerEditorContribution", "registerEditorAction", "registerThemingParticipant", "theme", "collector", "selectionHighlight", "editorSelectionHighlight", "wordHighlight", "wordHighlightStrong", "selectionHighlightBorder", "editorSelectionHighlightBorder", "isHighContrast", "wordHighlightBorder", "wordHighlightStrongBorder", "init_editorExtensions", "init_wordCharacterClassifier", "init_position", "init_range", "init_selection", "init_editorContextKeys", "init_languageConfigurationRegistry", "init_nls", "init_contextkey", "MoveWordCommand", "EditorCommand", "opts", "accessor", "editor", "args", "wordSeparators", "getMapForWordSeparators", "model", "result", "sel", "inPosition", "Position", "outPosition", "r", "CursorState", "pos", "from", "to", "inSelectionMode", "Selection", "WordLeftCommand", "position", "wordNavigationType", "WordOperations", "WordRightCommand", "CursorWordStartLeft", "CursorWordEndLeft", "CursorWordLeft", "_a", "ContextKeyExpr", "EditorContextKeys", "CONTEXT_ACCESSIBILITY_MODE_ENABLED", "IsWindowsContext", "CursorWordStartLeftSelect", "CursorWordEndLeftSelect", "CursorWordLeftSelect", "CursorWordAccessibilityLeft", "_", "EditorOptions", "CursorWordAccessibilityLeftSelect", "CursorWordStartRight", "CursorWordEndRight", "CursorWordRight", "CursorWordStartRightSelect", "CursorWordEndRightSelect", "CursorWordRightSelect", "CursorWordAccessibilityRight", "CursorWordAccessibilityRightSelect", "DeleteWordCommand", "languageConfigurationService", "ILanguageConfigurationService", "selections", "autoClosingBrackets", "autoClosingQuotes", "autoClosingPairs", "viewModel", "commands", "deleteRange", "ReplaceCommand", "DeleteWordLeftCommand", "ctx", "Range", "DeleteWordRightCommand", "lineCount", "maxColumn", "DeleteWordStartLeft", "DeleteWordEndLeft", "DeleteWordLeft", "DeleteWordStartRight", "DeleteWordEndRight", "DeleteWordRight", "DeleteInsideWord", "EditorAction", "localize", "registerEditorCommand", "registerEditorAction", "init_editorExtensions", "init_range", "init_editorContextKeys", "init_commands", "DeleteWordPartLeft", "DeleteWordCommand", "EditorContextKeys", "ctx", "wordNavigationType", "r", "WordPartOperations", "Range", "DeleteWordPartRight", "lineCount", "maxColumn", "WordPartLeftCommand", "MoveWordCommand", "wordSeparators", "model", "position", "CursorWordPartLeft", "CommandsRegistry", "CursorWordPartLeftSelect", "WordPartRightCommand", "CursorWordPartRight", "CursorWordPartRightSelect", "registerEditorCommand", "init_lifecycle", "init_editorExtensions", "init_nls", "ReadOnlyMessageController", "Disposable", "editor", "messageController", "MessageController", "localize", "registerEditorContribution", "init_standaloneStrings", "import_accessibilityHelp", "init_dom", "init_lifecycle", "init_editorExtensions", "init_platform", "IPadShowKeyboard", "Disposable", "editor", "isIOS", "shouldHaveWidget", "ShowKeyboardWidget", "addDisposableListener", "e", "registerEditorContribution", "import_inspectTokens", "init_platform", "init_standaloneStrings", "init_nls", "init_platform", "init_lifecycle", "init_keybinding", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "HelpQuickAccessProvider", "quickInputService", "keybindingService", "Registry", "Extensions", "picker", "disposables", "DisposableStore", "item", "value", "providerDescriptor", "providers", "provider", "providerA", "providerB", "helpEntry", "prefix", "label", "localize", "IQuickInputService", "IKeybindingService", "Registry", "Extensions", "HelpQuickAccessProvider", "QuickHelpNLS", "init_lifecycle", "init_editorBrowser", "init_functional", "init_lifecycle", "init_types", "init_editorBrowser", "init_model", "init_editorColorRegistry", "init_themeService", "AbstractEditorNavigationQuickAccessProvider", "options", "picker", "token", "_a", "disposables", "DisposableStore", "pickerDisposable", "MutableDisposable", "editor", "context", "codeEditor", "getCodeEditor", "lastKnownEditorViewState", "withNullAsUndefined", "once", "toDisposable", "isDiffEditor", "range", "changeAccessor", "deleteDecorations", "newDecorations", "themeColorFromId", "overviewRulerRangeHighlight", "OverviewRulerLane", "rangeHighlightId", "overviewRulerDecorationId", "rangeHighlightDecorationId", "init_nls", "AbstractGotoLineQuickAccessProvider", "AbstractEditorNavigationQuickAccessProvider", "picker", "label", "localize", "Disposable", "context", "token", "editor", "disposables", "DisposableStore", "event", "item", "updatePickerAndEditor", "position", "range", "codeEditor", "getCodeEditor", "toDisposable", "lineNumber", "column", "value", "numbers", "part", "endLine", "lineCount", "model", "positionCandidate", "_a", "_b", "init_platform", "init_codeEditorService", "init_types", "init_standaloneStrings", "init_event", "init_editorExtensions", "init_editorContextKeys", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "StandaloneGotoLineQuickAccessProvider", "AbstractGotoLineQuickAccessProvider", "editorService", "Event", "withNullAsUndefined", "ICodeEditorService", "GotoLineAction", "EditorAction", "GoToLineNLS", "EditorContextKeys", "accessor", "IQuickInputService", "StandaloneGotoLineQuickAccessProvider", "registerEditorAction", "Registry", "Extensions", "init_async", "init_cancellation", "init_codicons", "init_path", "init_platform", "init_strings", "NO_SCORE2", "scoreFuzzy2", "target", "query", "patternStart", "wordStart", "preparedQuery", "doScoreFuzzy2Multiple", "doScoreFuzzy2Single", "totalScore", "totalMatches", "queryPiece", "score", "matches", "normalizeMatches", "fuzzyScore", "createMatches", "NO_ITEM_SCORE", "sortedMatches", "matchA", "matchB", "normalizedMatches", "currentMatch", "match", "matchOverlaps", "queryExpectsExactMatch", "MULTIPLE_QUERY_VALUES_SEPARATOR", "prepareQuery", "original", "originalLowercase", "pathNormalized", "normalized", "normalizedLowercase", "normalizeQuery", "containsPathSeparator", "sep", "expectExactMatch", "values", "originalSplit", "originalPiece", "expectExactMatchPiece", "pathNormalizedPiece", "normalizedPiece", "normalizedLowercasePiece", "isWindows", "stripWildcards", "pieceToQuery", "arg1", "piece", "init_lifecycle", "init_strings", "init_range", "init_languages", "init_outlineModel", "init_nls", "init_languageFeatures", "init_arrays", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "AbstractGotoSymbolQuickAccessProvider", "AbstractEditorNavigationQuickAccessProvider", "_languageFeaturesService", "_outlineModelService", "options", "picker", "localize", "Disposable", "context", "token", "editor", "model", "disposables", "DisposableStore", "label", "symbolProviderRegistryPromise", "DeferredPromise", "symbolProviderListener", "toDisposable", "_a", "event", "item", "symbolsPromise", "picksCts", "updatePickerItems", "positionToEnclose", "CancellationTokenSource", "query", "prepareQuery", "items", "candidate", "findLast", "Range", "ignoreFirstActiveEvent", "symbols", "filterBySymbolKind", "filterPos", "symbolQuery", "containerQuery", "pieceToQuery", "filteredSymbolPicks", "index", "symbol", "symbolLabel", "trim", "symbolLabelWithIcon", "SymbolKinds", "symbolLabelIconOffset", "containerLabel", "symbolScore", "symbolMatches", "containerScore", "containerMatches", "skipContainerQuery", "scoreFuzzy2", "deprecated", "_b", "openSideBySideDirection", "Codicon", "sortedFilteredSymbolPicks", "symbolA", "symbolB", "symbolPicks", "updateLastSeparatorLabel", "lastSeparator", "lastSymbolKind", "lastSymbolKindCounter", "format", "NLS_SYMBOL_KIND_CACHE", "FALLBACK_NLS_SYMBOL_KIND", "symbolPick", "kindA", "kindB", "document", "ILanguageFeaturesService", "IOutlineModelService", "FALLBACK_NLS_SYMBOL_KIND", "localize", "NLS_SYMBOL_KIND_CACHE", "init_platform", "init_codeEditorService", "init_types", "init_standaloneStrings", "init_event", "init_editorExtensions", "init_editorContextKeys", "init_outlineModel", "init_languageFeatures", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "StandaloneGotoSymbolQuickAccessProvider", "AbstractGotoSymbolQuickAccessProvider", "editorService", "languageFeaturesService", "outlineModelService", "Event", "withNullAsUndefined", "ICodeEditorService", "ILanguageFeaturesService", "IOutlineModelService", "GotoSymbolAction", "EditorAction", "QuickOutlineNLS", "EditorContextKeys", "accessor", "IQuickInputService", "AbstractGotoSymbolQuickAccessProvider", "registerEditorAction", "Registry", "Extensions", "StandaloneGotoSymbolQuickAccessProvider", "init_platform", "init_standaloneStrings", "init_codeEditorService", "init_arrays", "init_types", "init_nls", "exceptionToErrorMessage", "exception", "verbose", "localize", "detectSystemErrorMessage", "stackToString", "stack", "toErrorMessage", "error", "errors", "coalesce", "msg", "isString", "detail", "init_errors", "init_lifecycle", "init_map", "init_types", "init_nls", "init_commands", "init_configuration", "init_instantiation", "init_keybinding", "init_async", "init_cancellation", "init_lifecycle", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "TriggerAction", "isPicksWithActive", "obj", "candidate", "isFastAndSlowPicks", "PickerQuickAccessProvider", "Disposable", "prefix", "options", "picker", "token", "_a", "disposables", "DisposableStore", "picksCts", "picksDisposable", "MutableDisposable", "updatePickerItems", "picksDisposables", "CancellationTokenSource", "picksToken", "picksFilter", "providedPicks", "applyPicks", "picks", "skipEmpty", "items", "activeItem", "fastPicksApplied", "slowPicksApplied", "timeout", "awaitedAdditionalPicks", "activePick", "additionalPicks", "additionalActivePick", "fallbackActivePick", "fallbackActivePickCandidate", "awaitedPicks", "event", "item", "button", "_b", "_c", "buttonIndex", "action", "index", "removed", "activeItems", "keepScrollPositionBefore", "init_telemetry", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "AbstractCommandsQuickAccessProvider", "PickerQuickAccessProvider", "options", "instantiationService", "keybindingService", "commandService", "telemetryService", "dialogService", "CommandsHistory", "filter", "disposables", "token", "allCommandPicks", "filteredCommandPicks", "commandPick", "labelHighlights", "withNullAsUndefined", "aliasHighlights", "mapLabelToCommand", "existingCommandForLabel", "commandPickA", "commandPickB", "commandACounter", "commandBCounter", "commandPicks", "addSeparator", "keybinding", "ariaLabel", "localize", "error", "isCancellationError", "severity_default", "toErrorMessage", "or", "matchesPrefix", "matchesWords", "matchesContiguousSubString", "IInstantiationService", "IKeybindingService", "ICommandService", "ITelemetryService", "IDialogService", "CommandsHistory", "Disposable", "storageService", "configurationService", "raw", "serializedCache", "cache", "LRUCache", "entries", "a", "b", "entry", "commandId", "_a", "value", "key", "_b", "configuredCommandHistoryLength", "__decorate", "__param", "IStorageService", "IConfigurationService", "AbstractEditorCommandsQuickAccessProvider", "AbstractCommandsQuickAccessProvider", "options", "instantiationService", "keybindingService", "commandService", "telemetryService", "dialogService", "activeTextEditorControl", "editorCommandPicks", "editorAction", "stripIcons", "init_types", "init_instantiation", "init_keybinding", "init_commands", "init_telemetry", "init_editorExtensions", "init_editorContextKeys", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "__awaiter", "thisArg", "_arguments", "P", "generator", "adopt", "value", "resolve", "reject", "fulfilled", "step", "e", "rejected", "result", "StandaloneCommandsQuickAccessProvider", "AbstractEditorCommandsQuickAccessProvider", "instantiationService", "codeEditorService", "keybindingService", "commandService", "telemetryService", "dialogService", "withNullAsUndefined", "IInstantiationService", "ICodeEditorService", "IKeybindingService", "ICommandService", "ITelemetryService", "IDialogService", "GotoLineAction", "EditorAction", "QuickCommandNLS", "EditorContextKeys", "accessor", "IQuickInputService", "StandaloneCommandsQuickAccessProvider", "registerEditorAction", "Registry", "Extensions", "init_editorExtensions", "init_codeEditorService", "init_configuration", "init_contextkey", "init_instantiation", "__decorate", "decorators", "target", "key", "desc", "c", "d", "i", "__param", "paramIndex", "decorator", "StandaloneReferencesController", "ReferencesController", "editor", "contextKeyService", "editorService", "notificationService", "instantiationService", "storageService", "configurationService", "IContextKeyService", "ICodeEditorService", "INotificationService", "IInstantiationService", "IStorageService", "IConfigurationService", "registerEditorContribution", "ReferencesController", "StandaloneReferencesController", "init_editorExtensions", "init_standaloneTheme", "init_standaloneStrings", "init_theme", "ToggleHighContrast", "EditorAction", "ToggleHighContrastNLS", "accessor", "editor", "standaloneThemeService", "IStandaloneThemeService", "currentTheme", "isHighContrast", "isDark", "VS_DARK_THEME_NAME", "VS_LIGHT_THEME_NAME", "HC_BLACK_THEME_NAME", "HC_LIGHT_THEME_NAME", "registerEditorAction", "registerMarkerDataProvider", "monaco", "languageSelector", "provider", "listeners", "matchesLanguage", "model", "languageId", "doValidate", "markers", "onModelAdd", "handle", "onModelRemoved", "uriStr", "listener", "disposables", "event", "uri", "createWorkerManager", "monaco", "options", "createData", "interval", "label", "moduleId", "stopWhenIdleFor", "worker", "lastUsedTime", "disposed", "stopWorker", "intervalId", "resources", "newCreateData", "bound01", "n", "max", "isOnePointZero", "isPercent", "isPercentage", "clamp01", "val", "boundAlpha", "a", "convertToPercentage", "pad2", "c", "rgbToRgb", "r", "g", "b", "bound01", "rgbToHsl", "max", "min", "h", "l", "d", "hue2rgb", "p", "q", "hslToRgb", "s", "rgbToHsv", "v", "hsvToRgb", "f", "t", "mod", "rgbToHex", "allow3Char", "hex", "pad2", "rgbaToHex", "a", "allow4Char", "convertDecimalToHex", "convertDecimalToHex", "d", "convertHexToDecimal", "h", "parseIntFromHex", "val", "numberInputToObject", "color", "names", "inputToRGB", "color", "rgb", "a", "s", "v", "l", "ok", "format", "stringInputToObject", "isValidCSSUnit", "rgbToRgb", "convertToPercentage", "hsvToRgb", "hslToRgb", "boundAlpha", "CSS_INTEGER", "CSS_NUMBER", "CSS_UNIT", "PERMISSIVE_MATCH3", "PERMISSIVE_MATCH4", "matchers", "named", "names", "match", "parseIntFromHex", "convertHexToDecimal", "TinyColor", "color", "opts", "_a", "numberInputToObject", "rgb", "inputToRGB", "R", "G", "B", "RsRGB", "GsRGB", "BsRGB", "alpha", "boundAlpha", "s", "hsv", "rgbToHsv", "h", "v", "hsl", "rgbToHsl", "l", "allow3Char", "rgbToHex", "allow4Char", "rgbaToHex", "r", "g", "b", "fmt", "x", "bound01", "rnd", "hex", "_i", "names", "_b", "key", "value", "format", "formatSet", "formattedString", "hasAlpha", "needsAlphaFormat", "amount", "clamp01", "hue", "rgb1", "rgb2", "p", "rgba", "results", "slices", "part", "ret", "res", "modification", "background", "fg", "bg", "n", "result", "increment", "i", "fromRatio", "ratio", "opts", "newColor", "convertToPercentage", "TinyColor", "lsRangeToMonacoRange", "range", "lsColorInformationToMonacoColorInformation", "color", "lsHoverToMonacoHover", "hover", "content", "monacoPositionToLsPosition", "position", "monacoCompletionTriggerKindToLsCompletionTriggerKind", "completionTriggerKind", "lsCompletionItemKindToMonacoCompletionItemKind", "completionItemKind", "monacoCompletionItemKindToLsCompletionItemKind", "monacoCompletionContextToLsCompletionContext", "completionContext", "lsCommandToMonacoCommand", "command", "lsCompletionItemToMonacoCompletionItem", "completionItem", "monacoCompletionItemToLsCompletionItem", "lsCompletionListToMonacoCompletionList", "completionList", "lsDiagnosticSeverityToMonacoModelMarkerSeverity", "severity", "lsDiagnosticRelatedInformationToMonacoRelatedInformation", "relatedInformation", "monaco", "augmentedDiagnosticToMonacoModelMarker", "diagnostic", "colorNames", "names", "editableColorRegex", "stylesheet", "colorValueToHex", "value", "createColorClass", "hex", "className", "selector", "rule", "createColorProvider", "getWorker", "modelMap", "model", "worker", "editableColors", "nonEditableColors", "colors", "lsColor", "monacoColor", "text", "colorInformation", "match", "currentColor", "isNamedColor", "fromRatio", "hexValue", "rgbValue", "hslValue", "prefix", "createHoverProvider", "createCompletionItemProvider", "context", "item", "result", "createMarkerDataProvider", "createTailwindDirective", "name", "tailwindDirective", "layerDirective", "applyDirective", "configDirective", "defaultLanguageSelector", "configureMonacoTailwindcss", "monaco", "tailwindConfig", "languageSelector", "workerManager", "createWorkerManager", "disposables", "createColorProvider", "createCompletionItemProvider", "createHoverProvider", "language", "registerMarkerDataProvider", "createMarkerDataProvider", "disposable", "newTailwindConfig", "css", "contents", "content", "__spreadArray", "to", "from", "pack", "l", "ar", "isNumber$1", "code", "isAlpha$1", "isAlphaNumericWord", "isAlphaWord", "isWhiteSpace$3", "isSpace", "isQuote$2", "Scanner", "str", "start", "end", "match", "ch", "ok", "n", "message", "pos", "ScannerError", "tokenScanner$1", "tokens", "peek$3", "scanner", "next", "slice", "readable$1", "consume$2", "test", "token", "error$1", "err", "abbreviation", "abbr", "options", "result", "statements", "ctx", "node", "stack", "element$2", "group", "isChildOperator", "isSiblingOperator$1", "isClimbOperator", "isGroupStart", "isBracket$2", "repeater", "attr", "elem", "elementName", "isEmpty", "isRepeater", "text", "getText", "shortAttribute", "attributeSet", "isCloseOperator", "isAttributeSetStart", "attributes", "attribute", "isAttributeSetEnd", "isWhiteSpace$2", "type", "isOperator$1", "createLiteral$1", "literal$2", "quoted", "isEquals", "quote", "isQuote$1", "allowBrackets", "brackets", "isCapitalizedLiteral", "isClassNameOperator", "isElementName", "isTextStart", "context", "isOpen", "isSingle", "isLiteral$2", "value", "escaped", "tokenize$1", "source", "getToken$1", "field$2", "repeaterPlaceholder", "repeaterNumber", "repeater$1", "whiteSpace$1", "literal$1$1", "operator$1", "bracket$1", "isAllowedOperator", "isElementName$1", "isAllowedSpace", "isAllowedRepeater", "bracketType", "isOpenBracket$2", "op", "operatorType$1", "count", "implicit", "size", "reverse", "base", "parent", "index", "name", "consumePlaceholder$2", "stream", "operators", "tokenVisitor", "state", "lastIx", "parentIx", "parentRepeater", "stringify$1", "urlRegex", "emailRegex", "convert", "textInserted", "cleanText", "s", "convertGroup", "_a", "varValue", "deepest", "deepestNode", "last$1", "insertText", "insertHref", "convertStatement", "original", "repeat", "items", "i", "isGroup", "convertElement", "target", "children", "stringifyName", "stringifyValue$1", "child", "convertAttribute", "isField$1", "attachRepeater", "implied", "isBoolean", "valueType", "arr", "href", "hrefAttribute", "item", "parseAbbreviation", "tokenize", "isValue", "getToken", "mergeTokens", "shouldConsumeDashAfter", "operator", "short", "field$1", "numberValue", "colorValue", "stringValue", "bracket", "whiteSpace", "literal$1", "consumePlaceholder$1", "isIdentPrefix", "isKeyword", "isLiteral", "createLiteral", "consumeNumber", "rawValue", "finished", "valueStart", "color", "alpha", "isHex", "colorAlpha", "g", "b", "a", "parseColor", "isBracket", "operatorType", "afterNegative", "hasDecimal", "prevPos", "hasFloat", "r", "last", "tokenScanner", "peek$2", "readable", "consume$1", "error", "parser", "property", "consumeProperty", "isSiblingOperator", "important", "valueFragment", "valueMode", "isLiteral$1", "isFunctionStart", "isValueDelimiter", "isWhiteSpace$1", "isImportant", "consumeValue", "isFragmentDelimiter", "inArgument", "args", "consumeArguments", "isOpenBracket$1", "isCloseBracket$1", "isArgumentDelimiter", "isBracket$1", "open", "isOperator", "t1", "t2", "parse$2", "mergeAttributes", "config", "lookup", "attrName", "prev", "mergeValue", "mergeDeclarations", "glue", "append", "t", "dest", "src", "walk", "fn", "ancestors", "callback", "findDeepest", "isNode", "resolveSnippets", "reversed", "resolve", "snippet", "snippetAbbr", "walkResolve", "topNode", "mergeNodes", "resolved", "createOutputStream", "level", "push", "processText", "_push", "pushString", "lines", "splitByLines", "il", "pushNewline", "indent", "baseIndent", "newline", "pushIndent", "pushField", "placeholder", "field", "tagName", "strCase", "attrQuote", "isBooleanAttribute", "selfClose", "isInline", "elementMap", "implicitTag", "resolveImplicitTag", "getParentElement", "contextName", "parentName", "lowercase", "latin", "ru", "sp", "vocabularies", "reLorem", "lorem", "m", "db", "minWordCount", "maxWordCount", "wordCount", "rand", "findRepeater", "paragraph", "sample", "len", "iterations", "choice", "val", "sentence", "words", "capitalize", "word", "insertCommas", "hasComma", "totalCommas", "dict", "startWithCommon", "totalWords", "element", "jsx", "rename", "xsl", "matchesName", "isAllowed", "reElement", "reModifier", "blockCandidates1", "className", "blockCandidates2", "bem", "expandClassNames", "expandShortNotation", "data", "getBEMData", "classNames", "cl", "ix", "uniqueClass", "findBlockName", "updateClass", "path", "prefix", "originalClass", "getBlockName", "arrClassNames", "classValue", "stringifyValue", "parseBEM", "getBEMDataFromContext", "depth", "find", "filter", "walk$1", "visitor", "current", "createWalkState", "caret", "isSnippet", "isInlineElement", "isField", "pushTokens", "out", "largestIndex", "splitByLines$1", "line", "shouldOutputAttribute", "template", "offset", "consumePlaceholder", "peek", "namePos", "afterPos", "isTokenStart", "isToken", "createCommentState", "commentNodeBefore", "shouldComment", "output", "commentNodeAfter", "comment", "attrs", "htmlTagRegex", "html", "format", "shouldFormat", "getIndent", "pushAttribute", "pushSnippet", "innerFormat", "hasNewline", "startsWithBlockTag", "lQuote", "rQuote", "fieldIx", "adjacentInline", "before", "after", "matches", "indentFormat", "element$1", "primary", "secondary", "collectAttributes", "shouldFormat$1", "pushPrimaryAttributes", "pushSecondaryAttributes", "pushValue", "isPrimaryAttribute", "lineLengths", "maxLength", "valueLength", "haml", "slim", "pug", "formatters", "parse", "oldTextValue", "parseOpt", "transform", "stringify", "reProperty", "opt", "createSnippet", "key", "keywords", "parsed", "parseValue", "cssVal", "collectKeywords", "nest", "snippets", "snippetsSort", "cur", "isProperty", "v", "scoreMatch", "str1", "str2", "partialMatch", "str1Len", "str2Len", "minLength", "j", "score", "ch1", "ch2", "found", "acronym", "matchRatio", "delta", "maxScore", "sum", "shortHex", "asHex", "asRGB", "isShortHex", "toShortHex", "toHex", "values", "frac", "num", "digits", "hex", "pad", "css", "isJSON", "toCamelCase", "propertyValue", "outputImportant", "outputToken", "getSingleNumeric", "getQuote", "outputValue", "separator", "prevEnd", "_", "letter", "gradientName", "parse$1", "convertSnippets", "isValueScope", "filteredSnippets", "getSnippetsForScope", "resolveNode", "resolveGradient", "propName", "resolveValueKeywords", "findBestMatch", "resolveAsProperty", "resolveAsSnippet", "resolveNumericValue", "gradientFn", "cssValue", "inlineValue", "getUnmatchedPart", "kw", "resolveKeyword", "defaultValue", "hasField", "wrapWithField", "minScore", "reField", "inputValue", "literal", "tail", "matchedItem", "getScoringPart", "lastPos", "ref", "dep", "aliases", "unitless", "q", "markupSnippets", "stylesheetSnippets", "xslSnippets", "pugSnippets", "variables", "defaultSyntaxes", "defaultOptions", "defaultConfig", "syntaxConfig", "parseSnippets", "k", "resolveConfig", "globals", "syntax", "mergedData", "typeDefaults", "typeOverride", "syntaxDefaults", "syntaxOverride", "backwardScanner", "sol", "peek$1", "previous", "consume", "consumeWhile", "isQuote", "c", "consumeQuoted", "bracePairs", "isHtml", "isWhiteSpace", "consumeIdent", "consumeAttributeWithUnquotedValue", "consumeAttribute", "consumeAttributeWithQuotedValue", "isCloseBracket", "isOpenBracket", "isUnquotedValue", "isIdent", "isAlpha", "isNumber", "specialChars", "defaultOptions$1", "extractAbbreviation$1", "offsetPastAutoClosed", "getStartOffset", "isCloseBrace", "isOpenBrace", "isAbbreviation", "compiledPrefix", "consumePair", "consumeArray", "close", "consumed", "expandAbbreviation$1", "resolvedConfig", "stylesheet", "markup", "cssData", "htmlData", "snippetKeyCache", "markupSnippetKeys", "stylesheetCustomSnippetsKeyCache", "htmlAbbreviationStartRegex", "jsxAbbreviationStartRegex", "cssAbbreviationRegex", "htmlAbbreviationRegex", "commonlyUsedTags", "bemFilterSuffix", "filterDelimitor", "trimFilterSuffix", "commentFilterSuffix", "maxFilters", "doComplete", "monaco", "model", "position", "emmetConfig", "isStyleSheetRes", "isStyleSheet", "registry", "getDefaultSnippets", "extractOptions", "getSyntaxType", "extractedValue", "extractAbbreviation", "abbreviationRange", "currentLineTillPosition", "currentWord", "getCurrentWord", "expandOptions", "getExpandOptions", "expandedText", "expandedAbbr", "completionItems", "createExpandedAbbr", "isAbbreviationValid", "isExpandedTextNoise", "replaceTabStopsWithCursors", "escapeNonTabStopDollar", "addFinalTabStop", "x", "removeTabStops", "stylesheetCustomSnippetsKeys", "makeSnippetSuggestion", "abbrRegex", "tagToFindMoreSuggestionsFor", "newTagMatches", "commonlyUsedTagSuggestions", "abbreviationSuggestions", "snippetKeys", "snippetDetail", "skipFullMatch", "snippetCompletions", "snippetKey", "currentAbbr", "expandedWord", "maxTabStop", "maxTabStopRanges", "foundLastStop", "replaceWithLastStop", "numberStart", "numberEnd", "currentTabStop", "foundPlaceholder", "i_1", "rangeStart", "rangeEnd", "emmetSnippetField", "syntaxType", "emptyUserConfig", "getFilters", "currentLine", "lengthOccupiedByFilter", "rangeToReplace", "hexColorRegex", "_b", "between", "endPrefixIndex", "tag", "dotMatches", "filters", "bemEnabled", "commentEnabled", "combinedOptions", "isValidEmmetToken", "tokens", "index", "syntax", "language", "currentTokenType", "isValidLocationForEmmetAbbreviation", "model", "position", "column", "lineNumber", "_tokenization", "_tokenizationStateStore", "_tokenizationSupport", "state", "tokenizationResult", "valid", "i", "LANGUAGE_MODES", "MAPPED_MODES", "DEFAULT_CONFIG", "registerProvider", "monaco", "languages", "providers", "doComplete", "provider", "emmetHTML", "emmetCSS", "registerDocumentationForFusionObjects", "monaco", "fusionObjects", "languageId", "fusionObjectsWithDoc", "documentation", "name", "regex", "model", "position", "currentLine", "currentCursor", "line", "matches", "match", "matchedTag", "startPosition", "endPosition", "isValidEmmetToken", "tokens", "index", "syntax", "language", "currentTokenType", "isValidLocationForEmmetAbbreviation", "model", "position", "column", "lineNumber", "_tokenization", "_tokenizationStateStore", "_tokenizationSupport", "state", "valid", "i", "registerCompletionForFusionObjects", "monaco", "fusionObjects", "languageId", "fusionObjectsWithSnippet", "snippet", "model", "position", "word", "range", "isValidLocationForEmmetAbbreviation", "label", "documentation", "initializeMonacoFromConfig", "packageConfig", "_workerId", "label", "languages", "afxMappedLanguageId", "language", "conf", "fusionObjectsConfig", "registerDocumentationForFusionObjects", "editor_main_exports", "registerCompletionForFusionObjects", "monacoTailwindCss", "configureMonacoTailwindcss", "emmetHTML", "emmetCSS"]
}
